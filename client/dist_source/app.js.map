{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./client/app/assets/images/icon_small.png","webpack:///./client/app/assets/images/dashboard-example/dashboards_prettify_1.jpg","webpack:///./client/app/assets/images/dashboard-example/dashboards_prettify_2.jpg","webpack:///./client/app/assets/images/dashboard-example/dashboards_prettify_3.jpg","webpack:///./client/app/assets/images/db-logos/csv.png","webpack:///./client/app/assets/images/avatar.svg","webpack:///./client/app/assets/images/copy.png","webpack:///./client/app/components/user_manual/user_help_cn.md","webpack:///./client/app/components/user_manual/user_help_en.md","webpack:///./client/app/components/visualizations/countries.geo.json","webpack:///./client/app/components/visualizations/usa-albers.geo.json","webpack:///./client/app/components/visualizations/japan.prefectures.geo.json","webpack:///./client/app/components/visualizations/china/china.geo.json","webpack:///./client/app/components/visualizations/china/110000.geo.json","webpack:///./client/app/components/visualizations/china/120000.geo.json","webpack:///./client/app/components/visualizations/china/130000.geo.json","webpack:///./client/app/components/visualizations/china/140000.geo.json","webpack:///./client/app/components/visualizations/china/150000.geo.json","webpack:///./client/app/components/visualizations/china/210000.geo.json","webpack:///./client/app/components/visualizations/china/220000.geo.json","webpack:///./client/app/components/visualizations/china/230000.geo.json","webpack:///./client/app/components/visualizations/china/310000.geo.json","webpack:///./client/app/components/visualizations/china/320000.geo.json","webpack:///./client/app/components/visualizations/china/330000.geo.json","webpack:///./client/app/components/visualizations/china/340000.geo.json","webpack:///./client/app/components/visualizations/china/350000.geo.json","webpack:///./client/app/components/visualizations/china/360000.geo.json","webpack:///./client/app/components/visualizations/china/370000.geo.json","webpack:///./client/app/components/visualizations/china/410000.geo.json","webpack:///./client/app/components/visualizations/china/420000.geo.json","webpack:///./client/app/components/visualizations/china/430000.geo.json","webpack:///./client/app/components/visualizations/china/440000.geo.json","webpack:///./client/app/components/visualizations/china/450000.geo.json","webpack:///./client/app/components/visualizations/china/460000.geo.json","webpack:///./client/app/components/visualizations/china/500000.geo.json","webpack:///./client/app/components/visualizations/china/510000.geo.json","webpack:///./client/app/components/visualizations/china/520000.geo.json","webpack:///./client/app/components/visualizations/china/530000.geo.json","webpack:///./client/app/components/visualizations/china/540000.geo.json","webpack:///./client/app/components/visualizations/china/610000.geo.json","webpack:///./client/app/components/visualizations/china/620000.geo.json","webpack:///./client/app/components/visualizations/china/630000.geo.json","webpack:///./client/app/components/visualizations/china/640000.geo.json","webpack:///./client/app/components/visualizations/china/650000.geo.json","webpack:///./client/app/components/visualizations/china/710000.geo.json","webpack:///./client/app/components/visualizations/china/810000.geo.json","webpack:///./client/app/components/visualizations/china/820000.geo.json","webpack:///./node_modules/moment/locale sync en","webpack:///./client/app/assets/images sync \\.(png|jpe","webpack:///./client/app/assets/images/analysis.png","webpack:///./client/app/assets/images/cn/img/bios.png","webpack:///./client/app/assets/images/cn/img/bios1.png","webpack:///./client/app/assets/images/cn/img/bios2.png","webpack:///./client/app/assets/images/cn/img/bios3.png","webpack:///./client/app/assets/images/cn/img/cmd.jpg","webpack:///./client/app/assets/images/cn/img/doc_0.png","webpack:///./client/app/assets/images/cn/img/doc_1.png","webpack:///./client/app/assets/images/cn/img/doc_10.png","webpack:///./client/app/assets/images/cn/img/doc_11.png","webpack:///./client/app/assets/images/cn/img/doc_12.png","webpack:///./client/app/assets/images/cn/img/doc_13.png","webpack:///./client/app/assets/images/cn/img/doc_14.png","webpack:///./client/app/assets/images/cn/img/doc_15.png","webpack:///./client/app/assets/images/cn/img/doc_16.png","webpack:///./client/app/assets/images/cn/img/doc_17.png","webpack:///./client/app/assets/images/cn/img/doc_18.png","webpack:///./client/app/assets/images/cn/img/doc_19.png","webpack:///./client/app/assets/images/cn/img/doc_2.png","webpack:///./client/app/assets/images/cn/img/doc_20.png","webpack:///./client/app/assets/images/cn/img/doc_21.png","webpack:///./client/app/assets/images/cn/img/doc_22.png","webpack:///./client/app/assets/images/cn/img/doc_22_1.png","webpack:///./client/app/assets/images/cn/img/doc_22_2.png","webpack:///./client/app/assets/images/cn/img/doc_22_3.png","webpack:///./client/app/assets/images/cn/img/doc_22_4.png","webpack:///./client/app/assets/images/cn/img/doc_22_5.png","webpack:///./client/app/assets/images/cn/img/doc_22_6.png","webpack:///./client/app/assets/images/cn/img/doc_22_7.png","webpack:///./client/app/assets/images/cn/img/doc_23.png","webpack:///./client/app/assets/images/cn/img/doc_24.png","webpack:///./client/app/assets/images/cn/img/doc_25.png","webpack:///./client/app/assets/images/cn/img/doc_26.png","webpack:///./client/app/assets/images/cn/img/doc_27.png","webpack:///./client/app/assets/images/cn/img/doc_28.png","webpack:///./client/app/assets/images/cn/img/doc_29.png","webpack:///./client/app/assets/images/cn/img/doc_3.png","webpack:///./client/app/assets/images/cn/img/doc_4.png","webpack:///./client/app/assets/images/cn/img/doc_5.png","webpack:///./client/app/assets/images/cn/img/doc_6.png","webpack:///./client/app/assets/images/cn/img/doc_7.png","webpack:///./client/app/assets/images/cn/img/doc_8.png","webpack:///./client/app/assets/images/cn/img/doc_9.png","webpack:///./client/app/assets/images/cn/img/docker_err.jpg","webpack:///./client/app/assets/images/cn/img/download.png","webpack:///./client/app/assets/images/cn/img/ip.png","webpack:///./client/app/assets/images/cn/img/us_key.png","webpack:///./client/app/assets/images/db-logos/Cassandra.png","webpack:///./client/app/assets/images/db-logos/arangodb.png","webpack:///./client/app/assets/images/db-logos/athena.png","webpack:///./client/app/assets/images/db-logos/aws_es.png","webpack:///./client/app/assets/images/db-logos/axibasetsd.png","webpack:///./client/app/assets/images/db-logos/azure_kusto.png","webpack:///./client/app/assets/images/db-logos/bigquery.png","webpack:///./client/app/assets/images/db-logos/bigquery_gce.png","webpack:///./client/app/assets/images/db-logos/clickhouse.png","webpack:///./client/app/assets/images/db-logos/cloudwatch.png","webpack:///./client/app/assets/images/db-logos/cloudwatch_insights.png","webpack:///./client/app/assets/images/db-logos/cockroach.png","webpack:///./client/app/assets/images/db-logos/corporate_memory.png","webpack:///./client/app/assets/images/db-logos/couchbase.png","webpack:///./client/app/assets/images/db-logos/csv1.png","webpack:///./client/app/assets/images/db-logos/databend.png","webpack:///./client/app/assets/images/db-logos/databricks.png","webpack:///./client/app/assets/images/db-logos/db2.png","webpack:///./client/app/assets/images/db-logos/dgraph.png","webpack:///./client/app/assets/images/db-logos/doris.png","webpack:///./client/app/assets/images/db-logos/drill.png","webpack:///./client/app/assets/images/db-logos/druid.png","webpack:///./client/app/assets/images/db-logos/dynamodb_sql.png","webpack:///./client/app/assets/images/db-logos/elasticsearch.png","webpack:///./client/app/assets/images/db-logos/elasticsearch2.png","webpack:///./client/app/assets/images/db-logos/elasticsearch2_OpenDistroSQLElasticSearch.png","webpack:///./client/app/assets/images/db-logos/elasticsearch2_XPackSQLElasticSearch.png","webpack:///./client/app/assets/images/db-logos/exasol.png","webpack:///./client/app/assets/images/db-logos/firebolt.png","webpack:///./client/app/assets/images/db-logos/google_analytics.png","webpack:///./client/app/assets/images/db-logos/google_spreadsheets.png","webpack:///./client/app/assets/images/db-logos/graphite.png","webpack:///./client/app/assets/images/db-logos/hive.png","webpack:///./client/app/assets/images/db-logos/hive_http.png","webpack:///./client/app/assets/images/db-logos/impala.png","webpack:///./client/app/assets/images/db-logos/influxdb.png","webpack:///./client/app/assets/images/db-logos/jirajql.png","webpack:///./client/app/assets/images/db-logos/json.png","webpack:///./client/app/assets/images/db-logos/kibana.png","webpack:///./client/app/assets/images/db-logos/kylin.png","webpack:///./client/app/assets/images/db-logos/mapd.png","webpack:///./client/app/assets/images/db-logos/memsql.png","webpack:///./client/app/assets/images/db-logos/mongodb.png","webpack:///./client/app/assets/images/db-logos/mssql.png","webpack:///./client/app/assets/images/db-logos/mssql_odbc.png","webpack:///./client/app/assets/images/db-logos/mysql.png","webpack:///./client/app/assets/images/db-logos/nz.png","webpack:///./client/app/assets/images/db-logos/oracle.png","webpack:///./client/app/assets/images/db-logos/pg.png","webpack:///./client/app/assets/images/db-logos/phoenix.png","webpack:///./client/app/assets/images/db-logos/pinot.png","webpack:///./client/app/assets/images/db-logos/presto.png","webpack:///./client/app/assets/images/db-logos/prometheus.png","webpack:///./client/app/assets/images/db-logos/python.png","webpack:///./client/app/assets/images/db-logos/qubole.png","webpack:///./client/app/assets/images/db-logos/rds_mysql.png","webpack:///./client/app/assets/images/db-logos/redshift.png","webpack:///./client/app/assets/images/db-logos/redshift_iam.png","webpack:///./client/app/assets/images/db-logos/results.png","webpack:///./client/app/assets/images/db-logos/rockset.png","webpack:///./client/app/assets/images/db-logos/salesforce.png","webpack:///./client/app/assets/images/db-logos/scylla.png","webpack:///./client/app/assets/images/db-logos/snowflake.png","webpack:///./client/app/assets/images/db-logos/sparql_endpoint.png","webpack:///./client/app/assets/images/db-logos/sqlite.png","webpack:///./client/app/assets/images/db-logos/starrocks.png","webpack:///./client/app/assets/images/db-logos/treasuredata.png","webpack:///./client/app/assets/images/db-logos/trino.png","webpack:///./client/app/assets/images/db-logos/uptycs.png","webpack:///./client/app/assets/images/db-logos/url.png","webpack:///./client/app/assets/images/db-logos/vertica.png","webpack:///./client/app/assets/images/db-logos/yandex_appmetrika.png","webpack:///./client/app/assets/images/db-logos/yandex_metrika.png","webpack:///./client/app/assets/images/destinations/chatwork.png","webpack:///./client/app/assets/images/destinations/email.png","webpack:///./client/app/assets/images/destinations/hangouts_chat.png","webpack:///./client/app/assets/images/destinations/hipchat.png","webpack:///./client/app/assets/images/destinations/mattermost.png","webpack:///./client/app/assets/images/destinations/microsoft_teams_webhook.png","webpack:///./client/app/assets/images/destinations/pagerduty.png","webpack:///./client/app/assets/images/destinations/slack.png","webpack:///./client/app/assets/images/destinations/webhook.png","webpack:///./client/app/assets/images/en/img/bios1.png","webpack:///./client/app/assets/images/en/img/bios2.png","webpack:///./client/app/assets/images/en/img/bios3.png","webpack:///./client/app/assets/images/en/img/cmd.png","webpack:///./client/app/assets/images/en/img/doc_0.png","webpack:///./client/app/assets/images/en/img/doc_1.png","webpack:///./client/app/assets/images/en/img/doc_10.png","webpack:///./client/app/assets/images/en/img/doc_11.png","webpack:///./client/app/assets/images/en/img/doc_12.png","webpack:///./client/app/assets/images/en/img/doc_13.png","webpack:///./client/app/assets/images/en/img/doc_14.png","webpack:///./client/app/assets/images/en/img/doc_15.png","webpack:///./client/app/assets/images/en/img/doc_16.png","webpack:///./client/app/assets/images/en/img/doc_17.png","webpack:///./client/app/assets/images/en/img/doc_18.png","webpack:///./client/app/assets/images/en/img/doc_19.png","webpack:///./client/app/assets/images/en/img/doc_2.png","webpack:///./client/app/assets/images/en/img/doc_20.png","webpack:///./client/app/assets/images/en/img/doc_21.png","webpack:///./client/app/assets/images/en/img/doc_22.png","webpack:///./client/app/assets/images/en/img/doc_22_1.png","webpack:///./client/app/assets/images/en/img/doc_22_2.png","webpack:///./client/app/assets/images/en/img/doc_22_3.png","webpack:///./client/app/assets/images/en/img/doc_22_4.png","webpack:///./client/app/assets/images/en/img/doc_22_5.png","webpack:///./client/app/assets/images/en/img/doc_22_6.png","webpack:///./client/app/assets/images/en/img/doc_22_7.png","webpack:///./client/app/assets/images/en/img/doc_23.png","webpack:///./client/app/assets/images/en/img/doc_24.png","webpack:///./client/app/assets/images/en/img/doc_25.png","webpack:///./client/app/assets/images/en/img/doc_26.png","webpack:///./client/app/assets/images/en/img/doc_27.png","webpack:///./client/app/assets/images/en/img/doc_28.png","webpack:///./client/app/assets/images/en/img/doc_29.png","webpack:///./client/app/assets/images/en/img/doc_3.png","webpack:///./client/app/assets/images/en/img/doc_4.png","webpack:///./client/app/assets/images/en/img/doc_5.png","webpack:///./client/app/assets/images/en/img/doc_6.png","webpack:///./client/app/assets/images/en/img/doc_7.png","webpack:///./client/app/assets/images/en/img/doc_8.png","webpack:///./client/app/assets/images/en/img/doc_9.png","webpack:///./client/app/assets/images/en/img/docker_err.png","webpack:///./client/app/assets/images/en/img/ip.png","webpack:///./client/app/assets/images/en/img/us_key.png","webpack:///./client/app/assets/images/favicon-16x16.png","webpack:///./client/app/assets/images/favicon-32x32.png","webpack:///./client/app/assets/images/favicon-96x96.png","webpack:///./client/app/assets/images/fixtures/map-tile.png","webpack:///./client/app/assets/images/google_logo.svg","webpack:///./client/app/assets/images/gravatar.png","webpack:///./client/app/assets/images/illustrations/alert.svg","webpack:///./client/app/assets/images/illustrations/dashboard.svg","webpack:///./client/app/assets/images/illustrations/no-query-results.svg","webpack:///./client/app/assets/images/illustrations/query.svg","webpack:///./client/app/assets/images/loading.png","webpack:///./client/app/assets/images/loading1.png","webpack:///./client/app/assets/images/logo.png","webpack:///./client/app/assets/images/logo_white.png","webpack:///./client/app/assets/images/next.png","webpack:///./client/app/assets/images/retry.png","webpack:///./client/app/assets/images/send-active.png","webpack:///./client/app/assets/images/send-default.png","webpack:///[\\\\/.]test[\\\\./]).)*\\.jsx","webpack:///./client/app/components/Link.tsx","webpack:///./client/app/components/chart/components/ErrorBoundary.tsx","webpack:///./client/app/services/location.js","webpack:///./client/app/services/restoreSession.jsx","webpack:///./client/app/services/axios.js","webpack:///./client/app/services/auth.js","webpack:///./client/app/services/policy/index.js","webpack:///./client/app/services/policy/DefaultPolicy.js","webpack:///./client/app/services/organizationStatus.js","webpack:///./client/app/components/DynamicComponent.jsx","webpack:///./client/app/components/PlainButton.tsx","webpack:///./client/app/components/Tooltip.tsx","webpack:///./client/app/lib/hooks/useUniqueId.ts","webpack:///./client/app/lib/hooks/useLazyRef.ts","webpack:///./client/app/components/BigMessage.jsx","webpack:///./client/app/services/sanitize.js","webpack:///./client/app/components/chart/components/HtmlContent.tsx","webpack:///./client/app/components/HelpTrigger.jsx","webpack:///./client/app/services/url.js","webpack:///./client/app/components/ApplicationArea/ErrorMessageDetails.jsx","webpack:///./client/app/components/ApplicationArea/ErrorMessage.jsx","webpack:///./client/app/components/ApplicationArea/Router.jsx","webpack:///./client/app/services/settingsMenu.js","webpack:///./client/app/components/ApplicationArea/ApplicationLayout/VersionInfo.jsx","webpack:///./client/app/components/ApplicationArea/ApplicationLayout/DesktopNavbar.jsx","webpack:///./client/app/components/ApplicationArea/ApplicationLayout/MobileNavbar.jsx","webpack:///./client/app/components/ApplicationArea/ApplicationLayout/index.jsx","webpack:///./client/app/components/ApplicationArea/routeWithUserSession.tsx","webpack:///./client/app/components/DialogWrapper.jsx","webpack:///./client/app/components/ApplicationArea/navigateTo.js","webpack:///./client/app/services/recordEvent.js","webpack:///./client/app/config/dashboard-grid-options.js","webpack:///./client/app/services/parameters/Parameter.js","webpack:///./client/app/services/parameters/TextParameter.js","webpack:///./client/app/services/parameters/NumberParameter.js","webpack:///./client/app/services/parameters/EnumParameter.js","webpack:///./client/app/services/query-result.js","webpack:///./client/app/lib/localOptions.js","webpack:///./client/app/services/query.js","webpack:///./client/app/services/parameters/QueryBasedDropdownParameter.js","webpack:///./client/app/services/parameters/DateParameter.js","webpack:///./client/app/services/parameters/DateRangeParameter.js","webpack:///./client/app/services/parameters/index.js","webpack:///./client/app/services/resizeObserver.js","webpack:///./client/app/components/chart/visualizations/prop-types.ts","webpack:///./client/app/components/chart/visualizations/box-plot/d3box.ts","webpack:///./client/app/components/chart/visualizations/box-plot/Renderer.tsx","webpack:///./client/app/components/chart/lib/chooseTextColorForBackground.ts","webpack:///./client/app/components/chart/components/ColorPicker/Swatch.tsx","webpack:///./client/app/components/chart/components/ColorPicker/Input.tsx","webpack:///./client/app/components/chart/components/ColorPicker/utils.ts","webpack:///./client/app/components/chart/components/ColorPicker/Label.tsx","webpack:///./client/app/components/chart/components/ColorPicker/index.tsx","webpack:///./client/app/components/chart/components/TextAlignmentSelect/index.tsx","webpack:///./client/app/components/chart/components/visualizations/editor/withControlLabel.tsx","webpack:///./client/app/components/chart/components/visualizations/editor/createTabbedEditor.tsx","webpack:///./client/app/components/chart/components/visualizations/editor/Section.tsx","webpack:///./client/app/components/chart/components/visualizations/editor/Switch.tsx","webpack:///./client/app/components/chart/components/visualizations/editor/TextArea.tsx","webpack:///./client/app/components/chart/visualizations/visualizationsSettings.tsx","webpack:///./client/app/components/chart/components/visualizations/editor/ContextHelp.tsx","webpack:///./client/app/components/chart/components/visualizations/editor/index.ts","webpack:///./client/app/components/chart/visualizations/box-plot/Editor.tsx","webpack:///./client/app/components/chart/visualizations/box-plot/index.ts","webpack:///./client/app/components/chart/visualizations/chart/getOptions.ts","webpack:///./client/app/components/chart/visualizations/chart/getChartData.ts","webpack:///./client/app/components/chart/visualizations/ColorPalette.ts","webpack:///./client/app/components/chart/visualizations/chart/plotly/utils.ts","webpack:///./client/app/components/chart/visualizations/chart/plotly/preparePieData.ts","webpack:///./client/app/components/chart/lib/value-format.tsx","webpack:///./client/app/components/chart/visualizations/chart/plotly/prepareHeatmapData.ts","webpack:///./client/app/components/chart/visualizations/chart/plotly/prepareDefaultData.ts","webpack:///./client/app/components/chart/visualizations/chart/plotly/updateData.ts","webpack:///./client/app/components/chart/visualizations/chart/plotly/prepareData.ts","webpack:///./client/app/components/chart/visualizations/chart/plotly/prepareLayout.ts","webpack:///./client/app/components/chart/visualizations/chart/plotly/updateAxes.ts","webpack:///./client/app/components/chart/visualizations/chart/plotly/updateChartSize.ts","webpack:///./client/app/components/chart/visualizations/chart/Renderer/initChart.ts","webpack:///./client/app/components/chart/visualizations/chart/Renderer/PlotlyChart.tsx","webpack:///./client/app/components/chart/visualizations/chart/Renderer/CustomPlotlyChart.tsx","webpack:///./client/app/components/chart/visualizations/chart/plotly/customChartUtils.ts","webpack:///./client/app/components/chart/visualizations/chart/plotly/index.ts","webpack:///./client/app/components/chart/visualizations/chart/Renderer/index.tsx","webpack:///./client/app/components/chart/visualizations/chart/Editor/ChartTypeSelect.tsx","webpack:///./client/app/components/chart/visualizations/chart/Editor/ColumnMappingSelect.tsx","webpack:///./client/app/components/chart/visualizations/chart/Editor/GeneralSettings.tsx","webpack:///./client/app/components/chart/visualizations/chart/Editor/AxisSettings.tsx","webpack:///./client/app/components/chart/visualizations/chart/Editor/XAxisSettings.tsx","webpack:///./client/app/components/chart/visualizations/chart/Editor/YAxisSettings.tsx","webpack:///./client/app/components/chart/components/sortable/index.tsx","webpack:///./client/app/components/chart/visualizations/chart/Editor/SeriesSettings.tsx","webpack:///./client/app/components/chart/visualizations/chart/Editor/PieColorsSettings.tsx","webpack:///./client/app/components/chart/visualizations/chart/Editor/HeatmapColorsSettings.tsx","webpack:///./client/app/components/chart/visualizations/chart/Editor/DefaultColorsSettings.tsx","webpack:///./client/app/components/chart/visualizations/chart/Editor/ColorsSettings.tsx","webpack:///./client/app/components/chart/visualizations/chart/Editor/DataLabelsSettings.tsx","webpack:///./client/app/components/chart/visualizations/chart/Editor/CustomChartSettings.tsx","webpack:///./client/app/components/chart/visualizations/chart/Editor/index.tsx","webpack:///./client/app/components/chart/visualizations/chart/index.ts","webpack:///./client/app/components/chart/visualizations/choropleth/ColorPalette.ts","webpack:///./client/app/components/chart/visualizations/choropleth/getOptions.ts","webpack:///./client/app/components/chart/visualizations/choropleth/hooks/useLoadGeoJson.ts","webpack:///./client/app/components/chart/lib/referenceCountingCache.ts","webpack:///./client/app/components/chart/visualizations/choropleth/Renderer/utils.ts","webpack:///./client/app/components/chart/visualizations/choropleth/Renderer/Legend.tsx","webpack:///./client/app/components/chart/visualizations/choropleth/Renderer/initChoropleth.tsx","webpack:///./client/app/components/chart/visualizations/choropleth/Renderer/index.tsx","webpack:///./client/app/components/chart/lib/hooks/useMemoWithDeepCompare.ts","webpack:///./client/app/components/chart/visualizations/choropleth/Editor/utils.ts","webpack:///./client/app/components/chart/visualizations/choropleth/Editor/GeneralSettings.tsx","webpack:///./client/app/components/chart/visualizations/choropleth/Editor/ColorsSettings.tsx","webpack:///./client/app/components/chart/visualizations/choropleth/Editor/FormatSettings.tsx","webpack:///./client/app/components/chart/visualizations/choropleth/Editor/BoundsSettings.tsx","webpack:///./client/app/components/chart/visualizations/choropleth/Editor/index.ts","webpack:///./client/app/components/chart/visualizations/choropleth/index.ts","webpack:///./client/app/components/chart/visualizations/cohort/getOptions.ts","webpack:///./client/app/components/chart/visualizations/cohort/prepareData.ts","webpack:///./client/app/components/chart/visualizations/cohort/Cornelius.tsx","webpack:///./client/app/components/chart/visualizations/cohort/Renderer.tsx","webpack:///./client/app/components/chart/visualizations/cohort/Editor/ColumnsSettings.tsx","webpack:///./client/app/components/chart/visualizations/cohort/Editor/OptionsSettings.tsx","webpack:///./client/app/components/chart/visualizations/cohort/Editor/ColorsSettings.tsx","webpack:///./client/app/components/chart/visualizations/cohort/Editor/AppearanceSettings.tsx","webpack:///./client/app/components/chart/visualizations/cohort/Editor/index.ts","webpack:///./client/app/components/chart/visualizations/cohort/index.ts","webpack:///./client/app/components/chart/visualizations/counter/utils.ts","webpack:///./client/app/components/chart/visualizations/counter/Renderer.tsx","webpack:///./client/app/components/chart/visualizations/counter/Editor/GeneralSettings.tsx","webpack:///./client/app/components/chart/visualizations/counter/Editor/FormatSettings.tsx","webpack:///./client/app/components/chart/visualizations/counter/Editor/index.ts","webpack:///./client/app/components/chart/visualizations/counter/index.ts","webpack:///./client/app/components/chart/visualizations/details/DetailsRenderer.tsx","webpack:///./client/app/components/chart/visualizations/details/index.ts","webpack:///./client/app/components/chart/visualizations/funnel/getOptions.ts","webpack:///./client/app/components/chart/visualizations/funnel/Renderer/prepareData.ts","webpack:///./client/app/components/chart/visualizations/funnel/Renderer/FunnelBar.tsx","webpack:///./client/app/components/chart/visualizations/funnel/Renderer/index.tsx","webpack:///./client/app/components/chart/visualizations/funnel/Editor/GeneralSettings.tsx","webpack:///./client/app/components/chart/visualizations/funnel/Editor/AppearanceSettings.tsx","webpack:///./client/app/components/chart/visualizations/funnel/Editor/index.ts","webpack:///./client/app/components/chart/visualizations/funnel/index.ts","webpack:///./client/app/components/chart/visualizations/map/getOptions.ts","webpack:///./client/app/components/chart/visualizations/map/prepareData.ts","webpack:///./client/app/components/chart/visualizations/map/initMap.ts","webpack:///./client/app/components/chart/visualizations/map/Renderer.tsx","webpack:///./client/app/components/chart/visualizations/map/Editor/GeneralSettings.tsx","webpack:///./client/app/components/chart/visualizations/map/Editor/GroupsSettings.tsx","webpack:///./client/app/components/chart/visualizations/map/Editor/FormatSettings.tsx","webpack:///./client/app/components/chart/visualizations/map/Editor/StyleSettings.tsx","webpack:///./client/app/components/chart/visualizations/map/Editor/index.ts","webpack:///./client/app/components/chart/visualizations/map/index.ts","webpack:///./client/app/components/chart/lib/utils.ts","webpack:///./client/app/components/chart/visualizations/pivot/Renderer.tsx","webpack:///./client/app/components/chart/visualizations/pivot/Editor.tsx","webpack:///./client/app/components/chart/visualizations/pivot/index.ts","webpack:///./client/app/components/chart/visualizations/sankey/d3sankey.ts","webpack:///./client/app/components/chart/visualizations/sankey/initSankey.ts","webpack:///./client/app/components/chart/visualizations/sankey/Renderer.tsx","webpack:///./client/app/components/chart/visualizations/sankey/index.ts","webpack:///./client/app/components/chart/visualizations/sankey/Editor.tsx","webpack:///./client/app/components/chart/visualizations/sunburst/initSunburst.ts","webpack:///./client/app/components/chart/visualizations/sunburst/Renderer.tsx","webpack:///./client/app/components/chart/visualizations/sunburst/index.ts","webpack:///./client/app/components/chart/visualizations/sunburst/Editor.tsx","webpack:///./client/app/components/chart/visualizations/table/getOptions.ts","webpack:///./client/app/components/chart/visualizations/table/columns/text.tsx","webpack:///./client/app/components/chart/visualizations/table/columns/number.tsx","webpack:///./client/app/components/chart/visualizations/table/columns/datetime.tsx","webpack:///./client/app/components/chart/visualizations/table/columns/boolean.tsx","webpack:///./client/app/components/chart/visualizations/table/columns/link.tsx","webpack:///./client/app/components/chart/visualizations/table/columns/image.tsx","webpack:///./client/app/components/chart/components/json-view-interactive/JsonViewInteractive.tsx","webpack:///./client/app/components/chart/visualizations/table/columns/json.tsx","webpack:///./client/app/components/chart/visualizations/table/columns/index.ts","webpack:///./client/app/components/chart/visualizations/table/utils.tsx","webpack:///./client/app/components/chart/visualizations/table/Renderer.tsx","webpack:///./client/app/components/chart/visualizations/table/Editor/ColumnEditor.tsx","webpack:///./client/app/components/chart/visualizations/table/Editor/ColumnsSettings.tsx","webpack:///./client/app/components/chart/visualizations/table/Editor/GridSettings.tsx","webpack:///./client/app/components/chart/visualizations/table/index.ts","webpack:///./client/app/components/chart/visualizations/table/Editor/index.tsx","webpack:///./client/app/components/chart/visualizations/word-cloud/Renderer.tsx","webpack:///./client/app/components/chart/visualizations/word-cloud/Editor.tsx","webpack:///./client/app/components/chart/visualizations/word-cloud/index.ts","webpack:///./client/app/components/chart/visualizations/registeredVisualizations.ts","webpack:///./client/app/services/widget.js","webpack:///./client/app/services/dashboard.js","webpack:///./client/app/components/dashboards/CreateDashboardDialog.jsx","webpack:///./client/app/components/empty-state/EmptyState.jsx","webpack:///./client/app/services/notification.js","webpack:///./client/app/services/organizationSettings.js","webpack:///./client/app/components/BeaconConsent.jsx","webpack:///./client/app/services/routes.ts","webpack:///./client/app/pages/home/components/FavoritesList.jsx","webpack:///./client/app/pages/home/Home.jsx","webpack:///./client/app/components/PageHeader/index.jsx","webpack:///./client/app/components/admin/Layout.jsx","webpack:///./client/app/components/FavoritesControl.jsx","webpack:///./client/app/components/proptypes.js","webpack:///./client/app/components/TimeAgo.jsx","webpack:///./client/app/lib/utils.js","webpack:///./client/app/components/items-list/components/ItemsTable.jsx","webpack:///./client/app/components/admin/RQStatus.jsx","webpack:///./client/app/pages/admin/Jobs.jsx","webpack:///./client/app/components/Paginator.jsx","webpack:///./client/app/components/tags-control/EditTagsDialog.jsx","webpack:///./client/app/components/tags-control/TagsControl.jsx","webpack:///./client/app/components/queries/SchedulePhrase.jsx","webpack:///./client/app/components/items-list/ItemsList.tsx","webpack:///./client/app/components/items-list/classes/Paginator.js","webpack:///./client/app/components/items-list/classes/Sorter.js","webpack:///./client/app/components/items-list/classes/ItemsFetcher.js","webpack:///./client/app/components/items-list/classes/ItemsSource.js","webpack:///./client/app/components/items-list/classes/StateStorage.js","webpack:///./client/app/components/items-list/components/LoadingState.jsx","webpack:///./client/app/pages/admin/OutdatedQueries.jsx","webpack:///./client/app/components/admin/StatusBlock.jsx","webpack:///./client/app/pages/admin/SystemStatus.jsx","webpack:///./client/app/services/alert.js","webpack:///./client/app/pages/alerts/AlertsList.jsx","webpack:///./client/app/pages/alert/components/MenuButton.jsx","webpack:///./client/app/pages/alert/components/Title.jsx","webpack:///./client/app/pages/alert/components/Criteria.jsx","webpack:///./client/app/pages/alert/components/Rearm.jsx","webpack:///./client/app/lib/hooks/useSearchResults.js","webpack:///./client/app/components/QuerySelector.jsx","webpack:///./client/app/pages/alert/components/Query.jsx","webpack:///./client/app/components/SelectItemsDialog.jsx","webpack:///./client/app/services/destination.js","webpack:///./client/app/services/alert-subscription.js","webpack:///./client/app/components/groups/ListItemAddon.jsx","webpack:///./client/app/components/EmailSettingsWarning.jsx","webpack:///./client/app/pages/alert/components/AlertDestinations.jsx","webpack:///./client/app/pages/alert/components/HorizontalFormItem.jsx","webpack:///./client/app/pages/alert/AlertView.jsx","webpack:///./client/app/pages/alert/components/NotificationTemplate.jsx","webpack:///./client/app/pages/alert/AlertEdit.jsx","webpack:///./client/app/pages/alert/AlertNew.jsx","webpack:///./client/app/pages/alert/Alert.jsx","webpack:///./client/app/services/KeyboardShortcuts.js","webpack:///./client/app/components/ParameterApplyButton.jsx","webpack:///./client/app/lib/calculateTextWidth.ts","webpack:///./client/app/components/SelectWithVirtualScroll.tsx","webpack:///./client/app/components/DateInput.jsx","webpack:///./client/app/components/DateTimeInput.jsx","webpack:///./client/app/components/dynamic-parameters/DynamicButton.jsx","webpack:///./client/app/components/dynamic-parameters/DynamicDatePicker.jsx","webpack:///./client/app/components/dynamic-parameters/DateParameter.jsx","webpack:///./client/app/components/DateRangeInput.jsx","webpack:///./client/app/components/DateTimeRangeInput.jsx","webpack:///./client/app/components/dynamic-parameters/DynamicDateRangePicker.jsx","webpack:///./client/app/components/dynamic-parameters/DateRangeParameter.jsx","webpack:///./client/app/components/QueryBasedParameterInput.jsx","webpack:///./client/app/components/ParameterValueInput.jsx","webpack:///./client/app/components/EditParameterSettingsDialog.jsx","webpack:///./client/app/components/Parameters.jsx","webpack:///./client/app/components/Timer.jsx","webpack:///./client/app/components/visualizations/VisualizationName.jsx","webpack:///./client/app/components/QueryLink.jsx","webpack:///./client/app/components/Filters.jsx","webpack:///./client/app/lib/useQueryResultData.js","webpack:///./client/app/lib/hooks/useImmutableCallback.js","webpack:///./client/app/components/visualizations/visualizationComponents.jsx","webpack:///./client/app/components/chart/visualizations/Renderer.tsx","webpack:///./client/app/components/chart/visualizations/Editor.tsx","webpack:///./client/app/components/visualizations/VisualizationRenderer.jsx","webpack:///./client/app/components/dashboards/ExpandedWidgetDialog.jsx","webpack:///./client/app/components/ParameterMappingInput.jsx","webpack:///./client/app/components/dashboards/EditParameterMappingsDialog.jsx","webpack:///./client/app/components/dashboards/dashboard-widget/Widget.jsx","webpack:///./client/app/components/dashboards/dashboard-widget/VisualizationWidget.jsx","webpack:///./client/app/components/dashboards/TextboxDialog.jsx","webpack:///./client/app/components/dashboards/dashboard-widget/TextboxWidget.jsx","webpack:///./client/app/components/dashboards/dashboard-widget/RestrictedWidget.jsx","webpack:///./client/app/components/dashboards/AutoHeightController.js","webpack:///./client/app/components/dashboards/DashboardGrid.jsx","webpack:///./client/app/components/dashboards/AddWidgetDialog.jsx","webpack:///./client/app/components/PreviewCard.jsx","webpack:///./client/app/services/user.js","webpack:///./client/app/components/PermissionsEditorDialog/index.jsx","webpack:///./client/app/components/InputWithCopy.jsx","webpack:///./client/app/pages/dashboards/components/ShareDashboardDialog.jsx","webpack:///./client/app/lib/hooks/useFullscreenHandler.js","webpack:///./client/app/pages/dashboards/hooks/useRefreshRateHandler.js","webpack:///./client/app/pages/dashboards/hooks/useEditModeHandler.js","webpack:///./client/app/pages/dashboards/hooks/useDashboard.js","webpack:///./client/app/components/EditInPlace.jsx","webpack:///./client/app/services/getTags.js","webpack:///./client/app/pages/testdialogue/components/StepModal/StepModal.jsx","webpack:///./client/app/pages/dashboards/components/DashboardHeader.jsx","webpack:///./client/app/pages/dashboards/DashboardPage.jsx","webpack:///./client/app/pages/testdialogue/components/Dialogue/websocket.js","webpack:///./client/app/pages/testdialogue/components/Dialogue/method/useChartCode.js","webpack:///./client/app/pages/testdialogue/components/Dialogue/method/dialogueStorage.js","webpack:///./client/app/pages/testdialogue/components/DialogueTop/index.jsx","webpack:///./client/app/pages/testdialogue/components/Overlay/index.jsx","webpack:///./client/app/pages/testdialogue/components/SelectSource/SecondChoice.jsx","webpack:///./client/app/services/data-source.js","webpack:///./client/app/pages/testdialogue/components/SelectSource/index.jsx","webpack:///./client/app/pages/testdialogue/components/Echarts/Echarts.jsx","webpack:///./client/app/pages/testdialogue/components/loading/index.jsx","webpack:///./client/app/pages/testdialogue/components/LogWorkflow/index.jsx","webpack:///./client/app/pages/testdialogue/context/DialogueContext.js","webpack:///./client/app/pages/testdialogue/components/Copy/Copy.jsx","webpack:///./client/app/pages/testdialogue/components/AutoPilotInfo/AutoPilotInfo.jsx","webpack:///./client/app/pages/testdialogue/components/TypingCard/index.jsx","webpack:///./client/app/pages/testdialogue/components/DialogueContent/index.jsx","webpack:///./client/app/pages/testdialogue/components/MenuMask/index.jsx","webpack:///./client/app/pages/testdialogue/components/Dialogue/const.ts","webpack:///./client/app/pages/testdialogue/components/Dialogue/generateChart.js","webpack:///./client/app/pages/testdialogue/components/Dialogue/index.jsx","webpack:///./client/app/pages/testdialogue/components/Dialogue/method/useSql.js","webpack:///./client/app/pages/testdialogue/components/DialogueListLeft/index.jsx","webpack:///./client/app/pages/testdialogue/components/NoDashboardData/NoDashboardData.jsx","webpack:///./client/app/pages/testdialogue/DialogueList.jsx","webpack:///./client/app/components/items-list/components/EmptyState.jsx","webpack:///./client/app/components/layouts/ContentWithSidebar.jsx","webpack:///./client/app/pages/testdialogue/AutopilotHistory.jsx","webpack:///./client/app/pages/testdialogue/components/AutoPilot/useExportPDF.js","webpack:///./client/app/pages/testdialogue/components/AutoPilot/AutoPilot.jsx","webpack:///./client/app/pages/testdialogue/AutopilotView.jsx","webpack:///./client/app/pages/testdialogue/DashboardsPrettify.jsx","webpack:///./client/app/components/TagsList.tsx","webpack:///./client/app/components/items-list/components/Sidebar.jsx","webpack:///./client/app/components/items-list/hooks/useItemsListExtraActions.js","webpack:///./client/app/components/NoTaggedObjectsFound.jsx","webpack:///./client/app/pages/dashboards/components/DashboardListEmptyState.tsx","webpack:///./client/app/pages/dashboards/DashboardList.jsx","webpack:///./client/app/components/ApplicationArea/routeWithApiKeySession.jsx","webpack:///./client/app/pages/dashboards/PublicDashboardPage.jsx","webpack:///./client/app/components/cards-list/CardsList.tsx","webpack:///./client/app/components/Collapse.jsx","webpack:///./client/app/components/dynamic-form/getFieldLabel.js","webpack:///./client/app/components/AceEditorInput.jsx","webpack:///./client/app/components/dynamic-form/fields/InputField.jsx","webpack:///./client/app/components/dynamic-form/DynamicFormField.jsx","webpack:///./client/app/components/dynamic-form/fields/CheckboxField.jsx","webpack:///./client/app/components/dynamic-form/fields/FileField.jsx","webpack:///./client/app/components/dynamic-form/fields/SelectField.jsx","webpack:///./client/app/components/dynamic-form/fields/NumberField.jsx","webpack:///./client/app/components/dynamic-form/fields/TextAreaField.jsx","webpack:///./client/app/components/dynamic-form/fields/AceEditorField.jsx","webpack:///./client/app/components/dynamic-form/fields/ContentField.jsx","webpack:///./client/app/components/dynamic-form/dynamicFormHelper.js","webpack:///./client/app/components/dynamic-form/DynamicForm.jsx","webpack:///./client/app/components/CreateSourceDialog.jsx","webpack:///./client/app/components/SettingsWrapper.jsx","webpack:///./client/app/pages/data-sources/DataSourcesList.jsx","webpack:///./client/app/pages/data-sources/EditDataSource.jsx","webpack:///./client/app/pages/destinations/DestinationsList.jsx","webpack:///./client/app/pages/destinations/EditDestination.jsx","webpack:///./client/app/components/groups/CreateGroupDialog.jsx","webpack:///./client/app/services/group.js","webpack:///./client/app/components/groups/DeleteGroupButton.jsx","webpack:///./client/app/pages/groups/GroupsList.jsx","webpack:///./client/app/components/groups/GroupName.jsx","webpack:///./client/app/components/groups/DetailsPageSidebar.jsx","webpack:///./client/app/pages/groups/GroupDataSources.jsx","webpack:///./client/app/pages/groups/GroupMembers.jsx","webpack:///./client/app/pages/queries-list/QueriesListEmptyState.jsx","webpack:///./client/app/pages/queries-list/QueriesList.jsx","webpack:///./client/app/components/Resizable/index.jsx","webpack:///./client/app/lib/queryFormat.ts","webpack:///./client/app/pages/queries/hooks/useQueryFlags.js","webpack:///./client/app/pages/queries/hooks/useArchiveQuery.jsx","webpack:///./client/app/pages/queries/hooks/useUpdateQuery.jsx","webpack:///./client/app/pages/queries/hooks/useDuplicateQuery.js","webpack:///./client/app/components/CodeBlock.jsx","webpack:///./client/app/components/queries/ApiKeyDialog/index.jsx","webpack:///./client/app/pages/queries/components/QueryPageHeader.jsx","webpack:///./client/app/pages/queries/hooks/useRenameQuery.js","webpack:///./client/app/pages/queries/hooks/useUpdateQueryTags.js","webpack:///./client/app/pages/queries/hooks/usePublishQuery.js","webpack:///./client/app/pages/queries/hooks/useUnpublishQuery.js","webpack:///./client/app/pages/queries/hooks/useApiKeyDialog.js","webpack:///./client/app/pages/queries/hooks/usePermissionsEditorDialog.js","webpack:///./client/app/pages/queries/components/QueryMetadata.jsx","webpack:///./client/app/pages/queries/components/QueryVisualizationTabs.jsx","webpack:///./client/app/pages/queries/components/QueryExecutionStatus.jsx","webpack:///./client/app/pages/queries/components/QuerySourceAlerts.jsx","webpack:///./client/app/pages/queries/components/wrapQueryPage.jsx","webpack:///./client/app/components/queries/AddToDashboardDialog.jsx","webpack:///./client/app/components/queries/EmbedQueryDialog.jsx","webpack:///./client/app/components/EditVisualizationButton/QueryResultsLink.jsx","webpack:///./client/app/components/EditVisualizationButton/QueryControlDropdown.jsx","webpack:///./client/app/components/EditVisualizationButton/index.jsx","webpack:///./client/app/pages/queries/components/QueryExecutionMetadata.jsx","webpack:///./client/app/pages/queries/hooks/useAddToDashboardDialog.js","webpack:///./client/app/pages/queries/hooks/useEmbedDialog.js","webpack:///./client/app/pages/queries/hooks/useDataSourceSchema.js","webpack:///./client/app/components/queries/SchemaBrowser.jsx","webpack:///./client/app/components/queries/QueryEditor/ace.js","webpack:///./client/app/services/query-snippet.js","webpack:///./client/app/components/queries/QueryEditor/AutocompleteToggle.jsx","webpack:///./client/app/components/queries/QueryEditor/AutoLimitCheckbox.jsx","webpack:///./client/app/components/queries/QueryEditor/QueryEditorControls.jsx","webpack:///./client/app/components/queries/QueryEditor/index.jsx","webpack:///./client/app/lib/accessibility.ts","webpack:///./client/app/services/databricks-data-source.js","webpack:///./client/app/components/queries/editor-components/databricks/useDatabricksSchema.js","webpack:///./client/app/components/queries/editor-components/databricks/DatabricksSchemaBrowser.jsx","webpack:///./client/app/components/queries/editor-components/editorComponents.js","webpack:///./client/app/pages/queries/hooks/useVisualizationTabHandler.js","webpack:///./client/app/pages/queries/hooks/useAutocompleteFlags.js","webpack:///./client/app/pages/queries/hooks/useAutoLimitFlags.js","webpack:///./client/app/components/queries/editor-components/index.js","webpack:///./client/app/services/notifications.js","webpack:///./client/app/pages/queries/hooks/useQueryExecute.js","webpack:///./client/app/pages/queries/hooks/useQueryParameters.js","webpack:///./client/app/components/queries/ScheduleDialog.jsx","webpack:///./client/app/pages/queries/hooks/useEditScheduleDialog.js","webpack:///./client/app/services/visualization.js","webpack:///./client/app/components/visualizations/EditVisualizationDialog.jsx","webpack:///./client/app/pages/queries/hooks/useEditVisualizationDialog.js","webpack:///./client/app/pages/queries/hooks/useDeleteVisualization.js","webpack:///./client/app/pages/queries/hooks/useUpdateQueryDescription.js","webpack:///./client/app/pages/queries/components/QuerySourceTypeIcon.jsx","webpack:///./client/app/pages/queries/components/QuerySourceDropdownItem.jsx","webpack:///./client/app/pages/queries/components/QuerySourceDropdown.jsx","webpack:///./client/app/pages/queries/QuerySource.jsx","webpack:///./client/app/pages/queries/hooks/useQuery.js","webpack:///./client/app/pages/queries/hooks/useQueryDataSources.js","webpack:///./client/app/pages/queries/hooks/useUnsavedChangesAlert.js","webpack:///./client/app/pages/queries/hooks/useAddNewParameterDialog.js","webpack:///./client/app/pages/queries/hooks/useAddVisualizationDialog.js","webpack:///./client/app/pages/queries/components/QueryViewButton.jsx","webpack:///./client/app/pages/queries/QueryView.jsx","webpack:///./client/app/pages/queries/VisualizationEmbed.jsx","webpack:///./client/app/components/query-snippets/QuerySnippetDialog.jsx","webpack:///./client/app/pages/query-snippets/QuerySnippetsList.jsx","webpack:///./client/app/pages/settings/hooks/useOrganizationSettings.js","webpack:///./client/app/pages/settings/components/prop-types.js","webpack:///./client/app/pages/settings/components/GeneralSettings/FormatSettings.jsx","webpack:///./client/app/pages/settings/components/GeneralSettings/PlotlySettings.jsx","webpack:///./client/app/pages/settings/components/GeneralSettings/FeatureFlagsSettings.jsx","webpack:///./client/app/pages/settings/components/GeneralSettings/BeaconConsentSettings.jsx","webpack:///./client/app/pages/settings/components/GeneralSettings/index.jsx","webpack:///./client/app/pages/settings/components/AuthSettings/PasswordLoginSettings.jsx","webpack:///./client/app/pages/settings/components/AuthSettings/GoogleLoginSettings.jsx","webpack:///./client/app/pages/settings/components/AuthSettings/SAMLSettings.jsx","webpack:///./client/app/pages/settings/components/AuthSettings/index.jsx","webpack:///./client/app/pages/settings/OrganizationSettings.jsx","webpack:///./client/app/styles/formStyle.ts","webpack:///./client/app/services/utils.js","webpack:///./client/app/pages/users/components/CreateUserDialog.jsx","webpack:///./client/app/pages/users/UsersList.jsx","webpack:///./client/app/components/UserGroups.jsx","webpack:///./client/app/pages/users/hooks/useUserGroups.js","webpack:///./client/app/pages/users/components/UserInfoForm.jsx","webpack:///./client/app/pages/users/components/ApiKeyForm.jsx","webpack:///./client/app/pages/users/components/PasswordForm/ChangePasswordDialog.jsx","webpack:///./client/app/pages/users/components/PasswordForm/PasswordLinkAlert.jsx","webpack:///./client/app/pages/users/components/PasswordForm/PasswordResetForm.jsx","webpack:///./client/app/pages/users/components/PasswordForm/ResendInvitationForm.jsx","webpack:///./client/app/pages/users/components/PasswordForm/index.jsx","webpack:///./client/app/pages/users/components/ToggleUserForm.jsx","webpack:///./client/app/pages/users/components/EditableUserProfile.jsx","webpack:///./client/app/pages/users/components/ReadOnlyUserProfile.jsx","webpack:///./client/app/pages/users/UserProfile.jsx","webpack:///./client/app/pages/upload/components/excelList.jsx","webpack:///./client/app/pages/upload/ExcelUpload.jsx","webpack:///./client/app/pages/settings/OpenKey.jsx","webpack:///./client/app/config/index.js","webpack:///./client/app/components/ApplicationArea/handleNavigationIntent.js","webpack:///./client/app/config/antd-spinner.jsx","webpack:///./client/app/services/offline-listener.js","webpack:///./client/app/index.js","webpack:///./client/app/components/ApplicationArea/index.jsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","map","webpackContext","req","id","webpackContextResolve","code","keys","webpackEmptyContext","Link","children","props","Component","ButtonLink","WithIcon","icon","alt","className","External","aria-hidden","rel","Button","logger","debug","ErrorBoundaryContext","React","createContext","handleError","reset","ErrorMessage","showIcon","defaultProps","W_L","generic","ErrorBoundary","this","setState","constructor","getDerivedStateFromError","componentDidCatch","isFunction","handleException","errorInfo","render","renderError","state","Provider","history","createBrowserHistory","normalizeLocation","rawLocation","pathname","search","hash","path","mapValues","qs","parse","isNil","trimStart","url","location","listen","handler","unused","action","confirmChange","block","nextLocation","update","newLocation","replace","isObject","omitBy","isUndefined","extend","stringify","setPath","setSearch","setHash","locationChanged","showRestoreSessionPrompt","loginUrl","onSuccess","popup","Modal","warning","content","okText","Fragment","centered","mask","maskClosable","keyboard","onOk","closeModal","closed","width","height","windowLeft","windowTop","windowWidth","windowHeight","popupOptions","screenX","screenY","innerWidth","innerHeight","left","Math","floor","top","menubar","toolbar","resizable","scrollbars","status","open","join","handlePostMessage","close","removeEventListener","addEventListener","focus","restoreSessionPromise","axios","axiosLib","paramsSerializer","params","xsrfCookieName","xsrfHeaderName","interceptors","response","use","createAuthRefreshInterceptor","isAxiosError","includes","statusCodes","parseInt","requestUrl","Auth","getLoginUrl","pauseInstanceWhileRefreshing","config","apiKey","getApiKey","headers","Authorization","currentUser","_isAdmin","canEdit","userId","user_id","user","isAdmin","canCreate","hasPermission","permission","permissions","clientConfig","messages","session","loaded","AuthUrls","Login","updateSession","sessionData","client_config","isAuthenticated","setLoginUrl","login","next","encodeURI","href","logout","loadSession","setApiKey","then","loadConfig","requireSession","opener","postMessage","origin","catch","policy","refresh","canCreateDataSource","isCreateDataSourceEnabled","canCreateDestination","isCreateDestinationEnabled","canCreateDashboard","isCreateDashboardEnabled","canCreateAlert","canCreateUser","isCreateUserEnabled","isCreateQuerySnippetEnabled","getDashboardRefreshIntervals","dashboardRefreshIntervals","isArray","getQueryRefreshIntervals","queryRefreshIntervals","canRun","objectCounters","object_counters","componentsRegistry","Map","activeInstances","Set","registerComponent","component","isString","set","forEach","dynamicComponent","forceUpdate","DynamicComponent","componentDidMount","add","componentWillUnmount","delete","fallback","RealComponent","PropTypes","string","isRequired","node","PlainButton","rest","classNames","Tooltip","title","restProps","liveTitle","role","aria-live","aria-relevant","trigger","useUniqueId","prefix","getInitialValue","lazyRef","uniqueId","useRef","current","BigMessage","messageId","aria-labelledby","cx","propTypes","DOMPurify","setConfig","ADD_ATTR","addHook","getAttribute","toLowerCase","removeAttribute","HtmlContent","memo","dangerouslySetInnerHTML","__html","sanitize","TYPES","HOME","help","VALUE_SOURCE_OPTIONS","guide_list_option","AUTHENTICATION_OPTIONS","guide_authentication","USAGE_DATA_SHARING","help_share_anonymous_data","DS_ATHENA","guide_amazon_athena","DS_BIGQUERY","guide_set_bigquery","DS_URL","guide_set_url_port","DS_MONGODB","guide_set_mongodb","DS_GOOGLE_SPREADSHEETS","guide_set_google_spread","DS_GOOGLE_ANALYTICS","guide_set_google_analytics","DS_AXIBASETSD","guide_set_axibase","DS_RESULTS","guide_set_query_result","ALERT_SETUP","guide_set_alert","MAIL_CONFIG","guide_set_mail","ALERT_NOTIF_TEMPLATE_GUIDE","guide_set_notice","FAVORITES","guide_favorite","MANAGE_PERMISSIONS","guide_query_permissions","NUMBER_FORMAT_SPECS","guide_formatting_number","GETTING_STARTED","guide_menu_start","DASHBOARDS","guide_dashboard","QUERIES","guide_query","ALERTS","guide_alert","DOMAIN","HelpTriggerPropTypes","showTooltip","bool","renderAsLink","HelpTriggerDefaultProps","HelpTrigger","types","allowedDomains","drawerClassName","createRef","visible","loading","currentUrl","richText","iframeLoadingTimeout","iframeRef","some","domain","startsWith","helpTriggerType","async","md","markdown","toHTML","language_mode","usermdcn","usermden","getRichText","shiftKey","ctrlKey","metaKey","preventDefault","loadIframe","getUrl","onPostMessageReceived","targetUrl","tooltip","isAllowedDomain","shouldRenderAsLink","style","marginLeft","onClick","openDrawer","placement","closable","onClose","closeDrawer","destroyOnClose","click_here","open_new_window","onLeave","openPageUrl","oneOf","helpTriggerWithTypes","link","display","body","fragmentProps","pick","fragments","normalize","ErrorMessageDetails","getErrorMessageByStatus","defaultMessage","web_404","web_403","getErrorMessage","web_error","errorDetailsProps","data-test","instanceOf","CurrentRouteContext","stripBase","baseHref","trimEnd","substr","Router","routes","onRouteChange","useState","currentRoute","setCurrentRoute","currentPathRef","errorHandlerRef","useEffect","isAbandoned","router","UniversalRouter","resolveRoute","routeParams","route","random","toString","unlisten","ref","arrayOf","shape","func","objectOf","any","SettingsMenuItem","menuItem","pathPrefix","omit","isActive","isAvailable","item","remove","items","sortBy","filter","getAvailableItems","getActiveItem","strippedPath","find","VersionInfo","version","DeepBI_version","frontendVersion","substring","newVersionAvailable","NavbarSection","selectable","theme","useNavbarActiveState","useContext","useMemo","dashboards","queries","dataSources","alerts","testdialogue","report_route","dialogue_list","autopilot","autopilot_list","autopilot_view","dashboards_prettify","DesktopNavbar","firstSettingsTab","first","settingsMenu","activeState","logoUrl","flex","SubMenu","popupClassName","tabIndex","data_analysis","Item","dialogue","history_dialogue","query_builder","report_generation","report_list","aria-label","auto_pilot","history_autopilot","setting","profile_image_url","personal_setting","sys_status","Divider","log_out","disabled","MobileNavbar","getPopupContainer","overlayStyle","minWidth","overlay","dashboard","ghost","ApplicationLayout","mobileNavbarContainerRef","getMobileNavbarPopupContainer","useCallback","UserSessionWrapper","bodyClass","setIsAuthenticated","isCancelled","organizationStatus","classList","toggle","Consumer","pageTitle","onError","routeWithUserSession","originalRender","DialogPropType","onCancel","afterClose","dismiss","wrap","DialogComponent","showModal","dialog","okButtonProps","cancelButtonProps","pendingCloseTask","handlers","onDismiss","container","ReactDOM","processDialogClose","setAdditionalDialogProps","finally","closeDialog","dismissDialog","unmountComponentAtNode","removeChild","newProps","openDialog","navigateTo","events","post","debounce","eventsToSend","recordEvent","objectType","objectId","additionalProperties","object_type","object_id","timestamp","Date","now","screen_resolution","screen","Parameter","parameter","parentQueryId","global","locals","urlPrefix","param","extra","getExecutionValue","setValue","isNull","normalizedValue","pendingValue","isEqual","$$value","isEmptyValue","normalizeValue","updateLocals","each","local","clearPendingValue","setPendingValue","applyPendingValue","hasPendingValue","toUrlParams","isEmpty","fromUrlParams","query","has","toQueryTextFragment","toSaveableObject","TextParameter","super","NumberParameter","toNumber","isNaN","EnumParameter","enumOptions","multiValuesOptions","enumOptionsArray","split","intersection","joinListValues","separator","suffix","parameterValues","v","urlParam","JSON","valueFromJson","filterTypes","getColumnFriendlyName","column","typeSplit","indexOf","parts","getColumnNameWithoutType","a","toUpperCase","QueryResultResource","createOrSaveUrl","ExecutionStatus","statuses","1","2","3","4","handleErrorResponse","queryResult","job","sleep","ms","fetchDataFromJob","jobId","interval","QueryResult","deferred","onStatusChange","query_result","updatedAt","moment","isLoadingResult","columnTypes","rows","row","forOwn","k","newType","isNumber","match","utc","columns","QueryResultError","getId","cancelExecution","getStatus","getError","getLog","log","getUpdatedAt","retrieved_at","updated_at","getRuntime","runtime","getRawData","getData","getColumns","getColumnNames","columnNames","getColumnFriendlyNames","col","getTruncated","truncated","getFilters","filters","friendlyName","values","multiple","uniqBy","isMoment","unix","toPromise","statusCallback","queryId","loadLatestCachedResult","parameters","loadResult","tryCount","query_result_id","pow","refreshStatus","tryNumber","jobResponse","getLink","fileType","getName","queryName","format","applyAutoLimit","maxAge","apply_auto_limit","max_age","dataSourceId","data_source_id","query_id","PREFIX","defaultValue","fullKey","localStorage","getItem","setItem","Mustache","escape","identity","Query","options","isNew","hasDailySchedule","schedule","scheduleInLocalTime","hour","minute","hasResult","latest_query_data","latest_query_data_id","paramsRequired","getParameters","hasParameters","getParametersDefs","prepareQueryResultExecution","execute","missingParams","getMissing","paramsWord","valuesWord","getById","getQueryResult","getByQueryId","getExecutionValues","getAutoLimit","getQueryResultByText","selectedQueryText","queryText","empty_query","source","encodeURIComponent","getQueryResultPromise","$parameters","Parameters","favorite","unfavorite","clone","newQuery","queryString","updateParameters","initFromQueryString","parseQuery","uniq","collectParams","part","union","cachedQueryText","parameterNames","parametersMap","createParameter","parameterDef","zipObject","hasPendingValues","applyPendingValues","errorMessage","getQuery","mapResults","results","QueryService","save","saveOrCreateUrl","recent","archive","myQueries","fork","resultById","asDropdown","associatedDropdown","dropdownQueryId","favorites","new_Query","localOptions","tags","can_edit","QueryBasedDropdownParameter","loadDropdownValues","DATETIME_FORMATS","date","DYNAMIC_DATES","yesterday","subtract","DynamicDateType","isDynamicDateString","isDynamicDate","getDynamicDateFromString","DateParameter","useCurrentDateTime","isValid","findKey","hasDynamicValue","untilNow","from","withNow","DYNAMIC_DATE_RANGES","today","startOf","endOf","this_week","this_month","this_year","last_week","last_month","last_year","last_hour","last_8_hours","last_24_hours","last_7_days","last_14_days","last_30_days","last_60_days","last_90_days","last_12_months","DynamicDateRangeType","isDynamicDateRangeString","isDynamicDateRange","getDynamicDateRangeFromString","DateRangeParameter","start","end","keyStart","keyEnd","dates","cloneParameter","checkItems","size","bounds","getBoundingClientRect","round","callback","observe","shouldTrigger","VisualizationOptions","Data","VisualizationType","number","RendererPropTypes","visualizationName","onOptionsChange","EditorPropTypes","boxWhiskers","boxQuartiles","d3","quantile","box","duration","Number","whiskers","quartiles","tickFormat","g","sort","ascending","select","min","max","quartileData","whiskerIndices","whiskerData","outlierIndices","range","concat","x1","scale","linear","x0","__chart__","Infinity","center","selectAll","enter","insert","attr","transition","exit","append","medianLine","whisker","outlier","boxTick","text","whiskerTick","timer","flush","x","arguments","functor","boxWidth","xAxisLabel","yAxisLabel","containerBounds","containerWidth","containerHeight","margin","right","bottom","inner","mydata","xscale","ordinal","rangeBands","ceil","yscale","chart","q1","q3","iqr","xAxis","svg","axis","orient","yAxis","xLines","tickSize","yLines","plot","_","barOffset","Renderer","setContainer","resizeObserver","chooseTextColorForBackground","backgroundColor","textColors","chroma","maxBy","color","contrast","Swatch","mouseEnterDelay","mouseLeaveDelay","validateColor","tinycolor","toHex","Input","presetColors","presetColumns","onChange","onPressEnter","inputValue","setInputValue","isInputFocused","setIsInputFocused","presets","toPairs","preparePresets","group","index","addonBefore","Text","handleInputChange","onFocus","onBlur","Label","getColorName","ColorPicker","interactive","triggerProps","addonAfter","setVisible","validatedColor","currentColor","setCurrentColor","handleApply","actions","cancel","arrowPointAtCenter","overlayClassName","bordered","headStyle","newColor","onVisibleChange","ColorInput","TextAlignmentSelect","pickBy","Group","left_align","right_align","ControlLabel","layout","label","labelProps","align","gutter","span","withControlLabel","WrappedControl","ControlWrapper","fallbackId","htmlFor","hoistNonReactStatics","UpdateOptionsStrategy","existingOptions","newOptions","merge","shallowMerge","deepMerge","TabbedEditor","tabs","optionsChanged","updateStrategy","tab","animated","tabBarGutter","TabPane","createTabbedEditor","SectionTitle","Section","Title","Switch","otherProps","TextArea","defaultValues","visualizationsSettings","HelpTriggerComponent","LinkComponent","dateFormat","dateTimeFormat","integerFormat","floatFormat","booleanValues","tableCellMaxJSONSize","allowCustomJSVisualizations","hidePlotlyModeBar","choroplethAvailableMaps","ContextHelp","defaultIcon","NumberFormatSpecs","formatting_numbers","DateTimeFormatSpecs","formatting_dates_and_times","Select","AntSelect","AntInput","InputNumber","AntInputNumber","RedashColorPicker","RedashTextAlignmentSelect","Editor","x_axis_label","onXAxisLabelChanged","y_axis_label","onYAxisLabelChanged","isDeprecated","getOptions","defaultRows","minRows","DEFAULT_OPTIONS","globalSeriesType","sortX","legend","enabled","traceorder","labels","opposite","alignYAxesAtZero","error_y","series","stacking","seriesOptions","valuesOptions","columnMapping","direction","sizemode","coefficient","numberFormat","percentFormat","textFormat","missingValuesAsZero","addPointToSeries","point","seriesCollection","seriesName","getChartData","mappings","$raw","xValue","yValues","eValue","sizeValue","zValue","definition","definitionParts","String","yValue","ySeriesName","y","yError","zVal","zIndex","BaseColors","Blue","Red","Green","Purple","Cyan","Orange","Lilac","Brown","Black","Gray","Pink","ColorPaletteArray","ColorPalette","cleanNumber","plotlyCleanNumber","axisType","getPieDimensions","cellsInRow","cellWidth","cellHeight","xPadding","yPadding","getPieHoverInfoPattern","test","preparePieData","seriesList","getDefaultColor","valuesColors","additionalOptions","hasX","hoverInfoPattern","getValueColor","xPosition","yPosition","sourceData","seriesTotal","reduce","abs","yPercent","markerColors","hole","marker","colors","hoverinfo","textinfo","showDataLabels","textposition","textfont","prepareSeries","numeral","scalePercentBy100","urlPattern","createDateTimeFormatter","wrapped","isFinite","ISO_8601","RFC_2822","toMoment","createNumberFormatter","formatSimpleTemplate","str","prop","defaultColorScheme","prepareHeatmapData","colorScheme","heatMinColor","heatMaxColor","formatNumber","flatten","plotlySeries","z","colorscale","sortY","reverseX","reverse","reverseY","zMax","dataLabels","showlegend","datum","getHoverInfoPattern","seriesColor","seriesIndex","getSeriesColor","seriesYAxis","getSeriesAxis","cleanYValue","xValues","yErrorValues","array","insidetextfont","yaxis","offsetgroup","prepareBarSeries","prepareLineSeries","fill","prepareAreaSeries","prepareScatterSeries","prepareBubbleSeries","boxpoints","showpoints","jitter","pointpos","prepareBoxSeries","shouldUseUnifiedXAxis","defaultFormatSeriesText","defaultFormatSeriesTextForPie","formatValue","updateSeriesText","formatPercent","formatText","createTextFormatter","defaultY","hover","yValueIsAny","percentValues","updatePercentValues","sumOfCorrespondingPoints","sum","updateUnifiedXAxisValues","unifiedX","sorted","getUnifiedXAxisValues","updateData","visibleSeriesList","updatePieData","cumulativeValues","stackedY","updateLineAreaData","updateDefaultData","prepareData","prepareDefaultData","getAxisTitle","getAxisScaleType","prepareYAxis","axisOptions","automargin","autorange","prepareDefaultLayout","y2Series","xaxis","categoryorder","showticklabels","yaxis2","overlaying","side","barmode","prepareLayout","element","b","pad","offsetWidth","offsetHeight","autosize","hoverlabel","namelength","hasName","annotations","xanchor","yanchor","showarrow","preparePieLayout","boxmode","boxgroupgap","prepareBoxLayout","calculateAxisRange","calculateAbsoluteDiff","totalRange","percentageDiff","updateAxes","plotlyElement","updates","defaultRange","rangeMin","rangeMax","swappedAxes","orientation","axisA","axisB","totalRangeA","proportionA","totalRangeB","proportionB","diff","placeLegendBelowPlot","transformName","layoutHeight","querySelector","parentNode","tagName","overflow","fixLegendContainer","placeLegendAuto","placeLegendNextToPlot","updateChartSize","__previousSize","previousWidth","previousHeight","initChart","errorHandler","plotlyOptions","showLink","displaylogo","displayModeBar","plotlyData","plotlyLayout","isDestroyed","updater","process","Plotly","relayout","initPlotUpdater","createSafeFunction","fn","unwatchResize","initialized","newPlot","on","onHover","onUnHover","setZoomEnabled","allowZoom","layoutUpdates","dragmode","destroy","removeAllListeners","purge","PlotlyChart","setChart","isMobile","useMedia","maxWidth","chartData","_chart","CustomPlotlyChart","renderCustomChart","logErrorsToConsole","Function","ys","createCustomChartRenderer","customCode","enableConsoleLogs","prepareCustomChartData","register","bar","pie","histogram","heatmap","setPlotConfig","modeBarButtonsToRemove","allChartTypes","ChartTypeSelect","hiddenChartTypes","chartTypes","Option","marginRight","MappingTypes","x_column","y_column","group_by","errors_column","color_column","SwappedMappingTypes","ColumnMappingSelect","availableColumns","areAxesSwapped","allowClear","showSearch","placeholder","choose_columns","choose_column","getMappedColumns","mappedColumns","availableTypes","getAvailableColumnMappingTypes","usedColumns","unusedColumns","difference","GeneralSettings","handleColumnMappingChange","mappedColumnsToColumnMappings","defaultChecked","checked","Horizontal_Chart","bubble_size_coefficient","bubble_size_proportional_to","Area","Diameter","Counterclockwise","Clockwise","legend_placement","Hide_legend","Right","Bottom","legend_items_order","Normal","Reversed","Show_All_Points","Disabled","Stack","Normalize_values_to_percentage","missing_and_NULL_values","Do_not_display_in_chart","Convert_to_0_and_display_in_chart","parseFloat","AxisSettings","features","handleNameChange","useDebouncedCallback","handleMinMaxChange","opts","autoDetectType","auto_detect","datetime","logarithmic","category","min_value","auto","max_value","XAxisSettings","sort_values","reverse_order","Show_Labels","YAxisSettings","leftYAxis","rightYAxis","x_axis","left_y_axis","right_y_axis","align_Y_axes_at_zero","DragHandle","sortableHandle","SortableContainerWrapper","sortableContainer","SortableElement","sortableElement","SortableContainer","containerComponent","containerProps","wrapperProps","containerRef","isDragging","setIsDragging","shouldCancelStart","helperContainer","updateBeforeSortStart","args","onSortStart","onSortEnd","ContainerComponent","SortableBodyRow","SeriesSettings","handleSortEnd","oldIndex","newIndex","fromPairs","updateSeriesOption","debouncedUpdateSeriesOption","order","dataIndex","y_axis","Left","dropdownMatchSelectWidth","getTableColumns","lockAxis","lockToContainerEdges","useDragHandle","helperClass","dataSource","components","onRow","pagination","PieColorsSettings","Automatic","uniqueValuesNames","updateValuesOption","showHeader","ColorSchemes","HeatmapColorsSettings","color_scheme","choose_color_scheme","scheme","min_color","max_color","DefaultColorsSettings","ColorsSettings","DataLabelsSettings","isShowDataLabelsAvailable","debouncedOnOptionsChange","Show_Data_Labels","Number_format","Percent_Values_Format","Date_Time_format","Data_Labels","paddingBottom","paddingTop","Also_all_query_result_columns_can_be_referenced","using","whiteSpace","syntax","defaultCustomCode","CustomChartSettings","autoRedraw","isCustomChart","isPieChart","isDefault","general","data_labels","defaultColumns","minColumns","White","mapType","keyColumn","targetField","valueColumn","clusteringMode","steps","valueFormat","noValuePlaceholder","background","borders","noValue","position","alignText","template","region","cache","cleanupDelay","cleanup","refCount","release","createReferenceCountingCache","useLoadGeoJson","geoJson","setGeoJson","isLoading","setIsLoading","mapUrl","cancelled","darkenColor","darken","hex","getValueForFeature","feature","properties","Legend","CustomControl","L","Control","onAdd","div","backgroundClip","onRemove","getContainer","prepareLayer","layer","limits","featureData","valueFormatted","prepareFeatureProperties","defaultColor","getColorByValue","setStyle","weight","fillColor","fillOpacity","bindTooltip","sticky","bindPopup","validateBounds","fallbackBounds","latLngBounds","initChoropleth","onBoundsChange","_map","zoom","zoomSnap","scrollWheelZoom","maxBoundsViscosity","attributionControl","fullscreenControl","_choropleth","_legend","boundsChangedFromMap","onMapMoveEnd","getBounds","_southWest","lat","lng","_northEast","handleMapBoundsChange","off","invalidateSize","updateLayers","eachLayer","removeLayer","removeControl","setMaxBounds","formatter","limit","createScale","createFormatter","mapBounds","geoJSON","onEachFeature","addTo","fitBounds","animate","maxBounds","panInsideBounds","setPosition","addControl","updateBounds","onBoundsChangeRef","noop","inputs","valueRef","optionsWithoutBounds","setMap","getGeoJsonFields","isLoadingGeoJson","geoJsonFields","targetFields","fieldNames","handleMapChange","Key_Column","Target_Field","field","Value_Column","onOptionsChangeDebounced","Clustering_Mode","Steps","No_Value_Color","Background_Color","Borders_Color","TemplateFormatHint","geoJsonProperties","maxHeight","templateFormatHint","Value_Format","Value_Placeholder","Show_Legend","Legend_Position","Legend_Text_Alignment","Show_tooltip","Tooltip_template","Show_popup","Popup_template","BoundsSettings","setBounds","defaultBounds","getGeoJsonBounds","newBounds","cloneDeep","boundsAvailable","North_East_Latitude_and_Longitude","South_West_Latitude_and_Longitude","countryCodeColumn","countryCodeType","formatting","FormatSettings","border","timeInterval","dateColumn","stageColumn","totalColumn","showTooltips","timeColumnTitle","peopleColumnTitle","stageColumnTitle","momentInterval","weekly","daily","monthly","groupData","sortedData","groupKey","valueOf","total","stage","rawData","isDataValid","initialDate","toDate","grouped","stages","firstStage","lastStage","previousDate","prepareSimpleData","stageCount","last","prepareDiagonalData","yearly","timeLabelFormats","defaultOptions","rawNumberOnHover","displayAbsoluteValues","initialIntervalNumber","maxColumns","timeLabelFormat","isLightColor","formatStageTitle","CorneliusHeader","maxRowLength","cells","CorneliusRow","baseValue","percentageValue","cellProps","getColorForValue","offset","formatTimeLabel","Cornelius","classes","prepareOptions","cohortData","corneliusOptions","ColumnsSettings","Stage_Value","CohortTimeIntervals","Daily","Weekly","Monthly","CohortModes","diagonal","Fill_gaps_with_zeros","simple","Show_data_as_is","OptionsSettings","Time_Interval","Mode","DefaultColorPalette","validateSteps","AppearanceSettings","Time_Column_Title","People_Column_Title","Stage_Column_Title","No_Value_Placeholder","Show_Tooltips","option","exterior","autoHeight","getRowNumber","rowsCount","wrappedIndex","stringPrefix","stringSuffix","stringDecimal","stringDecChar","stringThouSep","decimalPoints","decimalDelimiter","thousandsDelimiter","locale","localeData","savedDelimiters","delimiters","thousands","decimal","formatString","formatTooltip","getCounterStyles","msTransform","MozTransform","WebkitTransform","transform","getCounterScale","firstChild","toFixed","setScale","countRow","counterColName","targetColName","counterLabel","counterValue","rowNumber","showTrend","targetRowNumber","targetValue","delta","trendPositive","counterValueTooltip","tooltipFormat","targetValueTooltip","formatTargetValue","getCounterData","inputsEnabled","isValueNumber","DetailsRenderer","page","setPage","keyBy","formats","showSizeChanger","defaultPageSize","stepCol","colName","displayAs","valueCol","autoSort","sortKeyCol","itemsLimit","percentValuesRange","stepValueToString","FunnelBar","funnelData","step","maxVal","pctMax","pctPrevious","rowKeyPrefix","trunc","MAX_SAFE_INTEGER","formatPercentValue","maxToPrevious","rowKey","record","Items_Count_Limit","Min_Percent_Value","Max_Percent_Value","latColName","lonColName","classify","groups","mapTileUrl","clusterMarkers","customizeMarkers","iconShape","iconFont","foregroundColor","borderColor","colorScale","category10","pointGroups","groupBy","All","points","lon","Icon","Default","mergeOptions","iconUrl","markerIcon","iconRetinaUrl","markerIconRetina","shadowUrl","markerShadow","_getIconUrl","iconAnchors","circle","rectangle","doughnut","popupAnchors","createMarkersLayer","markerClusterGroup","iconCreateFunction","cluster","markerClusterIcon","html","getChildCount","createMarkerClusterGroup","featureGroup","rowCopy","circleMarker","stroke","createHeatpointMarker","BeautifyIcon","iconSize","iconAnchor","popupAnchor","textColor","createIconMarker","addLayer","_tileLayer","tileLayer","attribution","_markerLayers","_layersControls","control","layers","setUrl","addOverlay","initMap","Latitude_Column_Name","Longitude_Column_Name","GroupsSettings","updateGroupOption","Leave_empty_to_use_default_value","default_template","MarkerClusterIcon","DivIcon","Point","createIcon","alpha","css","innerHTML","mapTiles","CustomColorPalette","StyleSettings","showBackgroundColor","showBorderColor","getCustomIconOptionFields","isCustomMarkersStyleAllowed","Map_Tiles","Markers","Cluster_Markers","Override_default_style","Shape","Circle","Circle_Dot","Square_Dot","Square","marginBottom","Enter_an_icon_name_from","Examples","Leave_blank_to_remove","Icon_Color","formatDateTime","parsed","formatDate","VALID_OPTIONS","formatRows","columnType","formatColumnValue","dataRows","hideControls","hideRowTotals","hideColumnTotals","data-hide-controls","data-hide-row-totals","data-hide-column-totals","updatedOptions","validOptions","updateOptions","controls","Show_Pivot_Controls","rendererOptions","table","rowTotals","Show_Row_Totals","colTotals","Show_Column_Totals","dy","Sankey","sankey","nodeWidth","nodePadding","nodes","links","computeNodeBreadths","nextNodes","kx","remainingNodes","assignBreadth","dx","sourceLinks","moveSinksRight","computeLinkDepths","ascendingSourceDepth","ascendingTargetDepth","targetLinks","sy","ty","iterations","ky","nodesByBreadth","nest","sortKeys","entries","relaxLeftToRight","weightedSource","resolveCollisions","y0","ascendingDepth","relaxRightToLeft","weightedTarget","computeNodeDepths","curvature","xi","interpolateNumber","x2","x3","y1","graph","nodesDict","dataKeys","getNode","level","normalizeName","addLink","sourceName","targetName","depth","category20","initSankey","every","d3sankey","padding","spreadNodes","currentNode","getConnectedNodes","rgb","darker","This_visualization_expects_the_query_result_to_have_rows_in_one_of_the_following_formats","stage_1_value","stage_2_value_or_null","stage_3_value_or_null","stage_4_value_or_null","stage_5_value_or_null","number_of_times_this_sequence_occurred","colorMap","buildHierarchy","firstRow","isDataInHierarchyFormat","sequence","buildNodesFromHierarchyData","compact","buildNodesFromTableData","root","nodeName","isLeaf","childNode","child","initSunburst","clientWidth","w","h","radius","output","totalSize","partition","PI","arc","startAngle","endAngle","innerRadius","sqrt","outerRadius","vis","breadcrumbs","classed","summary","sunburst","lastCrumb","uniqueNames","mouseover","__data__","breadcrumbPoints","percentage","toPrecision","percentageString","ancestors","parent","unshift","getAncestors","breadcrumb","updateBreadcrumbs","sequence_id","what_stage_in_sequence_this_is_1_2","stage_name","itemsPerPage","paginationSize","getColumnsOptions","visualizationColumns","integer","float","boolean","allowSearch","alignContent","allowHTML","highlightLinks","getDefaultColumnsOptions","queryColumns","wereColumnsReordered","initTextColumn","ReactDOMServer","renderToStaticMarkup","TextColumn","initNumberColumn","NumberColumn","initDateTimeColumn","DateTimeColumn","initBooleanColumn","createBooleanFormatter","BooleanColumn","initLinkColumn","trim","linkUrlTemplate","linkTitleTemplate","linkTextTemplate","linkOpenInNewTab","LinkColumn","initImageColumn","imageUrlTemplate","imageWidth","imageHeight","imageTitleTemplate","ImageColumn","Allow_HTML_content","Highlight_links","onChangeDebounced","Boolean","handleChangeDebounced","Value_for","URL_template","Text_template","Title_template","Open_in_new_tab","cursor","All_columns_can_be_referenced_using","Use","to_reference_current_this_column","This_syntax_is_applicable_to_URL_Text_and_Title_options","Image","Size","Any_positive_integer_value_that_specifies_size_in_pixels","Width","Height","JsonBlock","openingBrace","closingBrace","withKeys","isExpanded","setIsExpanded","objectKeys","count","isFirst","isLast","comma","JsonValue","JsonViewInteractive","initJsonColumn","JsonColumn","image","json","nextOrderByDirection","prepareColumns","searchInput","orderBy","onOrderByChange","isMultiColumnSort","orderByInfo","getOrderByInfo","tableColumns","isAscend","isDescend","sortColumnIndex","sorter","sortOrder","description","paddingRight","data-sort-column-index","onHeaderCell","columnName","multiColumnSort","findIndex","toggleOrderBy","initColumn","ColumnTypes","joinColumns","getSearchColumns","renderColumn","firstColumns","restColumns","initial","SearchInputInfoIcon","searchColumns","SearchInput","Search","searchTerm","setSearchTerm","setOrderBy","newOrderBy","getSelection","removeAllRanges","preparedRows","sortRows","directions","ascend","descend","va","vb","matchFields","filterRows","data-percy","pageSize","hideOnSinglePage","showSorterTooltip","ColumnEditor","handleChange","changes","AdditionalOptions","Typography","SortableItem","Collapse","Panel","handleColumnChange","newColumn","stopPropagation","defaultActiveKey","expandIconPosition","header","toggle_visibility","ALLOWED_ITEM_PER_PAGE","GridSettings","items_per_page","grid","prepareWords","frequenciesColumn","wordColumn","frequencyColumn","word","getWordsWithFrequencies","wordsList","computeWordFrequencies","words","wordLength","wordCount","counts","wordSize","angle","wordLengthLimit","wordCountLimit","wordLengthFits","wordCountFits","scaleElement","nodeHeight","scaleX","scaleY","createLayout","fontFamily","getComputedStyle","cloud","font","rotate","fontSize","setWords","stop","svgBounds","gBounds","VisualizationConfig","maxRows","registeredVisualizations","boxPlotVisualization","chartVisualization","choroplethVisualization","cohortVisualization","counterVisualization","detailsVisualization","funnelVisualization","mapVisualization","pivotVisualization","sankeyVisualization","sunburstVisualization","tableVisualization","wordCloudVisualization","typeSpecs","checkPropTypes","validateVisualizationConfig","getDefaultVisualization","visualization","WidgetTypeEnum","ParameterMappingType","DashboardLevel","WidgetLevel","StaticValue","Widget","visualizationOptions","widget","sizeX","dashboardGridOptions","sizeY","minSizeX","maxSizeX","minSizeY","maxSizeY","defaultWidth","defaultHeight","calculatePositionOptions","restricted","truncate","load","force","refreshStartedAt","isStaticParam","getParameterMappings","MappingType","queryParams","localTypes","localParameters","mapping","paramOrder","parameterMappings","existingParams","mapTo","removedParams","getLocalParameters","collectDashboardFilters","queryResults","urlParams","queryFilters","queryFilter","hasQueryStringValue","dashboard_filters_enabled","prepareWidgetsForDashboard","widgets","defaultWidgetSizeY","chain","widgetsAtRow","calculateNewWidgetPosition","existingWidgets","newWidget","bottomLine","to","Array","constant","Dashboard","slug","prepareDashboardWidgets","transformSingle","publicAccessEnabled","public_url","transformResponse","DashboardService","legacy","getByToken","token","myDashboards","CreateDashboardDialog","setName","setIsValid","saveInProgress","setSaveInProgress","footer","new_dashboard","cancelText","wrapProps","dashboard_name","autoFocus","globalParams","resultingGlobalParams","globalParamOrder","addWidget","textOrVisualization","dashboard_id","isHidden","visualization_id","wrapDialog","Step","show","completed","urlText","commonProps","done","EmptyStateHelpMessage","EmptyState","illustration","helpMessage","onboardingMode","showAlertStep","showDashboardStep","showDataSourceStep","showInviteStep","getStepsItems","illustrationPath","alert","inviteUsers","isCompleted","data_sources","users","showCreateDashboardDialog","defaultStepsItems","connect_new_datasource","ask_database_info","create_query","create_alert","create_dashboard","invite_new_user","stepsItems","imageSource","urlTarget","getStepItems","notification","simpleNotification","save_success","success","save_failed","BeaconConsent","hide","setHide","showBeaconConsentMessage","hideConsentCard","confirmConsent","confirm","thank_you","setting_saved_success","OrgSettings","beacon_consent","share_info","help_redash","redash_about_1","redash_about_2","redash_info","accept","set_info_in","sys_setting","sys_setting_add","_sorted","_items","getRouteParamsCount","tokens","pathToRegexp","idOrNull","unregister","navigate","FavoriteList","resource","itemUrl","emptyState","setItems","setLoading","is_draft","unpublished","DashboardAndQueryFavoritesList","my_favorite_dashboard","my_favorite_query","DeprecatedEmbedFeatureAlert","EmailNotVerifiedAlert","email_send","re_send_email","Home","redash_welcome","redash_desc","pageProps","PageHeader","Layout","activeTab","selectedKeys","task_queen_status","outdated_query","FavoritesControl","toggleItem","is_favorite","savedIsFavorite","add_favorite","remove_favorite","doc","doc_url","type_name","Table","RefreshScheduleType","time","day_of_week","until","RefreshScheduleDefault","UserProfile","email","profileImageUrl","isDisabled","Destination","created_at","queryHash","is_safe","is_archived","api_key","AlertOptions","op","oneOfType","custom_subject","custom_body","Alert","last_triggered_at","rearm","checkMoment","propName","componentName","isRequiredValid","isOptionalValid","Moment","TimeAgo","autoUpdate","variation","startDate","fromNow","setInterval","clearInterval","IntervalEnum","NEVER","SECONDS","MINUTES","HOURS","DAYS","WEEKS","MILLISECONDS","AbbreviatedTimeUnits","formatDateTimeValue","localizeTime","hrs","mins","secondsToInterval","IntervalInfo","pluralize","durationHumanize","durationInSeconds","ret","rounded","omitSingleValueNumber","toHuman","fractionDigits","prettySizeWithUnit","bytes","divisor","units","unit","greatestDivisor","prettyNumberWithUnit","prettySize","sortable","Columns","overrides","avatar","formatTitle","dateTime","timeAgo","timeAgoCustomProps","custom","ItemsTable","orderByField","orderByReverse","toggleSorting","orderByDirection","defaultSortOrder","tableDataProps","onTableRow","onRowClick","active","paragraph","indicator","getRowKey","CounterCard","spinning","queryJobsColumns","queue","org_id","scheduled","start_time","queue_time","otherJobsColumns","job_name","workersColumns","busy","idle","started","suspended","birth_date","total_work_time","queuesColumns","TablePropTypes","WorkersTable","pageSizeOptions","QueuesTable","QueryJobsTable","OtherJobsTable","Jobs","queueCounters","overallCounters","queued","startedJobs","workers","processQueues","_refreshTimer","queues","q","flatMap","enqueued_at","started_at","startedQueryJobs","otherStartedJobs","loading_failed","started_job","queen_job","activeKey","onTabClick","newTab","queen_status","Paginator","showPageSizeSelect","onPageSizeChange","totalCount","onShowSizeChange","defaultCurrent","EditTagsDialog","getAvailableTags","availableTags","setAvailableTags","setValues","selectRef","setSelectRef","add_edit_tag","ok_text","add_more_tag","tag","TagsControl","onEdit","renderEditButton","editTags","add_tag","tagSeparator","tagsExtra","modelTagsControl","archivedTooltip","ModelTagsControl","isDraft","isArchived","draft","archived","QueryTagsControl","archived_info","DashboardTagsControl","SchedulePhrase","seconds","flush_never","humanized","short","full","auto_flush","dayOfWeek","at","isLink","ControllerType","isLoaded","updateSearch","selectedTags","updateSelectedTags","totalItemsCount","pageItems","updatePagination","WrappedComponent","createItemsSource","createStateStorage","ItemsListWrapper","stateStorage","itemsSource","_itemsSource","getState","validate","getCallbackContext","onBeforeUpdate","onAfterUpdate","initialState","controller","totalPages","setItemsPerPage","setTotalCount","getItemsForPage","compile","compiled","Sorter","setField","setReverse","sortByIteratees","toggleField","customIteratee","ItemsFetcher","_getRequest","context","_originalGetRequest","_processResults","_originalProcessResults","getRequest","doRequest","processResults","_originalDoRequest","fetch","PlainListFetcher","paginator","_allItems","allResults","sorting","PaginatedListFetcher","page_size","ItemsSource","_beforeUpdate","_afterUpdate","_changed","_paginator","_sorter","_searchTerm","_selectedTags","customParams","setCustomParams","fetchToken","_currentFetchToken","_fetcher","_pageItems","_params","isPlainList","defaultState","prevPage","prevItemsPerPage","_savedOrderByField","allItems","ResourceItemsSource","getResource","getItemProcessor","processItem","StateStorage","_state","defaults","UrlStateStorage","defaultOrderBy","compileOrderBy","parseOrderBy","LoadingState","OutdatedQueries","create_user","create_time","run_time","last_exec_datetime","update_schedule","isInitialCall","_updateTimer","currentPage","autoUpdateSwitchId","auto_update","lastUpdatedAt","last_update_time","listColumns","OutdatedQueriesPage","itemsList","out_date_query","General","info","no_data","itemLayout","renderItem","DatabaseMetrics","database","Queues","Manager","lastRefreshAt","last_fresh","startedAt","outdatedQueriesCount","outdated_query_count","manage","SystemStatus","manager","databaseMetrics","last_refresh_at","outdated_queries_count","database_metrics","metrics","normalizeCondition","equals","newData","destination_id","destinations","transformRequest","mute","unmute","STATE_CLASS","unknown","ok","triggered","AlertsList","muted","toUpper","new_alert","get_notice_event","AlertsListPage","MenuButton","doDelete","confirmDelete","delete_alert","delete_alert_confirm","okType","autoFocusButton","alert_unmute","alert_mute","editMode","defaultName","getDefaultName","AlertType","CONDITIONS","VALID_STRING_CONDITIONS","DisabledInput","Criteria","resultValues","alertOptions","columnValue","invalidMessage","type_not_match_value","type_not_match_condition","columnHint","top_value","column_value","condition","optionLabelProp","great_then","great_and_equals","less_then","less_and_equals","not_equals","threshold","AlertOptionsType","DURATIONS","second","day","week","RearmByDuration","durationIdx","setDurationIdx","setCount","durValue","plural","newCount","precision","newIdx","idx","toLower","RearmEditor","selected","setSelected","newSelected","alert_one_time","alert_one_time_tip","alert_every_time","alert_every_time_tip","alert_most_once","alert_most_once_tip","RearmViewer","phrase","notice_will_send","Rearm","useSearchResults","initialResults","debounceTimeout","setResult","currentSearchTerm","doSearch","term","QuerySelector","selectedQuery","setSelectedQuery","searchResults","searching","search_by_name","clearIcon","selectQuery","spinIcon","hidden","suffixIcon","onSearch","notFoundContent","filterOption","defaultActiveFirstOption","readOnly","marginTop","inactive","find_nothing","QueryFormItem","queryHint","query_not_setting","query_setting_tip","recommend","open_query_in_new_tab","load_query_result","QueryType","ItemsList","onItemClick","renderListItem","SelectItemsDialog","dialogTitle","inputPlaceholder","itemKey","renderStagedItem","searchItems","selectedItemsTitle","showCount","extraFooterContent","selectedItems","setSelectedItems","hasResults","isItemSelected","textAlign","minHeight","isSelected","IMG_ROOT","AlertSubscription","alertId","alert_id","ListItemAddon","isStaged","alreadyInGroup","deselectedIcon","selected_ready","EmailSettingsWarning","featureName","adminOnly","messageDescriptionId","mailSettingsMissing","email_need_set","email_will_work","aria-describedby","normalizeSub","sub","destination","ListItem","unsubscribe","canUnsubscribe","DestinationType","UserType","AlertDestinations","dests","subs","alert_setting","add_alert_setting","subscribe","subscribed","subscribe_failed","dest","without","DestinationService","currentUserEmailSub","filteredSubs","showAddAlertSubDialog","onUserEmailToggle","HorizontalFormItem","wrapperCol","labelCol","AlertState","lastTriggered","alert_setting_sure","last_trigger_time","AlertView","unmuting","menuButton","no_permission_edit_alert","edit","xs","trigger_condition","notice","default","notice_template","set_mute","alert_not_sent_info","reset_alert_sent_info","set_unmute","set_alert_open_tab","NotificationTemplate","subject","setSubject","setBody","hasContent","setEnabled","showPreview","setShowPreview","renderData","topValue","ALERT_STATUS","ALERT_CONDITION","ALERT_THRESHOLD","ALERT_NAME","ALERT_URL","QUERY_NAME","QUERY_URL","QUERY_RESULT_VALUE","QUERY_RESULT_ROWS","QUERY_RESULT_COLS","normalizeCustomTemplateData","tmpl","are_you_sure","switch_warning","use_default_template","use_custom_template","custom_template","preview","autoSize","guide_format","AlertEdit","saving","_isMounted","pendingRearm","onNotificationTemplateChange","onQuerySelected","onNameChange","onRearmChange","onCriteriaChange","trigger_send_notice","setup_tip","AlertNew","selector_query_tip","MODES","NEW","VIEW","EDIT","defaultNameBuilder","new_alert_tip","AlertService","setAlertOptions","obj","alert_delete_success","alert_delete_failed","warn","set_mute_success","set_mute_failed","set_unmute_success","set_unmute_failed","can_not_edit_alert","no_permission_readonly","modKey","navigator","platform","altKey","onShortcut","shortcut","retunValue","KeyboardShortcuts","keymap","Mousetrap","bindGlobal","unbind","ParameterApplyButton","paramCount","data-show","apply_change","canvas","SelectWithVirtualScroll","largestOpt","ctx","getContext","containerStyle","textMetrics","measureText","actualWidth","actualBoundingBoxLeft","actualBoundingBoxRight","calculateTextWidth","optionFilterProp","DateInput","forwardRef","onSelect","additionalAttributes","date_select","DateTimeInput","withSeconds","showTime","datetime_select","DynamicButton","selectedDynamicValue","staticValueLabel","menu","DynamicDatePicker","dynamicValue","parameterValue","dateComponentRef","dateOptions","dynamicButtonOptions","isDateTime","DateComponent","dynamicDate","onDynamicValueSelect","DYNAMIC_DATE_OPTIONS","RangePicker","DatePicker","DateRangeInput","DateTimeRangeInput","DynamicDateRangePicker","dateRangeComponentRef","dateRangeOptions","isDateTimeRange","DateRangeComponent","isValidDateRangeValue","DYNAMIC_DATETIME_OPTIONS","QueryBasedParameterInput","_loadOptions","componentDidUpdate","prevProps","optionValues","validValues","updatedValue","showArrow","no_option","multipleValuesProps","maxTagCount","maxTagTextLength","maxTagPlaceholder","num","ParameterValueInput","isDirty","renderDateParameter","renderDateRangeParameter","renderEnumInput","val","opt","renderQueryBasedInput","renderNumberInput","renderTextInput","renderInput","data-dirty","formItemProps","getDefaultTitle","capitalize","NameInput","existingNames","setValidation","helpText","validateStatus","params_ready_exist","isTypeDateRange","query_show_as","params_name","required","EditParameterSettingsDialog","setParam","isNameValid","setIsNameValid","initialQuery","setInitialQuery","paramFormId","new_params","htmlType","form","onFinish","date_day","date_datetime","date_time_second","date_range_day","date_range_datetime","date_range_time_second","list_select_help","wait_query","colon","allow_multi","quotation","replace_query_info","quoteOption","no_quotation","single_quotation","double_quotation","updateUrl","disableUrlUpdate","parametersChanged","disableUrlUpdateChanged","keyCode","applyChanges","onPendingValuesChange","onParametersEdit","onValuesChange","parametersWithPendingValues","updated","updatedParameter","renderParameter","editable","showParameterSettings","appendSortableToParent","dirtyParamCount","containerEl","onBeforeSortStart","moveParameter","onKeyDown","handleKeyDown","data-editable","Timer","startTime","VisualizationName","QueryLink","ALL_VALUES","FilterType","FiltersType","filterData","rowValue","filterValues","filterValue","isSame","Filters","_values","f","createFilterChangeHandler","labelInValue","clear","select_all","OptGroup","useQueryResultData","queryResultStatus","invoke","retrievedAt","metadata","getQueryResultData","useImmutableCallback","callbackRef","wrapComponentWithSettings","countries","country","countriesDataUrl","short_name","name_long","full_name","abbrev","abbreviated_name","iso_a2","iso_a3","iso_n3","china","chinaDataUrl","adcode","china_110000","BeiJing","china_120000","TianJing","china_130000","HeBei","china_140000","ShanX","china_150000","NeiMengGu","china_210000","LiaoNing","china_220000","JiLin","china_230000","HeiLongJiang","china_310000","ShangHi","china_320000","JiangSu","china_330000","ZheJiang","china_340000","AnHui","china_350000","FuJian","china_360000","JiangXi","china_370000","ShanDong","china_410000","HeNan","china_420000","HuBei","china_430000","HuNan","china_440000","GuangDong","china_450000","GuangXi","china_460000","HaiNan","china_500000","ChongQing","china_510000","SiChuan","china_520000","GuiZhou","china_530000","YunNan","china_540000","XiZang","china_610000","ShanXi","china_620000","GanSu","china_630000","QingHai","china_640000","NingXia","china_650000","XinJiang","china_710000","TaiWan","china_810000","HongKong","china_820000","AoMen","usa","usaDataUrl","ns_code","geoid","usps_abbrev","fips_code","subdiv_japan","subdivJapanDataUrl","name_alt","name_local","iso_3166_2","postal","type_en","region_code","optionsProp","lastOptions","Error_while_rendering_visualization","combineFilters","localFilters","globalFilters","localFilter","globalFilter","VisualizationRenderer","setFilters","filtersRef","handleFiltersChange","newFilters","onFiltersChange","filteredData","showFilters","ExpandedWidgetDialog","editableMappingsToParameterMappings","synchronizeWidgetTitles","sourceMappings","affectedWidgets","sourceMapping","widgetMappings","widgetMapping","ParameterMappingInput","existingParamNames","updateParamMapping","newMapping","renderMappingTypeSelector","noExisting","updateSourceType","new_dashboard_parm","exist_dashboard_parm","dashboard_param_error","widget_parm","static_value","renderDashboardAddNew","renderDashboardMapToExisting","paramName","renderStaticValue","renderInputBlock","enter_parm_name","select_parm","inputError","input","visibility","MappingEditor","code_mast_have_value","exist_save_parm","renderContent","edit_source_value","TitleEditor","showPopup","getMappingTitle","renderPopover","paramTitle","onEditingTitleChange","maxLength","title_set_hidden_in_widget","onPopupVisibleChange","ParameterMappingListInput","getStringValue","mappedTo","dashboard_parm","oldMapping","Column","default_value","getDefaultValue","existingParamsNames","getSourceTypeLabel","getParamValuesSnapshot","dashboardParameters","EditParameterMappingsDialog","existingParameterNames","alreadyExists","parameterMappingsToEditableMappings","originalParamValuesSnapshot","saveWidget","newMappings","valuesChanged","isMatch","widgetsToSave","updateParamMappings","WidgetDropdownButton","extraOptions","showDeleteOption","onDelete","WidgetMenu","WidgetDeleteButton","delete_widget","delete_widget_confirm","isPublic","menuOptions","tileProps","showDropdownButton","deleteWidget","visualizationWidgetMenuOptions","canEditDashboard","canViewQuery","isShowReport","canEditParameters","widgetQueryResult","isQueryResultEmpty","downloadLink","downloadName","save_as_csv","download","save_as_tsv","save_as_excel","edit_query","edit_param","RefreshIndicator","VisualizationWidgetHeader","isEditing","onParametersUpdate","VisualizationWidgetFooter","onRefresh","onExpand","refreshClickButtonId","setRefreshClickButtonId","refreshWidget","buttonId","VisualizationWidget","onParameterMappingsChange","onLoad","renderVisualization","query_error","onLocalFiltersChange","isRefreshing","editParameterMappings","expandWidget","TextboxDialog","setText","setPreview","updatePreview","widget_will_not_add","widget_will_not_save","confirmDialogDismiss","originalText","quit_edit","quit_edit_confirm","add_text","edit_text","add_to_dashboard","input_text","support_basic","open_markdown","open_markdown_teach","dashed","TextboxWidget","TextboxMenuOptions","newText","RestrictedWidget","widget_have_no_access","WIDGET_CONTENT_SELECTOR","AutoHeightController","selector","widgetEl","els","querySelectorAll","acc","el","exists","getHeight","prevHeight","onHeightChange","checkHeightChanges","newWidgetIds","ResponsiveGridLayout","WidthProvider","Responsive","WidgetType","SINGLE","MULTI","DashboardWidget","onLoadWidget","onRefreshWidget","onRemoveWidget","nextProps","DashboardGrid","pos","minW","maxW","minH","maxH","layouts","cfg","normalized","normalizeTo","onLayoutChange","onBreakpointChange","widgetId","newHeight","oldItem","newItem","autoHeightCtrl","resume","disableAnimations","onWidgetHeightUpdated","draggableCancel","cols","rowHeight","isDraggable","isResizable","onResizeStart","onResizeStop","onWidgetResize","breakpoints","data-grid","normalizeFrom","data-widgetid","VisualizationSelect","visualizationGroups","visualizations","vizSelectId","visualizationId","selectedVisualization","BOXPLOT","CHART","CHOROPLETH","COHORT","COUNTER","DETAILS","FUNNEL","MAP","PIVOT","SANKEY","SUNBURST_SEQUENCE","TABLE","WORD_CLOUD","select_view","AddWidgetDialog","setSelectedVisualization","setParameterMappings","widget_not_add","parameterMappingsId","add_widget","add_widget_to_dashboard","PreviewCard","imageUrl","roundedImage","data-pr","UserPreviewCard","withLink","DataSourcePreviewCard","disableResource","User","enableUser","userName","account","activated","is_disabled","Cannot_enable_user","disableUser","terminated","Cannot_deactivate_user","deleteUser","has_been_deleted","Cannot_delete_user","convertUserInfo","groupIds","isInvitationPending","is_invitation_pending","regenerateApiKey","api_Key_has_been_regenerated","failed_to_regenerate_api_key","sendPasswordReset","the_email_server_is_not_configured","reset_link","password_reset_email_has_been_sent","the_password_reset_email_was_not_sent_successfully","resendInvitation","invite_link","user_invitation_email_has_been_sent","the_user_invitation_email_failed_to_be_sent","PermissionsEditorDialogHeader","mange_permissions","can_not_manage_permissions","UserSelect","shouldShowUser","loadingUsers","setLoadingUsers","setUsers","debouncedSearchUsers","searchUsers","add_user","PermissionsEditorDialog","author","aclUrl","loadingGrantees","setLoadingGrantees","grantees","setGrantees","loadGrantees","resultGrantees","accessType","grantee","addPermission","access_type","unauthorized","removePermission","can_not_delete_user","loadUsersWithPermissions","fail_load_list","userHasPermission","user_permissions","InputWithCopy","execCommand","copied","copy_success","copy_failed","resetCopyState","copyFeatureSupported","queryCommandSupported","copyButton","copy","ShareDashboardDialog","apiUrl","open_share_dashboard_failed","close_share_dashboard_failed","enableAccess","disableAccess","hasOnlySafeQueries","share_dashboard","share_dashboard_tip","headerContent","secret_address_tip","allow_public","secret_address","useFullscreenHandler","fullscreen","setFullscreen","getLimitedRefreshRate","refreshRate","allowedIntervals","useRefreshRateHandler","refreshDashboard","getRefreshRateFromUrl","setRefreshRate","doRefreshDashboard","refreshTimer","rate","DashboardStatusEnum","useEditModeHandler","editingLayout","setEditingLayout","dashboardStatus","setDashboardStatus","recentPositions","setRecentPositions","doneBtnClickedWhileSaving","setDoneBtnClickedWhileSaving","saveDashboardLayout","positions","changedPositions","nextPositions","nextPos","prevPos","getChangedPositions","saveChangedWidgets","saveDashboardLayoutDebounced","retrySaveDashboardLayout","setEditing","editing","getAffectedWidgets","updatedParameters","useDashboard","dashboardData","setDashboard","refreshing","setRefreshing","gridDisabled","setGridDisabled","globalParameters","isDashboardOwnerOrAdmin","managePermissions","updateDashboard","includeVersion","currentDashboard","updatedDashboard","W_F","dashboard_has_changed","dashboard_has_changed_tip","togglePublished","loadWidget","forceRefresh","removeWidget","dashboardRef","loadDashboard","loadWidgetPromises","updatedFilters","archiveDashboard","showShareDashboardDialog","handleDialogClose","showAddTextboxDialog","showAddWidgetDialog","disableRefreshRate","toggleFullscreen","editModeHandler","EditInPlace","isEditable","currentValue","newValue","ignoreBlanks","onDone","stopEditing","startEditing","multiline","editorProps","InputComponent","defaultEditing","prevState","onStopEditing","renderEdit","renderNormal","processTags","getTags","StepModal","dashboardId","selectedTemplate","setSelectedTemplate","templates","example1","dashboards_prettify_1","example2","dashboards_prettify_2","example3","dashboards_prettify_3","more","isModalVisible","setIsModalVisible","previewImage","setPreviewImage","openModal","useImperativeHandle","chartType","res","chart_name","chart_type","postDashboardDetail","detail","template_id","handleCancel","prettify_dashboard","no_dashboard_data","toast","submit_success","submit_fail","handleTemplateSelect","handlePreview","coming_soon","getDashboardTags","buttonType","DashboardPageTitle","dashboardConfiguration","RefreshButton","refreshRateOptions","auto_flush_hz","parsedRefreshRate","stop_auto_flush","DashboardMoreOptionsButton","showPermissionsControl","disablePublish","dashboard_archived","DashboardControl","headerExtra","showPublishButton","showFullscreenButton","canShareDashboard","showShareButton","disablePublicUrls","showMoreOptionsButton","stepModalRef","publish","dis_en_able_fullscreen","share_dashboard_setting","DashboardEditControl","saved","data-saving","data-error","retry","DashboardHeader","DashboardControlComponent","DashboardSettings","dashboard_filter","AddWidgetContainer","dashboard_widget_info","DashboardComponent","pageContainer","setPageContainer","bottomPanelStyles","setBottomPanelStyles","paddingLeft","dispatchEvent","Event","DashboardPage","dashboardSlug","timeoutId","messageContainer","scrollHeight","clientHeight","scrollTo","behavior","EventEmitter","protocol","dialogueStorage","addDialogueStorage","sessionStorage","getDialogueStorage","addDashboard","getDashboard","addAllStorage","allStorage","getAllStorage","uuid","getAutopilotStorage","addAutopilotStorage","addChatList","Chart_Dialogue","setDialogueStorageDashboardId","DialogueTop","CharttableItem","chat_type","Charttable","loadingMask","data_source","closeDialogue","reset_dialogue","reset_dialogue_confirm","borderRadius","new_dialogue","Overlay","onUse","init_config","start_use","SecondChoice","SelectLoading","editData","closeEditData","submit","source_item","SchemaList","setSchemaList","SchemaListDataItem","setSchemaListDataItem","SecondChoiceLoading","setSecondChoiceLoading","field_name","textOverflow","field_description","handleFieldDescriptionChange","detection","pass","fail","clickSchemaItem","newFieldDesc","field_desc","comment","newSchemaList","table_name","is_pass","tableIsShow","SchemaListIsShow","source_tooltip","source_second_tooltip","alignItems","table_comment","sheet_description","overflowY","mapSchemaColumnsToObject","DataSource","fetchSchema","schema","tables","SelectSource","confirmLoading","percent","setOptions","setSourceItem","source_id","setSource_id","SchemaListData","setSchemaListData","selectSchema","setSelectSchema","selectedRowKeys","setSelectedRowKeys","tableSelectedRowKeys","setTableSelectedRowKeys","loadingTableColumns","setLoadingTableColumns","indeterminate","setIndeterminate","checkAll","setCheckAll","setSelectLoading","setEditData","submitting","setSubmitting","excel_upload","editTableData","resetStates","getSchemaList","job_id","job_res","schemaList","getOptionsList","source_name","file_name","optionsList","table_desc_obj","table_desc","table_columns_info","field_desc_obj","in_use","existingTable","prevData","existingTableSelectedRowKeys","newSelectedRowKeys","newSchemaListData","newSchemaListDataList","rowSelection","selectedRows","tableNameList","tableName","checkedSchema","dataSourceOptions","NoDataHtml","flexDirection","chat_start","AutoPilot_start","report_start","add_datasource","source_first_tooltip","select_data_source","selectedItem","optionSelectedBg","changeSourceAll","newSelectSchema","changeSource","ai_understanding_data","EChartsChart","chartRef","chartJson","setChartJson","chartInstance","echarts","setOption","handleResize","dispose","resize","SettingModal","LogWorkflow","logData","Cardloading","sourceList","setSourceList","workTitle","setWorkTitle","logTerminal","newLogData","log_terminal","reg","newSource","prevSourceList","scrollTop","createRange","selectNode","selection","rangeCount","addRange","DialogueContext","Copy","cancelRequest","isBotLoading","sender","setSelectionRange","stop_generation","AutoPilotInfo","databases_type","btn_disabled","setBtn_disabled","report_name","setReportName","report_desc","setReportDesc","btn_isShow","setBtn_isShow","CreateAutoPilot","promisesList","Charttable_id","databases_id","db_comment","databases_desc","submit_success_tip","report_name_tip","report_desc_tip","report_name_and_report_desc_tip","please_complete_report_name_and_report_desc","TypingCard","sourceEl","ChangeScrollTop","sourceText","setSourceText","showComponent","setShowComponent","renderLogWorkflow","renderChart","renderChatContent","wordBreak","renderUser","onMouseLeave","onMouseEnter","icon_small","DialogueContent","sendTableDate","loadingState","stopSend","inputMessage","setInputMessage","handleSendMessage","onOpenKeyClick","selectSourceRef","sourceEdit","send_me_instructions","MenuMask","API_LOCAL","hostname","API_CHAT","generateChart","wsRef","wsProtocol","wsUrl","ERROR_MESSAGE","setupWebSocket","ws","reason","readyState","send","WebSocket","Dialogue","sendUrl","OpenKeyRef","DialogueContentRef","new_logData","messagesRef","Charttable_item","Dashboard_id","CharttableD_date","setDashboardId","CharttableDate","setCharttableDate","setLoadingState","startUse","setStartUse","SendTableDate","setSendTableDate","LoadingMask","setLoadingMask","selectTableName","setSelectTableName","selectTableDesc","setSelectTableDesc","selectTableDescRef","selectTableNameRef","ConfirmLoading","setConfirmLoading","sourceTypeRef","setPercent","cachedTableDesc","setCachedTableDesc","MAX_QUESTIONS","abortControllersRef","lockReconnect","data_type","getDialogueDashboardStorage","saveDashboardId","currentList","scrollToBottom","updateCharttableDate","existingDialogueStorage","Chart_Dashboard","firstTableData","allIsPass","abortController","AbortController","sendSocketMessage","signal","ac","mergeObj","obj1","obj2","obj3","obj3Index","item2","index2","item3","index3","obj3Index2","item4","index4","handleSuccess","tableId","isSendTableDateType","mergeTable","columns_obj","table_inuse","handleSocketMessage","outPutMessage","receiver","chat_id","closeWS","setData_type","testAndVerifySql","dashboardsId","saveChart","table_desc_list","filterTableDesc","please_fill_in_the_description","configuration_completed","start_the_dialogue","publishQuery","closeSetMessage","allMessages","lastMessage","pop","cancelRequestAll","abort","handleBeforeUnload","isSendTableDate","baseMessageContent","columnsInfo","handleSendMessage1","errorSetting","connection_failed","successSetting","report_generation_completed","tableDesc","isHas","sendDashId","base_message","messgaeInfo","connection_seems_lost","messageData","user_name","method","getReader","reader","decoder","TextDecoder","buffer","processText","decode","stream","read","tab_id","SelectValue","sqlId","new_sql","tabId","findQueryResult","task_id","saveSql","findJob","isCalled","executeSql","useSql","DashboardId","DashId","newReport","deleteReports","temporary_dashboard","deleteReport","widgetsJson","queriesId","editReport","response_dashboards","saveReport","arr","nameList","useChartCode","DialogueLeftList","setArr","setUuid","modeSwitch","switchMode","NoDashboardData","chatType","justifyContent","fontWeight","start_your_dialogue","no_dialogue","DialogueList","dashboardKey","setDashboardKey","isShowNoData","setIsShowNoData","prevKey","Sidebar","Content","AutopilotHistory","AutoPilotList","setAutoPilotList","task_status","is_generate","waiting","generating","handleDelete","confirm_delete","confirm_delete_tip","delete_success","getAutoPilotList","delete_fail","all_autopilot","emptyText","AutoPilot","autopilotRef","eval","innerText","exportPDF","contentScale","html2canvas","useCORS","allowTaint","ignoreElements","mozImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled","imageSmoothingEnabled","pageData","toDataURL","img","pdf","jsPDF","addImage","useExportPDF","class","viewBox","xmlns","p-id","opacity","AutopilotView","autoPilot","setAutoPilot","autopilotId","chat_log","html_code","task_processing","DashboardsPrettify","DashboardsPrettifyList","setDashboardsPrettifyList","handleClickHtml","html_name","host","getDashboardsPrettifyList","dashboards_prettify_all","TagsList","tagsUrl","showUnselectAll","onUpdate","allTags","setAllTags","setSelectedTags","toggleTag","newSelectedTags","unselectAll","setCurrentValue","onInputChange","InputControl","Menu","MenuIcon","ProfileImage","Tags","useItemsListExtraActions","ExtraActionsComponent","actionsState","setActionsState","areAllItemsSelected","toggleAllItems","checkboxColumn","onStateChange","areExtraActionsAvailable","NoTaggedObjectsFound","DashboardListEmptyState","show_my_favorite_dashboard","my_msg","create_first_dashboard","need_help","see_big_picture","unselectAllButtonTitle","sidebarMenu","all_dashboard","my_dashboard","DashboardListExtraActions","DashboardList","newItemsPerPage","search_dashboard","DashboardListPage","my","ApiKeySessionWrapper","renderChildren","routeWithApiKeySession","PublicDashboard","PublicDashboardPage","keySuffix","imgSrc","CardsList","searchText","setSearchText","filteredItems","collapsed","getFieldLabel","$blockScrolling","showPrintMargin","InputField","FieldType","initialValue","minLength","contentAfter","FieldTypeComponent","checkbox","fieldLabel","file","getFieldValue","beforeUpload","upload","textarea","ace","DynamicFormField","fieldProps","FieldComponent","orderedInputs","targetOptions","normalizeSchema","configurationSchema","endsWith","enum","extendedEnum","extra_options","setDefaultValueToFields","getFields","configuration_schema","hasTargetObject","isNewTarget","updateTargetWithValues","getBase64","FileReader","readAsDataURL","hasFilledExtraField","optionName","defaultOptionValue","targetOptionValue","ActionType","pullRight","disabledWhenDirty","AntdFormType","validateFieldsAndScroll","fieldRules","requiredRule","minLengthRule","emailTypeRule","email_error","rule","DynamicFormFields","fields","feedbackIcons","hasFeedback","rules","valuePropName","getValueFromEvent","fileList","helper","setFieldsValue","reducerForActionSet","inProgress","actionName","DynamicFormActions","isFormDirty","useReducer","inProgressActions","setActionInProgress","handleAction","disableWhenDirty","DynamicForm","hideSubmitButton","defaultShowExtraFields","saveText","onSubmit","isSubmitting","setIsSubmitting","isTouched","setIsTouched","showExtraFields","setShowExtraFields","Form","useForm","extraFields","regularFields","handleFinish","normalizeEmptyValuesToNull","msg","handleFinishFailed","errorFields","scrollToField","onFieldsChange","onFinishFailed","currentShowExtraFields","add_params","StepEnum","CreateSourceDialog","selectedType","savingSource","currentStep","successCallback","errorCallback","onCreate","renderTypeSelector","filteredTypes","renderForm","imageFolder","helpTriggerPrefix","HELP_TRIGGER_TYPES","setting_info","formId","createSource","jdbc_info","jdbc_download_name","selectType","data-test-type","sourceType","resetType","previous","progressDot","type_select","wrapSettingsTab","activeItem","onClickCreate","no_datasource","DataSourcesList","dataSourceTypes","newDataSourceDialog","createDataSource","isNewDataSourcePage","showCreateSourceDialog","newDataSourceProps","new_data_source","DataSourcesListPage","EditDataSource","delete_datasource","delete_datasource_confirm","datasource_delete_success","httpResponse","connect_success","connect_failed","connect_failed_tip","formProps","deleteDataSource","connect_test","testConnection","saveDataSource","EditDataSourcePage","DestinationsList","destinationTypes","createDestination","isNewDestinationPage","renderDestinations","no_alert_setting","newDestinationProps","DestinationsListPage","EditDestination","destinationId","deleteDestination","saveDestination","EditDestinationPage","CreateGroupDialog","create_role","role_name","members","addMember","removeMember","addDataSource","removeDataSource","updateDataSource","DeleteGroupButton","button","onGroupDeleted","del_role","del_role_confirm","del_role_success","deleteGroup","GroupsList","built_in","canRemove","built_in_role_delete_tip","newGroup","createGroup","GroupsListPage","GroupName","updateGroupName","DetailsPageSidebar","canAddMembers","onAddMembersClick","canAddDataSources","onAddDataSourcesClick","GroupDataSources","groupId","datasource","view_only","setDataSourcePermissions","full_access","removeGroupDataSource","datasource_delete_failed","viewOnly","change_datasource_permission_failed","allDataSources","alreadyAddedDataSources","ds","search_database","addDataSources","group_no_datasource","GroupDataSourcesPage","group_datasource","GroupMembers","removeGroupMember","remove_member_failed","alreadyAddedUsers","u","add_member","search_member","addMembers","role_no_member","GroupMembersPage","QueriesListEmptyState","archived_query","get_data_from_datasource","all_queries","my_queries","QueriesListExtraActions","QueriesList","controllerRef","unlistenLocationChanges","new_query","search_query","QueriesListPage","Resizable","toggleShortcut","sizeAttribute","setSize","elementRef","wasUsingTouchEventsRef","wasResizedRef","sizeProp","getElementSize","savedSize","targetSize","ease","resizeHandle","shortcuts","resizeEventHandlers","onResize","draggableCoreOptions","onMouseDown","resizeHandles","handle","minConstraints","draggableOpts","QueryFormatters","sql","sqlFormatter","isFormatQueryAvailable","useQueryFlags","canView","canViewSource","canExecute","canFork","canSchedule","useArchiveQuery","archived_search","archived_confirm","archived_tip","archived_failed","doArchiveQuery","SaveQueryError","detailedMessage","SaveQueryConflictError","change_not_save","query_has_change","self_copy_save_and_reload","confirmOverwrite","overwrite_query","overwrite_query_confirm","doSaveQuery","canOverwrite","useUpdateQuery","successMessage","updatedQuery","notificationOptions","useDuplicateQuery","isDuplicating","setIsDuplicating","duplicateQuery","tabName","currentUrlParams","targetUrlParams","keepCurrentUrlParams","CodeBlock","selectAllChildren","copyFeatureEnabled","copyable","ApiKeyDialog","setQuery","updatingApiKey","setUpdatingApiKey","regenerateQueryApiKey","fail_update_api_key","csvUrl","basePath","jsonUrl","csvResultsLabelId","jsonResultsLabelId","re_generate","api_example","result_as_csv","result_as_json","getQueryTags","QueryPageHeader","sourceMode","isDesktop","queryFlags","updateName","updateQuery","autoPublishNamedQueries","query_save_publish_success","useRenameQuery","updateTags","useUpdateQueryTags","archiveQuery","usePublishQuery","unpublishQuery","useUnpublishQuery","openApiKeyDialog","useApiKeyDialog","openPermissionsEditorDialog","usePermissionsEditorDialog","moreActionsMenu","createMenu","isEnabled","unpublish","showAPIKey","divider","edit_source","show_result_only","QueryMetadata","onEditSchedule","last_modified_by","update_time","Tabs","refreshButton","TabWithDeleteButton","canDelete","delete_view","delete_view_confirm","defaultVisualizations","QueryVisualizationTabs","selectedTab","showNewVisualizationButton","canDeleteVisualizations","onChangeTab","onAddVisualization","onDeleteVisualization","canRefresh","tabsProps","tabBarExtraContent","add_view","orderedVisualizations","isFirstVisualization","visId","destroyInactiveTabPane","please_exec_flush","no_permission_exec","QueryExecutionStatus","isCancelling","alertType","showTimer","isCancelButtonAvailable","query_queue","exec_query","loading_query_result","query_run_error","QuerySourceAlerts","dataSourcesAvailable","no_datasource_cant_create_query","apply_permission","no_datasource_or_permission","first_create_datasource","wrapQueryPage","QueryPageWrapper","AddToDashboardDialog","selectedDashboard","setSelectedDashboard","widget_add_dashboard","widget_add_failed","select_query_to_dashboard","autoComplete","filter_by_name","EmbedQueryDialog","enableChangeIframeSize","iframeWidth","iframeHeight","embedUrl","snapshotUrlBuilder","snapshotUrl","embed_query","urlEmbedLabelId","iframeEmbedLabelId","iframe_embed","image_embed","query_embed_sql_error","QueryResultsLink","resultId","resultData","embed","QueryControlDropdown","openAddToDashboardForm","showEmbedDialog","embed_other","queryExecuting","EditVisualizationButton","openVisualizationEditor","edit_view","QueryExecutionMetadata","isQueryExecuting","showEditVisualizationButton","onEditVisualization","extraActions","queryResultData","openAddToDashboardDialog","useAddToDashboardDialog","openEmbedDialog","unusedQuery","useEmbedDialog","redash_cut_data_tip","twoToneColor","runing","data_scanned","flush_time","getSchema","flush_error","wait_retry","SchemaItemColumnType","SchemaItemType","SchemaItem","expanded","onToggle","handleSelect","tableDisplayName","displayName","SchemaLoadingState","expandedFlags","onTableExpand","onItemSelect","listRef","setListRef","recomputeRowHeights","rowCount","columnsLength","rowRenderer","applyFilterOnSchema","filterString","nameFilter","columnFilter","SchemaBrowser","onSchemaUpdate","onOptionsUpdate","setSchema","loadingSchema","setLoadingSchema","refreshSchemaTokenRef","reloadSchema","refreshToken","useDataSourceSchema","refreshSchema","setFilterString","filteredSchema","handleFilterChange","setExpandedFlags","handleSchemaUpdate","search_schema","flush_schema","langTools","acequire","snippetsModule","defineDummySnippets","define","require","snippetText","scope","buildKeywordsFromSchema","tableKeywords","columnKeywords","tableColumnKeywords","score","meta","keywords","buildTableColumnKeywords","tableColumn","schemaCompleterKeywords","updateSchemaCompleter","editorKey","setCompleters","snippetCompleter","keyWordCompleter","textCompleter","identifierRegexps","getCompletions","editor","QuerySnippet","querySnippet","getSnippet","snippet","tabTrigger","getQuerySnippet","QuerySnippetService","AutocompleteToggle","available","tooltipMessage","auto_enable","auto_disable","auto_info","handleClick","AutoLimitCheckbox","limit_1000","not_limit","return_1000","ButtonTooltip","modifiers","mod","upperFirst","sc","humanReadableShortcut","EditorControl","addParameterButtonProps","formatButtonProps","saveButtonProps","executeButtonProps","autocompleteToggleProps","autoLimitCheckboxProps","dataSourceSelectorProps","buttons","ButtonPropsPropType","QueryEditor","autocompleteEnabled","onSelectionChange","editorRef","setEditorRef","editorOptions","behavioursEnabled","enableSnippets","enableBasicAutocompletion","enableLiveAutocompletion","autoScrollEditorIntoView","editorId","handleSelectionChange","rawSelectedQueryText","getTextRange","getRange","initEditor","commands","bindKey","win","mac","blur","notificationCleanup","expiry","politeness","textContent","isDone","cleanupFn","srNotify","command","completer","snippets","snippetManager","parseSnippetFile","paste","getValue","setRange","wrapEnabled","Controls","QueryEditorControls","fetchDataFromJobOrReturnData","rejectErrorResponse","getDatabases","getDatabaseTables","databaseName","DatabricksDataSource","addDisplayNameWithoutDatabaseName","databaseNamePrefix","DatabricksSchemaBrowser","databases","setDatabases","loadingDatabases","setLoadingDatabases","currentDatabaseName","setCurrentDatabaseName","schemas","setSchemas","setCurrentSchema","currentSchemas","currentDatabaseNameRef","loadTableColumns","updatedSchema","refreshAll","getDatabasesPromise","getSchemasPromise","schemasRef","has_columns","defaultDatabaseNameRef","lastUsedDatabase","setCurrentDatabase","selectedDatabase","useDatabricksSchema","databaseFilterString","setDatabaseFilterString","isDatabaseSelectOpen","setIsDatabaseSelectOpen","handleDatabaseFilterChange","cancelHandleDatabaseFilterChange","handleDatabaseSelection","filteredDatabases","filter_table_columns","dropdownClassName","onDropdownVisibleChange","spin","QueryEditorComponents","registerEditorComponent","dataSourceType","useVisualizationTabHandler","firstVisualization","setSelectedTab","hashValue","useAutocompleteFlags","totalLength","calculateTokensCount","setIsEnabled","toggleAutocomplete","useAutoLimitFlags","isAutoLimitAvailable","isChecked","setIsChecked","Notification","getPermissions","requestPermission","showNotification","redashIconUrl","onclick","reducer","updatedProperty","useQueryExecute","isExecuting","loadedInitialResults","executionStatus","cancelCallback","executionState","setExecutionState","queryResultInExecution","executeQuery","newQueryResult","queryExecutor","notifications","queryRef","useQueryParameters","dirtyFlag","setDirtyFlag","updateDirtyFlag","flag","updatedDirtyParameters","WEEKDAYS_SHORT","weekdaysShort","WEEKDAYS_FULL","weekdays","TimeEditor","setTime","showUtc","isUTC","minuteStep","newTime","data-testid","ScheduleDialog","newSchedule","newSeconds","newInterval","setScheduleUntil","refreshOptions","newCompact","oldCompact","hasChanged","flush_hz","intervals","int","cnt","secs","on_time","on_day","setWeekday","ends","setUntilToggle","never","useEditScheduleDialog","Visualization","EditVisualizationDialog","originalOptions","setType","nameChanged","setNameChanged","onOptionsChanged","availableVisualizations","vizTypeId","vizNameId","wrapClassName","view_save_success","view_save_failed","saveVisualization","newVisualization","savedVisualization","updateQueryVisualizations","quit_with_not_save","view_type","view_name","onNameChanged","newName","useEditVisualizationDialog","updatedVisualization","filteredVisualizations","useDeleteVisualization","useUpdateQueryDescription","QuerySourceTypeIcon","QuerySourceDropdownItem","QuerySourceDropdown","data-name","QuerySource","originalQuery","originalQuerySource","setOriginalQuerySource","originalAutoLimit","setOriginalAutoLimit","saveQuery","useQuery","setAllDataSources","dataSourcesLoaded","setDataSourcesLoaded","cancelDataSourceLoading","useQueryDataSources","areParametersDirty","updateParametersDirtyFlag","shouldShowAlert","shouldShowAlertRef","unloadMessage","leave_lost_warning","confirmMessage","leave_lost_confirm","savedOnBeforeUnload","onbeforeunload","currentLocation","useUnsavedChangesAlert","executionError","isExecutionCancelling","autocompleteAvailable","autoLimitAvailable","autoLimitChecked","setAutoLimit","handleQueryEditorChange","updateQueryDescription","querySyntax","queryFormat","handleDataSourceChange","firstDataSourceId","dataSourceIds","availableDataSources","editSchedule","openAddNewParameterDialog","onParameterAdded","handleParameterAdded","useAddNewParameterDialog","handleSchemaItemSelect","schemaItem","selectedText","setSelectedText","doExecuteQuery","skipParametersDirtyFlag","isQuerySaving","setIsQuerySaving","addVisualization","editVisualization","shouldOpenDialog","setShouldOpenDialog","useAddVisualizationDialog","deleteVisualization","schemaOptions","new_desc","data-executing","query_format","query_format_not_support","formattedQueryText","exec_select_query","line","QuerySourcePage","QueryViewButton","tooltipVisible","setTooltipVisible","eventHandlers","pointerEvents","QueryView","setDataSource","isFixedLayout","addingDescription","setAddingDescription","flush_now","toggle_screen","QueryViewPage","VisualizationEmbedHeader","queryDescription","verticalAlign","VisualizationEmbedFooter","queryUrl","hideTimestamp","downloadMenu","open_in_redash","save_as","VisualizationEmbed","setError","setRefreshStartedAt","setQueryResults","refreshQueryResults","hideHeader","hideParametersUI","hideQueryLink","showQueryDescription","view_not_exist","QuerySnippetDialog","handleSubmit","querySnippetId","formFields","desc","query_code","querySnippetsFormId","canEditQuerySnippet","QuerySnippetsList","showSnippetDialog","snippet_script","deleteQuerySnippet","delete_snippet_script","delete_snippet_script_confirm","delete_snippet_script_success","delete_snippet_script_failed","canSave","goToSnippetsList","saveQuerySnippet","isNewOrEditPage","new_snippet_script","no_snippet_script","QuerySnippetsListPage","useOrganizationSettings","settings","setSettings","currentValues","setCurrentValues","isSaving","setIsSaving","newClientConfig","date_format","timeFormat","time_format","SettingsEditorPropTypes","SettingsEditorDefaultProps","dateFormatList","timeFormatList","PlotlySettings","hidden_tool_bar","hide_plotly_mode_bar","FeatureFlagsSettings","feature_flags","feature_show_permissions_control","enable_multiple_owners_tip","send_email_on_failed_scheduled_queries","when_query_error_info_by_email","multi_byte_search_enabled","dashboard_language_tip","BeaconConsentSettings","help_redash_improve_tip","PasswordLoginSettings","isTheOnlyAuthMethod","googleLoginEnabled","ldapLoginEnabled","auth_saml_enabled","auth_password_login_enabled","disable_password_tip","password_login","enable_password_login_tip","enable_password","GoogleLoginSettings","google_login","auth_google_apps_domains","google_login_tip","google_login_auto_reg","SAMLSettings","enable_saml","auth_saml_type","disable","enable","static","dynamic","auth_saml_sso_url","auth_saml_entity_id","auth_saml_x509_cert","auth_saml_metadata_url","auth_saml_nameid_format","AuthSettings","allSettings","authentication","OrganizationSettings","sm","lg","OrganizationSettingsPage","absoluteUrl","urlObj","URL","CreateUserDialog","UsersListActions","UsersList","enable_user","invite_user","disable_user","active_time","save_seccess","email_send_error","email_not_setting","goToUsersList","isNewUserPage","createUser","showCreateUserDialog","renderPageHeader","UsersListPage","pending","UserGroups","linkGroups","useUserGroups","allGroups","setAllGroups","UserInfoForm","isLoadingGroups","saveUser","ApiKeyForm","apiKeyInputId","re_generate_api_key","re_generate_api_key_confirm","ChangePasswordDialog","too_short","newPassword","do_not_match","currentPassword","repeatPassword","errors","fieldError","updatingPassword","validateFields","touched","userData","old_password","password","inputProps","updatePassword","change_password","current_password","Password","new_password","repeat_password","PasswordLinkAlert","passwordLink","PasswordResetForm","setPasswordLink","email_reset_password_send","ResendInvitationForm","email_re_send_invite","PasswordForm","changePassword","ToggleUserForm","toggleUser","buttonProps","EditableUserProfile","setUser","ReadOnlyUserProfile","invite_email","UserProfilePage","ExcelList","excelList","delList","handleDeleteItem","csv","ExcelUpload","setExcelList","setDisabled","getExcelList","customRequest","formData","FormData","ExcelUploadPage","SettingsOpenKey","aiOption","setAiOption","getOpenKey","OpenAI","DeepInsight","Azure","ApiKey","OpenaiApiKey","HttpProxyHost","HttpProxyPort","ApiHost","AzureApiKey","AzureHost","handOpenKey","handleMessage","connectTest","please_enter_api_key","please_enter_api_host","click_here_to_get_apikey","SettingsOpenKeyPage","handleNavigationIntent","hasAttribute","dataset","skipRouter","Spin","setDefaultIndicator","init","notificationKey","onlineStateHandler","unhandledError","setUnhandledError","globalErrorHandler","zh_CN","getElementById","offlineListener"],"mappings":"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A3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,gC,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,wB,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,iC,gBCA3CC,EAAOD,QAAU,IAA0B,gC,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,kC,gBCA3CC,EAAOD,QAAU,IAA0B,mC,gBCA3CC,EAAOD,QAAU,IAA0B,gC,gBCA3CC,EAAOD,QAAU,IAA0B,oC,gBCA3CC,EAAOD,QAAU,IAA0B,kC,gBCA3CC,EAAOD,QAAU,IAA0B,kC,gBCA3CC,EAAOD,QAAU,IAA0B,2C,gBCA3CC,EAAOD,QAAU,IAA0B,iC,gBCA3CC,EAAOD,QAAU,IAA0B,wC,gBCA3CC,EAAOD,QAAU,IAA0B,iC,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,gC,gBCA3CC,EAAOD,QAAU,IAA0B,kC,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,6B,gBCA3CC,EAAOD,QAAU,IAA0B,6B,gBCA3CC,EAAOD,QAAU,IAA0B,6B,gBCA3CC,EAAOD,QAAU,IAA0B,oC,gBCA3CC,EAAOD,QAAU,IAA0B,qC,gBCA3CC,EAAOD,QAAU,IAA0B,sC,gBCA3CC,EAAOD,QAAU,IAA0B,iE,gBCA3CC,EAAOD,QAAU,IAA0B,4D,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,gC,gBCA3CC,EAAOD,QAAU,IAA0B,wC,gBCA3CC,EAAOD,QAAU,IAA0B,2C,gBCA3CC,EAAOD,QAAU,IAA0B,gC,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,iC,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,gC,gBCA3CC,EAAOD,QAAU,IAA0B,+B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,6B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,+B,gBCA3CC,EAAOD,QAAU,IAA0B,6B,gBCA3CC,EAAOD,QAAU,IAA0B,kC,gBCA3CC,EAAOD,QAAU,IAA0B,6B,gBCA3CC,EAAOD,QAAU,IAA0B,0B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,0B,gBCA3CC,EAAOD,QAAU,IAA0B,+B,gBCA3CC,EAAOD,QAAU,IAA0B,6B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,kC,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,iC,gBCA3CC,EAAOD,QAAU,IAA0B,gC,gBCA3CC,EAAOD,QAAU,IAA0B,oC,gBCA3CC,EAAOD,QAAU,IAA0B,+B,gBCA3CC,EAAOD,QAAU,IAA0B,+B,gBCA3CC,EAAOD,QAAU,IAA0B,kC,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,iC,gBCA3CC,EAAOD,QAAU,IAA0B,uC,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,iC,gBCA3CC,EAAOD,QAAU,IAA0B,oC,gBCA3CC,EAAOD,QAAU,IAA0B,6B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,+B,gBCA3CC,EAAOD,QAAU,IAA0B,yC,gBCA3CC,EAAOD,QAAU,IAA0B,sC,gBCA3CC,EAAOD,QAAU,IAA0B,oC,gBCA3CC,EAAOD,QAAU,IAA0B,iC,gBCA3CC,EAAOD,QAAU,IAA0B,yC,gBCA3CC,EAAOD,QAAU,IAA0B,mC,gBCA3CC,EAAOD,QAAU,IAA0B,sC,gBCA3CC,EAAOD,QAAU,IAA0B,mD,gBCA3CC,EAAOD,QAAU,IAA0B,qC,gBCA3CC,EAAOD,QAAU,IAA0B,iC,gBCA3CC,EAAOD,QAAU,IAA0B,mC,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,yB,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,8B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,2B,gBCA3CC,EAAOD,QAAU,IAA0B,gC,gBCA3CC,EAAOD,QAAU,IAA0B,wB,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,4B,gBCA3CC,EAAOD,QAAU,IAA0B,gC,gBCA3CC,EAAOD,QAAU,IAA0B,0B,gBCA3CC,EAAOD,QAAU,IAA0B,uB,gBCA3CC,EAAOD,QAAU,IAA0B,kC,gBCA3CC,EAAOD,QAAU,IAA0B,sC,gBCA3CC,EAAOD,QAAU,IAA0B,6C,gBCA3CC,EAAOD,QAAU,IAA0B,kC,gBCA3CC,EAAOD,QAAU,IAA0B,sB,gBCA3CC,EAAOD,QAAU,IAA0B,uB,gBCA3CC,EAAOD,QAAU,IAA0B,mB,gBCA3CC,EAAOD,Q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","file":"app.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([739,2]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"images/icon_small.png\";","module.exports = __webpack_public_path__ + \"images/dashboard-example/dashboards_prettify_1.jpg\";","module.exports = __webpack_public_path__ + \"images/dashboard-example/dashboards_prettify_2.jpg\";","module.exports = __webpack_public_path__ + \"images/dashboard-example/dashboards_prettify_3.jpg\";","module.exports = __webpack_public_path__ + \"images/db-logos/csv.png\";","module.exports = __webpack_public_path__ + \"images/avatar.svg\";","module.exports = __webpack_public_path__ + \"images/copy.png\";","module.exports = \"# DeepBI 使用说明\\n\\n\\n## 1，配置 API KEY\\n\\n- [设置]-[API KEY]\\n\\n### 1.1, 关于 OPENAI API KEY:\\n\\n- API KEY 需要 OPENAI GPT4 模型的访问权限\\n- 后续会陆续支持其他大模型，敬请期待\\n\\n### 1.2, 关于 代理:\\n\\n- OPENAI API 访问可能需要科学上网,请小伙伴们自行配置代理\\n\\n- KEY和代理配置完毕后，配置完毕后，点击【连接测试】，显示 测试通过 即可。\\n测试不通过的情况，请自行检查 API KEY是否可用，以及代理是否配置正确。\\n\\n![doc_0.png](/static/images/cn/img/doc_0.png)\\n\\n### 1.3, 关于 DeepInsight API KEY:\\n- 可以点击 设置key 下面的连接，进行注册，获取API Key.(可以加我们微信群(首页联系我们)，申请免费的Token)\\n\\n![doc_0.png](/static/images/cn/img/us_key.png)\\n\\n## 2, 配置 数据源\\n\\n- 目前支持的数据源有， MySql，Doris, starRocks, PostgreSql, 和 CSV\\n- 后续会陆续支持更多数据源，如sqlserver，clickhouse，SQLite等，敬请期待\\n\\n### 2.1, CSV数据源配置:\\n\\n- 【设置】-【CSV数据源】-【点击上传】- 选择需上传的csv文件即可\\n\\n![doc.png](/static/images/cn/img/doc_1.png)\\n\\n### 2.2, [MySql，Doris, starRocks, PostgreSql] 数据源配置:\\n\\n- 【设置】-【数据源】-【新建一个数据源】\\n- 选择数据源，填写数据库信息，并保存\\n- 配置完毕后，点击【连接测试】，显示 连接成功 即可\\n\\n![doc.png](/static/images/cn/img/doc_2.png)\\n\\n![doc.png](/static/images/cn/img/doc_3.png)\\n\\n## 3, 数据分析\\n\\n### 3.1, [数据分析] - [对话]\\n\\n#### 3.1.1. 勾选数据（数据源和表）\\n\\n- 勾选的数据会作为对话数据分析中AI的基础数据\\n\\n#### 3.1.2, 填写注释，提交AI检测\\n\\n- 尽量完善表格和字段注释，协助AI更好的理解这些数据，使Agent更好的完成数据分析任务\\n\\n![doc.png](/static/images/cn/img/doc_4.png)\\n\\n#### 3.1.3, 修改未通过的注释，再次提交\\n\\n- AI会反馈未通过的注释，请修改补充后，再次提交，直到所有注释通过检测\\n\\n![doc.png](/static/images/cn/img/doc_5.png)\\n\\n#### 3.1.4, 所有注释检测通过后，开始对话\\n\\n- 🔥 注: 若要生成持久化报表，请使用【报表】-【报表生成】，数据分析中出现的报表均为临时报表，不支持持久化\\n\\n![doc.png](/static/images/cn/img/doc_6.png)\\n\\n#### 3.1.5, 重选数据源\\n\\n- 若要重选数据源，进行新一轮对话，请点击【新对话】，重置当前对话，当前对话记录会存储进【历史对话】中\\n\\n![doc.png](/static/images/cn/img/doc_7.png)\\n\\n### 3.2, 【数据分析】-【历史对话】\\n- 可查看历史对话记录\\n\\n![doc.png](/static/images/cn/img/doc_8.png)\\n\\n## 4, 报表 \\n\\n### 4.1,【报表】-【报表生成】\\n\\n#### 4.1.1. Check the data (data source and table)\\n\\n- 勾选的数据会作为报表生成中AI的基础数据\\n- 🔥注: 目前CSV数据源不支持【报表生成】\\n\\n#### 4.1.2, 填写注释，提交AI检测\\n\\n- 尽量完善表格和字段注释，协助AI更好的理解这些数据，使Agent更好的完成报表生成任务\\n\\n![doc.png](/static/images/cn/img/doc_9.png)\\n\\n#### 4.1.3, 修改未通过的注释，再次提交\\n\\n- AI会反馈未通过的注释，请修改补充后，再次提交, 直到所有注释检测通过\\n\\n![doc.png](/static/images/cn/img/doc_10.png)\\n\\n#### 4.1.4, 所有注释检测通过后，开始对话生成报表\\n\\n- 点击【编辑报表】，可直接编辑 新生成的报表.\\n- 🔥 注: 【报表生成】模块目前仅支持持久化报表生成任务，分析类问题，请使用【数据分析】-【对话】\\n\\n![doc.png](/static/images/cn/img/doc_11.png)\\n\\n#### 4.1.5, 重选数据源\\n\\n- 若要重选数据源，进行新一轮对话，请点击【新对话】，重置当前对话\\n\\n![doc.png](/static/images/cn/img/doc_12.png)\\n\\n### 4.2, 【报表】-【报表列表】\\n\\n#### 4.2.1, 报表状态\\n\\n- 【报表生成】中新生成的报表会出现在【报表列表】中，此时报表为 草稿 状态，若想要在【仪表盘】展示该报表，请点击 【发布】 按钮，将报表状态变更为 已发布 状态\\n\\n![doc.png](/static/images/cn/img/doc_13.png)\\n\\n![doc.png](/static/images/cn/img/doc_14.png)\\n\\n#### 4.2.2, 修改SQL语句\\n\\n- 点击【编辑源】，可自定义修改报表的SQL语句.\\n\\n![doc.png](/static/images/cn/img/doc_15.png)\\n\\n#### 4.2.3, 修改图表样式\\n\\n- 点击【编辑可视化】，可自定义编辑 可视化图表样式\\n- 点击【新增可视化】，可增加可视化图表\\n\\n![doc.png](/static/images/cn/img/doc_16.png)\\n\\n![doc.png](/static/images/cn/img/doc_17.png)\\n\\n#### 4.2.4, 删除报表\\n\\n- 点击【归档】，可将报表状态变更为 归档（删除）状态\\n\\n![doc.png](/static/images/cn/img/doc_18.png)\\n\\n### 5, 仪表盘\\n\\n#### 5.1, 新建仪表盘\\n\\n- 【仪表盘】-【新建】- 编辑仪表盘\\n\\n![doc.png](/static/images/cn/img/doc_19.png)\\n\\n- 将刚生成的【已发布 】报表，添加进仪表盘\\n\\n![doc.png](/static/images/cn/img/doc_20.png)\\n\\n- 点击【发布】仪表盘\\n\\n![doc.png](/static/images/cn/img/doc_21.png)\\n\\n#### 5.1.2 分享仪表盘 \\n\\n- 点击【发布】后，即可分享仪表盘\\n\\n![doc.png](/static/images/cn/img/doc_22.png)\\n\\n#### 5.2 仪表盘美化\\n- 选中一个已经存在的仪表盘\\n![doc.png](/static/images/cn/img/doc_22_1.png)\\n- 点击进入\\n![doc.png](/static/images/cn/img/doc_22_2.png)\\n- 选择模板，点击应用\\n![doc.png](/static/images/cn/img/doc_22_3.png)\\n- 进入美化大屏，等待AI自动转换完成\\n![doc.png](/static/images/cn/img/doc_22_4.png)\\n![doc.png](/static/images/cn/img/doc_22_5.png)\\n- 转换完成\\n![doc.png](/static/images/cn/img/doc_22_6.png)\\n- 点击查看大屏\\n![doc.png](/static/images/cn/img/doc_22_7.png)\\n\\n## 6, 自动数据分析 \\n\\n#### 6.1 添加分析任务 \\n1. 点击自动数据分析\\n2. 选择自动数据分析\\n3. 点击下拉框\\n4. 选择数据源\\n\\n![doc.png](/static/images/cn/img/doc_23.png)\\n\\n#### 6.2 确认报告所需表  \\n1. 选择数据表备注表字段信息\\n2. 选择报告使用的表，可以选择多个表\\n3. 备注表字段信息\\n4. 然后提交\\n\\n![doc.png](/static/images/cn/img/doc_25.png)\\n\\n#### 6.3 等待报告完成  \\n1. 历史分析，查看报告状态\\n\\n![doc.png](/static/images/cn/img/doc_26.png)\\n\\n2. 自动更改为生成中\\n![doc.png](/static/images/cn/img/doc_27.png)\\n\\n4. 当状态更换为成功时\\n![doc.png](/static/images/cn/img/doc_28.png)\\n\\n6. 查看报告详情\\n![doc.png](/static/images/cn/img/doc_29.png)\\n\"","module.exports = \"# DeepBI User Manual\\n\\n## 1，Configure API KEY\\n\\n- [Setting]-[API KEY]\\n\\n### 1.1, About OPENAI API KEY:\\n\\n- Requires access to gpt4 models.\\n- Other large models will be supported in the future, so stay tuned.\\n\\n### 1.2, About the proxy:\\n\\n- OPENAI API access may require proxy configuration, please configure the proxy yourself.\\n\\n- After the KEY and proxy are configured, click [Connection Test] and \\\"Test success\\\" will be displayed. If the test\\n  fails, please check whether the API KEY is available and whether the proxy is configured correctly.\\n\\n![doc_0.png](/static/images/en/img/doc_0.png)\\n\\n### 1.3, About DeepInsight API KEY:\\n- You can click the connection below the set key to register and get the API Key.(You can add our wechat group (contact us on the home page) to apply for a free Token.)\\n\\n![doc_0.png](/static/images/en/img/us_key.png)\\n\\n## 2,Configure Data Source\\n\\n- Currently supported data sources are MySql, Doris, starRocks, PostgreSql, and CSV. More data sources will be supported\\n  in the future, such as sqlserver, clickhouse, SQLite, etc., so stay tuned.\\n\\n### 2.1, CSV data source configure:\\n\\n- [Setting]-[CSV Data Source]-[Click to upload]-select the csv file to be uploaded\\n\\n![doc.png](/static/images/en/img/doc_1.png)\\n\\n### 2.2, [MySql, Doris, starRocks, PostgreSql] data source configure:\\n\\n- [Setting]-[Data Sources]-[New Data Source]\\n- Select the data source, fill in the database information, and save. After the configuration is completed,\\n  click [Test Connection ] and \\\"Connection Success\\\" will be displayed.\\n\\n![doc.png](/static/images/en/img/doc_2.png)\\n\\n![doc.png](/static/images/en/img/doc_3.png)\\n\\n## 3,Chat Builder\\n\\n### 3.1, [Chat Builder] - [Dialogue]\\n\\n#### 3.1.1. Check the data (data source and table)\\n\\n- The checked data will be used as the basic data for AI in conversation data analysis.\\n\\n#### 3.1.2, fill in the comments and submit for AI detection\\n\\n- Try to improve the form and field annotations as much as possible to help AI better understand the data and enable the\\n  Agent to better complete the data analysis task.\\n\\n![doc.png](/static/images/en/img/doc_4.png)\\n\\n#### 3.1.3, modify the failed comments and submit again\\n\\n- AI will feedback the comments that have not passed. Please revise and add them and submit again until all the comments\\n  pass.\\n\\n![doc.png](/static/images/en/img/doc_5.png)\\n\\n#### 3.1.4, after all annotations pass the detection, start the conversation\\n\\n- 🔥 Note: If you want to generate a persistent report, please use [Query Builder]-[Report Generation]. The reports that\\n  appear in [Chat Builder] are temporary reports and do not support persistence.\\n\\n![doc.png](/static/images/en/img/doc_6.png)\\n\\n#### 3.1.5, reselect data source\\n\\n- If you want to reselect the data source and start a new round of dialogue, please click [New Dialogue] to reset the\\n  current conversation. The current conversation record will be stored in [History Dialogue].\\n\\n![doc.png](/static/images/en/img/doc_7.png)\\n\\n### 3.2, [Chat Builder] - [History Dialogue]\\nCan view historical conversation records\\n\\n![doc.png](/static/images/en/img/doc_8.png)\\n\\n## 4, Query Builder \\n\\n### 4.1, [Query Builder]-[Report Generation]\\n\\n#### 4.1.1. Check the data (data source and table)\\n\\n- The checked data will be used as the basic data of AI in report generation.\\n- 🔥Note: Currently the CSV data source does\\n  not support [Report Generation]\\n\\n#### 4.1.2, fill in the comments and submit for AI detection\\n\\n- Try to improve the form and field annotations as much as possible to help AI better understand the data and enable the\\n  Agent to better complete the report generation task.\\n\\n![doc.png](/static/images/en/img/doc_9.png)\\n\\n#### 4.1.3, modify the failed comments and submit again\\n\\n- AI will feedback the annotations that have failed. Please revise and add them and submit again until all annotations\\n  pass the test.\\n\\n![doc.png](/static/images/en/img/doc_10.png)\\n\\n#### 4.1.4, after all annotations pass the detection, start the dialogue to generate reports\\n\\n- Click [Edit Report] to directly edit the newly generated report.\\n- 🔥 Note: The [Report Generation] module currently only supports persistent report generation tasks. For analysis\\n  questions, please use [Chat Builder] - [Dialogue].\\n\\n![doc.png](/static/images/en/img/doc_11.png)\\n\\n#### 4.1.5, reselect data source\\n\\n- If you want to reselect the data source and start a new round of dialogue, please click [New Dialogue] to reset the current dialogue.\\n\\n![doc.png](/static/images/en/img/doc_12.png)\\n\\n### 4.2, [Query]-[Report List]\\n\\n#### 4.2.1, Report status\\n\\n- The newly generated report in [Report Generation] will appear in the [Report List]. At this time, the report is in\\n  draft status. If you want to display the report in the [Dashboards], please click the [Publish] button, change report\\n  status to published status.\\n\\n![doc.png](/static/images/en/img/doc_13.png)\\n\\n![doc.png](/static/images/en/img/doc_14.png)\\n\\n#### 4.2.2, Modify SQL statement\\n\\n- Click [Edit Source] to customize the SQL statement of the report.\\n\\n![doc.png](/static/images/en/img/doc_15.png)\\n\\n#### 4.2.3, modify chart style\\n\\n- Click [Edit Visualization] to customize and edit the visualization chart style.\\n- Click [Add Visualization] to add a visual chart.\\n\\n![doc.png](/static/images/en/img/doc_16.png)\\n\\n![doc.png](/static/images/en/img/doc_17.png)\\n\\n#### 4.2.4. Deleting a report\\n\\n- Click [Archive] to change the report status to archive (delete) status.\\n\\n![doc.png](/static/images/en/img/doc_18.png)\\n\\n### 5, Dashboards\\n\\n#### 5.1, create a new dashboard\\n\\n- [Dashboards]-[Create]-Edit Dashboard\\n\\n![doc.png](/static/images/en/img/doc_19.png)\\n\\n- Add the newly generated Published report to the dashboard\\n\\n![doc.png](/static/images/en/img/doc_20.png)\\n\\n- Click [Publish] Dashboard\\n\\n![doc.png](/static/images/en/img/doc_21.png)\\n\\n#### 5.1.2 Share Dashboard \\n\\n- After clicking [Publish], you can share the dashboard\\n\\n![doc.png](/static/images/en/img/doc_22.png)\\n\\n#### 5.2 Dashboards Prettify\\n- Select an existing dashboard\\n![doc.png](/static/images/en/img/doc_22_1.png)\\n- Click to enter\\n![doc.png](/static/images/en/img/doc_22_2.png)\\n- Select the template and click Apply\\n![doc.png](/static/images/en/img/doc_22_3.png)\\n- Enter the beautification screen and wait for the AI automatic conversion to complete\\n![doc.png](/static/images/en/img/doc_22_4.png)\\n![doc.png](/static/images/en/img/doc_22_5.png)\\n- Conversion complete\\n![doc.png](/static/images/en/img/doc_22_6.png)\\n- Click to view large screen\\n![doc.png](/static/images/en/img/doc_22_7.png)\\n\\n## 6. Automatic Data Analysis\\n\\n#### 6.1 Add Analysis Task\\n1. Click on Automatic Data Analysis.\\n2. Choose Automatic Data Analysis.\\n3. Click on the dropdown.\\n4. Select the data source.\\n\\n![doc.png](/static/images/en/img/doc_23.png)\\n\\n#### 6.2 Confirm Required Tables for the Report\\n1. Select table remarks and field information.\\n2. Choose the tables to be used in the report; multiple tables can be selected.\\n3. Provide remarks for table fields.\\n4. Submit.\\n\\n![doc.png](/static/images/en/img/doc_25.png)\\n\\n#### 6.3 Wait for Report Completion\\n1. In historical analysis, check the report status.\\n\\n![doc.png](/static/images/en/img/doc_26.png)\\n2. Automatically changes to generating.\\n\\n![doc.png](/static/images/en/img/doc_27.png)\\n3. When the status changes to successful.\\n\\n![doc.png](/static/images/en/img/doc_28.png)\\n4. View the report details.\\n\\n![doc.png](/static/images/en/img/doc_29.png)\\n\\n\\n\\n\"","module.exports = __webpack_public_path__ + \"data/0962607.countries.geo.json\";","module.exports = __webpack_public_path__ + \"data/eed73d1.usa-albers.geo.json\";","module.exports = __webpack_public_path__ + \"data/dac34f3.japan.prefectures.geo.json\";","module.exports = __webpack_public_path__ + \"data/47283ba.china.geo.json\";","module.exports = __webpack_public_path__ + \"data/9301351.110000.geo.json\";","module.exports = __webpack_public_path__ + \"data/0e6cd79.120000.geo.json\";","module.exports = __webpack_public_path__ + \"data/45c8689.130000.geo.json\";","module.exports = __webpack_public_path__ + \"data/0f3fc7b.140000.geo.json\";","module.exports = __webpack_public_path__ + \"data/12c7237.150000.geo.json\";","module.exports = __webpack_public_path__ + \"data/867ad03.210000.geo.json\";","module.exports = __webpack_public_path__ + \"data/06a8c43.220000.geo.json\";","module.exports = __webpack_public_path__ + \"data/b80aa15.230000.geo.json\";","module.exports = __webpack_public_path__ + \"data/01e841f.310000.geo.json\";","module.exports = __webpack_public_path__ + \"data/5cf6597.320000.geo.json\";","module.exports = __webpack_public_path__ + \"data/44e6ca4.330000.geo.json\";","module.exports = __webpack_public_path__ + \"data/c4a8143.340000.geo.json\";","module.exports = __webpack_public_path__ + \"data/cc485e1.350000.geo.json\";","module.exports = __webpack_public_path__ + \"data/93d9fa4.360000.geo.json\";","module.exports = __webpack_public_path__ + \"data/9d7f18d.370000.geo.json\";","module.exports = __webpack_public_path__ + \"data/72348fa.410000.geo.json\";","module.exports = __webpack_public_path__ + \"data/33f1433.420000.geo.json\";","module.exports = __webpack_public_path__ + \"data/937ee66.430000.geo.json\";","module.exports = __webpack_public_path__ + \"data/fb5171d.440000.geo.json\";","module.exports = __webpack_public_path__ + \"data/aa99dac.450000.geo.json\";","module.exports = __webpack_public_path__ + \"data/5794562.460000.geo.json\";","module.exports = __webpack_public_path__ + \"data/1cdd0ff.500000.geo.json\";","module.exports = __webpack_public_path__ + \"data/b51f531.510000.geo.json\";","module.exports = __webpack_public_path__ + \"data/1344c0c.520000.geo.json\";","module.exports = __webpack_public_path__ + \"data/9ad8406.530000.geo.json\";","module.exports = __webpack_public_path__ + \"data/8df5257.540000.geo.json\";","module.exports = __webpack_public_path__ + \"data/e60e9ff.610000.geo.json\";","module.exports = __webpack_public_path__ + \"data/307e6d4.620000.geo.json\";","module.exports = __webpack_public_path__ + \"data/1253e95.630000.geo.json\";","module.exports = __webpack_public_path__ + \"data/b230800.640000.geo.json\";","module.exports = __webpack_public_path__ + \"data/8f5c51f.650000.geo.json\";","module.exports = __webpack_public_path__ + \"data/5148730.710000.geo.json\";","module.exports = __webpack_public_path__ + \"data/561839a.810000.geo.json\";","module.exports = __webpack_public_path__ + \"data/d4c0f28.820000.geo.json\";","var map = {\n\t\"./en-SG\": 481,\n\t\"./en-SG.js\": 481,\n\t\"./en-au\": 482,\n\t\"./en-au.js\": 482,\n\t\"./en-ca\": 483,\n\t\"./en-ca.js\": 483,\n\t\"./en-gb\": 484,\n\t\"./en-gb.js\": 484,\n\t\"./en-ie\": 485,\n\t\"./en-ie.js\": 485,\n\t\"./en-il\": 486,\n\t\"./en-il.js\": 486,\n\t\"./en-nz\": 487,\n\t\"./en-nz.js\": 487\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 891;","var map = {\n\t\"./analysis.png\": 1618,\n\t\"./avatar.svg\": 443,\n\t\"./cn/img/bios.png\": 1619,\n\t\"./cn/img/bios1.png\": 1620,\n\t\"./cn/img/bios2.png\": 1621,\n\t\"./cn/img/bios3.png\": 1622,\n\t\"./cn/img/cmd.jpg\": 1623,\n\t\"./cn/img/doc_0.png\": 1624,\n\t\"./cn/img/doc_1.png\": 1625,\n\t\"./cn/img/doc_10.png\": 1626,\n\t\"./cn/img/doc_11.png\": 1627,\n\t\"./cn/img/doc_12.png\": 1628,\n\t\"./cn/img/doc_13.png\": 1629,\n\t\"./cn/img/doc_14.png\": 1630,\n\t\"./cn/img/doc_15.png\": 1631,\n\t\"./cn/img/doc_16.png\": 1632,\n\t\"./cn/img/doc_17.png\": 1633,\n\t\"./cn/img/doc_18.png\": 1634,\n\t\"./cn/img/doc_19.png\": 1635,\n\t\"./cn/img/doc_2.png\": 1636,\n\t\"./cn/img/doc_20.png\": 1637,\n\t\"./cn/img/doc_21.png\": 1638,\n\t\"./cn/img/doc_22.png\": 1639,\n\t\"./cn/img/doc_22_1.png\": 1640,\n\t\"./cn/img/doc_22_2.png\": 1641,\n\t\"./cn/img/doc_22_3.png\": 1642,\n\t\"./cn/img/doc_22_4.png\": 1643,\n\t\"./cn/img/doc_22_5.png\": 1644,\n\t\"./cn/img/doc_22_6.png\": 1645,\n\t\"./cn/img/doc_22_7.png\": 1646,\n\t\"./cn/img/doc_23.png\": 1647,\n\t\"./cn/img/doc_24.png\": 1648,\n\t\"./cn/img/doc_25.png\": 1649,\n\t\"./cn/img/doc_26.png\": 1650,\n\t\"./cn/img/doc_27.png\": 1651,\n\t\"./cn/img/doc_28.png\": 1652,\n\t\"./cn/img/doc_29.png\": 1653,\n\t\"./cn/img/doc_3.png\": 1654,\n\t\"./cn/img/doc_4.png\": 1655,\n\t\"./cn/img/doc_5.png\": 1656,\n\t\"./cn/img/doc_6.png\": 1657,\n\t\"./cn/img/doc_7.png\": 1658,\n\t\"./cn/img/doc_8.png\": 1659,\n\t\"./cn/img/doc_9.png\": 1660,\n\t\"./cn/img/docker_err.jpg\": 1661,\n\t\"./cn/img/download.png\": 1662,\n\t\"./cn/img/ip.png\": 1663,\n\t\"./cn/img/us_key.png\": 1664,\n\t\"./copy.png\": 604,\n\t\"./dashboard-example/dashboards_prettify_1.jpg\": 320,\n\t\"./dashboard-example/dashboards_prettify_2.jpg\": 425,\n\t\"./dashboard-example/dashboards_prettify_3.jpg\": 426,\n\t\"./db-logos/Cassandra.png\": 1665,\n\t\"./db-logos/arangodb.png\": 1666,\n\t\"./db-logos/athena.png\": 1667,\n\t\"./db-logos/aws_es.png\": 1668,\n\t\"./db-logos/axibasetsd.png\": 1669,\n\t\"./db-logos/azure_kusto.png\": 1670,\n\t\"./db-logos/bigquery.png\": 1671,\n\t\"./db-logos/bigquery_gce.png\": 1672,\n\t\"./db-logos/clickhouse.png\": 1673,\n\t\"./db-logos/cloudwatch.png\": 1674,\n\t\"./db-logos/cloudwatch_insights.png\": 1675,\n\t\"./db-logos/cockroach.png\": 1676,\n\t\"./db-logos/corporate_memory.png\": 1677,\n\t\"./db-logos/couchbase.png\": 1678,\n\t\"./db-logos/csv.png\": 429,\n\t\"./db-logos/csv1.png\": 1679,\n\t\"./db-logos/databend.png\": 1680,\n\t\"./db-logos/databricks.png\": 1681,\n\t\"./db-logos/db2.png\": 1682,\n\t\"./db-logos/dgraph.png\": 1683,\n\t\"./db-logos/doris.png\": 1684,\n\t\"./db-logos/drill.png\": 1685,\n\t\"./db-logos/druid.png\": 1686,\n\t\"./db-logos/dynamodb_sql.png\": 1687,\n\t\"./db-logos/elasticsearch.png\": 1688,\n\t\"./db-logos/elasticsearch2.png\": 1689,\n\t\"./db-logos/elasticsearch2_OpenDistroSQLElasticSearch.png\": 1690,\n\t\"./db-logos/elasticsearch2_XPackSQLElasticSearch.png\": 1691,\n\t\"./db-logos/exasol.png\": 1692,\n\t\"./db-logos/firebolt.png\": 1693,\n\t\"./db-logos/google_analytics.png\": 1694,\n\t\"./db-logos/google_spreadsheets.png\": 1695,\n\t\"./db-logos/graphite.png\": 1696,\n\t\"./db-logos/hive.png\": 1697,\n\t\"./db-logos/hive_http.png\": 1698,\n\t\"./db-logos/impala.png\": 1699,\n\t\"./db-logos/influxdb.png\": 1700,\n\t\"./db-logos/jirajql.png\": 1701,\n\t\"./db-logos/json.png\": 1702,\n\t\"./db-logos/kibana.png\": 1703,\n\t\"./db-logos/kylin.png\": 1704,\n\t\"./db-logos/mapd.png\": 1705,\n\t\"./db-logos/memsql.png\": 1706,\n\t\"./db-logos/mongodb.png\": 1707,\n\t\"./db-logos/mssql.png\": 1708,\n\t\"./db-logos/mssql_odbc.png\": 1709,\n\t\"./db-logos/mysql.png\": 1710,\n\t\"./db-logos/nz.png\": 1711,\n\t\"./db-logos/oracle.png\": 1712,\n\t\"./db-logos/pg.png\": 1713,\n\t\"./db-logos/phoenix.png\": 1714,\n\t\"./db-logos/pinot.png\": 1715,\n\t\"./db-logos/presto.png\": 1716,\n\t\"./db-logos/prometheus.png\": 1717,\n\t\"./db-logos/python.png\": 1718,\n\t\"./db-logos/qubole.png\": 1719,\n\t\"./db-logos/rds_mysql.png\": 1720,\n\t\"./db-logos/redshift.png\": 1721,\n\t\"./db-logos/redshift_iam.png\": 1722,\n\t\"./db-logos/results.png\": 1723,\n\t\"./db-logos/rockset.png\": 1724,\n\t\"./db-logos/salesforce.png\": 1725,\n\t\"./db-logos/scylla.png\": 1726,\n\t\"./db-logos/snowflake.png\": 1727,\n\t\"./db-logos/sparql_endpoint.png\": 1728,\n\t\"./db-logos/sqlite.png\": 1729,\n\t\"./db-logos/starrocks.png\": 1730,\n\t\"./db-logos/treasuredata.png\": 1731,\n\t\"./db-logos/trino.png\": 1732,\n\t\"./db-logos/uptycs.png\": 1733,\n\t\"./db-logos/url.png\": 1734,\n\t\"./db-logos/vertica.png\": 1735,\n\t\"./db-logos/yandex_appmetrika.png\": 1736,\n\t\"./db-logos/yandex_metrika.png\": 1737,\n\t\"./destinations/chatwork.png\": 1738,\n\t\"./destinations/email.png\": 1739,\n\t\"./destinations/hangouts_chat.png\": 1740,\n\t\"./destinations/hipchat.png\": 1741,\n\t\"./destinations/mattermost.png\": 1742,\n\t\"./destinations/microsoft_teams_webhook.png\": 1743,\n\t\"./destinations/pagerduty.png\": 1744,\n\t\"./destinations/slack.png\": 1745,\n\t\"./destinations/webhook.png\": 1746,\n\t\"./en/img/bios1.png\": 1747,\n\t\"./en/img/bios2.png\": 1748,\n\t\"./en/img/bios3.png\": 1749,\n\t\"./en/img/cmd.png\": 1750,\n\t\"./en/img/doc_0.png\": 1751,\n\t\"./en/img/doc_1.png\": 1752,\n\t\"./en/img/doc_10.png\": 1753,\n\t\"./en/img/doc_11.png\": 1754,\n\t\"./en/img/doc_12.png\": 1755,\n\t\"./en/img/doc_13.png\": 1756,\n\t\"./en/img/doc_14.png\": 1757,\n\t\"./en/img/doc_15.png\": 1758,\n\t\"./en/img/doc_16.png\": 1759,\n\t\"./en/img/doc_17.png\": 1760,\n\t\"./en/img/doc_18.png\": 1761,\n\t\"./en/img/doc_19.png\": 1762,\n\t\"./en/img/doc_2.png\": 1763,\n\t\"./en/img/doc_20.png\": 1764,\n\t\"./en/img/doc_21.png\": 1765,\n\t\"./en/img/doc_22.png\": 1766,\n\t\"./en/img/doc_22_1.png\": 1767,\n\t\"./en/img/doc_22_2.png\": 1768,\n\t\"./en/img/doc_22_3.png\": 1769,\n\t\"./en/img/doc_22_4.png\": 1770,\n\t\"./en/img/doc_22_5.png\": 1771,\n\t\"./en/img/doc_22_6.png\": 1772,\n\t\"./en/img/doc_22_7.png\": 1773,\n\t\"./en/img/doc_23.png\": 1774,\n\t\"./en/img/doc_24.png\": 1775,\n\t\"./en/img/doc_25.png\": 1776,\n\t\"./en/img/doc_26.png\": 1777,\n\t\"./en/img/doc_27.png\": 1778,\n\t\"./en/img/doc_28.png\": 1779,\n\t\"./en/img/doc_29.png\": 1780,\n\t\"./en/img/doc_3.png\": 1781,\n\t\"./en/img/doc_4.png\": 1782,\n\t\"./en/img/doc_5.png\": 1783,\n\t\"./en/img/doc_6.png\": 1784,\n\t\"./en/img/doc_7.png\": 1785,\n\t\"./en/img/doc_8.png\": 1786,\n\t\"./en/img/doc_9.png\": 1787,\n\t\"./en/img/docker_err.png\": 1788,\n\t\"./en/img/ip.png\": 1789,\n\t\"./en/img/us_key.png\": 1790,\n\t\"./favicon-16x16.png\": 1791,\n\t\"./favicon-32x32.png\": 1792,\n\t\"./favicon-96x96.png\": 1793,\n\t\"./fixtures/map-tile.png\": 1794,\n\t\"./google_logo.svg\": 1795,\n\t\"./gravatar.png\": 1796,\n\t\"./icon_small.png\": 104,\n\t\"./illustrations/alert.svg\": 1797,\n\t\"./illustrations/dashboard.svg\": 1798,\n\t\"./illustrations/no-query-results.svg\": 1799,\n\t\"./illustrations/query.svg\": 1800,\n\t\"./loading.png\": 1801,\n\t\"./loading1.png\": 1802,\n\t\"./logo.png\": 1803,\n\t\"./logo_white.png\": 1804,\n\t\"./next.png\": 1805,\n\t\"./retry.png\": 1806,\n\t\"./send-active.png\": 1807,\n\t\"./send-default.png\": 1808\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1617;","module.exports = __webpack_public_path__ + \"images/analysis.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/bios.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/bios1.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/bios2.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/bios3.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/cmd.jpg\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_0.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_1.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_10.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_11.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_12.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_13.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_14.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_15.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_16.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_17.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_18.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_19.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_2.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_20.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_21.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_22.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_22_1.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_22_2.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_22_3.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_22_4.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_22_5.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_22_6.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_22_7.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_23.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_24.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_25.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_26.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_27.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_28.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_29.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_3.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_4.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_5.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_6.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_7.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_8.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/doc_9.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/docker_err.jpg\";","module.exports = __webpack_public_path__ + \"images/cn/img/download.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/ip.png\";","module.exports = __webpack_public_path__ + \"images/cn/img/us_key.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/Cassandra.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/arangodb.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/athena.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/aws_es.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/axibasetsd.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/azure_kusto.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/bigquery.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/bigquery_gce.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/clickhouse.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/cloudwatch.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/cloudwatch_insights.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/cockroach.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/corporate_memory.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/couchbase.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/csv1.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/databend.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/databricks.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/db2.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/dgraph.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/doris.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/drill.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/druid.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/dynamodb_sql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/elasticsearch.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/elasticsearch2.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/elasticsearch2_OpenDistroSQLElasticSearch.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/elasticsearch2_XPackSQLElasticSearch.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/exasol.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/firebolt.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/google_analytics.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/google_spreadsheets.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/graphite.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/hive.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/hive_http.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/impala.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/influxdb.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/jirajql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/json.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/kibana.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/kylin.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mapd.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/memsql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mongodb.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mssql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mssql_odbc.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mysql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/nz.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/oracle.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/pg.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/phoenix.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/pinot.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/presto.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/prometheus.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/python.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/qubole.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/rds_mysql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/redshift.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/redshift_iam.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/results.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/rockset.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/salesforce.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/scylla.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/snowflake.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/sparql_endpoint.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/sqlite.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/starrocks.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/treasuredata.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/trino.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/uptycs.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/url.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/vertica.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/yandex_appmetrika.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/yandex_metrika.png\";","module.exports = __webpack_public_path__ + \"images/destinations/chatwork.png\";","module.exports = __webpack_public_path__ + \"images/destinations/email.png\";","module.exports = __webpack_public_path__ + \"images/destinations/hangouts_chat.png\";","module.exports = __webpack_public_path__ + \"images/destinations/hipchat.png\";","module.exports = __webpack_public_path__ + \"images/destinations/mattermost.png\";","module.exports = __webpack_public_path__ + \"images/destinations/microsoft_teams_webhook.png\";","module.exports = __webpack_public_path__ + \"images/destinations/pagerduty.png\";","module.exports = __webpack_public_path__ + \"images/destinations/slack.png\";","module.exports = __webpack_public_path__ + \"images/destinations/webhook.png\";","module.exports = __webpack_public_path__ + \"images/en/img/bios1.png\";","module.exports = __webpack_public_path__ + \"images/en/img/bios2.png\";","module.exports = __webpack_public_path__ + \"images/en/img/bios3.png\";","module.exports = __webpack_public_path__ + \"images/en/img/cmd.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_0.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_1.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_10.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_11.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_12.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_13.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_14.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_15.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_16.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_17.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_18.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_19.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_2.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_20.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_21.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_22.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_22_1.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_22_2.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_22_3.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_22_4.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_22_5.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_22_6.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_22_7.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_23.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_24.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_25.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_26.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_27.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_28.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_29.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_3.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_4.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_5.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_6.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_7.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_8.png\";","module.exports = __webpack_public_path__ + \"images/en/img/doc_9.png\";","module.exports = __webpack_public_path__ + \"images/en/img/docker_err.png\";","module.exports = __webpack_public_path__ + \"images/en/img/ip.png\";","module.exports = __webpack_public_path__ + \"images/en/img/us_key.png\";","module.exports = __webpack_public_path__ + \"images/favicon-16x16.png\";","module.exports = __webpack_public_path__ + \"images/favicon-32x32.png\";","module.exports = __webpack_public_path__ + \"images/favicon-96x96.png\";","module.exports = __webpack_public_path__ + \"images/fixtures/map-tile.png\";","module.exports = __webpack_public_path__ + \"images/google_logo.svg\";","module.exports = __webpack_public_path__ + \"images/gravatar.png\";","module.exports = __webpack_public_path__ + \"images/illustrations/alert.svg\";","module.exports = __webpack_public_path__ + \"images/illustrations/dashboard.svg\";","module.exports = __webpack_public_path__ + \"images/illustrations/no-query-results.svg\";","module.exports = __webpack_public_path__ + \"images/illustrations/query.svg\";","module.exports = __webpack_public_path__ + \"images/loading.png\";","module.exports = __webpack_public_path__ + \"images/loading1.png\";","module.exports = __webpack_public_path__ + \"images/logo.png\";","module.exports = __webpack_public_path__ + \"images/logo_white.png\";","module.exports = __webpack_public_path__ + \"images/next.png\";","module.exports = __webpack_public_path__ + \"images/retry.png\";","module.exports = __webpack_public_path__ + \"images/send-active.png\";","module.exports = __webpack_public_path__ + \"images/send-default.png\";","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 1809;","import React from \"react\";\nimport Button, { ButtonProps as AntdButtonProps } from \"antd/lib/button\";\n\nfunction DefaultLinkComponent({ children, ...props }: React.AnchorHTMLAttributes<HTMLAnchorElement>) {\n  return <a {...props}>{children}</a>;\n}\n\nLink.Component = DefaultLinkComponent;\n\ninterface LinkProps extends Omit<React.AnchorHTMLAttributes<HTMLAnchorElement>, \"role\" | \"type\" | \"target\"> {\n  href: string;\n}\nfunction Link({ children, ...props }: LinkProps) {\n  return <Link.Component {...props}>{children}</Link.Component>;\n}\n\ninterface LinkWithIconProps extends LinkProps {\n  children: string;\n  icon: JSX.Element;\n  alt: string;\n  target?: \"_self\" | \"_blank\" | \"_parent\" | \"_top\";\n}\n\nfunction LinkWithIcon({ icon, alt, children, ...props }: LinkWithIconProps) {\n  return (\n    <Link.Component {...props}>\n      {children} {icon} <span className=\"sr-only\">{alt}</span>\n    </Link.Component>\n  );\n}\n\nLink.WithIcon = LinkWithIcon;\n\nfunction ExternalLink({\n  icon = <i className=\"fa fa-external-link\" aria-hidden=\"true\" />,\n  alt = \"(opens in a new tab)\",\n  ...props\n}: Omit<LinkWithIconProps, \"target\">) {\n  return <Link.WithIcon target=\"_blank\" rel=\"noopener noreferrer\" icon={icon} alt={alt} {...props} />;\n}\n\nLink.External = ExternalLink;\n\n// Ant Button will render an <a> if href is present.\nfunction DefaultButtonLinkComponent(props: ButtonProps) {\n  return <Button {...props} />;\n}\n\nButtonLink.Component = DefaultButtonLinkComponent;\n\ninterface ButtonProps extends AntdButtonProps {\n  href: string;\n}\n\nfunction ButtonLink(props: ButtonProps) {\n  return <ButtonLink.Component {...props} />;\n}\n\nLink.Button = ButtonLink;\n\nexport default Link;\n","import { isFunction } from \"lodash\";\nimport React from \"react\";\nimport debug from \"debug\";\nimport Alert from \"antd/lib/alert\";\n\nconst logger = debug(\"redash:errors\");\n\nexport const ErrorBoundaryContext = React.createContext({\n  handleError: (error: any) => {\n    // Allow calling chain to roll up, and then throw the error in global context\n    setTimeout(() => {\n      throw error;\n    });\n  },\n  reset: () => {},\n});\n\ntype OwnErrorMessageProps = {\n  children?: React.ReactNode;\n};\n\ntype ErrorMessageProps = OwnErrorMessageProps & typeof ErrorMessage.defaultProps;\n\nexport function ErrorMessage({ children }: ErrorMessageProps) {\n  return <Alert message={children} type=\"error\" showIcon />;\n}\n\nErrorMessage.defaultProps = {\n  children: window.W_L.generic,\n};\n\ntype OwnErrorBoundaryProps = {\n  renderError?: (...args: any[]) => any;\n};\n\ntype ErrorBoundaryState = any;\n\ntype ErrorBoundaryProps = OwnErrorBoundaryProps & typeof ErrorBoundary.defaultProps;\n\nexport default class ErrorBoundary extends React.Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  static defaultProps = {\n    children: null,\n    renderError: null,\n  };\n\n  state = { error: null };\n\n  handleError = (error: any) => {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'getDerivedStateFromError' does not exist... Remove this comment to see the full error message\n    this.setState(this.constructor.getDerivedStateFromError(error));\n    this.componentDidCatch(error, null);\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'handleException' does not exist on type ... Remove this comment to see the full error message\n    if (isFunction(window.handleException)) {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'handleException' does not exist on type ... Remove this comment to see the full error message\n      window.handleException(error);\n    }\n  };\n\n  reset = () => {\n    this.setState({ error: null });\n  };\n\n  static getDerivedStateFromError(error: any) {\n    return { error };\n  }\n\n  componentDidCatch(error: any, errorInfo: any) {\n    logger(error, errorInfo);\n  }\n\n  render() {\n    const { renderError, children } = this.props;\n    const { error } = this.state;\n\n    if (error) {\n      if (isFunction(renderError)) {\n        // @ts-expect-error ts-migrate(2349) FIXME: This expression is not callable.\n        return renderError(error);\n      }\n      return <ErrorMessage />;\n    }\n\n    return <ErrorBoundaryContext.Provider value={this}>{children}</ErrorBoundaryContext.Provider>;\n  }\n}\n","import { isNil, isUndefined, isFunction, isObject, trimStart, mapValues, omitBy, extend } from \"lodash\";\nimport qs from \"query-string\";\nimport { createBrowserHistory } from \"history\";\n\nconst history = createBrowserHistory();\n\nfunction normalizeLocation(rawLocation) {\n  const { pathname, search, hash } = rawLocation;\n  const result = {};\n\n  result.path = pathname;\n  result.search = mapValues(qs.parse(search), value => (isNil(value) ? true : value));\n  result.hash = trimStart(hash, \"#\");\n  result.url = `${pathname}${search}${hash}`;\n\n  return result;\n}\n\nconst location = {\n  listen(handler) {\n    if (isFunction(handler)) {\n      return history.listen((unused, action) => handler(location, action));\n    } else {\n      return () => {};\n    }\n  },\n\n  confirmChange(handler) {\n    if (isFunction(handler)) {\n      return history.block(nextLocation => {\n        return handler(normalizeLocation(nextLocation), location);\n      });\n    } else {\n      return () => {};\n    }\n  },\n\n  update(newLocation, replace = false) {\n    if (isObject(newLocation)) {\n      // remap fields and remove undefined ones\n      newLocation = omitBy(\n        {\n          pathname: newLocation.path,\n          search: newLocation.search,\n          hash: newLocation.hash,\n        },\n        isUndefined\n      );\n\n      // keep existing fields (!)\n      newLocation = extend(\n        {\n          pathname: location.path,\n          search: location.search,\n          hash: location.hash,\n        },\n        newLocation\n      );\n\n      // serialize search and keep existing search parameters (!)\n      if (isObject(newLocation.search)) {\n        newLocation.search = omitBy(extend({}, location.search, newLocation.search), isNil);\n        newLocation.search = mapValues(newLocation.search, value => (value === true ? null : value));\n        newLocation.search = qs.stringify(newLocation.search);\n      }\n    }\n    if (replace) {\n      history.replace(newLocation);\n    } else {\n      history.push(newLocation);\n    }\n  },\n\n  url: undefined,\n\n  path: undefined,\n  setPath(path, replace = false) {\n    location.update({ path }, replace);\n  },\n\n  search: undefined,\n  setSearch(search, replace = false) {\n    location.update({ search }, replace);\n  },\n\n  hash: undefined,\n  setHash(hash, replace = false) {\n    location.update({ hash }, replace);\n  },\n};\n\nfunction locationChanged() {\n  extend(location, normalizeLocation(history.location));\n}\n\nhistory.listen(locationChanged);\nlocationChanged(); // init service\n\nexport default location;\n","import { map } from \"lodash\";\nimport React from \"react\";\nimport Modal from \"antd/lib/modal\";\nimport { Auth } from \"@/services/auth\";\n\nconst SESSION_RESTORED_MESSAGE = \"redash_session_restored\";\n\nexport function notifySessionRestored() {\n  if (window.opener) {\n    window.opener.postMessage({ type: SESSION_RESTORED_MESSAGE }, window.location.origin);\n  }\n}\n\nfunction getPopupPosition(width, height) {\n  const windowLeft = window.screenX;\n  const windowTop = window.screenY;\n  const windowWidth = window.innerWidth;\n  const windowHeight = window.innerHeight;\n\n  return {\n    left: Math.floor((windowWidth - width) / 2 + windowLeft),\n    top: Math.floor((windowHeight - height) / 2 + windowTop),\n    width: Math.floor(width),\n    height: Math.floor(height),\n  };\n}\n\nfunction showRestoreSessionPrompt(loginUrl, onSuccess) {\n  let popup = null;\n\n  Modal.warning({\n    content: \"Your session has expired. Please login to continue.\",\n    okText: (\n      <React.Fragment>\n        Login <i className=\"fa fa-external-link m-r-5\" aria-hidden=\"true\" />\n        <span className=\"sr-only\">(opens in a new tab)</span>\n      </React.Fragment>\n    ),\n    centered: true,\n    mask: true,\n    maskClosable: false,\n    keyboard: false,\n    onOk: closeModal => {\n      if (popup && !popup.closed) {\n        popup.focus();\n        return; // popup already shown\n      }\n\n      const popupOptions = {\n        ...getPopupPosition(640, 640),\n        menubar: \"no\",\n        toolbar: \"no\",\n        location: \"yes\",\n        resizable: \"yes\",\n        scrollbars: \"yes\",\n        status: \"yes\",\n      };\n\n      popup = window.open(loginUrl, \"Restore Session\", map(popupOptions, (value, key) => `${key}=${value}`).join(\",\"));\n\n      const handlePostMessage = event => {\n        if (event.data.type === SESSION_RESTORED_MESSAGE) {\n          if (popup) {\n            popup.close();\n          }\n          popup = null;\n          window.removeEventListener(\"message\", handlePostMessage);\n          closeModal();\n          onSuccess();\n        }\n      };\n\n      window.addEventListener(\"message\", handlePostMessage, false);\n    },\n  });\n}\n\nlet restoreSessionPromise = null;\n\nexport function restoreSession() {\n  if (!restoreSessionPromise) {\n    restoreSessionPromise = new Promise(resolve => {\n      showRestoreSessionPrompt(Auth.getLoginUrl(), () => {\n        restoreSessionPromise = null;\n        resolve();\n      });\n    });\n  }\n\n  return restoreSessionPromise;\n}\n","import { get, includes } from \"lodash\";\nimport axiosLib from \"axios\";\nimport createAuthRefreshInterceptor from \"axios-auth-refresh\";\nimport { Auth } from \"@/services/auth\";\nimport qs from \"query-string\";\nimport { restoreSession } from \"@/services/restoreSession\";\n\nexport const axios = axiosLib.create({\n  paramsSerializer: params => qs.stringify(params),\n  xsrfCookieName: \"csrf_token\",\n  xsrfHeaderName: \"X-CSRF-TOKEN\",\n});\n\naxios.interceptors.response.use(response => response.data);\n\nexport const csrfRefreshInterceptor = createAuthRefreshInterceptor(\n  axios,\n  error => {\n    const message = get(error, \"response.data.message\");\n    if (error.isAxiosError && includes(message, \"CSRF\")) {\n      return axios.get(\"/ping\");\n    } else {\n      return Promise.reject(error);\n    }\n  },\n  { statusCodes: [400] }\n);\n\nexport const sessionRefreshInterceptor = createAuthRefreshInterceptor(\n  axios,\n  error => {\n    const status = parseInt(get(error, \"response.status\"));\n    const message = get(error, \"response.data.message\");\n    // TODO: In axios@0.9.1 this check could be replaced with { skipAuthRefresh: true } flag. See axios-auth-refresh docs\n    const requestUrl = get(error, \"config.url\");\n    if (error.isAxiosError && (status === 401 || includes(message, \"Please login\")) && requestUrl !== \"api/session\") {\n      return restoreSession();\n    }\n    return Promise.reject(error);\n  },\n  {\n    statusCodes: [401, 404],\n    pauseInstanceWhileRefreshing: false, // According to docs, `false` is default value, but in fact it's not :-)\n  }\n);\n\naxios.interceptors.request.use(config => {\n  const apiKey = Auth.getApiKey();\n  if (apiKey) {\n    config.headers.Authorization = `Key ${apiKey}`;\n  }\n\n  return config;\n});\n","import debug from \"debug\";\nimport { includes, extend } from \"lodash\";\nimport location from \"@/services/location\";\nimport { axios } from \"@/services/axios\";\nimport { notifySessionRestored } from \"@/services/restoreSession\";\n\nexport const currentUser = {\n  _isAdmin: undefined,\n\n  canEdit(object) {\n    const userId = object.user_id || (object.user && object.user.id);\n    return this.isAdmin || (userId && userId === this.id);\n  },\n\n  canCreate() {\n    return (\n      this.hasPermission(\"create_query\") || this.hasPermission(\"create_dashboard\") || this.hasPermission(\"list_alerts\")\n    );\n  },\n\n  hasPermission(permission) {\n    if (permission === \"admin\" && this._isAdmin !== undefined) {\n      return this._isAdmin;\n    }\n    return includes(this.permissions, permission);\n  },\n\n  get isAdmin() {\n    return this.hasPermission(\"admin\");\n  },\n\n  set isAdmin(isAdmin) {\n    this._isAdmin = isAdmin;\n  },\n};\n\nexport const clientConfig = {};\nexport const messages = [];\n\nconst logger = debug(\"redash:auth\");\nconst session = { loaded: false };\n\nconst AuthUrls = {\n  Login: \"login\",\n};\n\nexport function updateClientConfig(newClientConfig) {\n  extend(clientConfig, newClientConfig);\n}\n\nfunction updateSession(sessionData) {\n  logger(\"Updating session to be:\", sessionData);\n  extend(session, sessionData, { loaded: true });\n  extend(currentUser, session.user);\n  extend(clientConfig, session.client_config);\n  extend(messages, session.messages);\n}\n\nexport const Auth = {\n  isAuthenticated() {\n    return session.loaded && session.user.id;\n  },\n  getLoginUrl() {\n    return AuthUrls.Login;\n  },\n  setLoginUrl(loginUrl) {\n    AuthUrls.Login = loginUrl;\n  },\n  login() {\n    const next = encodeURI(location.url);\n    logger(\"Calling login with next = %s\", next);\n    window.location.href = `${AuthUrls.Login}?next=${next}`;\n  },\n  logout() {\n    logger(\"Logout.\");\n    window.location.href = \"logout\";\n  },\n  loadSession() {\n    logger(\"Loading session\");\n    if (session.loaded && session.user.id) {\n      logger(\"Resolving with local value.\");\n      return Promise.resolve(session);\n    }\n\n    Auth.setApiKey(null);\n    return axios.get(\"api/session\").then(data => {\n      updateSession(data);\n      return session;\n    });\n  },\n  loadConfig() {\n    logger(\"Loading config\");\n    return axios.get(\"/api/config\").then(data => {\n      updateSession({ client_config: data.client_config, user: { permissions: [] }, messages: [] });\n      return data;\n    });\n  },\n  setApiKey(apiKey) {\n    logger(\"Set API key to: %s\", apiKey);\n    Auth.apiKey = apiKey;\n  },\n  getApiKey() {\n    return Auth.apiKey;\n  },\n  requireSession() {\n    logger(\"Requested authentication\");\n    if (Auth.isAuthenticated()) {\n      return Promise.resolve(session);\n    }\n    return Auth.loadSession()\n      .then(() => {\n        if (Auth.isAuthenticated()) {\n          logger(\"Loaded session\");\n          notifySessionRestored();\n          return session;\n        }\n        logger(\"Need to login, redirecting\");\n        Auth.login();\n      })\n      .catch(() => {\n        logger(\"Need to login, redirecting\");\n        Auth.login();\n      });\n  },\n};\n","import DefaultPolicy from \"./DefaultPolicy\";\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let policy = new DefaultPolicy();\n\nexport function setPolicy(newPolicy) {\n  policy = newPolicy;\n}\n","import { get, isArray } from \"lodash\";\nimport { currentUser, clientConfig } from \"@/services/auth\";\n\n/* eslint-disable class-methods-use-this */\n\nexport default class DefaultPolicy {\n  refresh() {\n    return Promise.resolve(this);\n  }\n\n  canCreateDataSource() {\n    return currentUser.isAdmin;\n  }\n\n  isCreateDataSourceEnabled() {\n    return currentUser.isAdmin;\n  }\n\n  canCreateDestination() {\n    return currentUser.isAdmin;\n  }\n\n  isCreateDestinationEnabled() {\n    return currentUser.isAdmin;\n  }\n\n  canCreateDashboard() {\n    return currentUser.hasPermission(\"create_dashboard\");\n  }\n\n  isCreateDashboardEnabled() {\n    return currentUser.hasPermission(\"create_dashboard\");\n  }\n\n  canCreateAlert() {\n    return true;\n  }\n\n  canCreateUser() {\n    return currentUser.isAdmin;\n  }\n\n  isCreateUserEnabled() {\n    return currentUser.isAdmin;\n  }\n\n  isCreateQuerySnippetEnabled() {\n    return true;\n  }\n\n  getDashboardRefreshIntervals() {\n    const result = clientConfig.dashboardRefreshIntervals;\n    return isArray(result) ? result : null;\n  }\n\n  getQueryRefreshIntervals() {\n    const result = clientConfig.queryRefreshIntervals;\n    return isArray(result) ? result : null;\n  }\n\n  canEdit(object) {\n    return get(object, \"can_edit\", false);\n  }\n\n  canRun() {\n    return true;\n  }\n}\n","import { axios } from \"@/services/axios\";\n\nclass OrganizationStatus {\n  constructor() {\n    this.objectCounters = {};\n  }\n\n  refresh() {\n    return axios.get(\"api/organization/status\").then(data => {\n      this.objectCounters = data.object_counters;\n      return this;\n    });\n  }\n}\n\nexport default new OrganizationStatus();\n","import { isFunction, isString, isUndefined } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst componentsRegistry = new Map();\nconst activeInstances = new Set();\n\nexport function registerComponent(name, component) {\n  if (isString(name) && name !== \"\") {\n    componentsRegistry.set(name, isFunction(component) ? component : null);\n    // Refresh active DynamicComponent instances which use this component\n    activeInstances.forEach(dynamicComponent => {\n      if (dynamicComponent.props.name === name) {\n        dynamicComponent.forceUpdate();\n      }\n    });\n  }\n}\n\nexport function unregisterComponent(name) {\n  registerComponent(name, null);\n}\n\nexport default class DynamicComponent extends React.Component {\n  static propTypes = {\n    name: PropTypes.string.isRequired,\n    fallback: PropTypes.node,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    children: null,\n  };\n\n  componentDidMount() {\n    activeInstances.add(this);\n  }\n\n  componentWillUnmount() {\n    activeInstances.delete(this);\n  }\n\n  render() {\n    const { name, children, fallback, ...props } = this.props;\n    const RealComponent = componentsRegistry.get(name);\n    if (!RealComponent) {\n      // return fallback if any, otherwise return children\n      return isUndefined(fallback) ? children : fallback;\n    }\n    return <RealComponent {...props}>{children}</RealComponent>;\n  }\n}\n","import classNames from \"classnames\";\nimport React from \"react\";\n\nimport \"./PlainButton.less\";\n\nexport interface PlainButtonProps extends Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, \"type\"> {\n  type?: \"link\" | \"button\";\n}\n\nfunction PlainButton({ className, type, ...rest }: PlainButtonProps) {\n  return (\n    <button\n      className={classNames(\"plain-button\", \"clickable\", { \"plain-button-link\": type === \"link\" }, className)}\n      type=\"button\"\n      {...rest}\n    />\n  );\n}\n\nexport default PlainButton;\n","import React from \"react\";\nimport AntTooltip, { TooltipProps } from \"antd/lib/tooltip\";\nimport { isNil } from \"lodash\";\n\nexport default function Tooltip({ title, ...restProps }: TooltipProps) {\n  const liveTitle = !isNil(title) ? (\n    <span role=\"status\" aria-live=\"assertive\" aria-relevant=\"additions\">\n      {title}\n    </span>\n  ) : null;\n\n  return <AntTooltip trigger={[\"hover\", \"focus\"]} title={liveTitle} {...restProps} />;\n}\n","import { uniqueId } from \"lodash\";\nimport { useLazyRef } from \"./useLazyRef\";\n\nexport function useUniqueId(prefix: string) {\n  const { current: id } = useLazyRef(() => uniqueId(prefix));\n  return id;\n}\n","import { useRef } from \"react\";\n\nexport function useLazyRef<T>(getInitialValue: () => T) {\n  const lazyRef = useRef<T>(null) as React.MutableRefObject<T>;\n\n  if (lazyRef.current === null) {\n    lazyRef.current = getInitialValue();\n  }\n\n  return lazyRef;\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useUniqueId } from \"@/lib/hooks/useUniqueId\";\nimport cx from \"classnames\";\n\nfunction BigMessage({ message, icon, children, className }) {\n  const messageId = useUniqueId(\"bm-message\");\n  return (\n    <div\n      className={\"big-message p-15 text-center \" + className}\n      role=\"status\"\n      aria-live=\"assertive\"\n      aria-relevant=\"additions removals\">\n      <h3 className=\"m-t-0 m-b-0\" aria-labelledby={messageId}>\n        <i className={cx(\"fa\", icon)} aria-hidden=\"true\" />\n      </h3>\n      <br />\n      <span id={messageId}>{message}</span>\n      {children}\n    </div>\n  );\n}\n\nBigMessage.propTypes = {\n  message: PropTypes.string,\n  icon: PropTypes.string.isRequired,\n  children: PropTypes.node,\n  className: PropTypes.string,\n};\n\nBigMessage.defaultProps = {\n  message: \"\",\n  children: null,\n  className: \"tiled bg-white\",\n};\n\nexport default BigMessage;\n","import { isString } from \"lodash\";\nimport DOMPurify from \"dompurify\";\n\nDOMPurify.setConfig({\n  ADD_ATTR: [\"target\"],\n});\n\nDOMPurify.addHook(\"afterSanitizeAttributes\", function(node) {\n  // Fix elements with `target` attribute:\n  // - allow only `target=\"_blank\"\n  // - add `rel=\"noopener noreferrer\"` to prevent https://www.owasp.org/index.php/Reverse_Tabnabbing\n\n  const target = node.getAttribute(\"target\");\n  if (isString(target) && target.toLowerCase() === \"_blank\") {\n    node.setAttribute(\"rel\", \"noopener noreferrer\");\n  } else {\n    node.removeAttribute(\"target\");\n  }\n});\n\nexport { DOMPurify };\n\nexport default DOMPurify.sanitize;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport sanitize from \"@/services/sanitize\";\n\nconst HtmlContent = React.memo(function HtmlContent({ children, ...props }) {\n  return (\n    <div\n      {...props}\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'ReactNode' is not assignable to ... Remove this comment to see the full error message\n      dangerouslySetInnerHTML={{ __html: sanitize(children) }} // eslint-disable-line react/no-danger\n    />\n  );\n});\n\n// @ts-expect-error ts-migrate(2339) FIXME: Property 'propTypes' does not exist on type 'Named... Remove this comment to see the full error message\nHtmlContent.propTypes = {\n  children: PropTypes.string,\n};\n\n// @ts-expect-error ts-migrate(2339) FIXME: Property 'defaultProps' does not exist on type 'Na... Remove this comment to see the full error message\nHtmlContent.defaultProps = {\n  children: \"\",\n};\n\nexport default HtmlContent;\n","import { startsWith, get, some, mapValues } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport Tooltip from \"@/components/Tooltip\";\nimport Drawer from \"antd/lib/drawer\";\nimport Link from \"@/components/Link\";\nimport PlainButton from \"@/components/PlainButton\";\nimport CloseOutlinedIcon from \"@ant-design/icons/CloseOutlined\";\nimport BigMessage from \"@/components/BigMessage\";\nimport HtmlContent from \"@/components/chart/components/HtmlContent\";\nimport { axios } from \"@/services/axios\";\nimport { markdown } from \"markdown\";\nimport DynamicComponent, { registerComponent } from \"@/components/DynamicComponent\";\nimport usermdcn from \"./user_manual/user_help_cn.md\";\nimport usermden from \"./user_manual/user_help_en.md\";\nimport \"./HelpTrigger.less\";\n\nconst DOMAIN = \"https://xxx\";\nconst HELP_PATH = \"/help\";\nconst IFRAME_TIMEOUT = 20000;\nconst IFRAME_URL_UPDATE_MESSAGE = \"iframe_url\";\n\nexport const TYPES = mapValues(\n  {\n    HOME: [\"\", window.W_L.help],\n    VALUE_SOURCE_OPTIONS: [\"/user-guide/querying/query-parameters#Value-Source-Options\", window.W_L.guide_list_option],\n    // SHARE_DASHBOARD: [\"/user-guide/dashboards/sharing-dashboards\", window.W_L.guide_share_embed_dashboard],\n    AUTHENTICATION_OPTIONS: [\"/user-guide/users/authentication-options\", window.W_L.guide_authentication],\n    USAGE_DATA_SHARING: [\"/open-source/admin-guide/usage-data\", window.W_L.help_share_anonymous_data],\n    DS_ATHENA: [\"/data-sources/amazon-athena-setup\", window.W_L.guide_amazon_athena],\n    DS_BIGQUERY: [\"/data-sources/bigquery-setup\", window.W_L.guide_set_bigquery],\n    DS_URL: [\"/data-sources/querying-urls\", window.W_L.guide_set_url_port],\n    DS_MONGODB: [\"/data-sources/mongodb-setup\", window.W_L.guide_set_mongodb],\n    DS_GOOGLE_SPREADSHEETS: [\n      \"/data-sources/querying-a-google-spreadsheet\",\n      window.W_L.guide_set_google_spread,\n    ],\n    DS_GOOGLE_ANALYTICS: [\"/data-sources/google-analytics-setup\", window.W_L.guide_set_google_analytics],\n    DS_AXIBASETSD: [\"/data-sources/axibase-time-series-database\", window.W_L.guide_set_axibase],\n    DS_RESULTS: [\"/user-guide/querying/query-results-data-source\", window.W_L.guide_set_query_result],\n    ALERT_SETUP: [\"/user-guide/alerts/setting-up-an-alert\", window.W_L.guide_set_alert],\n    MAIL_CONFIG: [\"/open-source/setup/#Mail-Configuration\", window.W_L.guide_set_mail],\n    ALERT_NOTIF_TEMPLATE_GUIDE: [\"/user-guide/alerts/custom-alert-notifications\", window.W_L.guide_set_notice],\n    FAVORITES: [\"/user-guide/querying/favorites-tagging/#Favorites\", window.W_L.guide_favorite],\n    MANAGE_PERMISSIONS: [\n      \"/user-guide/querying/writing-queries#Managing-Query-Permissions\",\n      window.W_L.guide_query_permissions,\n    ],\n    NUMBER_FORMAT_SPECS: [\"/user-guide/visualizations/formatting-numbers\", window.W_L.guide_formatting_number],\n    GETTING_STARTED: [\"/user-guide/getting-started\", window.W_L.guide_menu_start],\n    DASHBOARDS: [\"/user-guide/dashboards\", window.W_L.guide_dashboard],\n    QUERIES: [\"/help/user-guide/querying\", window.W_L.guide_query],\n    ALERTS: [\"/user-guide/alerts\", window.W_L.guide_alert],\n  },\n  ([url, title]) => [DOMAIN + HELP_PATH + url, title]\n);\n\nconst HelpTriggerPropTypes = {\n  type: PropTypes.string,\n  href: PropTypes.string,\n  title: PropTypes.node,\n  className: PropTypes.string,\n  showTooltip: PropTypes.bool,\n  renderAsLink: PropTypes.bool,\n  children: PropTypes.node,\n};\n\nconst HelpTriggerDefaultProps = {\n  type: null,\n  href: null,\n  title: null,\n  className: null,\n  showTooltip: true,\n  renderAsLink: false,\n  children: <i className=\"fa fa-question-circle\" aria-hidden=\"true\" />,\n};\n\n\nexport function helpTriggerWithTypes(types, allowedDomains = [], drawerClassName = null) {\n  return class HelpTrigger extends React.Component {\n    static propTypes = {\n      ...HelpTriggerPropTypes,\n      type: PropTypes.oneOf(Object.keys(types)),\n    };\n    static defaultProps = HelpTriggerDefaultProps;\n\n    iframeRef = React.createRef();\n\n    iframeLoadingTimeout = null;\n\n    state = {\n      visible: false,\n      loading: false,\n      error: false,\n      currentUrl: null,\n      richText: null\n    };\n\n    componentDidMount() {\n      window.addEventListener(\"message\", this.onPostMessageReceived, false);\n    }\n\n    componentWillUnmount() {\n      window.removeEventListener(\"message\", this.onPostMessageReceived);\n      clearTimeout(this.iframeLoadingTimeout);\n    }\n\n    loadIframe = url => {\n      clearTimeout(this.iframeLoadingTimeout);\n      this.setState({ loading: true, error: false });\n\n      this.iframeRef.current.src = url;\n      this.iframeLoadingTimeout = setTimeout(() => {\n        this.setState({ error: url, loading: false });\n      }, IFRAME_TIMEOUT); // safety\n    };\n\n    onIframeLoaded = () => {\n      this.setState({ loading: false });\n      clearTimeout(this.iframeLoadingTimeout);\n    };\n\n    onPostMessageReceived = event => {\n      if (!some(allowedDomains, domain => startsWith(event.origin, domain))) {\n        return;\n      }\n\n      const { type, message: currentUrl } = event.data || {};\n      if (type !== IFRAME_URL_UPDATE_MESSAGE) {\n        return;\n      }\n\n      this.setState({ currentUrl });\n    };\n\n    getUrl = () => {\n      const helpTriggerType = get(types, this.props.type);\n      return helpTriggerType ? helpTriggerType[0] : this.props.href;\n    };\n    getRichText =async () => {\n      let md = markdown.toHTML(window.W_L.language_mode===\"CN\"?usermdcn:usermden);\n      this.setState({ richText: md,loading: false });\n    }\n      \n    openDrawer = e => {\n      if(this.props.type === 'HOME') {\n        this.setState({ visible: true,loading: true });\n        this.getRichText();\n        return;\n      }\n      // keep \"open in new tab\" behavior\n      if (!e.shiftKey && !e.ctrlKey && !e.metaKey) {\n        e.preventDefault();\n        this.setState({ visible: true });\n        // wait for drawer animation to complete so there's no animation jank\n        setTimeout(() => this.loadIframe(this.getUrl()), 300);\n      }\n    };\n\n    closeDrawer = event => {\n      if (event) {\n        event.preventDefault();\n      }\n      this.setState({ visible: false });\n      this.setState({ visible: false, currentUrl: null, richText: null });\n    };\n\n    render() {\n      const targetUrl = this.getUrl();\n      if (!targetUrl) {\n        return null;\n      }\n\n      const tooltip = get(types, `${this.props.type}[1]`, this.props.title);\n      const className = cx(\"help-trigger\", this.props.className);\n      const url = this.state.currentUrl;\n      const isAllowedDomain = some(allowedDomains, domain => startsWith(url || targetUrl, domain));\n      const shouldRenderAsLink = this.props.renderAsLink || !isAllowedDomain;\n      const type = this.props.type;\n      return (\n        <React.Fragment>\n          <Tooltip\n            title={\n              this.props.showTooltip ? (\n                <>\n                  {tooltip}\n                  {shouldRenderAsLink && (\n                    <>\n                      {\" \"}\n                      <i className=\"fa fa-external-link\" style={{ marginLeft: 5 }} aria-hidden=\"true\" />\n                      <span className=\"sr-only\">(opens in a new tab)</span>\n                    </>\n                  )}\n                </>\n              ) : null\n            }>\n           {\n            type === 'HOME' ?\n            <Link  className={className} onClick={this.openDrawer}>\n              {this.props.children}\n            </Link>\n            :\n             <Link\n             href={url || this.getUrl()}\n             className={className}\n             rel=\"noopener noreferrer\"\n             target=\"_blank\"\n             onClick={shouldRenderAsLink ? () => {} : this.openDrawer}>\n             \n           </Link>\n           }\n          </Tooltip>\n          <Drawer\n            placement=\"right\"\n            closable={false}\n            onClose={this.closeDrawer}\n            visible={this.state.visible}\n            className={cx(\"help-drawer\", drawerClassName)}\n            destroyOnClose\n            width={1000}>\n            <div className=\"drawer-wrapper\">\n              <div className=\"drawer-menu\">\n                {url && (\n                  <Tooltip title=\"Open page in a new window\" placement=\"left\">\n                    {/* eslint-disable-next-line react/jsx-no-target-blank */}\n                    <Link href={url} target=\"_blank\">\n                      <i className=\"fa fa-external-link\" aria-hidden=\"true\" />\n                      <span className=\"sr-only\">(opens in a new tab)</span>\n                    </Link>\n                  </Tooltip>\n                )}\n                <Tooltip title=\"Close\" placement=\"bottom\">\n                  <PlainButton onClick={this.closeDrawer}>\n                    <CloseOutlinedIcon />\n                  </PlainButton>\n                </Tooltip>\n              </div>\n              {/* rich text */}\n              {this.state.richText &&\n                 <HtmlContent className=\"preview markdown\">{this.state.richText}</HtmlContent>\n              }\n              {/* iframe */}\n              {/* {!this.state.error && (\n                <iframe\n                  ref={this.iframeRef}\n                  title=\"Usage Help\"\n                  src=\"about:blank\"\n                  className={cx({ ready: !this.state.loading })}\n                  onLoad={this.onIframeLoaded}\n                />\n              )} */}\n\n              {/* loading indicator */}\n              {this.state.loading && (\n                <BigMessage icon=\"fa-spinner fa-2x fa-pulse\" message=\"Loading...\" className=\"help-message\" />\n              )}\n\n              {/* error message */}\n              {this.state.error && (\n                <BigMessage icon=\"fa-exclamation-circle\" className=\"help-message\">\n                  Something went wrong.\n                  <br />\n                  {/* eslint-disable-next-line react/jsx-no-target-blank */}\n                  <Link href={this.state.error} target=\"_blank\" rel=\"noopener\">\n                    {window.W_L.click_here}\n                  </Link>{\" \"}\n                  {window.W_L.open_new_window}\n                </BigMessage>\n              )}\n            </div>\n\n            {/* extra content */}\n            <DynamicComponent name=\"HelpDrawerExtraContent\" onLeave={this.closeDrawer} openPageUrl={this.loadIframe} />\n          </Drawer>\n        </React.Fragment>\n      );\n    }\n  };\n}\n\nregisterComponent(\"HelpTrigger\", helpTriggerWithTypes(TYPES, [DOMAIN]));\n\nexport default function HelpTrigger(props) {\n  return <DynamicComponent {...props} name=\"HelpTrigger\" />;\n}\n\nHelpTrigger.propTypes = HelpTriggerPropTypes;\nHelpTrigger.defaultProps = HelpTriggerDefaultProps;\n","import { pick, extend } from \"lodash\";\n\nconst link = document.createElement(\"a\"); // the only way to get an instance of Location class\n// add to document to apply <base> href\nlink.style.display = \"none\";\ndocument.body.appendChild(link);\n\nconst fragmentProps = [\"origin\", \"protocol\", \"host\", \"hostname\", \"port\", \"pathname\", \"search\", \"hash\", \"href\"];\n\nexport function parse(url) {\n  link.setAttribute(\"href\", url);\n  return pick(link, fragmentProps);\n}\n\nexport function stringify(fragments) {\n  extend(link, pick(fragments, fragmentProps));\n  return link.href; // absolute URL\n}\n\nexport function normalize(url) {\n  link.setAttribute(\"href\", url);\n  return link.href; // absolute URL\n}\n\nexport default { parse, stringify, normalize };\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport function ErrorMessageDetails(props) {\n  return <h4>{props.message}</h4>;\n}\n\nErrorMessageDetails.propTypes = {\n  error: PropTypes.instanceOf(Error).isRequired,\n  message: PropTypes.string.isRequired,\n};\n","import { get, isObject } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport \"./ErrorMessage.less\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { ErrorMessageDetails } from \"@/components/ApplicationArea/ErrorMessageDetails\";\n\nfunction getErrorMessageByStatus(status, defaultMessage) {\n  switch (status) {\n    case 404:\n      return window.W_L.web_404;\n    case 401:\n    case 403:\n      return window.W_L.web_403;\n    default:\n      return defaultMessage;\n  }\n}\n\nfunction getErrorMessage(error) {\n  const message = window.W_L.web_error;\n  if (isObject(error)) {\n    // HTTP errors\n    if (error.isAxiosError && isObject(error.response)) {\n      return getErrorMessageByStatus(error.response.status, get(error, \"response.data.message\", message));\n    }\n    // Router errors\n    if (error.status) {\n      return getErrorMessageByStatus(error.status, message);\n    }\n  }\n  return message;\n}\n\nexport default function ErrorMessage({ error, message }) {\n  if (!error) {\n    return null;\n  }\n\n  console.error(error);\n\n  const errorDetailsProps = {\n    error,\n    message: message || getErrorMessage(error),\n  };\n\n  return (\n    <div className=\"error-message-container\" data-test=\"ErrorMessage\" role=\"alert\">\n      <div className=\"error-state bg-white tiled\">\n        <div className=\"error-state__icon\">\n          <i className=\"zmdi zmdi-alert-circle-o\" aria-hidden=\"true\" />\n        </div>\n        <div className=\"error-state__details\">\n          <DynamicComponent\n            name=\"ErrorMessageDetails\"\n            fallback={<ErrorMessageDetails {...errorDetailsProps} />}\n            {...errorDetailsProps}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nErrorMessage.propTypes = {\n  error: PropTypes.object.isRequired,\n  message: PropTypes.string,\n};\n","import { isFunction, startsWith, trimStart, trimEnd } from \"lodash\";\nimport React, { useState, useEffect, useRef, useContext } from \"react\";\nimport PropTypes from \"prop-types\";\nimport UniversalRouter from \"universal-router\";\nimport ErrorBoundary from \"@/components/chart/components/ErrorBoundary\";\nimport location from \"@/services/location\";\nimport url from \"@/services/url\";\n\nimport ErrorMessage from \"./ErrorMessage\";\n\nfunction generateRouteKey() {\n  return Math.random()\n    .toString(32)\n    .substr(2);\n}\n\nexport const CurrentRouteContext = React.createContext(null);\n\nexport function useCurrentRoute() {\n  return useContext(CurrentRouteContext);\n}\n\nexport function stripBase(href) {\n  // Resolve provided link and '' (root) relative to document's base.\n  // If provided href is not related to current document (does not\n  // start with resolved root) - return false. Otherwise\n  // strip root and return relative url.\n\n  const baseHref = trimEnd(url.normalize(\"\"), \"/\") + \"/\";\n  href = url.normalize(href);\n\n  if (startsWith(href, baseHref)) {\n    return \"/\" + trimStart(href.substr(baseHref.length), \"/\");\n  }\n\n  return false;\n}\n\nexport default function Router({ routes, onRouteChange }) {\n  const [currentRoute, setCurrentRoute] = useState(null);\n\n  const currentPathRef = useRef(null);\n  const errorHandlerRef = useRef();\n\n  useEffect(() => {\n    let isAbandoned = false;\n\n    const router = new UniversalRouter(routes, {\n      resolveRoute({ route }, routeParams) {\n        if (isFunction(route.render)) {\n          return { ...route, routeParams };\n        }\n      },\n    });\n\n    function resolve(action) {\n      if (!isAbandoned) {\n        if (errorHandlerRef.current) {\n          errorHandlerRef.current.reset();\n        }\n\n        const pathname = stripBase(location.path) || \"/\";\n\n        // This is a optimization for route resolver: if current route was already resolved\n        // from this path - do nothing. It also prevents router from using outdated route in a case\n        // when user navigated to another path while current one was still resolving.\n        // Note: this lock uses only `path` fragment of URL to distinguish routes because currently\n        // all pages depend only on this fragment and handle search/hash on their own. If router\n        // should reload page on search/hash change - this fragment (and few checks below) should be updated\n        if (pathname === currentPathRef.current) {\n          return;\n        }\n        currentPathRef.current = pathname;\n\n        // Don't reload controller if URL was replaced\n        if (action === \"REPLACE\") {\n          return;\n        }\n\n        router\n          .resolve({ pathname })\n          .then(route => {\n            if (!isAbandoned && currentPathRef.current === pathname) {\n              setCurrentRoute({ ...route, key: generateRouteKey() });\n            }\n          })\n          .catch(error => {\n            if (!isAbandoned && currentPathRef.current === pathname) {\n              setCurrentRoute({\n                render: currentRoute => <ErrorMessage {...currentRoute.routeParams} />,\n                routeParams: { error },\n              });\n            }\n          });\n      }\n    }\n\n    resolve(\"PUSH\");\n\n    const unlisten = location.listen((unused, action) => resolve(action));\n\n    return () => {\n      isAbandoned = true;\n      currentPathRef.current = null;\n      unlisten();\n    };\n  }, [routes]);\n\n  useEffect(() => {\n    onRouteChange(currentRoute);\n  }, [currentRoute, onRouteChange]);\n\n  if (!currentRoute) {\n    return null;\n  }\n\n  return (\n    <CurrentRouteContext.Provider value={currentRoute}>\n      <ErrorBoundary ref={errorHandlerRef} renderError={error => <ErrorMessage error={error} />}>\n        {currentRoute.render(currentRoute)}\n      </ErrorBoundary>\n    </CurrentRouteContext.Provider>\n  );\n}\n\nRouter.propTypes = {\n  routes: PropTypes.arrayOf(\n    PropTypes.shape({\n      path: PropTypes.string.isRequired,\n      render: PropTypes.func, // (routeParams: PropTypes.object; currentRoute; location) => PropTypes.node\n      // Additional props to be injected into route component.\n      // Object keys are props names. Object values will become prop values:\n      // - if value is a function - it will be called without arguments, and result will be used; otherwise value will be used;\n      // - after previous step, if value is a promise - router will wait for it to resolve; resolved value then will be used;\n      //   otherwise value will be used directly.\n      resolve: PropTypes.objectOf(PropTypes.any),\n    })\n  ),\n  onRouteChange: PropTypes.func,\n};\n\nRouter.defaultProps = {\n  routes: [],\n  onRouteChange: () => {},\n};\n","import { isString, isObject, isFunction, extend, omit, sortBy, find, filter } from \"lodash\";\nimport { stripBase } from \"@/components/ApplicationArea/Router\";\nimport { currentUser } from \"@/services/auth\";\n\nclass SettingsMenuItem {\n  constructor(menuItem) {\n    extend(this, { pathPrefix: `/${menuItem.path}` }, omit(menuItem, [\"isActive\", \"isAvailable\"]));\n    if (isFunction(menuItem.isActive)) {\n      this.isActive = menuItem.isActive;\n    }\n    if (isFunction(menuItem.isAvailable)) {\n      this.isAvailable = menuItem.isAvailable;\n    }\n  }\n\n  isActive(path) {\n    return path.startsWith(this.pathPrefix);\n  }\n\n  isAvailable() {\n    return this.permission === undefined || currentUser.hasPermission(this.permission);\n  }\n}\n\nclass SettingsMenu {\n  items = [];\n\n  add(id, item) {\n    id = isString(id) ? id : null;\n    this.remove(id);\n    if (isObject(item)) {\n      this.items.push(new SettingsMenuItem({ ...item, id }));\n      this.items = sortBy(this.items, \"order\");\n    }\n  }\n\n  remove(id) {\n    if (isString(id)) {\n      this.items = filter(this.items, item => item.id !== id);\n      // removing item does not change order of other items, so no need to sort\n    }\n  }\n\n  getAvailableItems() {\n    return filter(this.items, item => item.isAvailable());\n  }\n\n  getActiveItem(path) {\n    const strippedPath = stripBase(path);\n    return find(this.items, item => item.isActive(strippedPath));\n  }\n}\n\nexport default new SettingsMenu();\n","import React from \"react\";\nimport Link from \"@/components/Link\";\nimport { clientConfig, currentUser } from \"@/services/auth\";\nimport frontendVersion from \"@/version.json\";\n\nexport default function VersionInfo() {\n  return (\n    <React.Fragment>\n      <div>\n        {window.W_L.version}: {clientConfig.DeepBI_version}\n        {frontendVersion !== clientConfig.version && ` (${frontendVersion.substring(0, 8)})`}\n      </div>\n      {clientConfig.newVersionAvailable && currentUser.hasPermission(\"super_admin\") && (\n        <div className=\"m-t-10\">\n          {/* eslint-disable react/jsx-no-target-blank */}\n          <Link href=\"https://version.redash.io/\" className=\"update-available\" target=\"_blank\" rel=\"noopener\">\n            Update Available <i className=\"fa fa-external-link m-l-5\" aria-hidden=\"true\" />\n            <span className=\"sr-only\">(opens in a new tab)</span>\n          </Link>\n        </div>\n      )}\n    </React.Fragment>\n  );\n}\n","import React, { useMemo,useEffect,useState } from \"react\";\nimport { first, includes } from \"lodash\";\nimport Menu from \"antd/lib/menu\";\nimport Link from \"@/components/Link\";\nimport PlainButton from \"@/components/PlainButton\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport { useCurrentRoute } from \"@/components/ApplicationArea/Router\";\nimport { Auth, currentUser } from \"@/services/auth\";\nimport settingsMenu from \"@/services/settingsMenu\";\nimport logoUrl from \"@/assets/images/icon_small.png\";\n\n\nimport CommentOutlinedIcon from \"@ant-design/icons/CommentOutlined\";\nimport LineChartOutlinedIcon from \"@ant-design/icons/LineChartOutlined\";\nimport DashboardOutlinedIcon from \"@ant-design/icons/DashboardOutlined\";\nimport RobotOutlinedIcon from \"@ant-design/icons/RobotOutlined\";\n\nimport QuestionCircleOutlinedIcon from \"@ant-design/icons/QuestionCircleOutlined\";\nimport SettingOutlinedIcon from \"@ant-design/icons/SettingOutlined\";\nimport VersionInfo from \"./VersionInfo\";\n\nimport \"./DesktopNavbar.less\";\n\nfunction NavbarSection({ children, ...props }) {\n  return (\n    <Menu selectable={false} mode=\"vertical\" theme=\"dark\" {...props}>\n      {children}\n    </Menu>\n  );\n}\n\nfunction useNavbarActiveState() {\n  const currentRoute = useCurrentRoute();\n\n  return useMemo(\n    () => ({\n      dashboards: includes(\n        [\n          \"Dashboards.List\",\n          \"Dashboards.Favorites\",\n          \"Dashboards.My\",\n          \"Dashboards.ViewOrEdit\",\n          \"Dashboards.LegacyViewOrEdit\",\n        ],\n        currentRoute.id\n      ),\n      queries: includes(\n        [\n          \"Queries.List\",\n          \"Queries.Favorites\",\n          \"Queries.Archived\",\n          \"Queries.My\",\n          \"Queries.View\",\n          \"Queries.New\",\n          \"Queries.Edit\",\n        ],\n        currentRoute.id\n      ),\n      dataSources: includes([\"DataSources.List\"], currentRoute.id),\n      alerts: includes([\"Alerts.List\", \"Alerts.New\", \"Alerts.View\", \"Alerts.Edit\"], currentRoute.id),\n      testdialogue: includes([\"Dialogue.List\"], currentRoute.id),\n      report_route : includes([\"Dialogue.List.Report\"], currentRoute.id),\n      dialogue_list : includes([\"Dialogue.List.Dialogue\"], currentRoute.id),\n      autopilot : includes([\"Dialogue.List.autopilot\"], currentRoute.id),\n      autopilot_list : includes([\"Dialogue.List.autopilot_list\"], currentRoute.id),\n      autopilot_view : includes([\"Dialogue.List.autopilot_view\"], currentRoute.id),\n      dashboards_prettify : includes([\"Dialogue.List.dashboards_prettify\"], currentRoute.id),\n    }),\n    [currentRoute.id]\n  );\n}\n\nexport default function DesktopNavbar() {\n  const firstSettingsTab = first(settingsMenu.getAvailableItems());\n\n  const activeState = useNavbarActiveState();\n\n  // const canCreateQuery = currentUser.hasPermission(\"create_query\");\n  // const canCreateDashboard = currentUser.hasPermission(\"create_dashboard\");\n  // const canCreateAlert = currentUser.hasPermission(\"list_alerts\");\n\n  // const [socketType,setSocketType] = useState(0)\n  // useEffect(() => {\n  //     const handleLockReconnectChange = (newLockReconnect) => {\n  //       setSocketType(newLockReconnect)\n  //     };\n    \n  //     lockReconnectEvent.on('change', handleLockReconnectChange);\n    \n  //     return () => {\n  //       lockReconnectEvent.off('change', handleLockReconnectChange);\n  //     };\n  // }, []);\n  return (\n    <nav className=\"desktop-navbar\">\n      <NavbarSection className=\"desktop-navbar-logo\">\n        <div role=\"menuitem\">\n          <Link href=\"./\">\n            <img src={logoUrl} alt=\"DeepBI\" />\n          </Link>\n        </div>\n      </NavbarSection>\n      <NavbarSection className=\"desktop-navbar-spacer\" style={{flex:\"0\"}}>\n          <Menu.SubMenu\n            key=\"create\"\n            popupClassName=\"desktop-navbar-submenu\"\n            data-test=\"dialogueButton\"\n            className={activeState.testdialogue || activeState.dialogue_list ? \"navbar-active-item\" : null}\n            tabIndex={0}\n            title={\n              <React.Fragment>\n                <CommentOutlinedIcon />\n                <span className=\"desktop-navbar-label\">{window.W_L.data_analysis}</span>\n              </React.Fragment>\n            }>\n              <Menu.Item key=\"testdialogue\">\n                <Link href=\"./\" data-test=\"testdialogue\">\n                  {window.W_L.dialogue}\n                </Link>\n              </Menu.Item>\n              <Menu.Item key=\"dialogue_list\">\n                <Link data-test=\"dialogue-list\" href=\"dialogue-list\">\n                  {window.W_L.history_dialogue}\n                </Link>\n              </Menu.Item>\n          </Menu.SubMenu>\n      </NavbarSection>\n      <NavbarSection className=\"desktop-navbar-spacer\" style={{flex:\"0\"}}>\n          <Menu.SubMenu\n            key=\"create\"\n            popupClassName=\"desktop-navbar-submenu\"\n            data-test=\"queriesButton\"\n            tabIndex={0}\n            className={activeState.report_route || activeState.queries ? \"navbar-active-item\" : null}\n            title={\n              <React.Fragment>\n                <LineChartOutlinedIcon />\n                <span className=\"desktop-navbar-label\">{window.W_L.query_builder}</span>\n              </React.Fragment>\n            }>\n              <Menu.Item key=\"report_route\">\n                <Link href=\"report-route\" data-test=\"report-route\">\n                  {window.W_L.report_generation}\n                </Link>\n              </Menu.Item>\n              <Menu.Item key=\"queries\">\n                <Link data-test=\"queries\" href=\"queries\">\n                  {window.W_L.report_list}\n                </Link>\n              </Menu.Item>\n          </Menu.SubMenu>\n      </NavbarSection>\n\n        \n\n      <NavbarSection style={{flex:\"0\"}}>\n\n      <Menu.SubMenu\n            key=\"create\"\n            popupClassName=\"desktop-navbar-submenu\"\n            data-test=\"queriesButton\"\n            tabIndex={0}\n            className={activeState.dashboards || activeState.dashboards_prettify ? \"navbar-active-item\" : null}\n            title={\n              <React.Fragment>\n                <DashboardOutlinedIcon />\n                <span className=\"desktop-navbar-label\">{window.W_L.dashboards}</span>\n              </React.Fragment>\n            }>\n              <Menu.Item key=\"dashboards\">\n                <Link href=\"dashboards\" data-test=\"dashboards\">\n                  {window.W_L.dashboards}\n                </Link>\n              </Menu.Item>\n\n              <Menu.Item key=\"dashboards_prettify\">\n                <Link href=\"dashboards_prettify\" data-test=\"dashboards_prettify\">\n                  {window.W_L.dashboards_prettify}\n                </Link>\n              </Menu.Item>\n      </Menu.SubMenu>\n\n          {/* <Menu.Item key=\"autopilot\" className={activeState.autopilot ? \"navbar-active-item\" : null}>\n            <Link href=\"autopilot\">\n              <RobotOutlinedIcon aria-label=\"autopilot navigation button\" />\n              <span className=\"desktop-navbar-label\">{window.W_L.auto_pilot}</span>\n            </Link>\n          </Menu.Item> */}\n\n      </NavbarSection>\n      <NavbarSection className=\"desktop-navbar-spacer\" style={{flex:\"1\"}}>\n          <Menu.SubMenu\n            key=\"create\"\n            popupClassName=\"desktop-navbar-submenu\"\n            data-test=\"autopilotButton\"\n            className={activeState.autopilot || activeState.autopilot_view || activeState.autopilot_list ? \"navbar-active-item\" : null}\n            tabIndex={0}\n            title={\n              <React.Fragment>\n                 <RobotOutlinedIcon aria-label=\"autopilot navigation button\" />\n                <span className=\"desktop-navbar-label\">{window.W_L.auto_pilot}</span>\n              </React.Fragment>\n            }>\n              <Menu.Item key=\"autopilot\">\n                <Link href=\"autopilot\" data-test=\"autopilot\">\n                  {window.W_L.auto_pilot}\n                </Link>\n              </Menu.Item>\n              <Menu.Item key=\"autopilot_list\">\n                <Link data-test=\"autopilot_list\" href=\"autopilot_list\">\n                  {window.W_L.history_autopilot}\n                </Link>\n              </Menu.Item>\n          </Menu.SubMenu>\n      </NavbarSection>\n \n\n      <NavbarSection>\n        <Menu.Item key=\"help\">\n          <HelpTrigger showTooltip={false} type=\"HOME\" tabIndex={0}>\n            <QuestionCircleOutlinedIcon />\n            <span className=\"desktop-navbar-label\">{window.W_L.help}</span>\n          </HelpTrigger>\n        </Menu.Item>\n        {firstSettingsTab && (\n          <Menu.Item key=\"settings\" className={activeState.dataSources ? \"navbar-active-item\" : null}>\n            <Link href={firstSettingsTab.path} data-test=\"SettingsLink\">\n              <SettingOutlinedIcon />\n              <span className=\"desktop-navbar-label\">{window.W_L.setting}</span>\n            </Link>\n          </Menu.Item>\n        )}\n      </NavbarSection>\n\n      <NavbarSection className=\"desktop-navbar-profile-menu\">\n        <Menu.SubMenu\n          key=\"profile\"\n          popupClassName=\"desktop-navbar-submenu\"\n          tabIndex={0}\n          title={\n            <span data-test=\"ProfileDropdown\" className=\"desktop-navbar-profile-menu-title\">\n              <img className=\"profile__image_thumb\" src={currentUser.profile_image_url} alt={currentUser.name} />\n              {/* <div className=\"profile__live__type\">\n                <span style={{\"background\":socketType===0?\"red\":socketType===1?\"green\":\"yellow\"}}></span>\n                <div>{socketType===0?window.W_L.offline:socketType===1?window.W_L.online:window.W_L.pending}</div>\n              </div> */}\n            </span>\n          }>\n          <Menu.Item key=\"profile\">\n            <Link href=\"users/me\">{window.W_L.personal_setting}</Link>\n          </Menu.Item>\n          {currentUser.hasPermission(\"super_admin\") && (\n            <Menu.Item key=\"status\">\n              <Link href=\"admin/status\">{window.W_L.sys_status}</Link>\n            </Menu.Item>\n          )}\n          <Menu.Divider />\n          <Menu.Item key=\"logout\">\n            <PlainButton data-test=\"LogOutButton\" onClick={() => Auth.logout()}>\n              {window.W_L.log_out}\n            </PlainButton>\n          </Menu.Item>\n          <Menu.Divider />\n          <Menu.Item key=\"version\" role=\"presentation\" disabled className=\"version-info\">\n            <VersionInfo />\n          </Menu.Item>\n        </Menu.SubMenu>\n      </NavbarSection>\n    </nav>\n  );\n}","import { first } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport MenuOutlinedIcon from \"@ant-design/icons/MenuOutlined\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Menu from \"antd/lib/menu\";\nimport Link from \"@/components/Link\";\nimport { Auth, currentUser } from \"@/services/auth\";\nimport settingsMenu from \"@/services/settingsMenu\";\nimport logoUrl from \"@/assets/images/icon_small.png\";\n\nimport \"./MobileNavbar.less\";\n\nexport default function MobileNavbar({ getPopupContainer }) {\n  const firstSettingsTab = first(settingsMenu.getAvailableItems());\n\n  return (\n    <div className=\"mobile-navbar\">\n      <div className=\"mobile-navbar-logo\">\n        <Link href=\"./\">\n          <img src={logoUrl} alt=\"DeepBI\" />\n        </Link>\n      </div>\n      <div>\n        <Dropdown\n          overlayStyle={{ minWidth: 200 }}\n          trigger={[\"click\"]}\n          getPopupContainer={getPopupContainer} // so the overlay menu stays with the fixed header when page scrolls\n          overlay={\n            <Menu mode=\"vertical\" theme=\"dark\" selectable={false} className=\"mobile-navbar-menu\">\n              {/* {currentUser.hasPermission(\"list_dashboards\") && ( */}\n                <Menu.Item key=\"testdialogue\">\n                  <Link href=\"./\">{window.W_L.data_analysis}</Link>\n                </Menu.Item>\n                <Menu.Item key=\"dialogue-list\">\n                  <Link href=\"dialogue-list\">{window.W_L.history_dialogue}</Link>\n                </Menu.Item>\n               {/* )} */}\n              {/* {currentUser.hasPermission(\"view_query\") && ( */}\n                <Menu.Item key=\"report-route\">\n                  <Link href=\"report-route\">{window.W_L.report_generation}</Link>\n                </Menu.Item>\n              {/* )} */}\n              {/* {currentUser.hasPermission(\"list_alerts\") && ( */}\n                <Menu.Item key=\"queries\">\n                  <Link href=\"queries\">{window.W_L.report_list}</Link>\n                </Menu.Item>\n              {/* )} */}\n              <Menu.Item key=\"dashboards\">\n                <Link href=\"dashboards\">{window.W_L.dashboard}</Link>\n              </Menu.Item>\n              <Menu.Item key=\"dashboards_prettify\">\n                  <Link href=\"dashboards_prettify\">{window.W_L.dashboards_prettify}</Link>\n                </Menu.Item>\n              <Menu.Item key=\"autopilot\">\n                <Link href=\"autopilot\">{window.W_L.auto_pilot}</Link>\n              </Menu.Item>\n              <Menu.Item key=\"autopilot_list\"> \n                <Link href=\"autopilot_list\">{window.W_L.history_autopilot}</Link>\n              </Menu.Item> \n              {/* <Menu.Divider /> */}\n              {firstSettingsTab && (\n                <Menu.Item key=\"settings\">\n                  <Link href={firstSettingsTab.path}>{window.W_L.setting}</Link>\n                </Menu.Item>\n              )}\n              {/* {currentUser.hasPermission(\"super_admin\") && (\n                <Menu.Item key=\"status\">\n                  <Link href=\"admin/status\">{window.W_L.sys_status}</Link>\n                </Menu.Item>\n              )} */}\n              {currentUser.hasPermission(\"super_admin\") && <Menu.Divider />}\n              {/* <Menu.Item key=\"help\">\n                <Link href=\"\" target=\"_blank\" rel=\"noopener\">\n                  {window.W_L.help}\n                </Link>\n              </Menu.Item> */}\n              \n              <Menu.Item key=\"logout\" onClick={() => Auth.logout()}>\n                {window.W_L.log_out}\n              </Menu.Item>\n            </Menu>\n          }>\n          <Button className=\"mobile-navbar-toggle-button\" ghost>\n            <MenuOutlinedIcon />\n          </Button>\n        </Dropdown>\n      </div>\n    </div>\n  );\n}\n\nMobileNavbar.propTypes = {\n  getPopupContainer: PropTypes.func,\n};\n\nMobileNavbar.defaultProps = {\n  getPopupContainer: null,\n};\n","import React, { useRef, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport DesktopNavbar from \"./DesktopNavbar\";\nimport MobileNavbar from \"./MobileNavbar\";\n\nimport \"./index.less\";\n\nexport default function ApplicationLayout({ children }) {\n  const mobileNavbarContainerRef = useRef();\n\n  const getMobileNavbarPopupContainer = useCallback(() => mobileNavbarContainerRef.current, []);\n\n  return (\n    <React.Fragment>\n      <DynamicComponent name=\"ApplicationWrapper\">\n        <div className=\"application-layout-side-menu\">\n          <DynamicComponent name=\"ApplicationDesktopNavbar\">\n            <DesktopNavbar />\n          </DynamicComponent>\n        </div>\n        <div className=\"application-layout-content\">\n          <nav className=\"application-layout-top-menu\" ref={mobileNavbarContainerRef}>\n            <DynamicComponent name=\"ApplicationMobileNavbar\" getPopupContainer={getMobileNavbarPopupContainer}>\n              <MobileNavbar getPopupContainer={getMobileNavbarPopupContainer} />\n            </DynamicComponent>\n          </nav>\n          {children}\n        </div>\n      </DynamicComponent>\n    </React.Fragment>\n  );\n}\n\nApplicationLayout.propTypes = {\n  children: PropTypes.node,\n};\n\nApplicationLayout.defaultProps = {\n  children: null,\n};\n","import React, { useEffect, useState } from \"react\";\nimport ErrorBoundary, { ErrorBoundaryContext } from \"@/components/chart/components/ErrorBoundary\";\nimport { Auth } from \"@/services/auth\";\nimport { policy } from \"@/services/policy\";\nimport { CurrentRoute } from \"@/services/routes\";\nimport organizationStatus from \"@/services/organizationStatus\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport ApplicationLayout from \"./ApplicationLayout\";\nimport ErrorMessage from \"./ErrorMessage\";\n\nexport type UserSessionWrapperRenderChildrenProps<P> = {\n  pageTitle?: string;\n  onError: (error: Error) => void;\n} & P;\n\nexport interface UserSessionWrapperProps<P> {\n  render: (props: UserSessionWrapperRenderChildrenProps<P>) => React.ReactNode;\n  currentRoute: CurrentRoute<P>;\n  bodyClass?: string;\n}\n\n// This wrapper modifies `route.render` function and instead of passing `currentRoute` passes an object\n// that contains:\n// - `currentRoute.routeParams`\n// - `pageTitle` field which is equal to `currentRoute.title`\n// - `onError` field which is a `handleError` method of nearest error boundary\n\nexport function UserSessionWrapper<P>({ bodyClass, currentRoute, render }: UserSessionWrapperProps<P>) {\n  const [isAuthenticated, setIsAuthenticated] = useState(!!Auth.isAuthenticated());\n  useEffect(() => {\n    let isCancelled = false;\n    Promise.all([Auth.requireSession(), organizationStatus.refresh(), policy.refresh()])\n      .then(() => {\n        if (!isCancelled) {\n          setIsAuthenticated(!!Auth.isAuthenticated());\n        }\n      })\n      .catch(() => {\n        if (!isCancelled) {\n          setIsAuthenticated(false);\n        }\n      });\n    return () => {\n      isCancelled = true;\n    };\n  }, []);\n\n  useEffect(() => {\n    if (bodyClass) {\n      document.body.classList.toggle(bodyClass, true);\n      return () => {\n        document.body.classList.toggle(bodyClass, false);\n      };\n    }\n  }, [bodyClass]);\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return (\n    <ApplicationLayout>\n      <React.Fragment key={currentRoute.key}>\n        {/* @ts-expect-error FIXME */}\n        <ErrorBoundary renderError={(error: Error) => <ErrorMessage error={error} />}>\n          <ErrorBoundaryContext.Consumer>\n            {(\n              {\n                handleError,\n              } /* : { handleError: UserSessionWrapperRenderChildrenProps<P>[\"onError\"] } FIXME bring back type */\n            ) => render({ ...currentRoute.routeParams, pageTitle: currentRoute.title, onError: handleError })}\n          </ErrorBoundaryContext.Consumer>\n        </ErrorBoundary>\n      </React.Fragment>\n    </ApplicationLayout>\n  );\n}\n\nexport type RouteWithUserSessionOptions<P> = {\n  render: (props: UserSessionWrapperRenderChildrenProps<P>) => React.ReactNode;\n  bodyClass?: string;\n  title: string;\n  path: string;\n};\n\nexport const UserSessionWrapperDynamicComponentName = \"UserSessionWrapper\";\n\nexport default function routeWithUserSession<P extends {} = {}>({\n  render: originalRender,\n  bodyClass,\n  ...rest\n}: RouteWithUserSessionOptions<P>) {\n  return {\n    ...rest,\n    render: (currentRoute: CurrentRoute<P>) => {\n      const props = {\n        render: originalRender,\n        bodyClass,\n        currentRoute,\n      };\n      return (\n        <DynamicComponent\n          {...props}\n          name={UserSessionWrapperDynamicComponentName}\n          fallback={<UserSessionWrapper {...props} />}\n        />\n      );\n    },\n  };\n}\n","import { isFunction } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport ReactDOM from \"react-dom\";\n\n/**\n  Wrapper for dialogs based on Ant's <Modal> component.\n\n\n  Using wrapped dialogs\n  =====================\n\n  Wrapped component is an object with two fields:\n\n    {\n      showModal: (dialogProps) => object({\n          close: (result) => void,\n          dismiss: (reason) => void,\n          onClose: (handler) => this,\n          onDismiss: (handler) => this,\n        }),\n      Component: React.Component, // wrapped dialog component\n    }\n\n  To open dialog, use `showModal` method; optionally you can pass additional properties that\n  will be expanded on wrapped component:\n\n    const dialog = SomeWrappedDialog.showModal()\n\n    const dialog = SomeWrappedDialog.showModal({ greeting: 'Hello' })\n\n  To get result of modal, use `onClose`/`onDismiss` setters:\n\n    dialog\n      .onClose(result => { ... }) // pressed OK button or used `close` method\n      .onDismiss(result => { ... }) // pressed Cancel button or used `dismiss` method\n\n  If `onClose`/`onDismiss` returns a promise - dialog wrapper will stop handling further close/dismiss\n  requests and will show loader on a corresponding button until that promise is fulfilled (either resolved or\n  rejected). If that promise will be rejected - dialog close/dismiss will be abandoned. Use promise returned\n  from `close`/`dismiss` methods to handle errors (if needed).\n\n  Also, dialog has `close` and `dismiss` methods that allows to close dialog by caller. Passed arguments\n  will be passed to a corresponding handler. Both methods will return the promise returned from `onClose` and\n `onDismiss` callbacks. `update` method allows to pass new properties to dialog.\n\n\n  Creating a dialog\n  ================\n\n  1. Add imports:\n\n    import { wrap as wrapDialog, DialogPropType } from 'path/to/DialogWrapper';\n\n  2. define a `dialog` property on your component:\n\n    propTypes = {\n      dialog: DialogPropType.isRequired,\n    };\n\n  `dialog` property is an object:\n\n    {\n      props: object, // properties for <Modal> component;\n      close: (result) => void, // method to confirm dialog; `result` will be returned to caller\n      dismiss: (reason) => void, // method to reject dialog; `reason` will be returned to caller\n    }\n\n  3. expand additional properties on <Modal> component:\n\n    render() {\n      const { dialog } = this.props;\n      return (\n        <Modal {...dialog.props}>\n      );\n    }\n\n  4. wrap your component and export it:\n\n    export default wrapDialog(YourComponent).\n\n  Your component is ready to use. Wrapper will manage <Modal>'s visibility and events.\n  If you want to override behavior of `onOk`/`onCancel` - don't forget to close dialog:\n\n    customOkHandler() {\n      this.saveData().then(() => {\n         this.props.dialog.close({ success: true }); // or dismiss();\n      });\n    }\n\n    render() {\n      const { dialog } = this.props;\n        return (\n          <Modal {...dialog.props} onOk={() => this.customOkHandler()}>\n        );\n    }\n*/\n\nexport const DialogPropType = PropTypes.shape({\n  props: PropTypes.shape({\n    visible: PropTypes.bool,\n    onOk: PropTypes.func,\n    onCancel: PropTypes.func,\n    afterClose: PropTypes.func,\n  }).isRequired,\n  close: PropTypes.func.isRequired,\n  dismiss: PropTypes.func.isRequired,\n});\n\nfunction openDialog(DialogComponent, props) {\n  const dialog = {\n    props: {\n      visible: true,\n      okButtonProps: {},\n      cancelButtonProps: {},\n      onOk: () => {},\n      onCancel: () => {},\n      afterClose: () => {},\n    },\n    close: () => {},\n    dismiss: () => {},\n  };\n\n  let pendingCloseTask = null;\n\n  const handlers = {\n    onClose: () => {},\n    onDismiss: () => {},\n  };\n\n  const container = document.createElement(\"div\");\n  document.body.appendChild(container);\n\n  function render() {\n    ReactDOM.render(<DialogComponent {...props} dialog={dialog} />, container);\n  }\n\n  function destroyDialog() {\n    // Allow calling chain to roll up, and then destroy component\n    setTimeout(() => {\n      ReactDOM.unmountComponentAtNode(container);\n      document.body.removeChild(container);\n    }, 10);\n  }\n\n  function processDialogClose(result, setAdditionalDialogProps) {\n    dialog.props.okButtonProps = { disabled: true };\n    dialog.props.cancelButtonProps = { disabled: true };\n    setAdditionalDialogProps();\n    render();\n\n    return Promise.resolve(result)\n      .then(() => {\n        dialog.props.visible = false;\n      })\n      .finally(() => {\n        dialog.props.okButtonProps = {};\n        dialog.props.cancelButtonProps = {};\n        render();\n      });\n  }\n\n  function closeDialog(result) {\n    if (!pendingCloseTask) {\n      pendingCloseTask = processDialogClose(handlers.onClose(result), () => {\n        dialog.props.okButtonProps.loading = true;\n      }).finally(() => {\n        pendingCloseTask = null;\n      });\n    }\n    return pendingCloseTask;\n  }\n\n  function dismissDialog(result) {\n    if (!pendingCloseTask) {\n      pendingCloseTask = processDialogClose(handlers.onDismiss(result), () => {\n        dialog.props.cancelButtonProps.loading = true;\n      }).finally(() => {\n        pendingCloseTask = null;\n      });\n    }\n    return pendingCloseTask;\n  }\n\n  dialog.props.onOk = closeDialog;\n  dialog.props.onCancel = dismissDialog;\n  dialog.props.afterClose = destroyDialog;\n  dialog.close = closeDialog;\n  dialog.dismiss = dismissDialog;\n\n  const result = {\n    close: closeDialog,\n    dismiss: dismissDialog,\n    update: newProps => {\n      props = { ...props, ...newProps };\n      render();\n    },\n    onClose: handler => {\n      if (isFunction(handler)) {\n        handlers.onClose = handler;\n      }\n      return result;\n    },\n    onDismiss: handler => {\n      if (isFunction(handler)) {\n        handlers.onDismiss = handler;\n      }\n      return result;\n    },\n  };\n\n  render(); // show it only when all structures initialized to avoid unnecessary re-rendering\n\n  return result;\n}\n\nexport function wrap(DialogComponent) {\n  return {\n    Component: DialogComponent,\n    showModal: props => openDialog(DialogComponent, props),\n  };\n}\n\nexport default {\n  DialogPropType,\n  wrap,\n};\n","import location from \"@/services/location\";\nimport url from \"@/services/url\";\nimport { stripBase } from \"./Router\";\n\n// When `replace` is set to `true` - it will just replace current URL\n// without reloading current page (router will skip this location change)\nexport default function navigateTo(href, replace = false) {\n  // Allow calling chain to roll up, and then navigate\n  setTimeout(() => {\n    const isExternal = stripBase(href) === false;\n    if (isExternal) {\n      window.location = href;\n      return;\n    }\n    href = url.parse(href);\n    location.update(\n      {\n        path: href.pathname,\n        search: href.search,\n        hash: href.hash,\n      },\n      replace\n    );\n  }, 10);\n}\n","import { axios } from \"@/services/axios\";\nimport { debounce, extend } from \"lodash\";\n\nlet events = [];\n\nconst post = debounce(() => {\n  const eventsToSend = events;\n  events = [];\n\n  axios.post(\"api/events\", eventsToSend);\n}, 1000);\n\nexport default function recordEvent(action, objectType, objectId, additionalProperties) {\n  const event = {\n    action,\n    object_type: objectType,\n    object_id: objectId,\n    timestamp: Date.now() / 1000.0,\n    screen_resolution: `${window.screen.width}x${window.screen.height}`,\n  };\n  extend(event, additionalProperties);\n  events.push(event);\n\n  post();\n}\n","export default {\n  columns: 6, // grid columns count\n  rowHeight: 50, // grid row height (incl. bottom padding)\n  margins: 15, // widget margins\n  mobileBreakPoint: 800,\n  // defaults for widgets\n  defaultSizeX: 3,\n  defaultSizeY: 3,\n  minSizeX: 1,\n  maxSizeX: 6,\n  minSizeY: 1,\n  maxSizeY: 1000,\n};\n","import { isNull, isObject, isFunction, isUndefined, isEqual, has, omit, isArray, each } from \"lodash\";\n\nclass Parameter {\n  constructor(parameter, parentQueryId) {\n    this.title = parameter.title;\n    this.name = parameter.name;\n    this.type = parameter.type;\n    this.global = parameter.global; // backward compatibility in Widget service\n    this.parentQueryId = parentQueryId;\n\n    // Used for meta-parameters (i.e. dashboard-level params)\n    this.locals = [];\n\n    // Used for URL serialization\n    this.urlPrefix = \"p_\";\n  }\n\n  static getExecutionValue(param, extra = {}) {\n    if (!isObject(param) || !isFunction(param.getExecutionValue)) {\n      return null;\n    }\n\n    return param.getExecutionValue(extra);\n  }\n\n  static setValue(param, value) {\n    if (!isObject(param) || !isFunction(param.setValue)) {\n      return null;\n    }\n\n    return param.setValue(value);\n  }\n\n  get isEmpty() {\n    return isNull(this.normalizedValue);\n  }\n\n  get hasPendingValue() {\n    return this.pendingValue !== undefined && !isEqual(this.pendingValue, this.normalizedValue);\n  }\n\n  /** Get normalized value to be used in inputs */\n  get normalizedValue() {\n    return this.$$value;\n  }\n\n  isEmptyValue(value) {\n    return isNull(this.normalizeValue(value));\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  normalizeValue(value) {\n    if (isUndefined(value)) {\n      return null;\n    }\n    return value;\n  }\n\n  updateLocals() {\n    if (isArray(this.locals)) {\n      each(this.locals, local => {\n        local.setValue(this.value);\n      });\n    }\n  }\n\n  setValue(value) {\n    const normalizedValue = this.normalizeValue(value);\n    this.value = normalizedValue;\n    this.$$value = normalizedValue;\n\n    this.updateLocals();\n    this.clearPendingValue();\n    return this;\n  }\n\n  /** Get execution value for a query */\n  getExecutionValue() {\n    return this.value;\n  }\n\n  setPendingValue(value) {\n    this.pendingValue = this.normalizeValue(value);\n  }\n\n  applyPendingValue() {\n    if (this.hasPendingValue) {\n      this.setValue(this.pendingValue);\n    }\n  }\n\n  clearPendingValue() {\n    this.pendingValue = undefined;\n  }\n\n  /** Update URL with Parameter value */\n  toUrlParams() {\n    const prefix = this.urlPrefix;\n    // `null` removes the parameter from the URL in case it exists\n    return {\n      [`${prefix}${this.name}`]: !this.isEmpty ? this.value : null,\n    };\n  }\n\n  /** Set parameter value from the URL */\n  fromUrlParams(query) {\n    const prefix = this.urlPrefix;\n    const key = `${prefix}${this.name}`;\n    if (has(query, key)) {\n      this.setValue(query[key]);\n    }\n  }\n\n  toQueryTextFragment() {\n    return `{{ ${this.name} }}`;\n  }\n\n  /** Get a saveable version of the Parameter by omitting unnecessary props */\n  toSaveableObject() {\n    return omit(this, [\"$$value\", \"urlPrefix\", \"pendingValue\", \"parentQueryId\"]);\n  }\n}\n\nexport default Parameter;\n","import { toString, isEmpty } from \"lodash\";\nimport Parameter from \"./Parameter\";\n\nclass TextParameter extends Parameter {\n  constructor(parameter, parentQueryId) {\n    super(parameter, parentQueryId);\n    this.setValue(parameter.value);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  normalizeValue(value) {\n    const normalizedValue = toString(value);\n    if (isEmpty(normalizedValue)) {\n      return null;\n    }\n    return normalizedValue;\n  }\n}\n\nexport default TextParameter;\n","import { toNumber, isNull } from \"lodash\";\nimport Parameter from \"./Parameter\";\n\nclass NumberParameter extends Parameter {\n  constructor(parameter, parentQueryId) {\n    super(parameter, parentQueryId);\n    this.setValue(parameter.value);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  normalizeValue(value) {\n    if (isNull(value)) {\n      return null;\n    }\n    const normalizedValue = toNumber(value);\n    return !isNaN(normalizedValue) ? normalizedValue : null;\n  }\n}\n\nexport default NumberParameter;\n","import { isArray, isEmpty, includes, intersection, get, map, join, has } from \"lodash\";\nimport Parameter from \"./Parameter\";\n\nclass EnumParameter extends Parameter {\n  constructor(parameter, parentQueryId) {\n    super(parameter, parentQueryId);\n    this.enumOptions = parameter.enumOptions;\n    this.multiValuesOptions = parameter.multiValuesOptions;\n    this.setValue(parameter.value);\n  }\n\n  normalizeValue(value) {\n    if (isEmpty(this.enumOptions)) {\n      return null;\n    }\n\n    const enumOptionsArray = this.enumOptions.split(\"\\n\") || [];\n    if (this.multiValuesOptions) {\n      if (!isArray(value)) {\n        value = [value];\n      }\n      value = intersection(value, enumOptionsArray);\n    } else if (!value || isArray(value) || !includes(enumOptionsArray, value)) {\n      value = enumOptionsArray[0];\n    }\n\n    if (isArray(value) && isEmpty(value)) {\n      return null;\n    }\n    return value;\n  }\n\n  getExecutionValue(extra = {}) {\n    const { joinListValues } = extra;\n    if (joinListValues && isArray(this.value)) {\n      const separator = get(this.multiValuesOptions, \"separator\", \",\");\n      const prefix = get(this.multiValuesOptions, \"prefix\", \"\");\n      const suffix = get(this.multiValuesOptions, \"suffix\", \"\");\n      const parameterValues = map(this.value, v => `${prefix}${v}${suffix}`);\n      return join(parameterValues, separator);\n    }\n    return this.value;\n  }\n\n  toUrlParams() {\n    const prefix = this.urlPrefix;\n\n    let urlParam = this.value;\n    if (this.multiValuesOptions && isArray(this.value)) {\n      urlParam = JSON.stringify(this.value);\n    }\n\n    return {\n      [`${prefix}${this.name}`]: !this.isEmpty ? urlParam : null,\n    };\n  }\n\n  fromUrlParams(query) {\n    const prefix = this.urlPrefix;\n    const key = `${prefix}${this.name}`;\n    if (has(query, key)) {\n      if (this.multiValuesOptions) {\n        try {\n          const valueFromJson = JSON.parse(query[key]);\n          this.setValue(isArray(valueFromJson) ? valueFromJson : query[key]);\n        } catch (e) {\n          this.setValue(query[key]);\n        }\n      } else {\n        this.setValue(query[key]);\n      }\n    }\n  }\n}\n\nexport default EnumParameter;\n","import debug from \"debug\";\nimport moment from \"moment\";\nimport { axios } from \"@/services/axios\";\nimport { QueryResultError } from \"@/services/query\";\nimport { Auth } from \"@/services/auth\";\nimport { isString, uniqBy, each, isNumber, includes, extend, forOwn, get } from \"lodash\";\n\nconst logger = debug(\"redash:services:QueryResult\");\nconst filterTypes = [\"filter\", \"multi-filter\", \"multiFilter\"];\n\nfunction defer() {\n  const result = { onStatusChange: status => {} };\n  result.promise = new Promise((resolve, reject) => {\n    result.resolve = resolve;\n    result.reject = reject;\n  });\n  return result;\n}\n\nfunction getColumnNameWithoutType(column) {\n  let typeSplit;\n  if (column.indexOf(\"::\") !== -1) {\n    typeSplit = \"::\";\n  } else if (column.indexOf(\"__\") !== -1) {\n    typeSplit = \"__\";\n  } else {\n    return column;\n  }\n\n  const parts = column.split(typeSplit);\n  if (parts[0] === \"\" && parts.length === 2) {\n    return parts[1];\n  }\n\n  if (!includes(filterTypes, parts[1])) {\n    return column;\n  }\n\n  return parts[0];\n}\n\nfunction getColumnFriendlyName(column) {\n  return getColumnNameWithoutType(column).replace(/(?:^|\\s)\\S/g, a => a.toUpperCase());\n}\n\nconst createOrSaveUrl = data => (data.id ? `api/query_results/${data.id}` : \"api/query_results\");\nconst QueryResultResource = {\n  get: ({ id }) => axios.get(`api/query_results/${id}`),\n  post: data => axios.post(createOrSaveUrl(data), data),\n};\n\nexport const ExecutionStatus = {\n  WAITING: \"waiting\",\n  PROCESSING: \"processing\",\n  DONE: \"done\",\n  FAILED: \"failed\",\n  LOADING_RESULT: \"loading-result\",\n};\n\nconst statuses = {\n  1: ExecutionStatus.WAITING,\n  2: ExecutionStatus.PROCESSING,\n  3: ExecutionStatus.DONE,\n  4: ExecutionStatus.FAILED,\n};\n\nfunction handleErrorResponse(queryResult, error) {\n  const status = get(error, \"response.status\");\n  switch (status) {\n    case 403:\n      queryResult.update(error.response.data);\n      return;\n    case 400:\n      if (\"job\" in error.response.data) {\n        queryResult.update(error.response.data);\n        return;\n      }\n      break;\n    case 404:\n      queryResult.update({\n        job: {\n          error: \"cached query result unavailable, please execute again.\",\n          status: 4,\n        },\n      });\n      return;\n    // no default\n  }\n\n  logger(\"Unknown error\", error);\n  queryResult.update({\n    job: {\n      error: get(error, \"response.data.message\", \"Unknown error occurred. Please try again later.\"),\n      status: 4,\n    },\n  });\n}\n\nfunction sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function fetchDataFromJob(jobId, interval = 1000) {\n  return axios.get(`api/jobs/${jobId}`).then(data => {\n    const status = statuses[data.job.status];\n    if (status === ExecutionStatus.WAITING || status === ExecutionStatus.PROCESSING) {\n      return sleep(interval).then(() => fetchDataFromJob(data.job.id));\n    } else if (status === ExecutionStatus.DONE) {\n      return data.job.result;\n    } else if (status === ExecutionStatus.FAILED) {\n      return Promise.reject(data.job.error);\n    }\n  });\n}\n\nclass QueryResult {\n  constructor(props) {\n    this.deferred = defer();\n    this.job = {};\n    this.query_result = {};\n    this.status = \"waiting\";\n\n    this.updatedAt = moment();\n\n    // extended status flags\n    this.isLoadingResult = false;\n\n    if (props) {\n      this.update(props);\n    }\n  }\n\n  update(props) {\n    extend(this, props);\n\n    if (\"query_result\" in props) {\n      this.status = ExecutionStatus.DONE;\n      this.deferred.onStatusChange(ExecutionStatus.DONE);\n\n      const columnTypes = {};\n\n      // TODO: we should stop manipulating incoming data, and switch to relaying\n      // on the column type set by the backend. This logic is prone to errors,\n      // and better be removed. Kept for now, for backward compatability.\n      each(this.query_result.data.rows, row => {\n        forOwn(row, (v, k) => {\n          let newType = null;\n          if (isNumber(v)) {\n            newType = \"float\";\n          } else if (isString(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}T/)) {\n            row[k] = moment.utc(v);\n            newType = \"datetime\";\n          } else if (isString(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n            row[k] = moment.utc(v);\n            newType = \"date\";\n          } else if (typeof v === \"object\" && v !== null) {\n            row[k] = JSON.stringify(v);\n          } else {\n            newType = \"string\";\n          }\n\n          if (newType !== null) {\n            if (columnTypes[k] !== undefined && columnTypes[k] !== newType) {\n              columnTypes[k] = \"string\";\n            } else {\n              columnTypes[k] = newType;\n            }\n          }\n        });\n      });\n\n      each(this.query_result.data.columns, column => {\n        column.name = \"\" + column.name;\n        if (columnTypes[column.name]) {\n          if (column.type == null || column.type === \"string\") {\n            column.type = columnTypes[column.name];\n          }\n        }\n      });\n\n      this.deferred.resolve(this);\n    } else if (this.job.status === 3 || this.job.status === 2) {\n      this.deferred.onStatusChange(ExecutionStatus.PROCESSING);\n      this.status = \"processing\";\n    } else if (this.job.status === 4) {\n      this.status = statuses[this.job.status];\n      this.deferred.reject(new QueryResultError(this.job.error));\n    } else {\n      this.deferred.onStatusChange(undefined);\n      this.status = undefined;\n    }\n  }\n\n  getId() {\n    let id = null;\n    if (\"query_result\" in this) {\n      id = this.query_result.id;\n    }\n    return id;\n  }\n\n  cancelExecution() {\n    axios.delete(`api/jobs/${this.job.id}`);\n  }\n\n  getStatus() {\n    if (this.isLoadingResult) {\n      return ExecutionStatus.LOADING_RESULT;\n    }\n    return this.status || statuses[this.job.status];\n  }\n\n  getError() {\n    // TODO: move this logic to the server...\n    if (this.job.error === \"None\") {\n      return undefined;\n    }\n\n    return this.job.error;\n  }\n\n  getLog() {\n    if (!this.query_result.data || !this.query_result.data.log || this.query_result.data.log.length === 0) {\n      return null;\n    }\n\n    return this.query_result.data.log;\n  }\n\n  getUpdatedAt() {\n    return this.query_result.retrieved_at || this.job.updated_at * 1000.0 || this.updatedAt;\n  }\n\n  getRuntime() {\n    return this.query_result.runtime;\n  }\n\n  getRawData() {\n    if (!this.query_result.data) {\n      return null;\n    }\n\n    return this.query_result.data.rows;\n  }\n\n  getData() {\n    return this.query_result.data ? this.query_result.data.rows : null;\n  }\n\n  isEmpty() {\n    return this.getData() === null || this.getData().length === 0;\n  }\n\n  getColumns() {\n    if (this.columns === undefined && this.query_result.data) {\n      this.columns = this.query_result.data.columns;\n    }\n\n    return this.columns;\n  }\n\n  getColumnNames() {\n    if (this.columnNames === undefined && this.query_result.data) {\n      this.columnNames = this.query_result.data.columns.map(v => v.name);\n    }\n\n    return this.columnNames;\n  }\n\n  getColumnFriendlyNames() {\n    return this.getColumnNames().map(col => getColumnFriendlyName(col));\n  }\n\n  getTruncated() {\n    return this.query_result.data ? this.query_result.data.truncated : null;\n  }\n\n  getFilters() {\n    if (!this.getColumns()) {\n      return [];\n    }\n\n    const filters = [];\n\n    this.getColumns().forEach(col => {\n      const name = col.name;\n      const type = name.split(\"::\")[1] || name.split(\"__\")[1];\n      if (includes(filterTypes, type)) {\n        // filter found\n        const filter = {\n          name,\n          friendlyName: getColumnFriendlyName(name),\n          column: col,\n          values: [],\n          multiple: type === \"multiFilter\" || type === \"multi-filter\",\n        };\n        filters.push(filter);\n      }\n    }, this);\n\n    this.getRawData().forEach(row => {\n      filters.forEach(filter => {\n        filter.values.push(row[filter.name]);\n        if (filter.values.length === 1) {\n          if (filter.multiple) {\n            filter.current = [row[filter.name]];\n          } else {\n            filter.current = row[filter.name];\n          }\n        }\n      });\n    });\n\n    filters.forEach(filter => {\n      filter.values = uniqBy(filter.values, v => {\n        if (moment.isMoment(v)) {\n          return v.unix();\n        }\n        return v;\n      });\n      if (filter.values.length > 1 && filter.multiple) {\n        filter.current = filter.values.slice();\n      }\n    });\n\n    return filters;\n  }\n\n  toPromise(statusCallback) {\n    if (statusCallback) {\n      this.deferred.onStatusChange = statusCallback;\n    }\n    return this.deferred.promise;\n  }\n\n  static getById(queryId, id) {\n    const queryResult = new QueryResult();\n\n    queryResult.isLoadingResult = true;\n    queryResult.deferred.onStatusChange(ExecutionStatus.LOADING_RESULT);\n\n    axios\n      .get(`api/queries/${queryId}/results/${id}.json`)\n      .then(response => {\n        // Success handler\n        queryResult.isLoadingResult = false;\n        queryResult.update(response);\n      })\n      .catch(error => {\n        // Error handler\n        queryResult.isLoadingResult = false;\n        handleErrorResponse(queryResult, error);\n      });\n\n    return queryResult;\n  }\n\n  loadLatestCachedResult(queryId, parameters) {\n    axios\n      .post(`api/queries/${queryId}/results`, { queryId, parameters })\n      .then(response => {\n        this.update(response);\n      })\n      .catch(error => {\n        handleErrorResponse(this, error);\n      });\n  }\n\n  loadResult(tryCount) {\n    this.isLoadingResult = true;\n    this.deferred.onStatusChange(ExecutionStatus.LOADING_RESULT);\n\n    QueryResultResource.get({ id: this.job.query_result_id })\n      .then(response => {\n        this.update(response);\n        this.isLoadingResult = false;\n      })\n      .catch(error => {\n        if (tryCount === undefined) {\n          tryCount = 0;\n        }\n\n        if (tryCount > 3) {\n          logger(\"Connection error while trying to load result\", error);\n          this.update({\n            job: {\n              error: \"failed communicating with server. Please check your Internet connection and try again.\",\n              status: 4,\n            },\n          });\n          this.isLoadingResult = false;\n        } else {\n          setTimeout(() => {\n            this.loadResult(tryCount + 1);\n          }, 1000 * Math.pow(2, tryCount));\n        }\n      });\n  }\n\n  refreshStatus(query, parameters, tryNumber = 1) {\n    const loadResult = () =>\n      Auth.isAuthenticated() ? this.loadResult() : this.loadLatestCachedResult(query, parameters);\n\n    const request = Auth.isAuthenticated()\n      ? axios.get(`api/jobs/${this.job.id}`)\n      : axios.get(`api/queries/${query}/jobs/${this.job.id}`);\n\n    request\n      .then(jobResponse => {\n        this.update(jobResponse);\n\n        if (this.getStatus() === \"processing\" && this.job.query_result_id && this.job.query_result_id !== \"None\") {\n          loadResult();\n        } else if (this.getStatus() !== \"failed\") {\n          const waitTime = tryNumber > 10 ? 3000 : 500;\n          setTimeout(() => {\n            this.refreshStatus(query, parameters, tryNumber + 1);\n          }, waitTime);\n        }\n      })\n      .catch(error => {\n        logger(\"Connection error\", error);\n        // TODO: use QueryResultError, or better yet: exception/reject of promise.\n        this.update({\n          job: {\n            error: \"failed communicating with server. Please check your Internet connection and try again.\",\n            status: 4,\n          },\n        });\n      });\n  }\n\n  getLink(queryId, fileType, apiKey) {\n    let link = `api/queries/${queryId}/results/${this.getId()}.${fileType}`;\n    if (apiKey) {\n      link = `${link}?api_key=${apiKey}`;\n    }\n    return link;\n  }\n\n  getName(queryName, fileType) {\n    return `${queryName.replace(/ /g, \"_\") + moment(this.getUpdatedAt()).format(\"_YYYY_MM_DD\")}.${fileType}`;\n  }\n\n  static getByQueryId(id, parameters, applyAutoLimit, maxAge) {\n    const queryResult = new QueryResult();\n\n    axios\n      .post(`api/queries/${id}/results`, { id, parameters, apply_auto_limit: applyAutoLimit, max_age: maxAge })\n      .then(response => {\n        queryResult.update(response);\n\n        if (\"job\" in response) {\n          queryResult.refreshStatus(id, parameters);\n        }\n      })\n      .catch(error => {\n        handleErrorResponse(queryResult, error);\n      });\n\n    return queryResult;\n  }\n\n  static get(dataSourceId, query, parameters, applyAutoLimit, maxAge, queryId) {\n    const queryResult = new QueryResult();\n\n    const params = {\n      data_source_id: dataSourceId,\n      parameters,\n      query,\n      apply_auto_limit: applyAutoLimit,\n      max_age: maxAge,\n    };\n\n    if (queryId !== undefined) {\n      params.query_id = queryId;\n    }\n\n    QueryResultResource.post(params)\n      .then(response => {\n        queryResult.update(response);\n\n        if (\"job\" in response) {\n          queryResult.refreshStatus(query, parameters);\n        }\n      })\n      .catch(error => {\n        handleErrorResponse(queryResult, error);\n      });\n\n    return queryResult;\n  }\n}\n\nexport default QueryResult;\n","const PREFIX = \"localOptions:\";\n\nfunction get(key, defaultValue = undefined) {\n  const fullKey = PREFIX + key;\n  if (fullKey in window.localStorage) {\n    return JSON.parse(window.localStorage.getItem(fullKey));\n  }\n  return defaultValue;\n}\n\nfunction set(key, value) {\n  const fullKey = PREFIX + key;\n  window.localStorage.setItem(fullKey, JSON.stringify(value));\n}\n\nexport default {\n  get,\n  set,\n};\n","import moment from \"moment\";\nimport debug from \"debug\";\nimport Mustache from \"mustache\";\nimport { axios } from \"@/services/axios\";\nimport {\n  zipObject,\n  isEmpty,\n  isArray,\n  map,\n  filter,\n  includes,\n  union,\n  uniq,\n  has,\n  identity,\n  extend,\n  each,\n  some,\n  clone,\n  find,\n} from \"lodash\";\nimport location from \"@/services/location\";\n\nimport { Parameter, createParameter } from \"./parameters\";\nimport { currentUser } from \"./auth\";\nimport QueryResult from \"./query-result\";\nimport localOptions from \"@/lib/localOptions\";\n\nMustache.escape = identity; // do not html-escape values\n\nconst logger = debug(\"redash:services:query\");\n\nfunction collectParams(parts) {\n  let parameters = [];\n\n  parts.forEach(part => {\n    if (part[0] === \"name\" || part[0] === \"&\") {\n      parameters.push(part[1].split(\".\")[0]);\n    } else if (part[0] === \"#\") {\n      parameters = union(parameters, collectParams(part[4]));\n    }\n  });\n\n  return parameters;\n}\n\nexport class Query {\n  constructor(query) {\n    extend(this, query);\n\n    if (!has(this, \"options\")) {\n      this.options = {};\n    }\n    this.options.apply_auto_limit = !!this.options.apply_auto_limit;\n\n    if (!isArray(this.options.parameters)) {\n      this.options.parameters = [];\n    }\n  }\n\n  isNew() {\n    return this.id === undefined;\n  }\n\n  hasDailySchedule() {\n    return this.schedule && this.schedule.match(/\\d\\d:\\d\\d/) !== null;\n  }\n\n  scheduleInLocalTime() {\n    const parts = this.schedule.split(\":\");\n    return moment\n      .utc()\n      .hour(parts[0])\n      .minute(parts[1])\n      .local()\n      .format(\"HH:mm\");\n  }\n\n  hasResult() {\n    return !!(this.latest_query_data || this.latest_query_data_id);\n  }\n\n  paramsRequired() {\n    return this.getParameters().isRequired();\n  }\n\n  hasParameters() {\n    return this.getParametersDefs().length > 0;\n  }\n\n  prepareQueryResultExecution(execute, maxAge) {\n    const parameters = this.getParameters();\n    const missingParams = parameters.getMissing();\n\n    if (missingParams.length > 0) {\n      let paramsWord = \"parameter\";\n      let valuesWord = \"value\";\n      if (missingParams.length > 1) {\n        paramsWord = \"parameters\";\n        valuesWord = \"values\";\n      }\n\n      return new QueryResult({\n        job: {\n          error: `missing ${valuesWord} for ${missingParams.join(\", \")} ${paramsWord}.`,\n          status: 4,\n        },\n      });\n    }\n\n    if (parameters.isRequired()) {\n      // Need to clear latest results, to make sure we don't use results for different params.\n      this.latest_query_data = null;\n      this.latest_query_data_id = null;\n    }\n\n    if (this.latest_query_data && maxAge !== 0) {\n      if (!this.queryResult) {\n        this.queryResult = new QueryResult({\n          query_result: this.latest_query_data,\n        });\n      }\n    } else if (this.latest_query_data_id && maxAge !== 0) {\n      if (!this.queryResult) {\n        this.queryResult = QueryResult.getById(this.id, this.latest_query_data_id);\n      }\n    } else {\n      this.queryResult = execute();\n    }\n\n    return this.queryResult;\n  } \n\n  getQueryResult(maxAge) {\n    const execute = () =>\n      QueryResult.getByQueryId(this.id, this.getParameters().getExecutionValues(), this.getAutoLimit(), maxAge);\n    return this.prepareQueryResultExecution(execute, maxAge);\n  }\n\n  getQueryResultByText(maxAge, selectedQueryText) {\n    const queryText = selectedQueryText || this.query;\n    if (!queryText) {\n      return new QueryResultError(window.W_L.empty_query);\n    }\n\n    const parameters = this.getParameters().getExecutionValues({ joinListValues: true });\n    const execute = () =>\n      QueryResult.get(this.data_source_id, queryText, parameters, this.getAutoLimit(), maxAge, this.id);\n    return this.prepareQueryResultExecution(execute, maxAge);\n  }\n\n  getUrl(source, hash) {\n    let url = `queries/${this.id}`;\n\n    if (source) {\n      url += \"/source\";\n    }\n\n    let params = {};\n    if (this.getParameters().isRequired()) {\n      this.getParametersDefs().forEach(param => {\n        extend(params, param.toUrlParams());\n      });\n    }\n    Object.keys(params).forEach(key => params[key] == null && delete params[key]);\n    params = map(params, (value, name) => `${encodeURIComponent(name)}=${encodeURIComponent(value)}`).join(\"&\");\n\n    if (params !== \"\") {\n      url += `?${params}`;\n    }\n\n    if (hash) {\n      url += `#${hash}`;\n    }\n\n    return url;\n  }\n\n  getQueryResultPromise() {\n    return this.getQueryResult().toPromise();\n  }\n\n  getParameters() {\n    if (!this.$parameters) {\n      this.$parameters = new Parameters(this, location.search);\n    }\n\n    return this.$parameters;\n  }\n\n  getAutoLimit() {\n    return this.options.apply_auto_limit;\n  }\n\n  getParametersDefs(update = true) {\n    return this.getParameters().get(update);\n  }\n\n  favorite() {\n    return Query.favorite(this);\n  }\n\n  unfavorite() {\n    return Query.unfavorite(this);\n  }\n\n  clone() {\n    const newQuery = clone(this);\n    newQuery.$parameters = null;\n    newQuery.getParameters();\n    return newQuery;\n  }\n}\n\nclass Parameters {\n  constructor(query, queryString) {\n    this.query = query;\n    this.updateParameters();\n    this.initFromQueryString(queryString);\n  }\n\n  parseQuery() {\n    const fallback = () => map(this.query.options.parameters, i => i.name);\n\n    let parameters = [];\n    if (this.query.query !== undefined) {\n      try {\n        const parts = Mustache.parse(this.query.query);\n        parameters = uniq(collectParams(parts));\n      } catch (e) {\n        logger(\"Failed parsing parameters: \", e);\n        // Return current parameters so we don't reset the list\n        parameters = fallback();\n      }\n    } else {\n      parameters = fallback();\n    }\n\n    return parameters;\n  }\n\n  updateParameters(update) {\n    if (this.query.query === this.cachedQueryText) {\n      const parameters = this.query.options.parameters;\n      const hasUnprocessedParameters = find(parameters, p => !(p instanceof Parameter));\n      if (hasUnprocessedParameters) {\n        this.query.options.parameters = map(parameters, p =>\n          p instanceof Parameter ? p : createParameter(p, this.query.id)\n        );\n      }\n      return;\n    }\n\n    this.cachedQueryText = this.query.query;\n    const parameterNames = update ? this.parseQuery() : map(this.query.options.parameters, p => p.name);\n\n    this.query.options.parameters = this.query.options.parameters || [];\n\n    const parametersMap = {};\n    this.query.options.parameters.forEach(param => {\n      parametersMap[param.name] = param;\n    });\n\n    parameterNames.forEach(param => {\n      if (!has(parametersMap, param)) {\n        this.query.options.parameters.push(\n          createParameter({\n            title: param,\n            name: param,\n            type: \"text\",\n            value: null,\n            global: false,\n          })\n        );\n      }\n    });\n\n    const parameterExists = p => includes(parameterNames, p.name);\n    const parameters = this.query.options.parameters;\n    this.query.options.parameters = parameters\n      .filter(parameterExists)\n      .map(p => (p instanceof Parameter ? p : createParameter(p, this.query.id)));\n  }\n\n  initFromQueryString(query) {\n    this.get().forEach(param => {\n      param.fromUrlParams(query);\n    });\n  }\n\n  get(update = true) {\n    this.updateParameters(update);\n    return this.query.options.parameters;\n  }\n\n  add(parameterDef) {\n    this.query.options.parameters = this.query.options.parameters.filter(p => p.name !== parameterDef.name);\n    const param = createParameter(parameterDef);\n    this.query.options.parameters.push(param);\n    return param;\n  }\n\n  getMissing() {\n    return map(\n      filter(this.get(), p => p.isEmpty),\n      i => i.title\n    );\n  }\n\n  isRequired() {\n    return !isEmpty(this.get());\n  }\n\n  getExecutionValues(extra = {}) {\n    const params = this.get();\n    return zipObject(\n      map(params, i => i.name),\n      map(params, i => i.getExecutionValue(extra))\n    );\n  }\n\n  hasPendingValues() {\n    return some(this.get(), p => p.hasPendingValue);\n  }\n\n  applyPendingValues() {\n    each(this.get(), p => p.applyPendingValue());\n  }\n\n  toUrlParams() {\n    if (this.get().length === 0) {\n      return \"\";\n    }\n\n    const params = Object.assign(...this.get().map(p => p.toUrlParams()));\n    Object.keys(params).forEach(key => params[key] == null && delete params[key]);\n    return Object.keys(params)\n      .map(k => `${encodeURIComponent(k)}=${encodeURIComponent(params[k])}`)\n      .join(\"&\");\n  }\n}\n\nexport class QueryResultError {\n  constructor(errorMessage) {\n    this.errorMessage = errorMessage;\n    this.updatedAt = moment.utc();\n  }\n\n  getUpdatedAt() {\n    return this.updatedAt;\n  }\n\n  getError() {\n    return this.errorMessage;\n  }\n\n  toPromise() {\n    return Promise.reject(this);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  getStatus() {\n    return \"failed\";\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  getData() {\n    return null;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  getLog() {\n    return null;\n  }\n}\n\nconst getQuery = query => new Query(query);\nconst saveOrCreateUrl = data => (data.id ? `api/queries/${data.id}` : \"api/queries\");\nconst mapResults = data => ({ ...data, results: map(data.results, getQuery) });\n\nconst QueryService = {\n  query: params => axios.get(\"api/queries\", { params }).then(mapResults),\n  get: data => axios.get(`api/queries/${data.id}`, data).then(getQuery),\n  save: data => axios.post(saveOrCreateUrl(data), data).then(getQuery),\n  delete: data => axios.delete(`api/queries/${data.id}`),\n  recent: params => axios.get(`api/queries/recent`, { params }).then(data => map(data, getQuery)),\n  archive: params => axios.get(`api/queries/archive`, { params }).then(mapResults),\n  myQueries: params => axios.get(\"api/queries/my\", { params }).then(mapResults),\n  fork: ({ id }) => axios.post(`api/queries/${id}/fork`, { id }).then(getQuery),\n  resultById: data => axios.get(`api/queries/${data.id}/results.json`),\n  asDropdown: data => axios.get(`api/queries/${data.id}/dropdown`),\n  associatedDropdown: ({ queryId, dropdownQueryId }) =>\n    axios.get(`api/queries/${queryId}/dropdowns/${dropdownQueryId}`),\n  favorites: params => axios.get(\"api/queries/favorites\", { params }).then(mapResults),\n  favorite: data => axios.post(`api/queries/${data.id}/favorite`),\n  unfavorite: data => axios.delete(`api/queries/${data.id}/favorite`),\n};\n\nQueryService.newQuery = function newQuery() {\n  return new Query({\n    query: \"\",\n    name: window.W_L.new_Query,\n    schedule: null,\n    user: currentUser,\n    options: { apply_auto_limit: localOptions.get(\"applyAutoLimit\", true) },\n    tags: [],\n    can_edit: true,\n  });\n};\n\nextend(Query, QueryService);\n","import { isNull, isUndefined, isArray, isEmpty, get, map, join, has } from \"lodash\";\nimport { Query } from \"@/services/query\";\nimport Parameter from \"./Parameter\";\n\nclass QueryBasedDropdownParameter extends Parameter {\n  constructor(parameter, parentQueryId) {\n    super(parameter, parentQueryId);\n    this.queryId = parameter.queryId;\n    this.multiValuesOptions = parameter.multiValuesOptions;\n    this.setValue(parameter.value);\n  }\n\n  normalizeValue(value) {\n    if (isUndefined(value) || isNull(value) || (isArray(value) && isEmpty(value))) {\n      return null;\n    }\n\n    if (this.multiValuesOptions) {\n      value = isArray(value) ? value : [value];\n    } else {\n      value = isArray(value) ? value[0] : value;\n    }\n    return value;\n  }\n\n  getExecutionValue(extra = {}) {\n    const { joinListValues } = extra;\n    if (joinListValues && isArray(this.value)) {\n      const separator = get(this.multiValuesOptions, \"separator\", \",\");\n      const prefix = get(this.multiValuesOptions, \"prefix\", \"\");\n      const suffix = get(this.multiValuesOptions, \"suffix\", \"\");\n      const parameterValues = map(this.value, v => `${prefix}${v}${suffix}`);\n      return join(parameterValues, separator);\n    }\n    return this.value;\n  }\n\n  toUrlParams() {\n    const prefix = this.urlPrefix;\n\n    let urlParam = this.value;\n    if (this.multiValuesOptions && isArray(this.value)) {\n      urlParam = JSON.stringify(this.value);\n    }\n\n    return {\n      [`${prefix}${this.name}`]: !this.isEmpty ? urlParam : null,\n    };\n  }\n\n  fromUrlParams(query) {\n    const prefix = this.urlPrefix;\n    const key = `${prefix}${this.name}`;\n    if (has(query, key)) {\n      if (this.multiValuesOptions) {\n        try {\n          const valueFromJson = JSON.parse(query[key]);\n          this.setValue(isArray(valueFromJson) ? valueFromJson : query[key]);\n        } catch (e) {\n          this.setValue(query[key]);\n        }\n      } else {\n        this.setValue(query[key]);\n      }\n    }\n  }\n\n  loadDropdownValues() {\n    if (this.parentQueryId) {\n      return Query.associatedDropdown({ queryId: this.parentQueryId, dropdownQueryId: this.queryId }).catch(() =>\n        Promise.resolve([])\n      );\n    }\n\n    return Query.asDropdown({ id: this.queryId }).catch(Promise.resolve([]));\n  }\n}\n\nexport default QueryBasedDropdownParameter;\n","import { findKey, startsWith, has, includes, isNull, values } from \"lodash\";\nimport moment from \"moment\";\nimport PropTypes from \"prop-types\";\nimport Parameter from \"./Parameter\";\n\nconst DATETIME_FORMATS = {\n  // eslint-disable-next-line quote-props\n  date: \"YYYY-MM-DD\",\n  \"datetime-local\": \"YYYY-MM-DD HH:mm\",\n  \"datetime-with-seconds\": \"YYYY-MM-DD HH:mm:ss\",\n};\n\nconst DYNAMIC_PREFIX = \"d_\";\n\nconst DYNAMIC_DATES = {\n  now: {\n    name: \"Today/Now\",\n    value: () => moment(),\n  },\n  yesterday: {\n    name: \"Yesterday\",\n    value: () => moment().subtract(1, \"day\"),\n  },\n};\n\nexport const DynamicDateType = PropTypes.oneOf(values(DYNAMIC_DATES));\n\nfunction isDynamicDateString(value) {\n  return startsWith(value, DYNAMIC_PREFIX) && has(DYNAMIC_DATES, value.substring(DYNAMIC_PREFIX.length));\n}\n\nexport function isDynamicDate(value) {\n  return includes(DYNAMIC_DATES, value);\n}\n\nexport function getDynamicDateFromString(value) {\n  if (!isDynamicDateString(value)) {\n    return null;\n  }\n  return DYNAMIC_DATES[value.substring(DYNAMIC_PREFIX.length)];\n}\n\nclass DateParameter extends Parameter {\n  constructor(parameter, parentQueryId) {\n    super(parameter, parentQueryId);\n    this.useCurrentDateTime = parameter.useCurrentDateTime;\n    this.setValue(parameter.value);\n  }\n\n  get hasDynamicValue() {\n    return isDynamicDate(this.normalizedValue);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  normalizeValue(value) {\n    if (isDynamicDateString(value)) {\n      return getDynamicDateFromString(value);\n    }\n\n    if (isDynamicDate(value)) {\n      return value;\n    }\n\n    const normalizedValue = moment(value);\n    return normalizedValue.isValid() ? normalizedValue : null;\n  }\n\n  setValue(value) {\n    const normalizedValue = this.normalizeValue(value);\n    if (isDynamicDate(normalizedValue)) {\n      this.value = DYNAMIC_PREFIX + findKey(DYNAMIC_DATES, normalizedValue);\n    } else if (moment.isMoment(normalizedValue)) {\n      this.value = normalizedValue.format(DATETIME_FORMATS[this.type]);\n    } else {\n      this.value = normalizedValue;\n    }\n    this.$$value = normalizedValue;\n\n    this.updateLocals();\n    this.clearPendingValue();\n    return this;\n  }\n\n  getExecutionValue() {\n    if (this.hasDynamicValue) {\n      return this.normalizedValue.value().format(DATETIME_FORMATS[this.type]);\n    }\n    if (isNull(this.value) && this.useCurrentDateTime) {\n      return moment().format(DATETIME_FORMATS[this.type]);\n    }\n    return this.value;\n  }\n}\n\nexport default DateParameter;\n","import { startsWith, has, includes, findKey, values, isObject, isArray } from \"lodash\";\nimport moment from \"moment\";\nimport PropTypes from \"prop-types\";\nimport Parameter from \"./Parameter\";\n\nconst DATETIME_FORMATS = {\n  \"date-range\": \"YYYY-MM-DD\",\n  \"datetime-range\": \"YYYY-MM-DD HH:mm\",\n  \"datetime-range-with-seconds\": \"YYYY-MM-DD HH:mm:ss\",\n};\n\nconst DYNAMIC_PREFIX = \"d_\";\n\n/**\n * Dynamic date range preset value with end set to current time\n * @param from {function(): moment.Moment}\n * @param now {function(): moment.Moment=} moment - defaults to now\n * @returns {function(withNow: boolean): [moment.Moment, moment.Moment|undefined]}\n */\nconst untilNow = (from, now = () => moment()) => (withNow = true) => [from(), withNow ? now() : undefined];\n\nconst DYNAMIC_DATE_RANGES = {\n  today: {\n    name: \"Today\",\n    value: () => [moment().startOf(\"day\"), moment().endOf(\"day\")],\n  },\n  yesterday: {\n    name: \"Yesterday\",\n    value: () => [\n      moment()\n        .subtract(1, \"day\")\n        .startOf(\"day\"),\n      moment()\n        .subtract(1, \"day\")\n        .endOf(\"day\"),\n    ],\n  },\n  this_week: {\n    name: \"This week\",\n    value: () => [moment().startOf(\"week\"), moment().endOf(\"week\")],\n  },\n  this_month: {\n    name: \"This month\",\n    value: () => [moment().startOf(\"month\"), moment().endOf(\"month\")],\n  },\n  this_year: {\n    name: \"This year\",\n    value: () => [moment().startOf(\"year\"), moment().endOf(\"year\")],\n  },\n  last_week: {\n    name: \"Last week\",\n    value: () => [\n      moment()\n        .subtract(1, \"week\")\n        .startOf(\"week\"),\n      moment()\n        .subtract(1, \"week\")\n        .endOf(\"week\"),\n    ],\n  },\n  last_month: {\n    name: \"Last month\",\n    value: () => [\n      moment()\n        .subtract(1, \"month\")\n        .startOf(\"month\"),\n      moment()\n        .subtract(1, \"month\")\n        .endOf(\"month\"),\n    ],\n  },\n  last_year: {\n    name: \"Last year\",\n    value: () => [\n      moment()\n        .subtract(1, \"year\")\n        .startOf(\"year\"),\n      moment()\n        .subtract(1, \"year\")\n        .endOf(\"year\"),\n    ],\n  },\n  last_hour: {\n    name: \"Last hour\",\n    value: untilNow(() => moment().subtract(1, \"hour\")),\n  },\n  last_8_hours: {\n    name: \"Last 8 hours\",\n    value: untilNow(() => moment().subtract(8, \"hour\")),\n  },\n  last_24_hours: {\n    name: \"Last 24 hours\",\n    value: untilNow(() => moment().subtract(24, \"hour\")),\n  },\n  last_7_days: {\n    name: \"Last 7 days\",\n    value: untilNow(\n      () =>\n        moment()\n          .subtract(7, \"days\")\n          .startOf(\"day\"),\n      () => moment().endOf(\"day\")\n    ),\n  },\n  last_14_days: {\n    name: \"Last 14 days\",\n    value: untilNow(\n      () =>\n        moment()\n          .subtract(14, \"days\")\n          .startOf(\"day\"),\n      () => moment().endOf(\"day\")\n    ),\n  },\n  last_30_days: {\n    name: \"Last 30 days\",\n    value: untilNow(\n      () =>\n        moment()\n          .subtract(30, \"days\")\n          .startOf(\"day\"),\n      () => moment().endOf(\"day\")\n    ),\n  },\n  last_60_days: {\n    name: \"Last 60 days\",\n    value: untilNow(\n      () =>\n        moment()\n          .subtract(60, \"days\")\n          .startOf(\"day\"),\n      () => moment().endOf(\"day\")\n    ),\n  },\n  last_90_days: {\n    name: \"Last 90 days\",\n    value: untilNow(\n      () =>\n        moment()\n          .subtract(90, \"days\")\n          .startOf(\"day\"),\n      () => moment().endOf(\"day\")\n    ),\n  },\n  last_12_months: {\n    name: \"Last 12 months\",\n    value: untilNow(\n      () =>\n        moment()\n          .subtract(12, \"months\")\n          .startOf(\"day\"),\n      () => moment().endOf(\"day\")\n    ),\n  },\n};\n\nexport const DynamicDateRangeType = PropTypes.oneOf(values(DYNAMIC_DATE_RANGES));\n\nexport function isDynamicDateRangeString(value) {\n  if (!startsWith(value, DYNAMIC_PREFIX)) {\n    return false;\n  }\n  return !!DYNAMIC_DATE_RANGES[value.substring(DYNAMIC_PREFIX.length)];\n}\n\nexport function getDynamicDateRangeStringFromName(dynamicRangeName) {\n  const key = findKey(DYNAMIC_DATE_RANGES, range => range.name === dynamicRangeName);\n  return key ? DYNAMIC_PREFIX + key : undefined;\n}\n\nexport function isDynamicDateRange(value) {\n  return includes(DYNAMIC_DATE_RANGES, value);\n}\n\nexport function getDynamicDateRangeFromString(value) {\n  if (!isDynamicDateRangeString(value)) {\n    return null;\n  }\n  return DYNAMIC_DATE_RANGES[value.substring(DYNAMIC_PREFIX.length)];\n}\n\nclass DateRangeParameter extends Parameter {\n  constructor(parameter, parentQueryId) {\n    super(parameter, parentQueryId);\n    this.setValue(parameter.value);\n  }\n\n  get hasDynamicValue() {\n    return isDynamicDateRange(this.normalizedValue);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  normalizeValue(value) {\n    if (isDynamicDateRangeString(value)) {\n      return getDynamicDateRangeFromString(value);\n    }\n\n    if (isDynamicDateRange(value)) {\n      return value;\n    }\n\n    if (isObject(value) && !isArray(value)) {\n      value = [value.start, value.end];\n    }\n\n    if (isArray(value) && value.length === 2) {\n      value = [moment(value[0]), moment(value[1])];\n      if (value[0].isValid() && value[1].isValid()) {\n        return value;\n      }\n    }\n    return null;\n  }\n\n  setValue(value) {\n    const normalizedValue = this.normalizeValue(value);\n    if (isDynamicDateRange(normalizedValue)) {\n      this.value = DYNAMIC_PREFIX + findKey(DYNAMIC_DATE_RANGES, normalizedValue);\n    } else if (isArray(normalizedValue)) {\n      this.value = {\n        start: normalizedValue[0].format(DATETIME_FORMATS[this.type]),\n        end: normalizedValue[1].format(DATETIME_FORMATS[this.type]),\n      };\n    } else {\n      this.value = normalizedValue;\n    }\n    this.$$value = normalizedValue;\n\n    this.updateLocals();\n    this.clearPendingValue();\n    return this;\n  }\n\n  getExecutionValue() {\n    if (this.hasDynamicValue) {\n      const format = date => date.format(DATETIME_FORMATS[this.type]);\n      const [start, end] = this.normalizedValue.value().map(format);\n      return { start, end };\n    }\n    return this.value;\n  }\n\n  toUrlParams() {\n    const prefix = this.urlPrefix;\n    if (isObject(this.value) && this.value.start && this.value.end) {\n      return {\n        [`${prefix}${this.name}`]: `${this.value.start}--${this.value.end}`,\n      };\n    }\n    return super.toUrlParams();\n  }\n\n  fromUrlParams(query) {\n    const prefix = this.urlPrefix;\n    const key = `${prefix}${this.name}`;\n\n    // backward compatibility\n    const keyStart = `${prefix}${this.name}.start`;\n    const keyEnd = `${prefix}${this.name}.end`;\n\n    if (has(query, key)) {\n      const dates = query[key].split(\"--\");\n      if (dates.length === 2) {\n        this.setValue(dates);\n      } else {\n        this.setValue(query[key]);\n      }\n    } else if (has(query, keyStart) && has(query, keyEnd)) {\n      this.setValue([query[keyStart], query[keyEnd]]);\n    }\n  }\n\n  toQueryTextFragment() {\n    return `{{ ${this.name}.start }} {{ ${this.name}.end }}`;\n  }\n}\n\nexport default DateRangeParameter;\n","import Parameter from \"./Parameter\";\nimport TextParameter from \"./TextParameter\";\nimport NumberParameter from \"./NumberParameter\";\nimport EnumParameter from \"./EnumParameter\";\nimport QueryBasedDropdownParameter from \"./QueryBasedDropdownParameter\";\nimport DateParameter from \"./DateParameter\";\nimport DateRangeParameter from \"./DateRangeParameter\";\n\nfunction createParameter(param, parentQueryId) {\n  switch (param.type) {\n    case \"number\":\n      return new NumberParameter(param, parentQueryId);\n    case \"enum\":\n      return new EnumParameter(param, parentQueryId);\n    case \"query\":\n      return new QueryBasedDropdownParameter(param, parentQueryId);\n    case \"date\":\n    case \"datetime-local\":\n    case \"datetime-with-seconds\":\n      return new DateParameter(param, parentQueryId);\n    case \"date-range\":\n    case \"datetime-range\":\n    case \"datetime-range-with-seconds\":\n      return new DateRangeParameter(param, parentQueryId);\n    default:\n      return new TextParameter({ ...param, type: \"text\" }, parentQueryId);\n  }\n}\n\nfunction cloneParameter(param) {\n  return createParameter(param, param.parentQueryId);\n}\n\nexport {\n  Parameter,\n  TextParameter,\n  NumberParameter,\n  EnumParameter,\n  QueryBasedDropdownParameter,\n  DateParameter,\n  DateRangeParameter,\n  createParameter,\n  cloneParameter,\n};\n","const items = new Map();\n\nfunction checkItems() {\n  if (items.size > 0) {\n    items.forEach((item, node) => {\n      const bounds = node.getBoundingClientRect();\n      // convert to int (because these numbers needed for comparisons), but preserve 1 decimal point\n      const width = Math.round(bounds.width * 10);\n      const height = Math.round(bounds.height * 10);\n\n      if (item.width !== width || item.height !== height) {\n        item.width = width;\n        item.height = height;\n        item.callback(node);\n      }\n    });\n\n    setTimeout(checkItems, 100);\n  }\n}\n\nexport default function observe(node, callback) {\n  if (node && !items.has(node)) {\n    const shouldTrigger = items.size === 0;\n    items.set(node, { callback });\n    if (shouldTrigger) {\n      checkItems();\n    }\n    return () => items.delete(node);\n  }\n  return () => {};\n}\n","import PropTypes from \"prop-types\";\n\nconst VisualizationOptions = PropTypes.object;\ntype VisualizationOptions = any;\n\ntype Data = {\n  columns: any[];\n  rows: any[];\n}; // eslint-disable-line react/forbid-prop-types\n\nconst Data: PropTypes.Requireable<Data> = PropTypes.shape({\n  columns: PropTypes.arrayOf(PropTypes.object).isRequired,\n  rows: PropTypes.arrayOf(PropTypes.object).isRequired,\n});\n\ntype VisualizationType = {\n  id?: number;\n  type: string;\n  name: string;\n  options: VisualizationOptions;\n};\n\n// @ts-expect-error ts-migrate(2322) FIXME: Type 'Requireable<InferProps<{ id: Requireable<num... Remove this comment to see the full error message\nconst VisualizationType: PropTypes.Requireable<VisualizationType> = PropTypes.shape({\n  id: PropTypes.number,\n  type: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  options: VisualizationOptions.isRequired,\n});\nexport { VisualizationType };\n\n// For each visualization's renderer\nexport const RendererPropTypes = {\n  visualizationName: PropTypes.string,\n  data: Data.isRequired,\n  options: VisualizationOptions.isRequired,\n  onOptionsChange: PropTypes.func, // (newOptions) => void\n};\n\n// For each visualization's editor\nexport const EditorPropTypes = {\n  visualizationName: PropTypes.string,\n  data: Data.isRequired,\n  options: VisualizationOptions.isRequired,\n  onOptionsChange: PropTypes.func.isRequired, // (newOptions) => void\n};\n","/* eslint-disable */\n// Inspired by http://informationandvisualization.de/blog/box-plot\nfunction box() {\n  let width = 1,\n    height = 1,\n    duration = 0,\n    domain: any = null,\n    value = Number,\n    whiskers = boxWhiskers,\n    quartiles = boxQuartiles,\n    tickFormat: any = null;\n\n  // For each small multiple…\n  function box(g: any) {\n    g.each(function(d: any, i: any) {\n      d = d.map(value).sort(d3.ascending);\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      let g = d3.select(this),\n        n = d.length,\n        min = d[0],\n        max = d[n - 1];\n\n      // Compute quartiles. Must return exactly 3 elements.\n      const quartileData = (d.quartiles = quartiles(d));\n\n      // Compute whiskers. Must return exactly 2 elements, or null.\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      let whiskerIndices = whiskers && whiskers.call(this, d, i),\n        whiskerData = whiskerIndices && whiskerIndices.map(i => d[i]);\n\n      // Compute outliers. If no whiskers are specified, all data are \"outliers\".\n      // We compute the outliers as indices, so that we can join across transitions!\n      const outlierIndices = whiskerIndices\n        ? d3.range(0, whiskerIndices[0]).concat(d3.range(whiskerIndices[1] + 1, n))\n        : d3.range(n);\n\n      // Compute the new x-scale.\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'scale' does not exist on type 'typeof im... Remove this comment to see the full error message\n      const x1 = d3.scale\n        .linear()\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        .domain((domain && domain.call(this, d, i)) || [min, max])\n        .range([height, 0]);\n\n      // Retrieve the old x-scale, if this is an update.\n      const x0 =\n        // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n        this.__chart__ ||\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'scale' does not exist on type 'typeof im... Remove this comment to see the full error message\n        d3.scale\n          .linear()\n          .domain([0, Infinity])\n          .range(x1.range());\n\n      // Stash the new scale.\n      // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n      this.__chart__ = x1;\n\n      // Note: the box, median, and box tick elements are fixed in number,\n      // so we only have to handle enter and update. In contrast, the outliers\n      // and other elements are variable, so we need to exit them! Variable\n      // elements also fade in and out.\n\n      // Update center line: the vertical line spanning the whiskers.\n      const center = g.selectAll(\"line.center\").data(whiskerData ? [whiskerData] : []);\n\n      center\n        .enter()\n        .insert(\"line\", \"rect\")\n        .attr(\"class\", \"center\")\n        .attr(\"x1\", width / 2)\n        .attr(\"y1\", d => x0(d[0]))\n        .attr(\"x2\", width / 2)\n        .attr(\"y2\", d => x0(d[1]))\n        .style(\"opacity\", 1e-6)\n        .transition()\n        .duration(duration)\n        .style(\"opacity\", 1)\n        .attr(\"y1\", d => x1(d[0]))\n        .attr(\"y2\", d => x1(d[1]));\n\n      center\n        .transition()\n        .duration(duration)\n        .style(\"opacity\", 1)\n        .attr(\"y1\", d => x1(d[0]))\n        .attr(\"y2\", d => x1(d[1]));\n\n      center\n        .exit()\n        .transition()\n        .duration(duration)\n        .style(\"opacity\", 1e-6)\n        // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n        .attr(\"y1\", d => x1(d[0]))\n        // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n        .attr(\"y2\", d => x1(d[1]))\n        .remove();\n\n      // Update innerquartile box.\n      const box = g.selectAll(\"rect.box\").data([quartileData]);\n\n      box\n        .enter()\n        .append(\"rect\")\n        .attr(\"class\", \"box\")\n        .attr(\"x\", 0)\n        .attr(\"y\", d => x0(d[2]))\n        .attr(\"width\", width)\n        .attr(\"height\", d => x0(d[0]) - x0(d[2]))\n        .transition()\n        .duration(duration)\n        .attr(\"y\", d => x1(d[2]))\n        .attr(\"height\", d => x1(d[0]) - x1(d[2]));\n\n      box\n        .transition()\n        .duration(duration)\n        .attr(\"y\", d => x1(d[2]))\n        .attr(\"height\", d => x1(d[0]) - x1(d[2]));\n\n      box.exit().remove();\n\n      // Update median line.\n      const medianLine = g.selectAll(\"line.median\").data([quartileData[1]]);\n\n      medianLine\n        .enter()\n        .append(\"line\")\n        .attr(\"class\", \"median\")\n        .attr(\"x1\", 0)\n        .attr(\"y1\", x0)\n        .attr(\"x2\", width)\n        .attr(\"y2\", x0)\n        .transition()\n        .duration(duration)\n        .attr(\"y1\", x1)\n        .attr(\"y2\", x1);\n\n      medianLine\n        .transition()\n        .duration(duration)\n        .attr(\"y1\", x1)\n        .attr(\"y2\", x1);\n\n      medianLine.exit().remove();\n\n      // Update whiskers.\n      const whisker = g.selectAll(\"line.whisker\").data(whiskerData || []);\n\n      whisker\n        .enter()\n        .insert(\"line\", \"circle, text\")\n        .attr(\"class\", \"whisker\")\n        .attr(\"x1\", 0)\n        .attr(\"y1\", x0)\n        .attr(\"x2\", width)\n        .attr(\"y2\", x0)\n        .style(\"opacity\", 1e-6)\n        .transition()\n        .duration(duration)\n        .attr(\"y1\", x1)\n        .attr(\"y2\", x1)\n        .style(\"opacity\", 1);\n\n      whisker\n        .transition()\n        .duration(duration)\n        .attr(\"y1\", x1)\n        .attr(\"y2\", x1)\n        .style(\"opacity\", 1);\n\n      whisker\n        .exit()\n        .transition()\n        .duration(duration)\n        .attr(\"y1\", x1)\n        .attr(\"y2\", x1)\n        .style(\"opacity\", 1e-6)\n        .remove();\n\n      // Update outliers.\n      const outlier = g.selectAll(\"circle.outlier\").data(outlierIndices, Number);\n\n      outlier\n        .enter()\n        .insert(\"circle\", \"text\")\n        .attr(\"class\", \"outlier\")\n        .attr(\"r\", 5)\n        .attr(\"cx\", width / 2)\n        .attr(\"cy\", i => x0(d[i]))\n        .style(\"opacity\", 1e-6)\n        .transition()\n        .duration(duration)\n        .attr(\"cy\", i => x1(d[i]))\n        .style(\"opacity\", 1);\n\n      outlier\n        .transition()\n        .duration(duration)\n        .attr(\"cy\", i => x1(d[i]))\n        .style(\"opacity\", 1);\n\n      outlier\n        .exit()\n        .transition()\n        .duration(duration)\n        // @ts-expect-error ts-migrate(2538) FIXME: Type 'unknown' cannot be used as an index type.\n        .attr(\"cy\", i => x1(d[i]))\n        .style(\"opacity\", 1e-6)\n        .remove();\n\n      // Compute the tick format.\n      const format = tickFormat || x1.tickFormat(8);\n\n      // Update box ticks.\n      const boxTick = g.selectAll(\"text.box\").data(quartileData);\n\n      boxTick\n        .enter()\n        .append(\"text\")\n        .attr(\"class\", \"box\")\n        .attr(\"dy\", \".3em\")\n        .attr(\"dx\", (d, i) => (i & 1 ? 6 : -6))\n        .attr(\"x\", (d, i) => (i & 1 ? width : 0))\n        .attr(\"y\", x0)\n        .attr(\"text-anchor\", (d, i) => (i & 1 ? \"start\" : \"end\"))\n        .text(format)\n        .transition()\n        .duration(duration)\n        .attr(\"y\", x1);\n\n      boxTick\n        .transition()\n        .duration(duration)\n        .text(format)\n        .attr(\"y\", x1);\n\n      boxTick.exit().remove();\n\n      // Update whisker ticks. These are handled separately from the box\n      // ticks because they may or may not exist, and we want don't want\n      // to join box ticks pre-transition with whisker ticks post-.\n      const whiskerTick = g.selectAll(\"text.whisker\").data(whiskerData || []);\n\n      whiskerTick\n        .enter()\n        .append(\"text\")\n        .attr(\"class\", \"whisker\")\n        .attr(\"dy\", \".3em\")\n        .attr(\"dx\", 6)\n        .attr(\"x\", width)\n        .attr(\"y\", x0)\n        .text(format)\n        .style(\"opacity\", 1e-6)\n        .transition()\n        .duration(duration)\n        .attr(\"y\", x1)\n        .style(\"opacity\", 1);\n\n      whiskerTick\n        .transition()\n        .duration(duration)\n        .text(format)\n        .attr(\"y\", x1)\n        .style(\"opacity\", 1);\n\n      whiskerTick\n        .exit()\n        .transition()\n        .duration(duration)\n        .attr(\"y\", x1)\n        .style(\"opacity\", 1e-6)\n        .remove();\n    });\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'flush' does not exist on type '(callback... Remove this comment to see the full error message\n    d3.timer.flush();\n  }\n\n  box.width = function(x: any) {\n    if (!arguments.length) return width;\n    width = x;\n    return box;\n  };\n\n  box.height = function(x: any) {\n    if (!arguments.length) return height;\n    height = x;\n    return box;\n  };\n\n  box.tickFormat = function(x: any) {\n    if (!arguments.length) return tickFormat;\n    tickFormat = x;\n    return box;\n  };\n\n  box.duration = function(x: any) {\n    if (!arguments.length) return duration;\n    duration = x;\n    return box;\n  };\n\n  box.domain = function(x: any) {\n    if (!arguments.length) return domain;\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'functor' does not exist on type 'typeof ... Remove this comment to see the full error message\n    domain = x == null ? x : d3.functor(x);\n    return box;\n  };\n\n  box.value = function(x: any) {\n    if (!arguments.length) return value;\n    value = x;\n    return box;\n  };\n\n  box.whiskers = function(x: any) {\n    if (!arguments.length) return whiskers;\n    whiskers = x;\n    return box;\n  };\n\n  box.quartiles = function(x: any) {\n    if (!arguments.length) return quartiles;\n    quartiles = x;\n    return box;\n  };\n\n  return box;\n}\n\nfunction boxWhiskers(d: any) {\n  return [0, d.length - 1];\n}\n\nfunction boxQuartiles(d: any) {\n  return [d3.quantile(d, 0.25), d3.quantile(d, 0.5), d3.quantile(d, 0.75)];\n}\n\nexport default box;\n","import { map, each } from \"lodash\";\nimport d3 from \"d3\";\nimport React, { useState, useEffect } from \"react\";\nimport resizeObserver from \"@/services/resizeObserver\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport box from \"./d3box\";\nimport \"./renderer.less\";\n\nfunction calcIqr(k: any) {\n  return (d: any) => {\n    const q1 = d.quartiles[0];\n    const q3 = d.quartiles[2];\n    const iqr = (q3 - q1) * k;\n\n    let i = -1;\n    let j = d.length;\n\n    i += 1;\n    while (d[i] < q1 - iqr) {\n      i += 1;\n    }\n\n    j -= 1;\n    while (d[j] > q3 + iqr) {\n      j -= 1;\n    }\n\n    return [i, j];\n  };\n}\n\nfunction render(container: any, data: any, { xAxisLabel, yAxisLabel }: any) {\n  container = d3.select(container);\n\n  const containerBounds = container.node().getBoundingClientRect();\n  const containerWidth = Math.floor(containerBounds.width);\n  const containerHeight = Math.floor(containerBounds.height);\n\n  const margin = {\n    top: 10,\n    right: 50,\n    bottom: 40,\n    left: 50,\n    inner: 25,\n  };\n  const width = containerWidth - margin.right - margin.left;\n  const height = containerHeight - margin.top - margin.bottom;\n\n  let min = Infinity;\n  let max = -Infinity;\n  const mydata: any = [];\n  let value = 0;\n  let d = [];\n\n  const columns = map(data.columns, col => col.name);\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'scale' does not exist on type 'typeof im... Remove this comment to see the full error message\n  const xscale = d3.scale\n    .ordinal()\n    .domain(columns)\n    .rangeBands([0, containerWidth - margin.left - margin.right]);\n\n  let boxWidth;\n  if (columns.length > 1) {\n    boxWidth = Math.min(xscale(columns[1]), 120.0);\n  } else {\n    boxWidth = 120.0;\n  }\n  margin.inner = boxWidth / 3.0;\n\n  each(columns, (column, i) => {\n    d = mydata[i] = [];\n    each(data.rows, row => {\n      value = row[column];\n      d.push(value);\n      if (value > max) max = Math.ceil(value);\n      if (value < min) min = Math.floor(value);\n    });\n  });\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'scale' does not exist on type 'typeof im... Remove this comment to see the full error message\n  const yscale = d3.scale\n    .linear()\n    .domain([min * 0.99, max * 1.01])\n    .range([height, 0]);\n\n  const chart = box()\n    .whiskers(calcIqr(1.5))\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'width' does not exist on type '{ (g: any... Remove this comment to see the full error message\n    .width(boxWidth - 2 * margin.inner)\n    .height(height)\n    .domain([min * 0.99, max * 1.01]);\n  const xAxis = d3.svg\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'axis' does not exist on type '(url: stri... Remove this comment to see the full error message\n    .axis()\n    .scale(xscale)\n    .orient(\"bottom\");\n\n  const yAxis = d3.svg\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'axis' does not exist on type '(url: stri... Remove this comment to see the full error message\n    .axis()\n    .scale(yscale)\n    .orient(\"left\");\n\n  const xLines = d3.svg\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'axis' does not exist on type '(url: stri... Remove this comment to see the full error message\n    .axis()\n    .scale(xscale)\n    .tickSize(height)\n    .orient(\"bottom\");\n\n  const yLines = d3.svg\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'axis' does not exist on type '(url: stri... Remove this comment to see the full error message\n    .axis()\n    .scale(yscale)\n    .tickSize(width)\n    .orient(\"right\");\n\n  function barOffset(i: any) {\n    return xscale(columns[i]) + (xscale(columns[1]) - margin.inner) / 2.0;\n  }\n\n  container.selectAll(\"*\").remove();\n\n  const svg = container\n    .append(\"svg\")\n    .attr(\"width\", containerWidth)\n    .attr(\"height\", height + margin.bottom + margin.top);\n\n  const plot = svg\n    .append(\"g\")\n    .attr(\"width\", containerWidth - margin.left - margin.right)\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n  svg\n    .append(\"text\")\n    .attr(\"class\", \"box\")\n    .attr(\"x\", containerWidth / 2.0)\n    .attr(\"text-anchor\", \"middle\")\n    .attr(\"y\", height + margin.bottom)\n    .text(xAxisLabel);\n\n  svg\n    .append(\"text\")\n    .attr(\"class\", \"box\")\n    .attr(\"transform\", `translate(10,${(height + margin.top + margin.bottom) / 2.0})rotate(-90)`)\n    .attr(\"text-anchor\", \"middle\")\n    .text(yAxisLabel);\n\n  plot\n    .append(\"rect\")\n    .attr(\"class\", \"grid-background\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n  plot\n    .append(\"g\")\n    .attr(\"class\", \"grid\")\n    .call(yLines);\n\n  plot\n    .append(\"g\")\n    .attr(\"class\", \"grid\")\n    .call(xLines);\n\n  plot\n    .append(\"g\")\n    .attr(\"class\", \"x axis\")\n    .attr(\"transform\", `translate(0,${height})`)\n    .call(xAxis);\n\n  plot\n    .append(\"g\")\n    .attr(\"class\", \"y axis\")\n    .call(yAxis);\n\n  plot\n    .selectAll(\".box\")\n    .data(mydata)\n    .enter()\n    .append(\"g\")\n    .attr(\"class\", \"box\")\n    .attr(\"width\", boxWidth)\n    .attr(\"height\", height)\n    .attr(\"transform\", (_: any, i: any) => `translate(${barOffset(i)},${0})`)\n    .call(chart);\n}\n\nexport default function Renderer({ data, options }: any) {\n  const [container, setContainer] = useState(null);\n\n  useEffect(() => {\n    if (container) {\n      render(container, data, options);\n      const unwatch = resizeObserver(container, () => {\n        render(container, data, options);\n      });\n      return unwatch;\n    }\n  }, [container, data, options]);\n\n  // @ts-expect-error ts-migrate(2322) FIXME: Type 'Dispatch<SetStateAction<null>>' is not assig... Remove this comment to see the full error message\n  return <div className=\"box-plot-deprecated-visualization-container\" ref={setContainer} />;\n}\n\nRenderer.propTypes = RendererPropTypes;\n","import { maxBy } from \"lodash\";\nimport chroma from \"chroma-js\";\n\nexport default function chooseTextColorForBackground(backgroundColor: any, textColors = [\"#ffffff\", \"#333333\"]) {\n  try {\n    backgroundColor = chroma(backgroundColor);\n    return maxBy(textColors, color => chroma.contrast(backgroundColor, color));\n  } catch (e) {\n    return null;\n  }\n}\n","import { isString } from \"lodash\";\nimport React from \"react\";\nimport cx from \"classnames\";\nimport Tooltip from \"antd/lib/tooltip\";\n\nimport \"./swatch.less\";\n\ntype OwnProps = {\n  className?: string;\n  style?: any;\n  title?: string;\n  color?: string;\n  size?: number;\n};\n\ntype Props = OwnProps & typeof Swatch.defaultProps;\n\n// @ts-expect-error ts-migrate(2700) FIXME: Rest types may only be created from object types.\nexport default function Swatch({ className, color, title, size, style, ...props }: Props) {\n  const result = (\n    <span\n      className={cx(\"color-swatch\", className)}\n      // @ts-expect-error ts-migrate(2698) FIXME: Spread types may only be created from object types... Remove this comment to see the full error message\n      style={{ backgroundColor: color, width: size, ...style }}\n      {...props}\n    />\n  );\n\n  if (isString(title) && title !== \"\") {\n    return (\n      <Tooltip title={title} mouseEnterDelay={0} mouseLeaveDelay={0}>\n        {result}\n      </Tooltip>\n    );\n  }\n  return result;\n}\n\nSwatch.defaultProps = {\n  className: null,\n  style: null,\n  title: null,\n  color: \"transparent\",\n  size: 12,\n};\n","import { isNil, isArray, chunk, map, filter, toPairs } from \"lodash\";\nimport React, { useState, useEffect } from \"react\";\nimport tinycolor from \"tinycolor2\";\nimport TextInput from \"antd/lib/input\";\nimport Typography from \"antd/lib/typography\";\nimport Swatch from \"./Swatch\";\n\nimport \"./input.less\";\n\nfunction preparePresets(presetColors: any, presetColumns: any) {\n  presetColors = isArray(presetColors) ? map(presetColors, v => [null, v]) : toPairs(presetColors);\n  presetColors = map(presetColors, ([title, value]) => {\n    if (isNil(value)) {\n      return [title, null];\n    }\n    value = tinycolor(value);\n    if (value.isValid()) {\n      return [title, \"#\" + value.toHex().toUpperCase()];\n    }\n    return null;\n  });\n  return chunk(filter(presetColors), presetColumns);\n}\n\nfunction validateColor(value: any, callback: any, prefix = \"#\") {\n  if (isNil(value)) {\n    callback(null);\n  }\n  value = tinycolor(value);\n  if (value.isValid()) {\n    callback(prefix + value.toHex().toUpperCase());\n  }\n}\n\ntype OwnProps = {\n  color?: string;\n  presetColors?:\n    | string[]\n    | {\n        [key: string]: string;\n      };\n  presetColumns?: number;\n  onChange?: (...args: any[]) => any;\n  onPressEnter?: (...args: any[]) => any;\n};\n\ntype Props = OwnProps & typeof Input.defaultProps;\n\nexport default function Input({ color, presetColors, presetColumns, onChange, onPressEnter }: Props) {\n  const [inputValue, setInputValue] = useState(\"\");\n  const [isInputFocused, setIsInputFocused] = useState(false);\n\n  const presets = preparePresets(presetColors, presetColumns);\n\n  function handleInputChange(value: any) {\n    setInputValue(value);\n    validateColor(value, onChange);\n  }\n\n  useEffect(() => {\n    if (!isInputFocused) {\n      validateColor(color, setInputValue, \"\");\n    }\n  }, [color, isInputFocused]);\n\n  return (\n    <React.Fragment>\n      {map(presets, (group, index) => (\n        <div className=\"color-picker-input-swatches\" key={`preset-row-${index}`}>\n          {map(group, ([title, value]) => (\n            // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n            <Swatch key={value} color={value} title={title} size={30} onClick={() => validateColor(value, onChange)} />\n          ))}\n        </div>\n      ))}\n      <div className=\"color-picker-input\">\n        <TextInput\n          data-test=\"ColorPicker.CustomColor\"\n          addonBefore={<Typography.Text type=\"secondary\">#</Typography.Text>}\n          value={inputValue}\n          onChange={e => handleInputChange(e.target.value)}\n          onFocus={() => setIsInputFocused(true)}\n          onBlur={() => setIsInputFocused(false)}\n          onPressEnter={onPressEnter}\n        />\n      </div>\n    </React.Fragment>\n  );\n}\n\nInput.defaultProps = {\n  color: \"#FFFFFF\",\n  presetColors: null,\n  presetColumns: 8,\n  onChange: () => {},\n  onPressEnter: () => {},\n};\n","import { isArray, findKey } from \"lodash\";\nimport tinycolor from \"tinycolor2\";\n\nexport function validateColor(value: any, fallback = null) {\n  value = tinycolor(value);\n  return value.isValid() ? \"#\" + value.toHex().toUpperCase() : fallback;\n}\n\nexport function getColorName(color: any, presetColors: any) {\n  if (isArray(presetColors)) {\n    return color;\n  }\n  return findKey(presetColors, v => validateColor(v) === color) || color;\n}\n","import React, { useMemo } from \"react\";\nimport cx from \"classnames\";\n\nimport { validateColor, getColorName } from \"./utils\";\nimport \"./label.less\";\n\ntype OwnProps = {\n  className?: string;\n  color?: string;\n  presetColors?:\n    | string[]\n    | {\n        [key: string]: string;\n      };\n};\n\ntype Props = OwnProps & typeof Label.defaultProps;\n\n// @ts-expect-error ts-migrate(2700) FIXME: Rest types may only be created from object types.\nexport default function Label({ className, color, presetColors, ...props }: Props) {\n  const name = useMemo(() => getColorName(validateColor(color), presetColors), [color, presetColors]);\n\n  return (\n    <span className={cx(\"color-label\", className)} {...props}>\n      {name}\n    </span>\n  );\n}\n\nLabel.defaultProps = {\n  className: null,\n  color: \"#FFFFFF\",\n  presetColors: null,\n};\n","import { toString } from \"lodash\";\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport cx from \"classnames\";\nimport Popover from \"antd/lib/popover\";\nimport Card from \"antd/lib/card\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport chooseTextColorForBackground from \"@/components/chart/lib/chooseTextColorForBackground\";\n\nimport CloseOutlinedIcon from \"@ant-design/icons/CloseOutlined\";\nimport CheckOutlinedIcon from \"@ant-design/icons/CheckOutlined\";\n\nimport ColorInput from \"./Input\";\nimport Swatch from \"./Swatch\";\nimport Label from \"./Label\";\nimport { validateColor } from \"./utils\";\n\nimport \"./index.less\";\n\ntype OwnProps = {\n  color?: string;\n  placement?:\n    | \"top\"\n    | \"left\"\n    | \"right\"\n    | \"bottom\"\n    | \"topLeft\"\n    | \"topRight\"\n    | \"bottomLeft\"\n    | \"bottomRight\"\n    | \"leftTop\"\n    | \"leftBottom\"\n    | \"rightTop\"\n    | \"rightBottom\";\n  presetColors?:\n    | string[]\n    | {\n        [key: string]: string;\n      };\n  presetColumns?: number;\n  interactive?: boolean;\n  triggerProps?: any;\n  children?: React.ReactNode;\n  addonBefore?: React.ReactNode;\n  addonAfter?: React.ReactNode;\n  onChange?: (...args: any[]) => any;\n};\n\ntype Props = OwnProps & typeof ColorPicker.defaultProps;\n\nexport default function ColorPicker({\n  color,\n  placement,\n  presetColors,\n  presetColumns,\n  interactive,\n  children,\n  onChange,\n  triggerProps,\n  addonBefore,\n  addonAfter,\n}: Props) {\n  const [visible, setVisible] = useState(false);\n  const validatedColor = useMemo(() => validateColor(color), [color]);\n  const [currentColor, setCurrentColor] = useState(\"\");\n\n  function handleApply() {\n    setVisible(false);\n    if (!interactive) {\n      // @ts-expect-error ts-migrate(2349) FIXME: This expression is not callable.\n      onChange(currentColor);\n    }\n  }\n\n  function handleCancel() {\n    setVisible(false);\n  }\n\n  const actions = [];\n  if (!interactive) {\n    actions.push(\n      <Tooltip key=\"cancel\" title={window.W_L.cancel}>\n        <CloseOutlinedIcon onClick={handleCancel} />\n      </Tooltip>\n    );\n    actions.push(\n      <Tooltip key=\"apply\" title={window.W_L.apply}>\n        <CheckOutlinedIcon onClick={handleApply} />\n      </Tooltip>\n    );\n  }\n\n  function handleInputChange(newColor: any) {\n    setCurrentColor(newColor);\n    if (interactive) {\n      // @ts-expect-error ts-migrate(2349) FIXME: This expression is not callable.\n      onChange(newColor);\n    }\n  }\n\n  useEffect(() => {\n    if (visible) {\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'string | null' is not assignable... Remove this comment to see the full error message\n      setCurrentColor(validatedColor);\n    }\n  }, [validatedColor, visible]);\n\n  return (\n    <span className=\"color-picker-wrapper\">\n      {addonBefore}\n      <Popover\n        arrowPointAtCenter\n        overlayClassName={`color-picker ${interactive ? \"color-picker-interactive\" : \"color-picker-with-actions\"}`}\n        // @ts-expect-error ts-migrate(2322) FIXME: Type '{ \"--color-picker-selected-color\": string; }... Remove this comment to see the full error message\n        overlayStyle={{ \"--color-picker-selected-color\": currentColor }}\n        content={\n          <Card\n            data-test=\"ColorPicker\"\n            className=\"color-picker-panel\"\n            bordered={false}\n            title={toString(currentColor).toUpperCase()}\n            headStyle={{\n              backgroundColor: currentColor,\n              // @ts-expect-error ts-migrate(2322) FIXME: Type 'string | null | undefined' is not assignable... Remove this comment to see the full error message\n              color: chooseTextColorForBackground(currentColor),\n            }}\n            actions={actions}>\n            <ColorInput\n              // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n              color={currentColor}\n              presetColors={presetColors}\n              presetColumns={presetColumns}\n              // @ts-expect-error ts-migrate(2322) FIXME: Type '(newColor: any) => void' is not assignable t... Remove this comment to see the full error message\n              onChange={handleInputChange}\n              // @ts-expect-error ts-migrate(2322) FIXME: Type '() => void' is not assignable to type 'never... Remove this comment to see the full error message\n              onPressEnter={handleApply}\n            />\n          </Card>\n        }\n        trigger=\"click\"\n        placement={placement}\n        visible={visible}\n        onVisibleChange={setVisible}>\n        {children || (\n          <Swatch\n            color={validatedColor}\n            size={30}\n            {...triggerProps}\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'className' does not exist on type 'never... Remove this comment to see the full error message\n            className={cx(\"color-picker-trigger\", triggerProps.className)}\n          />\n        )}\n      </Popover>\n      {addonAfter}\n    </span>\n  );\n}\n\nColorPicker.defaultProps = {\n  color: \"#FFFFFF\",\n  placement: \"top\",\n  presetColors: null,\n  presetColumns: 8,\n  interactive: false,\n  triggerProps: {},\n  children: null,\n  addonBefore: null,\n  addonAfter: null,\n  onChange: () => {},\n};\n\nColorPicker.Input = ColorInput;\nColorPicker.Swatch = Swatch;\nColorPicker.Label = Label;\n","import { pickBy, startsWith } from \"lodash\";\nimport React from \"react\";\nimport cx from \"classnames\";\nimport Radio from \"antd/lib/radio\";\nimport Tooltip from \"antd/lib/tooltip\";\n\nimport AlignLeftOutlinedIcon from \"@ant-design/icons/AlignLeftOutlined\";\nimport AlignCenterOutlinedIcon from \"@ant-design/icons/AlignCenterOutlined\";\nimport AlignRightOutlinedIcon from \"@ant-design/icons/AlignRightOutlined\";\n\nimport \"./index.less\";\n\ntype OwnProps = {\n  className?: string;\n};\n\ntype Props = OwnProps & typeof TextAlignmentSelect.defaultProps;\n\n// @ts-expect-error ts-migrate(2700) FIXME: Rest types may only be created from object types.\nexport default function TextAlignmentSelect({ className, ...props }: Props) {\n  return (\n    // Antd RadioGroup does not use any custom attributes\n    <div {...pickBy(props, (v, k) => startsWith(k, \"data-\"))}>\n      <Radio.Group className={cx(\"text-alignment-select\", className)} {...props}>\n        <Tooltip title={window.W_L.left_align} mouseEnterDelay={0} mouseLeaveDelay={0}>\n          <Radio.Button value=\"left\" data-test=\"TextAlignmentSelect.Left\">\n            <AlignLeftOutlinedIcon />\n          </Radio.Button>\n        </Tooltip>\n        <Tooltip title={window.W_L.center} mouseEnterDelay={0} mouseLeaveDelay={0}>\n          <Radio.Button value=\"center\" data-test=\"TextAlignmentSelect.Center\">\n            <AlignCenterOutlinedIcon />\n          </Radio.Button>\n        </Tooltip>\n        <Tooltip title={window.W_L.right_align} mouseEnterDelay={0} mouseLeaveDelay={0}>\n          <Radio.Button value=\"right\" data-test=\"TextAlignmentSelect.Right\">\n            <AlignRightOutlinedIcon />\n          </Radio.Button>\n        </Tooltip>\n      </Radio.Group>\n    </div>\n  );\n}\n\nTextAlignmentSelect.defaultProps = {\n  className: null,\n};\n","import React, { useMemo } from \"react\";\nimport cx from \"classnames\";\nimport hoistNonReactStatics from \"hoist-non-react-statics\";\nimport * as Grid from \"antd/lib/grid\";\nimport Typography from \"antd/lib/typography\";\n\nimport \"./control-label.less\";\n\ntype OwnProps = {\n  layout?: \"vertical\" | \"horizontal\";\n  label?: React.ReactNode;\n  labelProps?: any;\n  disabled?: boolean;\n  children?: React.ReactNode;\n};\n\ntype Props = OwnProps & typeof ControlLabel.defaultProps;\n\nexport function ControlLabel({ layout, label, labelProps, disabled, children }: Props) {\n  if (layout === \"vertical\" && label) {\n    return (\n      <div className=\"visualization-editor-control-label visualization-editor-control-label-vertical\">\n        <label {...labelProps}>\n          <Typography.Text disabled={disabled}>{label}</Typography.Text>\n        </label>\n        {children}\n      </div>\n    );\n  }\n\n  if (layout === \"horizontal\" && label) {\n    return (\n      <Grid.Row\n        className=\"visualization-editor-control-label visualization-editor-control-label-horizontal\"\n        // @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: Element[]; className: string; ty... Remove this comment to see the full error message\n        type=\"flex\"\n        align=\"middle\"\n        gutter={15}>\n        <Grid.Col span={12}>\n          <label {...labelProps}>\n            <Typography.Text disabled={disabled}>{label}</Typography.Text>\n          </label>\n        </Grid.Col>\n        <Grid.Col span={12}>{children}</Grid.Col>\n      </Grid.Row>\n    );\n  }\n\n  return children;\n}\n\nControlLabel.defaultProps = {\n  layout: \"vertical\",\n  label: null,\n  disabled: false,\n  children: null,\n};\n\nexport default function withControlLabel(WrappedControl: any) {\n  // eslint-disable-next-line react/prop-types\n  function ControlWrapper({ className, id, layout, label, labelProps, disabled, ...props }: any) {\n    const fallbackId = useMemo(\n      () =>\n        `visualization-editor-control-${Math.random()\n          .toString(36)\n          .substr(2, 10)}`,\n      []\n    );\n    labelProps = {\n      ...labelProps,\n      htmlFor: id || fallbackId,\n    };\n\n    return (\n      <ControlLabel layout={layout} label={label} labelProps={labelProps} disabled={disabled}>\n        {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message */}\n        <WrappedControl\n          className={cx(\"visualization-editor-input\", className)}\n          id={labelProps.htmlFor}\n          disabled={disabled}\n          {...props}\n        />\n      </ControlLabel>\n    );\n  }\n\n  // Copy static methods from `WrappedComponent`\n  hoistNonReactStatics(ControlWrapper, WrappedControl);\n\n  return ControlWrapper;\n}\n","import { isFunction, map, filter, extend, merge } from \"lodash\";\nimport React from \"react\";\nimport Tabs from \"antd/lib/tabs\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nexport const UpdateOptionsStrategy = {\n  replace: (existingOptions: any, newOptions: any) => merge({}, newOptions),\n  shallowMerge: (existingOptions: any, newOptions: any) => extend({}, existingOptions, newOptions),\n  deepMerge: (existingOptions: any, newOptions: any) => merge({}, existingOptions, newOptions),\n};\n\n/*\n(ts-migrate) TODO: Migrate the remaining prop types\n...EditorPropTypes\n*/\ntype OwnProps = {\n  tabs?: {\n    key: string;\n    title: string | ((...args: any[]) => any);\n    isAvailable?: (...args: any[]) => any;\n    component: (...args: any[]) => any;\n  }[];\n};\n\ntype Props = OwnProps & typeof TabbedEditor.defaultProps;\n\n// @ts-expect-error ts-migrate(2339) FIXME: Property 'options' does not exist on type 'Props'.\nexport function TabbedEditor({ tabs, options, data, onOptionsChange, ...restProps }: Props) {\n  const optionsChanged = (newOptions: any, updateStrategy = UpdateOptionsStrategy.deepMerge) => {\n    onOptionsChange(updateStrategy(options, newOptions));\n  };\n\n  // @ts-expect-error ts-migrate(2322) FIXME: Type '(number | ((() => string) & (() => string)) ... Remove this comment to see the full error message\n  tabs = filter(tabs, tab => (isFunction(tab.isAvailable) ? tab.isAvailable(options, data) : true));\n\n  return (\n    <Tabs animated={false} tabBarGutter={20}>\n      {map(tabs, ({ key, title, component: Component }) => (\n        <Tabs.TabPane\n          key={key}\n          tab={<span data-test={`VisualizationEditor.Tabs.${key}`}>{isFunction(title) ? title(options) : title}</span>}>\n          <Component options={options} data={data} onOptionsChange={optionsChanged} {...restProps} />\n        </Tabs.TabPane>\n      ))}\n    </Tabs>\n  );\n}\n\nTabbedEditor.defaultProps = {\n  tabs: [],\n};\n\nexport default function createTabbedEditor(tabs: any) {\n  return function TabbedEditorWrapper(props: any) {\n    return <TabbedEditor {...props} tabs={tabs} />;\n  };\n}\n","import React from \"react\";\nimport cx from \"classnames\";\n\nimport \"./Section.less\";\n\ntype OwnSectionTitleProps = {\n  className?: string;\n  children?: React.ReactNode;\n};\n\ntype SectionTitleProps = OwnSectionTitleProps & typeof SectionTitle.defaultProps;\n\n// @ts-expect-error ts-migrate(2700) FIXME: Rest types may only be created from object types.\nfunction SectionTitle({ className, children, ...props }: SectionTitleProps) {\n  if (!children) {\n    return null;\n  }\n\n  return (\n    <h4 className={cx(\"visualization-editor-section-title\", className)} {...props}>\n      {children}\n    </h4>\n  );\n}\n\nSectionTitle.defaultProps = {\n  className: null,\n  children: null,\n};\n\ntype OwnSectionProps = {\n  className?: string;\n  children?: React.ReactNode;\n};\n\ntype SectionProps = OwnSectionProps & typeof Section.defaultProps;\n\n// @ts-expect-error ts-migrate(2700) FIXME: Rest types may only be created from object types.\nexport default function Section({ className, children, ...props }: SectionProps) {\n  return (\n    <div className={cx(\"visualization-editor-section\", className)} {...props}>\n      {children}\n    </div>\n  );\n}\n\nSection.defaultProps = {\n  className: null,\n  children: null,\n};\n\nSection.Title = SectionTitle;\n","import React, { useMemo } from \"react\";\nimport AntSwitch from \"antd/lib/switch\";\nimport Typography from \"antd/lib/typography\";\n\nimport \"./Switch.less\";\n\ntype OwnProps = {\n  id?: string;\n  disabled?: boolean;\n  children?: React.ReactNode;\n};\n\ntype Props = OwnProps & typeof Switch.defaultProps;\n\n// @ts-expect-error ts-migrate(2700) FIXME: Rest types may only be created from object types.\nexport default function Switch({ id, children, disabled, ...props }: Props) {\n  const fallbackId = useMemo(\n    () =>\n      `visualization-editor-control-${Math.random()\n        .toString(36)\n        .substr(2, 10)}`,\n    []\n  );\n  id = id || fallbackId;\n\n  if (children) {\n    return (\n      <label htmlFor={id} className=\"switch-with-label\">\n        <AntSwitch id={id} disabled={disabled} {...props} />\n        <Typography.Text className=\"switch-text\" disabled={disabled}>\n          {children}\n        </Typography.Text>\n      </label>\n    );\n  }\n\n  return <AntSwitch {...props} />;\n}\n\nSwitch.defaultProps = {\n  id: null,\n  disabled: false,\n  children: null,\n};\n","import React from \"react\";\nimport cx from \"classnames\";\nimport AntInput from \"antd/lib/input\";\nimport withControlLabel from \"./withControlLabel\";\n\nimport \"./TextArea.less\";\n\nfunction TextArea({ className, ...otherProps }: any) {\n  return <AntInput.TextArea className={cx(\"visualization-editor-text-area\", className)} {...otherProps} />;\n}\n\nexport default withControlLabel(TextArea);\n","import React from \"react\";\nimport { extend } from \"lodash\";\nimport Tooltip from \"antd/lib/tooltip\";\n\ntype HelpTriggerProps = {\n  title?: React.ReactNode;\n  href: string;\n  className?: string;\n  children?: React.ReactNode;\n};\n\nfunction HelpTrigger({ title, href, className, children }: HelpTriggerProps) {\n  return (\n    <Tooltip\n      title={\n        <React.Fragment>\n          {title}\n          <i className=\"fa fa-external-link\" style={{ marginLeft: 5 }} />\n        </React.Fragment>\n      }>\n      <a className={className} href={href} target=\"_blank\" rel=\"noopener noreferrer\">\n        {children}\n      </a>\n    </Tooltip>\n  );\n}\n\nHelpTrigger.defaultValues = {\n  title: null,\n  className: null,\n  children: null,\n};\n\n/* eslint-disable jsx-a11y/anchor-has-content */\nfunction Link(props: any) {\n  return <a {...props} />;\n}\n/* eslint-enable jsx-a11y/anchor-has-content */\n\nexport const visualizationsSettings = {\n  HelpTriggerComponent: HelpTrigger,\n  LinkComponent: Link,\n  dateFormat: \"DD/MM/YYYY\",\n  dateTimeFormat: \"DD/MM/YYYY HH:mm\",\n  integerFormat: \"0,0\",\n  floatFormat: \"0,0.00\",\n  booleanValues: [\"false\", \"true\"],\n  tableCellMaxJSONSize: 50000,\n  allowCustomJSVisualizations: false,\n  hidePlotlyModeBar: false,\n  choroplethAvailableMaps: {},\n};\n\nexport function updateVisualizationsSettings(options: any) {\n  extend(visualizationsSettings, options);\n}\n","import React from \"react\";\nimport Popover from \"antd/lib/popover\";\nimport QuestionCircleFilledIcon from \"@ant-design/icons/QuestionCircleFilled\";\nimport { visualizationsSettings } from \"@/components/chart/visualizations/visualizationsSettings\";\n\nimport \"./context-help.less\";\n\ntype OwnContextHelpProps = {\n  icon?: React.ReactNode;\n  children?: React.ReactNode;\n};\n\ntype ContextHelpProps = OwnContextHelpProps & typeof ContextHelp.defaultProps;\n\nexport default function ContextHelp({ icon, children, ...props }: ContextHelpProps) {\n  return (\n    <Popover {...props} content={children}>\n      {icon || ContextHelp.defaultIcon}\n    </Popover>\n  );\n}\n\nContextHelp.defaultProps = {\n  icon: null,\n  children: null,\n};\n\nContextHelp.defaultIcon = <QuestionCircleFilledIcon className=\"context-help-default-icon\" />;\n\nfunction NumberFormatSpecs() {\n  const { HelpTriggerComponent } = visualizationsSettings;\n  return (\n    <HelpTriggerComponent\n      // @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: Element; type: string; title: st... Remove this comment to see the full error message\n      type=\"NUMBER_FORMAT_SPECS\"\n      title={window.W_L.formatting_numbers}\n      href=\"https://redash.io/help/user-guide/visualizations/formatting-numbers\"\n      className=\"visualization-editor-context-help\">\n      {ContextHelp.defaultIcon}\n    </HelpTriggerComponent>\n  );\n}\n\nfunction DateTimeFormatSpecs() {\n  const { HelpTriggerComponent } = visualizationsSettings;\n  return (\n    <HelpTriggerComponent\n      title={window.W_L.formatting_dates_and_times}\n      href=\"https://momentjs.com/docs/#/displaying/format/\"\n      className=\"visualization-editor-context-help\">\n      {ContextHelp.defaultIcon}\n    </HelpTriggerComponent>\n  );\n}\n\nContextHelp.NumberFormatSpecs = NumberFormatSpecs;\nContextHelp.DateTimeFormatSpecs = DateTimeFormatSpecs;\n","import AntSelect from \"antd/lib/select\";\nimport AntInput from \"antd/lib/input\";\nimport AntInputNumber from \"antd/lib/input-number\";\nimport Checkbox from \"antd/lib/checkbox\";\n\nimport RedashColorPicker from \"@/components/chart/components/ColorPicker\";\nimport RedashTextAlignmentSelect from \"@/components/chart/components/TextAlignmentSelect\";\n\nimport withControlLabel, { ControlLabel } from \"./withControlLabel\";\nimport createTabbedEditor from \"./createTabbedEditor\";\nimport Section from \"./Section\";\nimport Switch from \"./Switch\";\nimport TextArea from \"./TextArea\";\nimport ContextHelp from \"./ContextHelp\";\n\nexport { Section, ControlLabel, Checkbox, Switch, TextArea, ContextHelp, withControlLabel, createTabbedEditor };\nexport const Select = withControlLabel(AntSelect);\nexport const Input = withControlLabel(AntInput);\nexport const InputNumber = withControlLabel(AntInputNumber);\nexport const ColorPicker = withControlLabel(RedashColorPicker);\nexport const TextAlignmentSelect = withControlLabel(RedashTextAlignmentSelect);\n","import React from \"react\";\nimport { Section, Input } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nexport default function Editor({ options, onOptionsChange }: any) {\n  const onXAxisLabelChanged = (xAxisLabel: any) => {\n    const newOptions = { ...options, xAxisLabel };\n    onOptionsChange(newOptions);\n  };\n\n  const onYAxisLabelChanged = (yAxisLabel: any) => {\n    const newOptions = { ...options, yAxisLabel };\n    onOptionsChange(newOptions);\n  };\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={window.W_L.x_axis_label}\n          data-test=\"BoxPlot.XAxisLabel\"\n          value={options.xAxisLabel}\n          onChange={(event: any) => onXAxisLabelChanged(event.target.value)}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={window.W_L.y_axis_label}\n          data-test=\"BoxPlot.YAxisLabel\"\n          value={options.yAxisLabel}\n          onChange={(event: any) => onYAxisLabelChanged(event.target.value)}\n        />\n      </Section>\n    </React.Fragment>\n  );\n}\n\nEditor.propTypes = EditorPropTypes;\n","import Renderer from \"./Renderer\";\nimport Editor from \"./Editor\";\n\nexport default {\n  type: \"BOXPLOT\",\n  name: \"箱线图(Boxplot)\",\n  isDeprecated: true,\n  getOptions: (options: any) => ({\n    ...options,\n  }),\n  Renderer,\n  Editor,\n\n  defaultRows: 8,\n  minRows: 5,\n};\n","import { merge } from \"lodash\";\nimport { visualizationsSettings } from \"@/components/chart/visualizations/visualizationsSettings\";\n\nconst DEFAULT_OPTIONS = {\n  globalSeriesType: \"column\",\n  sortX: true,\n  legend: { enabled: true, placement: \"auto\", traceorder: \"normal\" },\n  xAxis: { type: \"-\", labels: { enabled: true } },\n  yAxis: [{ type: \"linear\" }, { type: \"linear\", opposite: true }],\n  alignYAxesAtZero: false,\n  error_y: { type: \"data\", visible: true },\n  series: { stacking: null, error_y: { type: \"data\", visible: true } },\n  seriesOptions: {},\n  valuesOptions: {},\n  columnMapping: {},\n  direction: { type: \"counterclockwise\" },\n  sizemode: \"diameter\",\n  coefficient: 1,\n\n  // showDataLabels: false, // depends on chart type\n  numberFormat: \"0,0[.]00000\",\n  percentFormat: \"0[.]00%\",\n  // dateTimeFormat: 'DD/MM/YYYY HH:mm', // will be set from visualizationsSettings\n  textFormat: \"\", // default: combination of {{ @@yPercent }} ({{ @@y }} ± {{ @@yError }})\n\n  missingValuesAsZero: true,\n};\n\nexport default function getOptions(options: any) {\n  const result = merge(\n    {},\n    DEFAULT_OPTIONS,\n    {\n      showDataLabels: options.globalSeriesType === \"pie\",\n      dateTimeFormat: visualizationsSettings.dateTimeFormat,\n    },\n    options\n  );\n\n  // Backward compatibility\n  if ([\"normal\", \"percent\"].indexOf(result.series.stacking) >= 0) {\n    result.series.percentValues = result.series.stacking === \"percent\";\n    result.series.stacking = \"stack\";\n  }\n\n  return result;\n}\n","import { isNil, isObject, each, forOwn, sortBy, values } from \"lodash\";\n\nfunction addPointToSeries(point: any, seriesCollection: any, seriesName: any) {\n  if (seriesCollection[seriesName] === undefined) {\n    seriesCollection[seriesName] = {\n      name: seriesName,\n      type: \"column\",\n      data: [],\n    };\n  }\n\n  seriesCollection[seriesName].data.push(point);\n}\n\nexport default function getChartData(data: any, options: any) {\n  const series = {};\n\n  const mappings = options.columnMapping;\n\n  each(data, row => {\n    let point = { $raw: row };\n    let seriesName = null;\n    let xValue = 0;\n    const yValues = {};\n    let eValue: any = null;\n    let sizeValue: any = null;\n    let zValue: any = null;\n\n    forOwn(row, (value, definition) => {\n      definition = \"\" + definition;\n      const definitionParts = definition.split(\"::\") || definition.split(\"__\");\n      const name = definitionParts[0];\n      const type = mappings ? mappings[definition] : definitionParts[1];\n\n      if (type === \"unused\") {\n        return;\n      }\n\n      if (type === \"x\") {\n        xValue = value;\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        point[type] = value;\n      }\n      if (type === \"y\") {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        yValues[name] = value;\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        point[type] = value;\n      }\n      if (type === \"yError\") {\n        eValue = value;\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        point[type] = value;\n      }\n\n      if (type === \"series\") {\n        seriesName = String(value);\n      }\n\n      if (type === \"size\") {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        point[type] = value;\n        sizeValue = value;\n      }\n\n      if (type === \"zVal\") {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        point[type] = value;\n        zValue = value;\n      }\n\n      if (type === \"multiFilter\" || type === \"multi-filter\") {\n        seriesName = String(value);\n      }\n    });\n\n    if (isNil(seriesName)) {\n      each(yValues, (yValue, ySeriesName) => {\n        // @ts-expect-error ts-migrate(2322) FIXME: Type '{ x: number; y: never; $raw: any; }' is not ... Remove this comment to see the full error message\n        point = { x: xValue, y: yValue, $raw: point.$raw };\n        if (eValue !== null) {\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'yError' does not exist on type '{ $raw: ... Remove this comment to see the full error message\n          point.yError = eValue;\n        }\n\n        if (sizeValue !== null) {\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'size' does not exist on type '{ $raw: an... Remove this comment to see the full error message\n          point.size = sizeValue;\n        }\n\n        if (zValue !== null) {\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'zVal' does not exist on type '{ $raw: an... Remove this comment to see the full error message\n          point.zVal = zValue;\n        }\n        addPointToSeries(point, series, ySeriesName);\n      });\n    } else {\n      addPointToSeries(point, series, seriesName);\n    }\n  });\n  return sortBy(values(series), ({ name }) => {\n    if (isObject(options.seriesOptions[name])) {\n      return options.seriesOptions[name].zIndex || 0;\n    }\n    return 0;\n  });\n}\n","import { values } from \"lodash\";\n\n// The following colors will be used if you pick \"Automatic\" color\nexport const BaseColors = {\n  Blue: \"#356AFF\",\n  Red: \"#E92828\",\n  Green: \"#3BD973\",\n  Purple: \"#604FE9\",\n  Cyan: \"#50F5ED\",\n  Orange: \"#FB8D3D\",\n  \"Light Blue\": \"#799CFF\",\n  Lilac: \"#B554FF\",\n  \"Light Green\": \"#8CFFB4\",\n  Brown: \"#A55F2A\",\n  Black: \"#000000\",\n  Gray: \"#494949\",\n  Pink: \"#FF7DE3\",\n  \"Dark Blue\": \"#002FB4\",\n};\n\n// Additional colors for the user to choose from\nexport const AdditionalColors = {\n  \"Indian Red\": \"#981717\",\n  \"Green 2\": \"#17BF51\",\n  \"Green 3\": \"#049235\",\n  \"Dark Turquoise\": \"#00B6EB\",\n  \"Dark Violet\": \"#A58AFF\",\n  \"Pink 2\": \"#C63FA9\",\n};\n\nexport const ColorPaletteArray = values(BaseColors);\n\nconst ColorPalette = {\n  ...BaseColors,\n  ...AdditionalColors,\n};\n\nexport default ColorPalette;\n","import { isUndefined } from \"lodash\";\nimport moment from \"moment\";\n// @ts-expect-error ts-migrate(7016) FIXME: Could not find a declaration file for module 'plot... Remove this comment to see the full error message\nimport plotlyCleanNumber from \"plotly.js/src/lib/clean_number\";\n\nexport function cleanNumber(value: any) {\n  return isUndefined(value) ? value : plotlyCleanNumber(value);\n}\n\nexport function getSeriesAxis(series: any, options: any) {\n  const seriesOptions = options.seriesOptions[series.name] || { type: options.globalSeriesType };\n  if (seriesOptions.yAxis === 1 && (!options.series.stacking || seriesOptions.type === \"line\")) {\n    return \"y2\";\n  }\n  return \"y\";\n}\n\nexport function normalizeValue(value: any, axisType: any, dateTimeFormat = \"YYYY-MM-DD HH:mm:ss\") {\n  if (axisType === \"datetime\" && moment.utc(value).isValid()) {\n    value = moment.utc(value);\n  }\n  if (moment.isMoment(value)) {\n    return value.format(dateTimeFormat);\n  }\n  return value;\n}\n","import { isString, each, extend, includes, map, reduce } from \"lodash\";\nimport d3 from \"d3\";\nimport chooseTextColorForBackground from \"@/components/chart/lib/chooseTextColorForBackground\";\nimport { ColorPaletteArray } from \"@/components/chart/visualizations/ColorPalette\";\n\nimport { cleanNumber, normalizeValue } from \"./utils\";\n\nexport function getPieDimensions(series: any) {\n  const rows = series.length > 2 ? 2 : 1;\n  const cellsInRow = Math.ceil(series.length / rows);\n  const cellWidth = 1 / cellsInRow;\n  const cellHeight = 1 / rows;\n  const xPadding = 0.02;\n  const yPadding = 0.1;\n\n  return { rows, cellsInRow, cellWidth, cellHeight, xPadding, yPadding };\n}\n\nfunction getPieHoverInfoPattern(options: any) {\n  const hasX = /{{\\s*@@x\\s*}}/.test(options.textFormat);\n  let result = \"text\";\n  if (!hasX) result += \"+label\";\n  return result;\n}\n\nfunction prepareSeries(series: any, options: any, additionalOptions: any) {\n  const {\n    cellWidth,\n    cellHeight,\n    xPadding,\n    yPadding,\n    cellsInRow,\n    hasX,\n    index,\n    hoverInfoPattern,\n    getValueColor,\n  } = additionalOptions;\n\n  const seriesOptions = extend({ type: options.globalSeriesType, yAxis: 0 }, options.seriesOptions[series.name]);\n\n  const xPosition = (index % cellsInRow) * cellWidth;\n  const yPosition = Math.floor(index / cellsInRow) * cellHeight;\n\n  const labels: any = [];\n  const values: any = [];\n  const sourceData = new Map();\n  const seriesTotal = reduce(\n    series.data,\n    (result, row) => {\n      const y = cleanNumber(row.y);\n      return result + Math.abs(y);\n    },\n    0\n  );\n  each(series.data, row => {\n    const x = hasX ? normalizeValue(row.x, options.xAxis.type) : `Slice ${index}`;\n    const y = cleanNumber(row.y);\n    labels.push(x);\n    values.push(y);\n    sourceData.set(x, {\n      x,\n      y,\n      yPercent: (y / seriesTotal) * 100,\n      row,\n    });\n  });\n\n  const markerColors = map(series.data, row => getValueColor(row.x));\n  const textColors = map(markerColors, c => chooseTextColorForBackground(c));\n\n  return {\n    visible: true,\n    values,\n    labels,\n    type: \"pie\",\n    hole: 0.4,\n    marker: {\n      colors: markerColors,\n    },\n    hoverinfo: hoverInfoPattern,\n    text: [],\n    textinfo: options.showDataLabels ? \"percent\" : \"none\",\n    textposition: \"inside\",\n    textfont: {\n      color: textColors,\n    },\n    name: seriesOptions.name || series.name,\n    direction: options.direction.type,\n    domain: {\n      x: [xPosition, xPosition + cellWidth - xPadding],\n      y: [yPosition, yPosition + cellHeight - yPadding],\n    },\n    sourceData,\n  };\n}\n\nexport default function preparePieData(seriesList: any, options: any) {\n  // we will use this to assign colors for values that have no explicitly set color\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'scale' does not exist on type 'typeof im... Remove this comment to see the full error message\n  const getDefaultColor = d3.scale\n    .ordinal()\n    .domain([])\n    .range(ColorPaletteArray);\n  const valuesColors = {};\n  each(options.valuesOptions, (item, key) => {\n    if (isString(item.color) && item.color !== \"\") {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      valuesColors[key] = item.color;\n    }\n  });\n\n  const additionalOptions = {\n    ...getPieDimensions(seriesList),\n    hasX: includes(options.columnMapping, \"x\"),\n    hoverInfoPattern: getPieHoverInfoPattern(options),\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    getValueColor: (v: any) => valuesColors[v] || getDefaultColor(v),\n  };\n\n  return map(seriesList, (series, index) => prepareSeries(series, options, { ...additionalOptions, index }));\n}\n","import React from \"react\";\nimport ReactDOMServer from \"react-dom/server\";\nimport moment from \"moment/moment\";\nimport numeral from \"numeral\";\nimport { isString, isArray, isUndefined, isFinite, isNil, toString } from \"lodash\";\nimport { visualizationsSettings } from \"@/components/chart/visualizations/visualizationsSettings\";\n\nnumeral.options.scalePercentBy100 = false;\n\n// eslint-disable-next-line\nconst urlPattern = /(^|[\\s\\n]|<br\\/?>)((?:https?|ftp):\\/\\/[\\-A-Z0-9+\\u0026\\u2019@#\\/%?=()~_|!:,.;]*[\\-A-Z0-9+\\u0026@#\\/%=~()_|])/gi;\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function createTextFormatter(highlightLinks: any) {\n  if (highlightLinks) {\n    return (value: any) => {\n      if (isString(value)) {\n        const Link = visualizationsSettings.LinkComponent;\n        value = value.replace(urlPattern, (unused, prefix, href) => {\n          const link = ReactDOMServer.renderToStaticMarkup(\n            <Link href={href} target=\"_blank\" rel=\"noopener noreferrer\">\n              {href}\n            </Link>\n          );\n          return prefix + link;\n        });\n      }\n      return toString(value);\n    };\n  }\n  return (value: any) => toString(value);\n}\n\nfunction toMoment(value: any) {\n  if (moment.isMoment(value)) {\n    return value;\n  }\n  if (isFinite(value)) {\n    return moment(value);\n  }\n  // same as default `moment(value)`, but avoid fallback to `new Date()`\n  return moment(toString(value), [moment.ISO_8601, moment.RFC_2822]);\n}\n\nexport function createDateTimeFormatter(format: any) {\n  if (isString(format) && format !== \"\") {\n    return (value: any) => {\n      const wrapped = toMoment(value);\n      return wrapped.isValid() ? wrapped.format(format) : toString(value);\n    };\n  }\n  return (value: any) => toString(value);\n}\n\nexport function createBooleanFormatter(values: any) {\n  if (isArray(values)) {\n    if (values.length >= 2) {\n      // Both `true` and `false` specified\n      return (value: any) => {\n        if (isNil(value)) {\n          return \"\";\n        }\n        return \"\" + values[value ? 1 : 0];\n      };\n    } else if (values.length === 1) {\n      // Only `true`\n      return (value: any) => (value ? values[0] : \"\");\n    }\n  }\n  return (value: any) => {\n    if (isNil(value)) {\n      return \"\";\n    }\n    return value ? \"true\" : \"false\";\n  };\n}\n\nexport function createNumberFormatter(format: any) {\n  if (isString(format) && format !== \"\") {\n    const n = numeral(0); // cache `numeral` instance\n    return (value: any) => (value === null || value === \"\" ? \"\" : n.set(value).format(format));\n  }\n  return (value: any) => toString(value);\n}\n\nexport function formatSimpleTemplate(str: any, data: any) {\n  if (!isString(str)) {\n    return \"\";\n  }\n  return str.replace(/{{\\s*([^\\s]+?)\\s*}}/g, (match, prop) => {\n    if (hasOwnProperty.call(data, prop) && !isUndefined(data[prop])) {\n      return data[prop];\n    }\n    return match;\n  });\n}\n","import { map, max, uniq, sortBy, flatten, find } from \"lodash\";\nimport { createNumberFormatter } from \"@/components/chart/lib/value-format\";\n\nconst defaultColorScheme = [\n  [0, \"#356aff\"],\n  [0.14, \"#4a7aff\"],\n  [0.28, \"#5d87ff\"],\n  [0.42, \"#7398ff\"],\n  [0.56, \"#fb8c8c\"],\n  [0.71, \"#ec6463\"],\n  [0.86, \"#ec4949\"],\n  [1, \"#e92827\"],\n];\n\nfunction prepareSeries(series: any, options: any, additionalOptions: any) {\n  const { colorScheme, formatNumber } = additionalOptions;\n\n  const plotlySeries = {\n    x: [],\n    y: [],\n    z: [],\n    type: \"heatmap\",\n    name: \"\",\n    colorscale: colorScheme,\n  };\n\n  // @ts-expect-error ts-migrate(2322) FIXME: Type 'any[]' is not assignable to type 'never[]'.\n  plotlySeries.x = uniq(map(series.data, v => v.x));\n  // @ts-expect-error ts-migrate(2322) FIXME: Type 'any[]' is not assignable to type 'never[]'.\n  plotlySeries.y = uniq(map(series.data, v => v.y));\n\n  if (options.sortX) {\n    plotlySeries.x = sortBy(plotlySeries.x);\n  }\n\n  if (options.sortY) {\n    plotlySeries.y = sortBy(plotlySeries.y);\n  }\n\n  if (options.reverseX) {\n    plotlySeries.x.reverse();\n  }\n\n  if (options.reverseY) {\n    plotlySeries.y.reverse();\n  }\n\n  const zMax = max(map(series.data, d => d.zVal));\n\n  // Use text trace instead of default annotation for better performance\n  const dataLabels = {\n    x: [],\n    y: [],\n    mode: \"text\",\n    hoverinfo: \"skip\",\n    showlegend: false,\n    text: [],\n    textfont: {\n      color: [],\n    },\n  };\n\n  for (let i = 0; i < plotlySeries.y.length; i += 1) {\n    const item = [];\n    for (let j = 0; j < plotlySeries.x.length; j += 1) {\n      const datum = find(series.data, { x: plotlySeries.x[j], y: plotlySeries.y[i] });\n\n      const zValue = (datum && datum.zVal) || 0;\n      item.push(zValue);\n\n      if (isFinite(zMax) && options.showDataLabels) {\n        dataLabels.x.push(plotlySeries.x[j]);\n        dataLabels.y.push(plotlySeries.y[i]);\n        // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'any' is not assignable to parame... Remove this comment to see the full error message\n        dataLabels.text.push(formatNumber(zValue));\n        if (options.colorScheme && options.colorScheme === \"Custom...\") {\n          // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'string' is not assignable to par... Remove this comment to see the full error message\n          dataLabels.textfont.color.push(\"white\");\n        } else {\n          // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'string' is not assignable to par... Remove this comment to see the full error message\n          dataLabels.textfont.color.push(zValue / zMax < 0.25 ? \"white\" : \"black\");\n        }\n      }\n    }\n    // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'any[]' is not assignable to para... Remove this comment to see the full error message\n    plotlySeries.z.push(item);\n  }\n\n  if (isFinite(zMax) && options.showDataLabels) {\n    return [plotlySeries, dataLabels];\n  }\n  return [plotlySeries];\n}\n\nexport default function prepareHeatmapData(seriesList: any, options: any) {\n  let colorScheme = [];\n\n  if (!options.colorScheme) {\n    colorScheme = defaultColorScheme;\n  } else if (options.colorScheme === \"Custom...\") {\n    colorScheme = [\n      [0, options.heatMinColor],\n      [1, options.heatMaxColor],\n    ];\n  } else {\n    colorScheme = options.colorScheme;\n  }\n\n  const additionalOptions = {\n    colorScheme,\n    formatNumber: createNumberFormatter(options.numberFormat),\n  };\n\n  return flatten(map(seriesList, series => prepareSeries(series, options, additionalOptions)));\n}\n","import { isNil, extend, each, includes, map, sortBy, toString } from \"lodash\";\nimport chooseTextColorForBackground from \"@/components/chart/lib/chooseTextColorForBackground\";\nimport { ColorPaletteArray } from \"@/components/chart/visualizations/ColorPalette\";\nimport { cleanNumber, normalizeValue, getSeriesAxis } from \"./utils\";\n\nfunction getSeriesColor(seriesOptions: any, seriesIndex: any) {\n  return seriesOptions.color || ColorPaletteArray[seriesIndex % ColorPaletteArray.length];\n}\n\nfunction getHoverInfoPattern(options: any) {\n  const hasX = /{{\\s*@@x\\s*}}/.test(options.textFormat);\n  const hasName = /{{\\s*@@name\\s*}}/.test(options.textFormat);\n  let result = \"text\";\n  if (!hasX) result += \"+x\";\n  if (!hasName) result += \"+name\";\n  return result;\n}\n\nfunction prepareBarSeries(series: any, options: any, additionalOptions: any) {\n  series.type = \"bar\";\n  series.offsetgroup = toString(additionalOptions.index);\n  if (options.showDataLabels) {\n    series.textposition = \"inside\";\n  }\n  return series;\n}\n\nfunction prepareLineSeries(series: any, options: any) {\n  series.mode = \"lines\" + (options.showDataLabels ? \"+text\" : \"\");\n  return series;\n}\n\nfunction prepareAreaSeries(series: any, options: any) {\n  series.mode = \"lines\" + (options.showDataLabels ? \"+text\" : \"\");\n  series.fill = options.series.stacking ? \"tonexty\" : \"tozeroy\";\n  return series;\n}\n\nfunction prepareScatterSeries(series: any, options: any) {\n  series.type = \"scatter\";\n  series.mode = \"markers\" + (options.showDataLabels ? \"+text\" : \"\");\n  return series;\n}\n\nfunction prepareBubbleSeries(series: any, options: any, { seriesColor, data }: any) {\n  const coefficient = options.coefficient || 1;\n  series.mode = \"markers\";\n  series.marker = {\n    color: seriesColor,\n    size: map(data, i => i.size * coefficient),\n    sizemode: options.sizemode || \"diameter\",\n  };\n  return series;\n}\n\nfunction prepareBoxSeries(series: any, options: any, { seriesColor }: any) {\n  series.type = \"box\";\n  series.mode = \"markers\";\n\n  series.boxpoints = \"outliers\";\n  series.hoverinfo = false;\n  series.marker = {\n    color: seriesColor,\n    size: 3,\n  };\n  if (options.showpoints) {\n    series.boxpoints = \"all\";\n    series.jitter = 0.3;\n    series.pointpos = -1.8;\n  }\n  return series;\n}\n\nfunction prepareSeries(series: any, options: any, additionalOptions: any) {\n  const { hoverInfoPattern, index } = additionalOptions;\n\n  const seriesOptions = extend({ type: options.globalSeriesType, yAxis: 0 }, options.seriesOptions[series.name]);\n  const seriesColor = getSeriesColor(seriesOptions, index);\n  const seriesYAxis = getSeriesAxis(series, options);\n\n  // Sort by x - `Map` preserves order of items\n  const data = options.sortX ? sortBy(series.data, d => normalizeValue(d.x, options.xAxis.type)) : series.data;\n\n  // For bubble/scatter charts `y` may be any (similar to `x`) - numeric is only bubble size;\n  // for other types `y` is always number\n  const cleanYValue = includes([\"bubble\", \"scatter\"], seriesOptions.type)\n    ? normalizeValue\n    : (v: any) => {\n        v = cleanNumber(v);\n        return options.missingValuesAsZero && isNil(v) ? 0.0 : v;\n      };\n\n  const sourceData = new Map();\n  const xValues: any = [];\n  const yValues: any = [];\n  const yErrorValues: any = [];\n  each(data, row => {\n    const x = normalizeValue(row.x, options.xAxis.type); // number/datetime/category\n    const y = cleanYValue(row.y, seriesYAxis === \"y2\" ? options.yAxis[1].type : options.yAxis[0].type); // depends on series type!\n    const yError = cleanNumber(row.yError); // always number\n    const size = cleanNumber(row.size); // always number\n    sourceData.set(x, {\n      x,\n      y,\n      yError,\n      size,\n      yPercent: null, // will be updated later\n      row,\n    });\n    xValues.push(x);\n    yValues.push(y);\n    yErrorValues.push(yError);\n  });\n\n  const plotlySeries = {\n    visible: true,\n    hoverinfo: hoverInfoPattern,\n    x: xValues,\n    y: yValues,\n    error_y: {\n      array: yErrorValues,\n      color: seriesColor,\n    },\n    name: seriesOptions.name || series.name,\n    marker: { color: seriesColor },\n    insidetextfont: {\n      color: chooseTextColorForBackground(seriesColor),\n    },\n    yaxis: seriesYAxis,\n    sourceData,\n  };\n\n  additionalOptions = { ...additionalOptions, seriesColor, data };\n\n  switch (seriesOptions.type) {\n    case \"column\":\n      return prepareBarSeries(plotlySeries, options, additionalOptions);\n    case \"line\":\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 3.\n      return prepareLineSeries(plotlySeries, options, additionalOptions);\n    case \"area\":\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 3.\n      return prepareAreaSeries(plotlySeries, options, additionalOptions);\n    case \"scatter\":\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 3.\n      return prepareScatterSeries(plotlySeries, options, additionalOptions);\n    case \"bubble\":\n      return prepareBubbleSeries(plotlySeries, options, additionalOptions);\n    case \"box\":\n      return prepareBoxSeries(plotlySeries, options, additionalOptions);\n    default:\n      return plotlySeries;\n  }\n}\n\nexport default function prepareDefaultData(seriesList: any, options: any) {\n  const additionalOptions = {\n    hoverInfoPattern: getHoverInfoPattern(options),\n  };\n\n  return map(seriesList, (series, index) => prepareSeries(series, options, { ...additionalOptions, index }));\n}\n","import { isNil, each, extend, filter, identity, includes, map, sortBy } from \"lodash\";\nimport { createNumberFormatter, formatSimpleTemplate } from \"@/components/chart/lib/value-format\";\nimport { normalizeValue } from \"./utils\";\n\nfunction shouldUseUnifiedXAxis(options: any) {\n  return options.sortX && options.xAxis.type === \"category\" && options.globalSeriesType !== \"box\";\n}\n\nfunction defaultFormatSeriesText(item: any) {\n  let result = item[\"@@y\"];\n  if (item[\"@@yError\"] !== undefined) {\n    result = `${result} \\u00B1 ${item[\"@@yError\"]}`;\n  }\n  if (item[\"@@yPercent\"] !== undefined) {\n    result = `${item[\"@@yPercent\"]} (${result})`;\n  }\n  if (item[\"@@size\"] !== undefined) {\n    result = `${result}: ${item[\"@@size\"]}`;\n  }\n  return result;\n}\n\nfunction defaultFormatSeriesTextForPie(item: any) {\n  return item[\"@@yPercent\"] + \" (\" + item[\"@@y\"] + \")\";\n}\n\nfunction createTextFormatter(options: any) {\n  if (options.textFormat === \"\") {\n    return options.globalSeriesType === \"pie\" ? defaultFormatSeriesTextForPie : defaultFormatSeriesText;\n  }\n  return (item: any) => formatSimpleTemplate(options.textFormat, item);\n}\n\nfunction formatValue(value: any, axis: any, options: any) {\n  let axisType = null;\n  switch (axis) {\n    case \"x\":\n      axisType = options.xAxis.type;\n      break;\n    case \"y\":\n      axisType = options.yAxis[0].type;\n      break;\n    case \"y2\":\n      axisType = options.yAxis[1].type;\n      break;\n    // no default\n  }\n  return normalizeValue(value, axisType, options.dateTimeFormat);\n}\n\nfunction updateSeriesText(seriesList: any, options: any) {\n  const formatNumber = createNumberFormatter(options.numberFormat);\n  const formatPercent = createNumberFormatter(options.percentFormat);\n  const formatText = createTextFormatter(options);\n\n  const defaultY = options.missingValuesAsZero ? 0.0 : null;\n\n  each(seriesList, series => {\n    const seriesOptions = options.seriesOptions[series.name] || { type: options.globalSeriesType };\n\n    series.text = [];\n    series.hover = [];\n    const xValues = options.globalSeriesType === \"pie\" ? series.labels : series.x;\n    xValues.forEach((x: any) => {\n      const text = {\n        \"@@name\": series.name,\n      };\n      const item = series.sourceData.get(x) || { x, y: defaultY, row: { x, y: defaultY } };\n\n      const yValueIsAny = includes([\"bubble\", \"scatter\"], seriesOptions.type);\n\n      // for `formatValue` we have to use original value of `x` and `y`: `item.x`/`item.y` contains value\n      // already processed with `normalizeValue`, and if they were `moment` instances - they are formatted\n      // using default (ISO) date/time format. Here we need to use custom date/time format, so we pass original value\n      // to `formatValue` which will call `normalizeValue` again, but this time with different date/time format\n      // (if needed)\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      text[\"@@x\"] = formatValue(item.row.x, \"x\", options);\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      text[\"@@y\"] = yValueIsAny ? formatValue(item.row.y, series.yaxis, options) : formatNumber(item.y);\n      if (item.yError !== undefined) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        text[\"@@yError\"] = formatNumber(item.yError);\n      }\n      if (item.size !== undefined) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        text[\"@@size\"] = formatNumber(item.size);\n      }\n\n      if (options.series.percentValues || options.globalSeriesType === \"pie\") {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        text[\"@@yPercent\"] = formatPercent(Math.abs(item.yPercent));\n      }\n\n      extend(text, item.row.$raw);\n\n      series.text.push(formatText(text));\n    });\n  });\n}\n\nfunction updatePercentValues(seriesList: any, options: any) {\n  if (options.series.percentValues) {\n    // Some series may not have corresponding x-values;\n    // do calculations for each x only for series that do have that x\n    const sumOfCorrespondingPoints = new Map();\n    each(seriesList, series => {\n      series.sourceData.forEach((item: any) => {\n        const sum = sumOfCorrespondingPoints.get(item.x) || 0;\n        sumOfCorrespondingPoints.set(item.x, sum + Math.abs(item.y || 0.0));\n      });\n    });\n\n    each(seriesList, series => {\n      const yValues: any = [];\n\n      series.sourceData.forEach((item: any) => {\n        if (isNil(item.y) && !options.missingValuesAsZero) {\n          item.yPercent = null;\n        } else {\n          const sum = sumOfCorrespondingPoints.get(item.x);\n          item.yPercent = (item.y / sum) * 100;\n        }\n        yValues.push(item.yPercent);\n      });\n\n      series.y = yValues;\n    });\n  }\n}\n\nfunction getUnifiedXAxisValues(seriesList: any, sorted: any) {\n  const set = new Set();\n  each(seriesList, series => {\n    // `Map.forEach` will walk items in insertion order\n    series.sourceData.forEach((item: any) => {\n      set.add(item.x);\n    });\n  });\n\n  const result = [...set];\n  return sorted ? sortBy(result, identity) : result;\n}\n\nfunction updateUnifiedXAxisValues(seriesList: any, options: any) {\n  const unifiedX = getUnifiedXAxisValues(seriesList, options.sortX);\n  const defaultY = options.missingValuesAsZero ? 0.0 : null;\n  each(seriesList, series => {\n    series.x = [];\n    series.y = [];\n    series.error_y.array = [];\n    each(unifiedX, x => {\n      series.x.push(x);\n      const item = series.sourceData.get(x);\n      if (item) {\n        series.y.push(options.series.percentValues ? item.yPercent : item.y);\n        series.error_y.array.push(item.yError);\n      } else {\n        series.y.push(defaultY);\n        series.error_y.array.push(null);\n      }\n    });\n  });\n}\n\nfunction updatePieData(seriesList: any, options: any) {\n  updateSeriesText(seriesList, options);\n}\n\nfunction updateLineAreaData(seriesList: any, options: any) {\n  // Apply \"percent values\" modification\n  updatePercentValues(seriesList, options);\n  if (options.series.stacking) {\n    updateUnifiedXAxisValues(seriesList, options);\n\n    // Calculate cumulative value for each x tick\n    const cumulativeValues = {};\n    each(seriesList, series => {\n      series.y = map(series.y, (y, i) => {\n        if (isNil(y) && !options.missingValuesAsZero) {\n          return null;\n        }\n        const x = series.x[i];\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        const stackedY = y + (cumulativeValues[x] || 0.0);\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        cumulativeValues[x] = stackedY;\n        return stackedY;\n      });\n    });\n  } else {\n    if (shouldUseUnifiedXAxis(options)) {\n      updateUnifiedXAxisValues(seriesList, options);\n    }\n  }\n\n  // Finally - update text labels\n  updateSeriesText(seriesList, options);\n}\n\nfunction updateDefaultData(seriesList: any, options: any) {\n  // Apply \"percent values\" modification\n  updatePercentValues(seriesList, options);\n\n  if (!options.series.stacking) {\n    if (shouldUseUnifiedXAxis(options)) {\n      updateUnifiedXAxisValues(seriesList, options);\n    }\n  }\n\n  // Finally - update text labels\n  updateSeriesText(seriesList, options);\n}\n\nexport default function updateData(seriesList: any, options: any) {\n  // Use only visible series\n  const visibleSeriesList = filter(seriesList, s => s.visible === true);\n\n  if (visibleSeriesList.length > 0) {\n    switch (options.globalSeriesType) {\n      case \"pie\":\n        updatePieData(visibleSeriesList, options);\n        break;\n      case \"line\":\n      case \"area\":\n        updateLineAreaData(visibleSeriesList, options);\n        break;\n      case \"heatmap\":\n        break;\n      default:\n        updateDefaultData(visibleSeriesList, options);\n        break;\n    }\n  }\n  return seriesList;\n}\n","import preparePieData from \"./preparePieData\";\nimport prepareHeatmapData from \"./prepareHeatmapData\";\nimport prepareDefaultData from \"./prepareDefaultData\";\nimport updateData from \"./updateData\";\n\nexport default function prepareData(seriesList: any, options: any) {\n  switch (options.globalSeriesType) {\n    case \"pie\":\n      return updateData(preparePieData(seriesList, options), options);\n    case \"heatmap\":\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 2 arguments, but got 1.\n      return updateData(prepareHeatmapData(seriesList, options, options));\n    default:\n      return updateData(prepareDefaultData(seriesList, options), options);\n  }\n}\n","import { isObject, isUndefined, filter, map } from \"lodash\";\nimport { getPieDimensions } from \"./preparePieData\";\n\nfunction getAxisTitle(axis: any) {\n  return isObject(axis.title) ? axis.title.text : null;\n}\n\nfunction getAxisScaleType(axis: any) {\n  switch (axis.type) {\n    case \"datetime\":\n      return \"date\";\n    case \"logarithmic\":\n      return \"log\";\n    default:\n      return axis.type;\n  }\n}\n\nfunction prepareXAxis(axisOptions: any, additionalOptions: any) {\n  const axis = {\n    title: getAxisTitle(axisOptions),\n    type: getAxisScaleType(axisOptions),\n    automargin: true,\n  };\n\n  if (additionalOptions.sortX && axis.type === \"category\") {\n    if (additionalOptions.reverseX) {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'categoryorder' does not exist on type '{... Remove this comment to see the full error message\n      axis.categoryorder = \"category descending\";\n    } else {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'categoryorder' does not exist on type '{... Remove this comment to see the full error message\n      axis.categoryorder = \"category ascending\";\n    }\n  }\n\n  if (!isUndefined(axisOptions.labels)) {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'showticklabels' does not exist on type '... Remove this comment to see the full error message\n    axis.showticklabels = axisOptions.labels.enabled;\n  }\n\n  return axis;\n}\n\nfunction prepareYAxis(axisOptions: any) {\n  return {\n    title: getAxisTitle(axisOptions),\n    type: getAxisScaleType(axisOptions),\n    automargin: true,\n    autorange: true,\n    range: null,\n  };\n}\n\nfunction preparePieLayout(layout: any, options: any, data: any) {\n  const hasName = /{{\\s*@@name\\s*}}/.test(options.textFormat);\n\n  const { cellsInRow, cellWidth, cellHeight, xPadding } = getPieDimensions(data);\n\n  if (hasName) {\n    layout.annotations = [];\n  } else {\n    layout.annotations = filter(\n      map(data, (series, index) => {\n        // @ts-expect-error ts-migrate(2362) FIXME: The left-hand side of an arithmetic operation must... Remove this comment to see the full error message\n        const xPosition = (index % cellsInRow) * cellWidth;\n        // @ts-expect-error ts-migrate(2362) FIXME: The left-hand side of an arithmetic operation must... Remove this comment to see the full error message\n        const yPosition = Math.floor(index / cellsInRow) * cellHeight;\n        return {\n          x: xPosition + (cellWidth - xPadding) / 2,\n          y: yPosition + cellHeight - 0.015,\n          xanchor: \"center\",\n          yanchor: \"top\",\n          text: series.name,\n          showarrow: false,\n        };\n      })\n    );\n  }\n\n  return layout;\n}\n\nfunction prepareDefaultLayout(layout: any, options: any, data: any) {\n  const y2Series = data.filter((s: any) => s.yaxis === \"y2\");\n\n  layout.xaxis = prepareXAxis(options.xAxis, options);\n\n  layout.yaxis = prepareYAxis(options.yAxis[0]);\n  if (y2Series.length > 0) {\n    layout.yaxis2 = prepareYAxis(options.yAxis[1]);\n    layout.yaxis2.overlaying = \"y\";\n    layout.yaxis2.side = \"right\";\n  }\n\n  if (options.series.stacking) {\n    layout.barmode = \"relative\";\n  }\n\n  return layout;\n}\n\nfunction prepareBoxLayout(layout: any, options: any, data: any) {\n  layout = prepareDefaultLayout(layout, options, data);\n  layout.boxmode = \"group\";\n  layout.boxgroupgap = 0.5;\n  return layout;\n}\n\nexport default function prepareLayout(element: any, options: any, data: any) {\n  const layout = {\n    margin: { l: 10, r: 10, b: 5, t: 20, pad: 4 },\n    // plot size should be at least 5x5px\n    width: Math.max(5, Math.floor(element.offsetWidth)),\n    height: Math.max(5, Math.floor(element.offsetHeight)),\n    autosize: false,\n    showlegend: options.legend.enabled,\n    legend: {\n      traceorder: options.legend.traceorder,\n    },\n    hoverlabel: {\n      namelength: -1,\n    },\n  };\n\n  switch (options.globalSeriesType) {\n    case \"pie\":\n      return preparePieLayout(layout, options, data);\n    case \"box\":\n      return prepareBoxLayout(layout, options, data);\n    default:\n      return prepareDefaultLayout(layout, options, data);\n  }\n}\n","import { isObject, isNumber, each } from \"lodash\";\n\nfunction calculateAxisRange(range: any, min: any, max: any) {\n  return [isNumber(min) ? min : range[0], isNumber(max) ? max : range[1]];\n}\n\nfunction calculateAbsoluteDiff(value: any, totalRange: any, percentageDiff: any) {\n  return (percentageDiff * totalRange) / (1 - Math.abs(value) / totalRange - percentageDiff);\n}\n\nfunction alignYAxesAtZero(axisA: any, axisB: any) {\n  // Make sure the origin is included in both axes\n  axisA.range[1] = Math.max(0, axisA.range[1]);\n  axisB.range[1] = Math.max(0, axisB.range[1]);\n  axisA.range[0] = Math.min(0, axisA.range[0]);\n  axisB.range[0] = Math.min(0, axisB.range[0]);\n\n  const totalRangeA = axisA.range[1] - axisA.range[0];\n  const proportionA = axisA.range[1] / totalRangeA;\n  const totalRangeB = axisB.range[1] - axisB.range[0];\n  const proportionB = axisB.range[1] / totalRangeB;\n\n  // Calculate the difference between the proportions and distribute them within the two axes\n  const diff = Math.abs(proportionB - proportionA) / 2;\n\n  // Don't do anything if the difference is too low\n  if (diff < 0.01) {\n    return;\n  }\n\n  // Select the two that will correct the proportion by always augmenting, so the chart is not cut\n  if (proportionA < proportionB) {\n    // increase axisA max and axisB min\n    axisA.range[1] += calculateAbsoluteDiff(axisA.range[1], totalRangeA, diff);\n    axisB.range[0] -= calculateAbsoluteDiff(axisA.range[0], totalRangeB, diff);\n  } else {\n    // increase axisB max and axisA min\n    axisB.range[1] += calculateAbsoluteDiff(axisB.range[1], totalRangeB, diff);\n    axisA.range[0] -= calculateAbsoluteDiff(axisA.range[0], totalRangeA, diff);\n  }\n}\n\nexport default function updateAxes(plotlyElement: any, seriesList: any, layout: any, options: any) {\n  const updates = {};\n  if (isObject(layout.yaxis)) {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'yaxis' does not exist on type '{}'.\n    updates.yaxis = {\n      ...layout.yaxis,\n      autorange: true,\n      range: null,\n    };\n  }\n  if (isObject(layout.yaxis2)) {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'yaxis2' does not exist on type '{}'.\n    updates.yaxis2 = {\n      ...layout.yaxis2,\n      autorange: true,\n      range: null,\n    };\n  }\n\n  return [\n    updates,\n    () => {\n      // Update Y Ranges\n      if (isObject(layout.yaxis)) {\n        const axisOptions = options.yAxis[0];\n        const defaultRange = plotlyElement.layout.yaxis.range;\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'yaxis' does not exist on type '{}'.\n        updates.yaxis.autorange = false;\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'yaxis' does not exist on type '{}'.\n        updates.yaxis.range = calculateAxisRange(defaultRange, axisOptions.rangeMin, axisOptions.rangeMax);\n      }\n\n      if (isObject(layout.yaxis2)) {\n        const axisOptions = options.yAxis[1];\n        const defaultRange = plotlyElement.layout.yaxis2.range;\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'yaxis2' does not exist on type '{}'.\n        updates.yaxis2.autorange = false;\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'yaxis2' does not exist on type '{}'.\n        updates.yaxis2.range = calculateAxisRange(defaultRange, axisOptions.rangeMin, axisOptions.rangeMax);\n      }\n\n      // Swap Axes\n      if (options.swappedAxes) {\n        each(seriesList, series => {\n          series.orientation = \"h\";\n          const { x, y } = series;\n          series.x = y;\n          series.y = x;\n        });\n\n        const { xaxis } = layout;\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'yaxis' does not exist on type '{}'.\n        const { yaxis, yaxis2 } = updates;\n\n        if (isObject(xaxis) && isObject(yaxis)) {\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'xaxis' does not exist on type '{}'.\n          updates.xaxis = yaxis;\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'yaxis' does not exist on type '{}'.\n          updates.yaxis = xaxis;\n        }\n        if (isObject(yaxis2)) {\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'yaxis2' does not exist on type '{}'.\n          updates.yaxis2 = null;\n        }\n      }\n\n      // Align Y axes\n      if (options.alignYAxesAtZero && isObject(layout.yaxis) && isObject(layout.yaxis2)) {\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'yaxis' does not exist on type '{}'.\n        alignYAxesAtZero(updates.yaxis, updates.yaxis2);\n      }\n\n      return [updates, null]; // no further updates\n    },\n  ];\n}\n","import { find, pick, extend } from \"lodash\";\n\nfunction fixLegendContainer(plotlyElement: any) {\n  const legend = plotlyElement.querySelector(\".legend\");\n  if (legend) {\n    let node = legend.parentNode;\n    while (node) {\n      if (node.tagName.toLowerCase() === \"svg\") {\n        node.style.overflow = \"visible\";\n        break;\n      }\n      node = node.parentNode;\n    }\n  }\n}\n\nfunction placeLegendNextToPlot(plotlyElement: any, layout: any) {\n  const transformName = find(\n    [\"transform\", \"WebkitTransform\", \"MozTransform\", \"MsTransform\", \"OTransform\"],\n    prop => prop in plotlyElement.style\n  );\n\n  layout.legend = extend({}, layout.legend, {\n    orientation: \"v\",\n    // vertical legend will be rendered properly, so just place it to the right\n    // side of plot\n    y: 1,\n    x: 1,\n    xanchor: \"left\",\n    yanchor: \"top\",\n  });\n\n  const legend = plotlyElement.querySelector(\".legend\");\n  if (legend) {\n    // @ts-expect-error ts-migrate(2538) FIXME: Type 'undefined' cannot be used as an index type.\n    legend.style[transformName] = null;\n  }\n\n  return [pick(layout, [\"width\", \"height\", \"legend\"]), null]; // no further updates\n}\n\nfunction placeLegendBelowPlot(plotlyElement: any, layout: any) {\n  const transformName = find(\n    [\"transform\", \"WebkitTransform\", \"MozTransform\", \"MsTransform\", \"OTransform\"],\n    prop => prop in plotlyElement.style\n  );\n\n  // Save current `layout.height` value because `Plotly.relayout().then(...)` handler may be called multiple\n  // times within single update, and since the handler mutates `layout` object - it may lead to bugs\n  const layoutHeight = layout.height;\n\n  // change legend orientation to horizontal; plotly has a bug with this\n  // legend alignment - it does not preserve enough space under the plot;\n  // so we'll hack this: update plot (it will re-render legend), compute\n  // legend height, reduce plot size by legend height (but not less than\n  // half of plot container's height - legend will have max height equal to\n  // plot height), re-render plot again and offset legend to the space under\n  // the plot.\n  // Related issue: https://github.com/plotly/plotly.js/issues/1199\n  layout.legend = extend({}, layout.legend, {\n    orientation: \"h\",\n    // locate legend inside of plot area - otherwise plotly will preserve\n    // some amount of space under the plot; also this will limit legend height\n    // to plot's height\n    y: 0,\n    x: 0,\n    xanchor: \"left\",\n    yanchor: \"bottom\",\n  });\n\n  // set `overflow: visible` to svg containing legend because later we will\n  // position legend outside of it\n  fixLegendContainer(plotlyElement);\n\n  return [\n    pick(layout, [\"width\", \"height\", \"legend\"]),\n    () => {\n      const legend = plotlyElement.querySelector(\".legend\"); // eslint-disable-line no-shadow\n      if (legend) {\n        // compute real height of legend - items may be split into few columnns,\n        // also scrollbar may be shown\n        const bounds = legend.getBoundingClientRect();\n\n        // here we have two values:\n        // 1. height of plot container excluding height of legend items;\n        //    it may be any value between 0 and plot container's height;\n        // 2. half of plot containers height. Legend cannot be larger than\n        //    plot; if legend is too large, plotly will reduce it's height and\n        //    show a scrollbar; in this case, height of plot === height of legend,\n        //    so we can split container's height half by half between them.\n        layout.height = Math.floor(Math.max(layoutHeight / 2, layoutHeight - (bounds.bottom - bounds.top)));\n        // offset the legend\n        // @ts-expect-error ts-migrate(2538) FIXME: Type 'undefined' cannot be used as an index type.\n        legend.style[transformName] = \"translate(0, \" + layout.height + \"px)\";\n        return [pick(layout, [\"height\"]), null]; // no further updates\n      }\n    },\n  ];\n}\n\nfunction placeLegendAuto(plotlyElement: any, layout: any) {\n  if (layout.width <= 600) {\n    return placeLegendBelowPlot(plotlyElement, layout);\n  } else {\n    return placeLegendNextToPlot(plotlyElement, layout);\n  }\n}\n\nexport default function updateChartSize(plotlyElement: any, layout: any, options: any) {\n  // update layout size to plot container\n  // plot size should be at least 5x5px\n  layout.width = Math.max(5, Math.floor(plotlyElement.offsetWidth));\n  layout.height = Math.max(5, Math.floor(plotlyElement.offsetHeight));\n\n  const [previousWidth, previousHeight] = plotlyElement.__previousSize || [];\n\n  if (layout.width === previousWidth && layout.height === previousHeight) {\n    return;\n  }\n\n  plotlyElement.__previousSize = [layout.width, layout.height];\n\n  if (options.legend.enabled) {\n    switch (options.legend.placement) {\n      case \"auto\":\n        return placeLegendAuto(plotlyElement, layout);\n        break;\n      case \"below\":\n        return placeLegendBelowPlot(plotlyElement, layout);\n        break;\n      // no default\n    }\n  } else {\n    return [pick(layout, [\"width\", \"height\"]), null]; // no further updates\n  }\n}\n","import { isArray, isObject, isString, isFunction, startsWith, reduce, merge, map, each } from \"lodash\";\nimport resizeObserver from \"@/services/resizeObserver\";\nimport { Plotly, prepareData, prepareLayout, updateData, updateAxes, updateChartSize } from \"../plotly\";\n\nfunction createErrorHandler(errorHandler: any) {\n  return (error: any) => {\n    // This error happens only when chart width is 20px and looks that\n    // it's safe to just ignore it: 1px less or more and chart will get fixed.\n    if (isString(error) && startsWith(error, \"ax.dtick error\")) {\n      return;\n    }\n    errorHandler(error);\n  };\n}\n\n// This utility is intended to reduce amount of plot updates when multiple Plotly.relayout\n// calls needed in order to compute/update the plot.\n// `.append()` method takes an array of two element: first one is a object with updates for layout,\n// and second is an optional function that will be called when plot is updated. That function may\n// return an array with same structure if further updates needed.\n// `.process()` merges all updates into a single object and calls `Plotly.relayout()`. After that\n// it calls all callbacks, collects their return values and does another loop if needed.\nfunction initPlotUpdater() {\n  let actions: any = [];\n\n  const updater = {\n    append(action: any) {\n      if (isArray(action) && isObject(action[0])) {\n        actions.push(action);\n      }\n      return updater;\n    },\n    // @ts-expect-error ts-migrate(7023) FIXME: 'process' implicitly has return type 'any' because... Remove this comment to see the full error message\n    process(plotlyElement: any) {\n      if (actions.length > 0) {\n        const updates = reduce(actions, (updates, action) => merge(updates, action[0]), {});\n        const handlers = map(actions, action => (isFunction(action[1]) ? action[1] : () => null));\n        actions = [];\n        return Plotly.relayout(plotlyElement, updates).then(() => {\n          each(handlers, handler => updater.append(handler()));\n          return updater.process(plotlyElement);\n        });\n      } else {\n        return Promise.resolve();\n      }\n    },\n  };\n\n  return updater;\n}\n\nexport default function initChart(container: any, options: any, data: any, additionalOptions: any, onError: any) {\n  const handleError = createErrorHandler(onError);\n\n  const plotlyOptions = {\n    showLink: false,\n    displaylogo: false,\n  };\n\n  if (additionalOptions.hidePlotlyModeBar) {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'displayModeBar' does not exist on type '... Remove this comment to see the full error message\n    plotlyOptions.displayModeBar = false;\n  }\n\n  const plotlyData = prepareData(data, options);\n  const plotlyLayout = prepareLayout(container, options, plotlyData);\n\n  let isDestroyed = false;\n\n  const updater = initPlotUpdater();\n\n  function createSafeFunction(fn: any) {\n    // @ts-expect-error ts-migrate(7019) FIXME: Rest parameter 'args' implicitly has an 'any[]' ty... Remove this comment to see the full error message\n    return (...args) => {\n      if (!isDestroyed) {\n        try {\n          return fn(...args);\n        } catch (error) {\n          handleError(error);\n        }\n      }\n    };\n  }\n\n  let unwatchResize = () => {};\n\n  const promise = Promise.resolve()\n    .then(() => Plotly.newPlot(container, plotlyData, plotlyLayout, plotlyOptions))\n    .then(\n      createSafeFunction(() =>\n        updater\n          .append(updateAxes(container, plotlyData, plotlyLayout, options))\n          .append(updateChartSize(container, plotlyLayout, options))\n          .process(container)\n      )\n    )\n    .then(\n      createSafeFunction(() => {\n        container.on(\n          \"plotly_restyle\",\n          createSafeFunction((updates: any) => {\n            // This event is triggered if some plotly data/layout has changed.\n            // We need to catch only changes of traces visibility to update stacking\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'visible' does not exist on type 'object'... Remove this comment to see the full error message\n            if (isArray(updates) && isObject(updates[0]) && updates[0].visible) {\n              updateData(plotlyData, options);\n              updater.append(updateAxes(container, plotlyData, plotlyLayout, options)).process(container);\n            }\n          })\n        );\n        options.onHover && container.on(\"plotly_hover\", options.onHover);\n        options.onUnHover && container.on(\"plotly_unhover\", options.onUnHover);\n\n        unwatchResize = resizeObserver(\n          container,\n          createSafeFunction(() => {\n            updater.append(updateChartSize(container, plotlyLayout, options)).process(container);\n          })\n        );\n      })\n    )\n    .catch(handleError);\n\n  // @ts-expect-error ts-migrate(7022) FIXME: 'result' implicitly has type 'any' because it does... Remove this comment to see the full error message\n  const result = {\n    initialized: promise.then(() => result),\n    setZoomEnabled: createSafeFunction((allowZoom: any) => {\n      const layoutUpdates = { dragmode: allowZoom ? \"zoom\" : false };\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type '{ dragmode: string | boolean; }'... Remove this comment to see the full error message\n      return Plotly.relayout(container, layoutUpdates);\n    }),\n    destroy: createSafeFunction(() => {\n      isDestroyed = true;\n      container.removeAllListeners(\"plotly_restyle\");\n      unwatchResize();\n      delete container.__previousSize; // added by `updateChartSize`\n      Plotly.purge(container);\n    }),\n  };\n\n  return result;\n}\n","import React, { useState, useEffect, useContext, useRef } from \"react\";\nimport useMedia from \"use-media\";\nimport { ErrorBoundaryContext } from \"@/components/chart/components/ErrorBoundary\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport { visualizationsSettings } from \"@/components/chart/visualizations/visualizationsSettings\";\nimport getChartData from \"../getChartData\";\nimport initChart from \"./initChart\";\n\nexport interface PlotlyChartProps {\n  data: {\n    rows: any[];\n    columns: any[];\n  };\n  options: object;\n}\n\nexport default function PlotlyChart({ options, data }: PlotlyChartProps) {\n  const [container, setContainer] = useState(null);\n  const [chart, setChart] = useState(null);\n\n  const errorHandler = useContext(ErrorBoundaryContext);\n  const errorHandlerRef = useRef();\n  // @ts-expect-error ts-migrate(2322) FIXME: Type '{ handleError: (error: any) => void; reset: ... Remove this comment to see the full error message\n  errorHandlerRef.current = errorHandler;\n\n  const isMobile = useMedia({ maxWidth: 768 });\n  const isMobileRef = useRef();\n  // @ts-expect-error ts-migrate(2322) FIXME: Type 'boolean' is not assignable to type 'undefine... Remove this comment to see the full error message\n  isMobileRef.current = isMobile;\n\n  useEffect(() => {\n    if (container) {\n      let isDestroyed = false;\n\n      const chartData = getChartData(data.rows, options);\n      const _chart = initChart(container, options, chartData, visualizationsSettings, (error: any) => {\n        // @ts-expect-error ts-migrate(2532) FIXME: Object is possibly 'undefined'.\n        errorHandlerRef.current.handleError(error);\n      });\n      _chart.initialized.then(() => {\n        if (!isDestroyed) {\n          setChart(_chart);\n        }\n      });\n      return () => {\n        isDestroyed = true;\n        _chart.destroy();\n      };\n    }\n  }, [options, data, container]);\n\n  useEffect(() => {\n    if (chart) {\n      // @ts-expect-error ts-migrate(2531) FIXME: Object is possibly 'null'.\n      chart.setZoomEnabled(!isMobile);\n    }\n  }, [chart, isMobile]);\n\n  // @ts-expect-error ts-migrate(2322) FIXME: Type 'Dispatch<SetStateAction<null>>' is not assig... Remove this comment to see the full error message\n  return <div className=\"chart-visualization-container\" ref={setContainer} />;\n}\n\nPlotlyChart.propTypes = RendererPropTypes;\n","import React, { useState, useEffect, useMemo } from \"react\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport resizeObserver from \"@/services/resizeObserver\";\n\nimport getChartData from \"../getChartData\";\nimport { Plotly, prepareCustomChartData, createCustomChartRenderer } from \"../plotly\";\n\nexport default function CustomPlotlyChart({ options, data }: any) {\n  const [container, setContainer] = useState(null);\n\n  const renderCustomChart = useMemo(() => createCustomChartRenderer(options.customCode, options.enableConsoleLogs), [\n    options.customCode,\n    options.enableConsoleLogs,\n  ]);\n\n  const plotlyData = useMemo(() => prepareCustomChartData(getChartData(data.rows, options)), [options, data]);\n\n  useEffect(() => {\n    if (container) {\n      const unwatch = resizeObserver(container, () => {\n        // Clear existing data with blank data for succeeding codeCall adds data to existing plot.\n        // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'null' is not assignable to param... Remove this comment to see the full error message\n        Plotly.purge(container);\n        renderCustomChart(plotlyData.x, plotlyData.ys, container, Plotly);\n      });\n      return unwatch;\n    }\n  }, [container, plotlyData, renderCustomChart]);\n\n  // Cleanup when component destroyed\n  useEffect(() => {\n    if (container) {\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'null' is not assignable to param... Remove this comment to see the full error message\n      return () => Plotly.purge(container);\n    }\n  }, [container]);\n\n  // @ts-expect-error ts-migrate(2322) FIXME: Type 'Dispatch<SetStateAction<null>>' is not assig... Remove this comment to see the full error message\n  return <div className=\"chart-visualization-container\" ref={setContainer} />;\n}\n\nCustomPlotlyChart.propTypes = RendererPropTypes;\n","import { each } from \"lodash\";\nimport { normalizeValue } from \"./utils\";\n\nexport function prepareCustomChartData(series: any) {\n  const x: any = [];\n  const ys = {};\n\n  each(series, ({ name, data }) => {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    ys[name] = [];\n    each(data, point => {\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 2-3 arguments, but got 1.\n      x.push(normalizeValue(point.x));\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      ys[name].push(normalizeValue(point.y));\n    });\n  });\n\n  return { x, ys };\n}\n\nexport function createCustomChartRenderer(code: any, logErrorsToConsole = false) {\n  // Create a function from custom code; catch syntax errors\n  let render = () => {};\n  try {\n    // @ts-expect-error ts-migrate(2322) FIXME: Type 'Function' is not assignable to type '() => v... Remove this comment to see the full error message\n    render = new Function(\"x, ys, element, Plotly\", code); // eslint-disable-line no-new-func\n  } catch (err) {\n    if (logErrorsToConsole) {\n      console.log(`Error while executing custom graph: ${err}`); // eslint-disable-line no-console\n    }\n  }\n\n  // Return function that will invoke custom code; catch runtime errors\n  return (x: any, ys: any, element: any, Plotly: any) => {\n    try {\n      // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 4.\n      render(x, ys, element, Plotly);\n    } catch (err) {\n      if (logErrorsToConsole) {\n        console.log(`Error while executing custom graph: ${err}`); // eslint-disable-line no-console\n      }\n    }\n  };\n}\n","import Plotly from \"plotly.js/lib/core\";\n// @ts-expect-error ts-migrate(7016) FIXME: Could not find a declaration file for module 'plot... Remove this comment to see the full error message\nimport bar from \"plotly.js/lib/bar\";\n// @ts-expect-error ts-migrate(7016) FIXME: Could not find a declaration file for module 'plot... Remove this comment to see the full error message\nimport pie from \"plotly.js/lib/pie\";\n// @ts-expect-error ts-migrate(7016) FIXME: Could not find a declaration file for module 'plot... Remove this comment to see the full error message\nimport histogram from \"plotly.js/lib/histogram\";\n// @ts-expect-error ts-migrate(7016) FIXME: Could not find a declaration file for module 'plot... Remove this comment to see the full error message\nimport box from \"plotly.js/lib/box\";\n// @ts-expect-error ts-migrate(7016) FIXME: Could not find a declaration file for module 'plot... Remove this comment to see the full error message\nimport heatmap from \"plotly.js/lib/heatmap\";\n\nimport prepareData from \"./prepareData\";\nimport prepareLayout from \"./prepareLayout\";\nimport updateData from \"./updateData\";\nimport updateAxes from \"./updateAxes\";\nimport updateChartSize from \"./updateChartSize\";\nimport { prepareCustomChartData, createCustomChartRenderer } from \"./customChartUtils\";\n\n// @ts-expect-error ts-migrate(2339) FIXME: Property 'register' does not exist on type 'typeof... Remove this comment to see the full error message\nPlotly.register([bar, pie, histogram, box, heatmap]);\n// @ts-expect-error ts-migrate(2339) FIXME: Property 'setPlotConfig' does not exist on type 't... Remove this comment to see the full error message\nPlotly.setPlotConfig({\n  modeBarButtonsToRemove: [\"sendDataToCloud\"],\n});\n\nexport {\n  Plotly,\n  prepareData,\n  prepareLayout,\n  updateData,\n  updateAxes,\n  updateChartSize,\n  prepareCustomChartData,\n  createCustomChartRenderer,\n};\n","import React from \"react\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport PlotlyChart from \"./PlotlyChart\";\nimport CustomPlotlyChart from \"./CustomPlotlyChart\";\nimport { visualizationsSettings } from \"@/components/chart/visualizations/visualizationsSettings\";\n\nimport \"./renderer.less\";\n\nexport default function Renderer({ options, ...props }: any) {\n  if (options.globalSeriesType === \"custom\" && visualizationsSettings.allowCustomJSVisualizations) {\n    return <CustomPlotlyChart options={options} {...props} />;\n  }\n  return <PlotlyChart options={options} {...props} />;\n}\n\nRenderer.propTypes = RendererPropTypes;\n","import { filter, includes, map } from \"lodash\";\nimport React, { useMemo } from \"react\";\nimport { Select } from \"@/components/chart/components/visualizations/editor\";\nimport { visualizationsSettings } from \"@/components/chart/visualizations/visualizationsSettings\";\n\nconst allChartTypes = [\n  { type: \"line\", name: \"线形图(Line)\", icon: \"line-chart\" },\n  { type: \"column\", name: \"条形图(Bar)\", icon: \"bar-chart\" },\n  { type: \"area\", name: \"面积图(Area)\", icon: \"area-chart\" },\n  { type: \"pie\", name: \"饼形图(Pie)\", icon: \"pie-chart\" },\n  { type: \"scatter\", name: \"散点图(Scatter)\", icon: \"circle-o\" },\n  { type: \"bubble\", name: \"气泡图(Bubble)\", icon: \"circle-o\" },\n  { type: \"heatmap\", name: \"热力图(Heatmap)\", icon: \"th\" },\n  { type: \"box\", name: \"箱线图(Box)\", icon: \"square-o\" },\n];\n\ntype OwnProps = {\n  hiddenChartTypes?: any[]; // TODO: PropTypes.oneOf(map(allChartTypes, \"type\"))\n};\n\ntype Props = OwnProps & typeof ChartTypeSelect.defaultProps;\n\nexport default function ChartTypeSelect({ hiddenChartTypes, ...props }: Props) {\n  const chartTypes = useMemo(() => {\n    const result = [...allChartTypes];\n\n    if (visualizationsSettings.allowCustomJSVisualizations) {\n      result.push({ type: \"custom\", name: \"自定义(Custom)\", icon: \"code\" });\n    }\n\n    if (hiddenChartTypes.length > 0) {\n      return filter(result, ({ type }) => !includes(hiddenChartTypes, type));\n    }\n\n    return result;\n  }, []);\n\n  return (\n    <Select {...props}>\n      {map(chartTypes, ({ type, name, icon }) => (\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n        <Select.Option key={type} value={type} data-test={`Chart.ChartType.${type}`}>\n          <i className={`fa fa-${icon}`} style={{ marginRight: 5 }} />\n          {name}\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n        </Select.Option>\n      ))}\n    </Select>\n  );\n}\n\nChartTypeSelect.defaultProps = {\n  hiddenChartTypes: [],\n};\n","import { isString, map, uniq, flatten, filter, sortBy, keys } from \"lodash\";\nimport React from \"react\";\nimport { Section, Select } from \"@/components/chart/components/visualizations/editor\";\n\nconst MappingTypes = {\n  x: { label: window.W_L.x_column },\n  y: { label: window.W_L.y_column, multiple: true },\n  series: { label: window.W_L.group_by },\n  yError: { label: window.W_L.errors_column },\n  size: { label: \"气泡尺寸(Bubble Size)\" },\n  zVal: { label: window.W_L.color_column },\n};\n\nconst SwappedMappingTypes = {\n  ...MappingTypes,\n  x: { label: window.W_L.y_column },\n  y: { label: window.W_L.x_column, multiple: true },\n};\n\ntype OwnProps = {\n  value?: string | string[];\n  availableColumns?: string[];\n  type?: any; // TODO: PropTypes.oneOf(keys(MappingTypes))\n  onChange?: (...args: any[]) => any;\n};\n\ntype Props = OwnProps & typeof ColumnMappingSelect.defaultProps;\n\nexport default function ColumnMappingSelect({ value, availableColumns, type, onChange, areAxesSwapped }: Props) {\n  const options = sortBy(filter(uniq(flatten([availableColumns, value])), v => isString(v) && v !== \"\"));\n\n  // this swaps the ui, as the data will be swapped on render\n  const { label, multiple } = !areAxesSwapped ? MappingTypes[type] : SwappedMappingTypes[type];\n\n  return (\n    // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n    <Section>\n      <Select\n        label={label}\n        data-test={`Chart.ColumnMapping.${type}`}\n        mode={multiple ? \"multiple\" : \"default\"}\n        allowClear\n        showSearch\n        placeholder={multiple ? window.W_L.choose_columns : window.W_L.choose_column}\n        value={value || undefined}\n        // @ts-expect-error ts-migrate(2349) FIXME: This expression is not callable.\n        onChange={(column: any) => onChange(column || null, type)}>\n        {map(options, c => (\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n          <Select.Option key={c} value={c} data-test={`Chart.ColumnMapping.${type}.${c}`}>\n            {c}\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n        ))}\n      </Select>\n    </Section>\n  );\n}\n\nColumnMappingSelect.defaultProps = {\n  value: null,\n  availableColumns: [],\n  type: null,\n  onChange: () => {},\n};\n\nColumnMappingSelect.MappingTypes = MappingTypes;\n","import { isArray, map, mapValues, includes, some, each, difference, toNumber } from \"lodash\";\nimport React, { useMemo } from \"react\";\nimport { Section, Select, Checkbox, InputNumber } from \"@/components/chart/components/visualizations/editor\";\nimport { UpdateOptionsStrategy } from \"@/components/chart/components/visualizations/editor/createTabbedEditor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport ChartTypeSelect from \"./ChartTypeSelect\";\nimport ColumnMappingSelect from \"./ColumnMappingSelect\";\n\nfunction getAvailableColumnMappingTypes(options: any) {\n  const result = [\"x\", \"y\"];\n\n  if (!includes([\"custom\", \"heatmap\"], options.globalSeriesType)) {\n    result.push(\"series\");\n  }\n\n  if (options.globalSeriesType === \"bubble\" || some(options.seriesOptions, { type: \"bubble\" })) {\n    result.push(\"size\");\n  }\n\n  if (options.globalSeriesType === \"heatmap\") {\n    result.push(\"zVal\");\n  }\n\n  if (!includes([\"custom\", \"bubble\", \"heatmap\"], options.globalSeriesType)) {\n    result.push(\"yError\");\n  }\n\n  return result;\n}\n\nfunction getMappedColumns(options: any, availableColumns: any) {\n  const mappedColumns = {};\n  const availableTypes = getAvailableColumnMappingTypes(options);\n  each(availableTypes, type => {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    mappedColumns[type] = ColumnMappingSelect.MappingTypes[type].multiple ? [] : null;\n  });\n\n  availableColumns = map(availableColumns, c => c.name);\n  const usedColumns: any = [];\n\n  each(options.columnMapping, (type, column) => {\n    if (includes(availableColumns, column) && includes(availableTypes, type)) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      const { multiple } = ColumnMappingSelect.MappingTypes[type];\n      if (multiple) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        mappedColumns[type].push(column);\n      } else {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        mappedColumns[type] = column;\n      }\n      usedColumns.push(column);\n    }\n  });\n\n  return {\n    mappedColumns,\n    unusedColumns: difference(availableColumns, usedColumns),\n  };\n}\n\nfunction mappedColumnsToColumnMappings(mappedColumns: any) {\n  const result = {};\n  each(mappedColumns, (value, type) => {\n    if (isArray(value)) {\n      each(value, v => {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        result[v] = type;\n      });\n    } else {\n      if (value) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        result[value] = type;\n      }\n    }\n  });\n  return result;\n}\n\nexport default function GeneralSettings({ options, data, onOptionsChange }: any) {\n  const { mappedColumns, unusedColumns } = useMemo(() => getMappedColumns(options, data.columns), [\n    options,\n    data.columns,\n  ]);\n\n  function handleGlobalSeriesTypeChange(globalSeriesType: any) {\n    onOptionsChange({\n      globalSeriesType,\n      showDataLabels: globalSeriesType === \"pie\",\n      swappedAxes: false,\n      seriesOptions: mapValues(options.seriesOptions, series => ({\n        ...series,\n        type: globalSeriesType,\n      })),\n    });\n  }\n\n  function handleColumnMappingChange(column: any, type: any) {\n    const columnMapping = mappedColumnsToColumnMappings({\n      ...mappedColumns,\n      [type]: column,\n    });\n    onOptionsChange({ columnMapping }, UpdateOptionsStrategy.shallowMerge);\n  }\n\n  function handleLegendPlacementChange(value: any) {\n    if (value === \"hidden\") {\n      onOptionsChange({ legend: { enabled: false } });\n    } else {\n      onOptionsChange({ legend: { enabled: true, placement: value } });\n    }\n  }\n\n  function handleAxesSwapping() {\n    // moves any item in the right Y axis to the left one\n    const seriesOptions = mapValues(options.seriesOptions, series => ({\n      ...series,\n      yAxis: 0,\n    }));\n    onOptionsChange({ swappedAxes: !options.swappedAxes, seriesOptions });\n  }\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <ChartTypeSelect\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '{ label: string; \"data-test\": string; defaul... Remove this comment to see the full error message\n          label=\"Chart Type\"\n          data-test=\"Chart.GlobalSeriesType\"\n          defaultValue={options.globalSeriesType}\n          onChange={handleGlobalSeriesTypeChange}\n        />\n      </Section>\n\n      {includes([\"column\", \"line\", \"box\"], options.globalSeriesType) && (\n        // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n        <Section>\n          <Checkbox\n            data-test=\"Chart.SwappedAxes\"\n            defaultChecked={options.swappedAxes}\n            checked={options.swappedAxes}\n            onChange={handleAxesSwapping}>\n             {window.W_L.Horizontal_Chart}\n          </Checkbox>\n        </Section>\n      )}\n\n      {map(mappedColumns, (value, type) => (\n        <ColumnMappingSelect\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          key={type}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          type={type}\n          value={value}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          areAxesSwapped={options.swappedAxes}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'unknown[]' is not assignable to type 'never'... Remove this comment to see the full error message\n          availableColumns={unusedColumns}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(column: any, type: any) => void' is not ass... Remove this comment to see the full error message\n          onChange={handleColumnMappingChange}\n        />\n      ))}\n\n      {includes([\"bubble\"], options.globalSeriesType) && (\n        <React.Fragment>\n          {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n          <Section>\n            <InputNumber\n              label={window.W_L.bubble_size_coefficient}\n              data-test=\"Chart.BubbleCoefficient\"\n              defaultValue={options.coefficient}\n              onChange={(value: any) => onOptionsChange({ coefficient: toNumber(value) })}\n            />\n          </Section>\n\n          {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n          <Section>\n            <Select\n              label={window.W_L.bubble_size_proportional_to}\n              data-test=\"Chart.SizeMode\"\n              defaultValue={options.sizemode}\n              onChange={(mode: any) => onOptionsChange({ sizemode: mode })}>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option value=\"area\" data-test=\"Chart.SizeMode.Area\">\n              {window.W_L.Area}\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option value=\"diameter\" data-test=\"Chart.SizeMode.Diameter\">\n              {window.W_L.Diameter}\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n            </Select>\n          </Section>\n        </React.Fragment>\n      )}\n\n      {includes([\"pie\"], options.globalSeriesType) && (\n        // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n        <Section>\n          <Select\n            label={window.W_L.direction}\n            data-test=\"Chart.PieDirection\"\n            defaultValue={options.direction.type}\n            onChange={(type: any) => onOptionsChange({ direction: { type } })}>\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            <Select.Option value=\"counterclockwise\" data-test=\"Chart.PieDirection.Counterclockwise\">\n            {window.W_L.Counterclockwise}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            <Select.Option value=\"clockwise\" data-test=\"Chart.PieDirection.Clockwise\">\n            {window.W_L.Clockwise}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          </Select>\n        </Section>\n      )}\n\n      {!includes([\"custom\", \"heatmap\"], options.globalSeriesType) && (\n        <React.Fragment>\n          {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n          <Section>\n            <Select\n              label={window.W_L.legend_placement}\n              data-test=\"Chart.LegendPlacement\"\n              value={options.legend.enabled ? options.legend.placement : \"hidden\"}\n              onChange={handleLegendPlacementChange}>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option value=\"hidden\" data-test=\"Chart.LegendPlacement.HideLegend\">\n              {window.W_L.Hide_legend}\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option value=\"auto\" data-test=\"Chart.LegendPlacement.Auto\">\n              {window.W_L.Right}\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option value=\"below\" data-test=\"Chart.LegendPlacement.Below\">\n              {window.W_L.Bottom}\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n            </Select>\n          </Section>\n\n          {options.legend.enabled && (\n            // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n            <Section>\n              <Select\n                label={window.W_L.legend_items_order}\n                data-test=\"Chart.LegendItemsOrder\"\n                value={options.legend.traceorder}\n                onChange={(traceorder: any) => onOptionsChange({ legend: { traceorder } })}>\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n                <Select.Option value=\"normal\" data-test=\"Chart.LegendItemsOrder.Normal\">\n                {window.W_L.Normal}\n                  {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n                </Select.Option>\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n                <Select.Option value=\"reversed\" data-test=\"Chart.LegendItemsOrder.Reversed\">\n                   {window.W_L.Reversed}\n                  {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n                </Select.Option>\n              </Select>\n            </Section>\n          )}\n        </React.Fragment>\n      )}\n\n      {includes([\"box\"], options.globalSeriesType) && (\n        // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n        <Section>\n          <Checkbox\n            data-test=\"Chart.ShowPoints\"\n            defaultChecked={options.showpoints}\n            onChange={event => onOptionsChange({ showpoints: event.target.checked })}>\n            {window.W_L.Show_All_Points}\n          </Checkbox>\n        </Section>\n      )}\n\n      {!includes([\"custom\", \"heatmap\"], options.globalSeriesType) && (\n        // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n        <Section>\n          <Select\n            label={window.W_L.stacking}\n            data-test=\"Chart.Stacking\"\n            defaultValue={options.series.stacking}\n            disabled={!includes([\"line\", \"area\", \"column\"], options.globalSeriesType)}\n            onChange={(stacking: any) => onOptionsChange({ series: { stacking } })}>\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            <Select.Option value={null} data-test=\"Chart.Stacking.Disabled\">\n            {window.W_L.Disabled}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            <Select.Option value=\"stack\" data-test=\"Chart.Stacking.Stack\">\n               {window.W_L.Stack}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          </Select>\n        </Section>\n      )}\n\n      {includes([\"line\", \"area\", \"column\"], options.globalSeriesType) && (\n        // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n        <Section>\n          <Checkbox\n            data-test=\"Chart.NormalizeValues\"\n            defaultChecked={options.series.percentValues}\n            onChange={event => onOptionsChange({ series: { percentValues: event.target.checked } })}>\n             {window.W_L.Normalize_values_to_percentage}\n          </Checkbox>\n        </Section>\n      )}\n\n      {!includes([\"custom\", \"heatmap\", \"bubble\", \"scatter\"], options.globalSeriesType) && (\n        // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n        <Section>\n          <Select\n            label={window.W_L.missing_and_NULL_values}\n            data-test=\"Chart.MissingValues\"\n            defaultValue={options.missingValuesAsZero ? 1 : 0}\n            onChange={(value: any) => onOptionsChange({ missingValuesAsZero: !!value })}>\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            <Select.Option value={0} data-test=\"Chart.MissingValues.Keep\">\n            {window.W_L.Do_not_display_in_chart}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            <Select.Option value={1} data-test=\"Chart.MissingValues.Zero\">\n            {window.W_L.Convert_to_0_and_display_in_chart}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          </Select>\n        </Section>\n      )}\n    </React.Fragment>\n  );\n}\n\nGeneralSettings.propTypes = EditorPropTypes;\n","import { isString, isObject, isFinite, isNumber, merge } from \"lodash\";\nimport React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport * as Grid from \"antd/lib/grid\";\nimport { Section, Select, Input, InputNumber } from \"@/components/chart/components/visualizations/editor\";\n\nfunction toNumber(value: any) {\n  value = isNumber(value) ? value : parseFloat(value);\n  return isFinite(value) ? value : null;\n}\n\ntype OwnProps = {\n  id: string;\n  options: {\n    type: string;\n    title?: {\n      text?: string;\n    };\n    rangeMin?: number;\n    rangeMax?: number;\n  };\n  features?: {\n    autoDetectType?: boolean;\n    range?: boolean;\n  };\n  onChange?: (...args: any[]) => any;\n};\n\ntype Props = OwnProps & typeof AxisSettings.defaultProps;\n\nexport default function AxisSettings({ id, options, features, onChange }: Props) {\n  function optionsChanged(newOptions: any) {\n    onChange(merge({}, options, newOptions));\n  }\n\n  const [handleNameChange] = useDebouncedCallback(text => {\n    const title = isString(text) && text !== \"\" ? { text } : null;\n    optionsChanged({ title });\n  }, 200);\n\n  const [handleMinMaxChange] = useDebouncedCallback(opts => optionsChanged(opts), 200);\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          label={window.W_L.scale}\n          data-test={`Chart.${id}.Type`}\n          defaultValue={options.type}\n          onChange={(type: any) => optionsChanged({ type })}>\n          {features.autoDetectType && (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option value=\"-\" data-test={`Chart.${id}.Type.Auto`}>\n              {window.W_L.auto_detect}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          )}\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"datetime\" data-test={`Chart.${id}.Type.DateTime`}>\n          {window.W_L.datetime}\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"linear\" data-test={`Chart.${id}.Type.Linear`}>\n          {window.W_L.linear}\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"logarithmic\" data-test={`Chart.${id}.Type.Logarithmic`}>\n          {window.W_L.logarithmic}\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"category\" data-test={`Chart.${id}.Type.Category`}>\n          {window.W_L.category}\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={window.W_L.name}\n          data-test={`Chart.${id}.Name`}\n          defaultValue={isObject(options.title) ? options.title.text : null}\n          onChange={(event: any) => handleNameChange(event.target.value)}\n        />\n      </Section>\n\n      {features.range && (\n        // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n        <Section>\n          {/* @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: Element[]; gutter: number; type:... Remove this comment to see the full error message */}\n          <Grid.Row gutter={15} type=\"flex\" align=\"middle\">\n            <Grid.Col span={12}>\n              <InputNumber\n                label={window.W_L.min_value}\n                placeholder={window.W_L.auto}\n                data-test={`Chart.${id}.RangeMin`}\n                defaultValue={toNumber(options.rangeMin)}\n                onChange={(value: any) => handleMinMaxChange({ rangeMin: toNumber(value) })}\n              />\n            </Grid.Col>\n            <Grid.Col span={12}>\n              <InputNumber\n                label={window.W_L.max_value}\n                placeholder={window.W_L.auto}\n                data-test={`Chart.${id}.RangeMax`}\n                defaultValue={toNumber(options.rangeMax)}\n                onChange={(value: any) => handleMinMaxChange({ rangeMax: toNumber(value) })}\n              />\n            </Grid.Col>\n          </Grid.Row>\n        </Section>\n      )}\n    </React.Fragment>\n  );\n}\n\nAxisSettings.defaultProps = {\n  features: {},\n  onChange: () => {},\n};\n","import React from \"react\";\nimport { Section, Switch } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport AxisSettings from \"./AxisSettings\";\n\nexport default function XAxisSettings({ options, onOptionsChange }: any) {\n  return (\n    <React.Fragment>\n      <AxisSettings\n        id=\"XAxis\"\n        features={{ autoDetectType: true }}\n        options={options.xAxis}\n        // @ts-expect-error ts-migrate(2322) FIXME: Type '(xAxis: any) => any' is not assignable to ty... Remove this comment to see the full error message\n        onChange={(xAxis: any) => onOptionsChange({ xAxis })}\n      />\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n        <Switch\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          data-test=\"Chart.XAxis.Sort\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          defaultChecked={options.sortX}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(sortX: any) => any' is not assignable to ty... Remove this comment to see the full error message\n          onChange={(sortX: any) => onOptionsChange({ sortX })}>\n          {window.W_L.sort_values}\n        </Switch>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n        <Switch\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          data-test=\"Chart.XAxis.Reverse\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          defaultChecked={options.reverseX}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(reverseX: any) => any' is not assignable to... Remove this comment to see the full error message\n          onChange={(reverseX: any) => onOptionsChange({ reverseX })}>\n        {window.W_L.reverse_order}\n        </Switch>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n        <Switch\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          data-test=\"Chart.XAxis.ShowLabels\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          defaultChecked={options.xAxis.labels.enabled}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(enabled: any) => any' is not assignable to ... Remove this comment to see the full error message\n          onChange={(enabled: any) => onOptionsChange({ xAxis: { labels: { enabled } } })}>\n          {window.W_L.Show_Labels}\n        </Switch>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nXAxisSettings.propTypes = EditorPropTypes;\n","import React from \"react\";\nimport { Section, Switch } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport AxisSettings from \"./AxisSettings\";\n\nexport default function YAxisSettings({ options, onOptionsChange }: any) {\n  const [leftYAxis, rightYAxis] = options.yAxis;\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section.Title>{!options.swappedAxes ? window.W_L.left_y_axis : window.W_L.x_axis}</Section.Title>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <AxisSettings\n          id=\"LeftYAxis\"\n          features={{ range: true }}\n          options={leftYAxis}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(axis: any) => any' is not assignable to typ... Remove this comment to see the full error message\n          onChange={(axis: any) => onOptionsChange({ yAxis: [axis, rightYAxis] })}\n        />\n      </Section>\n\n      {options.globalSeriesType !== \"heatmap\" && !options.swappedAxes && (\n        <React.Fragment>\n          {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n          <Section.Title>{window.W_L.right_y_axis}</Section.Title>\n\n          {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n          <Section>\n            <AxisSettings\n              id=\"RightYAxis\"\n              features={{ range: true }}\n              options={rightYAxis}\n              // @ts-expect-error ts-migrate(2322) FIXME: Type '(axis: any) => any' is not assignable to typ... Remove this comment to see the full error message\n              onChange={(axis: any) => onOptionsChange({ yAxis: [leftYAxis, axis] })}\n            />\n          </Section>\n\n          {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n          <Section>\n            {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n            <Switch\n              // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n              id=\"chart-editor-y-axis-align-at-zero\"\n              // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n              data-test=\"Chart.YAxis.AlignAtZero\"\n              // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n              defaultChecked={options.alignYAxesAtZero}\n              // @ts-expect-error ts-migrate(2322) FIXME: Type '(alignYAxesAtZero: any) => any' is not assig... Remove this comment to see the full error message\n              onChange={(alignYAxesAtZero: any) => onOptionsChange({ alignYAxesAtZero })}>\n              {window.W_L.align_Y_axes_at_zero}\n            </Switch>\n          </Section>\n        </React.Fragment>\n      )}\n\n      {options.globalSeriesType === \"heatmap\" && (\n        <React.Fragment>\n          {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n          <Section>\n            {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n            <Switch\n              // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n              id=\"chart-editor-y-axis-sort\"\n              // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n              data-test=\"Chart.LeftYAxis.Sort\"\n              // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n              defaultChecked={options.sortY}\n              // @ts-expect-error ts-migrate(2322) FIXME: Type '(sortY: any) => any' is not assignable to ty... Remove this comment to see the full error message\n              onChange={(sortY: any) => onOptionsChange({ sortY })}>\n              {window.W_L.sort_values}\n            </Switch>\n          </Section>\n\n          {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n          <Section>\n            {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n            <Switch\n              // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n              id=\"chart-editor-y-axis-reverse\"\n              // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n              data-test=\"Chart.LeftYAxis.Reverse\"\n              // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n              defaultChecked={options.reverseY}\n              // @ts-expect-error ts-migrate(2322) FIXME: Type '(reverseY: any) => any' is not assignable to... Remove this comment to see the full error message\n              onChange={(reverseY: any) => onOptionsChange({ reverseY })}>\n               {window.W_L.reverse_order}\n            </Switch>\n          </Section>\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n}\n\nYAxisSettings.propTypes = EditorPropTypes;\n","import { isFunction, wrap } from \"lodash\";\nimport React, { useRef, useState } from \"react\";\nimport cx from \"classnames\";\n// @ts-expect-error ts-migrate(2724) FIXME: Module '\"../../../node_modules/react-sortable-hoc/... Remove this comment to see the full error message\nimport { sortableContainer, sortableElement, sortableHandle } from \"react-sortable-hoc\";\n\nimport \"./style.less\";\n\nexport const DragHandle = sortableHandle(({ className, ...restProps }: any) => (\n  <div className={cx(\"drag-handle\", className)} {...restProps} />\n));\n\nexport const SortableContainerWrapper = sortableContainer(({ children }: any) => children);\n\nexport const SortableElement = sortableElement(({ children }: any) => children);\n\ntype OwnProps = {\n  disabled?: boolean;\n  containerComponent?: React.ReactElement;\n  containerProps?: any;\n  children?: React.ReactNode;\n};\n\ntype Props = OwnProps & typeof SortableContainer.defaultProps;\n\nexport function SortableContainer({ disabled, containerComponent, containerProps, children, ...wrapperProps }: Props) {\n  const containerRef = useRef();\n  const [isDragging, setIsDragging] = useState(false);\n\n  wrapperProps = { ...wrapperProps };\n  containerProps = { ...containerProps };\n\n  if (disabled) {\n    // Disabled state:\n    // - forbid drag'n'drop (and therefore no need to hook events\n    // - don't override anything on container element\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'shouldCancelStart' does not exist on typ... Remove this comment to see the full error message\n    wrapperProps.shouldCancelStart = () => true;\n  } else {\n    // Enabled state:\n\n    // - use container element as a default helper element\n    // @ts-expect-error\n    wrapperProps.helperContainer = wrap(wrapperProps.helperContainer, helperContainer =>\n      isFunction(helperContainer) ? helperContainer(containerRef.current) : containerRef.current\n    );\n\n    // - hook drag start/end events\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'updateBeforeSortStart' does not exist on... Remove this comment to see the full error message\n    wrapperProps.updateBeforeSortStart = wrap(wrapperProps.updateBeforeSortStart, (updateBeforeSortStart, ...args) => {\n      setIsDragging(true);\n      if (isFunction(updateBeforeSortStart)) {\n        updateBeforeSortStart(...args);\n      }\n    });\n    // @ts-expect-error\n    wrapperProps.onSortStart = wrap(wrapperProps.onSortStart, (onSortStart, ...args) => {\n      if (isFunction(onSortStart)) {\n        onSortStart(...args);\n      } else {\n        const event = args[1] as DragEvent;\n        event.preventDefault();\n      }\n    });\n\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'onSortEnd' does not exist on type '{}'.\n    wrapperProps.onSortEnd = wrap(wrapperProps.onSortEnd, (onSortEnd, ...args) => {\n      setIsDragging(false);\n      if (isFunction(onSortEnd)) {\n        onSortEnd(...args);\n      }\n    });\n\n    // - update container element: add classes and take a ref\n    containerProps.className = cx(\n      \"sortable-container\",\n      { \"sortable-container-dragging\": isDragging },\n      containerProps.className\n    );\n    containerProps.ref = containerRef;\n  }\n\n  const ContainerComponent = containerComponent;\n  return (\n    <SortableContainerWrapper {...wrapperProps}>\n      {/* @ts-expect-error ts-migrate(2604) FIXME: JSX element type 'ContainerComponent' does not hav... Remove this comment to see the full error message */}\n      <ContainerComponent {...containerProps}>{children}</ContainerComponent>\n    </SortableContainerWrapper>\n  );\n}\n\nSortableContainer.defaultProps = {\n  disabled: false,\n  containerComponent: \"div\",\n  containerProps: {},\n  children: null,\n};\n","import { includes, map, extend, fromPairs } from \"lodash\";\nimport React, { useMemo, useCallback } from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport Table from \"antd/lib/table\";\nimport Input from \"antd/lib/input\";\nimport Radio from \"antd/lib/radio\";\n// @ts-expect-error ts-migrate(2724) FIXME: Module '\"../../../../node_modules/react-sortable-h... Remove this comment to see the full error message\nimport { sortableElement } from \"react-sortable-hoc\";\nimport { SortableContainer, DragHandle } from \"@/components/chart/components/sortable\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport ChartTypeSelect from \"./ChartTypeSelect\";\nimport getChartData from \"../getChartData\";\n\nconst SortableBodyRow = sortableElement((props: any) => <tr {...props} />);\n\nfunction getTableColumns(options: any, updateSeriesOption: any, debouncedUpdateSeriesOption: any) {\n  const result = [\n    {\n      title: window.W_L.order,\n      dataIndex: \"zIndex\",\n      render: (unused: any, item: any) => (\n        <span className=\"series-settings-order\">\n          <DragHandle />\n          {item.zIndex + 1}\n        </span>\n      ),\n    },\n    {\n      title: window.W_L.label,\n      dataIndex: \"name\",\n      render: (unused: any, item: any) => (\n        <Input\n          data-test={`Chart.Series.${item.key}.Label`}\n          placeholder={item.key}\n          defaultValue={item.name}\n          onChange={event => debouncedUpdateSeriesOption(item.key, \"name\", event.target.value)}\n        />\n      ),\n    },\n  ];\n\n  if (!includes([\"pie\", \"heatmap\"], options.globalSeriesType)) {\n    if (!options.swappedAxes) {\n      result.push({\n        title: window.W_L.y_axis,\n        dataIndex: \"yAxis\",\n        render: (unused, item) => (\n          <Radio.Group\n            className=\"series-settings-y-axis\"\n            value={item.yAxis === 1 ? 1 : 0}\n            onChange={event => updateSeriesOption(item.key, \"yAxis\", event.target.value)}>\n            <Radio value={0} data-test={`Chart.Series.${item.key}.UseLeftAxis`}>\n            {window.W_L.Left}\n            </Radio>\n            <Radio value={1} data-test={`Chart.Series.${item.key}.UseRightAxis`}>\n            {window.W_L.Right}\n            </Radio>\n          </Radio.Group>\n        ),\n      });\n    }\n\n    result.push({\n      title: window.W_L.type,\n      dataIndex: \"type\",\n      render: (unused, item) => (\n        <ChartTypeSelect\n          data-test={`Chart.Series.${item.key}.Type`}\n          dropdownMatchSelectWidth={false}\n          value={item.type}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          hiddenChartTypes={[\"pie\", \"heatmap\", \"bubble\", \"box\"]}\n          onChange={(value: any) => updateSeriesOption(item.key, \"type\", value)}\n        />\n      ),\n    });\n  }\n\n  return result;\n}\n\nexport default function SeriesSettings({ options, data, onOptionsChange }: any) {\n  const series = useMemo(\n    () =>\n      map(\n        getChartData(data.rows, options), // returns sorted series\n        ({ name }, zIndex) =>\n          extend({ key: name, type: options.globalSeriesType }, options.seriesOptions[name], { zIndex })\n      ),\n    [options, data]\n  );\n\n  const handleSortEnd = useCallback(\n    ({ oldIndex, newIndex }) => {\n      const seriesOptions = [...series];\n      seriesOptions.splice(newIndex, 0, ...seriesOptions.splice(oldIndex, 1));\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'key' does not exist on type 'Boolean'.\n      onOptionsChange({ seriesOptions: fromPairs(map(seriesOptions, ({ key }, zIndex) => [key, { zIndex }])) });\n    },\n    [onOptionsChange, series]\n  );\n\n  const updateSeriesOption = useCallback(\n    (key, prop, value) => {\n      onOptionsChange({\n        seriesOptions: {\n          [key]: {\n            [prop]: value,\n          },\n        },\n      });\n    },\n    [onOptionsChange]\n  );\n  const [debouncedUpdateSeriesOption] = useDebouncedCallback(updateSeriesOption, 200);\n\n  const columns = useMemo(() => getTableColumns(options, updateSeriesOption, debouncedUpdateSeriesOption), [\n    options,\n    updateSeriesOption,\n    debouncedUpdateSeriesOption,\n  ]);\n\n  return (\n    <SortableContainer\n      axis=\"y\"\n      lockAxis=\"y\"\n      lockToContainerEdges\n      useDragHandle\n      helperClass=\"chart-editor-series-dragged-item\"\n      helperContainer={(container: any) => container.querySelector(\"tbody\")}\n      onSortEnd={handleSortEnd}\n      containerProps={{\n        className: \"chart-editor-series\",\n      }}>\n      {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message */}\n      <Table\n        // @ts-expect-error ts-migrate(2322) FIXME: Type 'boolean[]' is not assignable to type 'object... Remove this comment to see the full error message\n        dataSource={series}\n        columns={columns}\n        components={{\n          body: {\n            row: SortableBodyRow,\n          },\n        }}\n        // @ts-expect-error ts-migrate(2322) FIXME: Type '(item: object) => { index: any; }' is not as... Remove this comment to see the full error message\n        onRow={item => ({ index: item.zIndex })}\n        pagination={false}\n      />\n    </SortableContainer>\n  );\n}\n\nSeriesSettings.propTypes = EditorPropTypes;\n","import { each, map } from \"lodash\";\nimport React, { useMemo, useCallback } from \"react\";\nimport Table from \"antd/lib/table\";\nimport ColorPicker from \"@/components/chart/components/ColorPicker\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport ColorPalette from \"@/components/chart/visualizations/ColorPalette\";\nimport getChartData from \"../getChartData\";\n\nfunction getUniqueValues(chartData: any) {\n  const uniqueValuesNames = new Set();\n  each(chartData, series => {\n    each(series.data, row => {\n      uniqueValuesNames.add(row.x);\n    });\n  });\n  return [...uniqueValuesNames];\n}\n\nexport default function PieColorsSettings({ options, data, onOptionsChange }: any) {\n  const colors = useMemo(\n    () => ({\n      Automatic: null,\n      ...ColorPalette,\n    }),\n    []\n  );\n\n  const series = useMemo(\n    () =>\n      map(getUniqueValues(getChartData(data.rows, options)), value => ({\n        key: value,\n        // @ts-expect-error ts-migrate(2538) FIXME: Type 'unknown' cannot be used as an index type.\n        color: (options.valuesOptions[value] || {}).color || null,\n      })),\n    [options, data]\n  );\n\n  const updateValuesOption = useCallback(\n    (key, prop, value) => {\n      onOptionsChange({\n        valuesOptions: {\n          [key]: {\n            [prop]: value,\n          },\n        },\n      });\n    },\n    [onOptionsChange]\n  );\n\n  const columns = [\n    {\n      title: window.W_L.value,\n      dataIndex: \"key\",\n    },\n    {\n      title: window.W_L.color,\n      dataIndex: \"color\",\n      width: \"1%\",\n      render: (unused: any, item: any) => (\n        <ColorPicker\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          data-test={`Chart.Series.${item.key}.Color`}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'boolean' is not assignable to type 'never'.\n          interactive\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '{ \"Indian Red\": string; \"Green 2\": string; \"... Remove this comment to see the full error message\n          presetColors={colors}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          placement=\"topRight\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          color={item.color}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(value: any) => void' is not assignable to t... Remove this comment to see the full error message\n          onChange={(value: any) => updateValuesOption(item.key, \"color\", value)}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'never'.\n          addonAfter={<ColorPicker.Label color={item.color} presetColors={colors} />}\n        />\n      ),\n    },\n  ];\n\n  return <Table showHeader={false} dataSource={series} columns={columns} pagination={false} />;\n}\n\nPieColorsSettings.propTypes = EditorPropTypes;\n","import { map } from \"lodash\";\nimport React from \"react\";\nimport { Section, Select, ColorPicker } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport ColorPalette from \"@/components/chart/visualizations/ColorPalette\";\n\nconst ColorSchemes = [\n  \"Blackbody\",\n  \"Bluered\",\n  \"Blues\",\n  \"Earth\",\n  \"Electric\",\n  \"Greens\",\n  \"Greys\",\n  \"Hot\",\n  \"Jet\",\n  \"Picnic\",\n  \"Portland\",\n  \"Rainbow\",\n  \"RdBu\",\n  \"Reds\",\n  \"Viridis\",\n  \"YlGnBu\",\n  \"YlOrRd\",\n  \"Custom...\",\n];\n\nexport default function HeatmapColorsSettings({ options, onOptionsChange }: any) {\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          label={window.W_L.color_scheme}\n          data-test=\"Chart.Colors.Heatmap.ColorScheme\"\n          placeholder={window.W_L.choose_color_scheme}\n          allowClear\n          value={options.colorScheme || undefined}\n          onChange={(value: any) => onOptionsChange({ colorScheme: value || null })}>\n          {map(ColorSchemes, scheme => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={scheme} value={scheme} data-test={`Chart.Colors.Heatmap.ColorScheme.${scheme}`}>\n              {scheme}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n\n      {options.colorScheme === \"Custom...\" && (\n        <React.Fragment>\n          {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n          <Section>\n            <ColorPicker\n              layout=\"horizontal\"\n              label={window.W_L.min_color}\n              data-test=\"Chart.Colors.Heatmap.MinColor\"\n              interactive\n              placement=\"topLeft\"\n              presetColors={ColorPalette}\n              color={options.heatMinColor}\n              onChange={(heatMinColor: any) => onOptionsChange({ heatMinColor })}\n              // @ts-expect-error ts-migrate(2339) FIXME: Property 'Label' does not exist on type '({ classN... Remove this comment to see the full error message\n              addonAfter={<ColorPicker.Label color={options.heatMinColor} presetColors={ColorPalette} />}\n            />\n          </Section>\n          {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n          <Section>\n            <ColorPicker\n              layout=\"horizontal\"\n              label={window.W_L.max_color}\n              data-test=\"Chart.Colors.Heatmap.MaxColor\"\n              interactive\n              placement=\"topRight\"\n              presetColors={ColorPalette}\n              color={options.heatMaxColor}\n              onChange={(heatMaxColor: any) => onOptionsChange({ heatMaxColor })}\n              // @ts-expect-error ts-migrate(2339) FIXME: Property 'Label' does not exist on type '({ classN... Remove this comment to see the full error message\n              addonAfter={<ColorPicker.Label color={options.heatMaxColor} presetColors={ColorPalette} />}\n            />\n          </Section>\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n}\n\nHeatmapColorsSettings.propTypes = EditorPropTypes;\n","import { map } from \"lodash\";\nimport React, { useMemo, useCallback } from \"react\";\nimport Table from \"antd/lib/table\";\nimport ColorPicker from \"@/components/chart/components/ColorPicker\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport ColorPalette from \"@/components/chart/visualizations/ColorPalette\";\nimport getChartData from \"../getChartData\";\n\nexport default function DefaultColorsSettings({ options, data, onOptionsChange }: any) {\n  const colors = useMemo(\n    () => ({\n      Automatic: null,\n      ...ColorPalette,\n    }),\n    []\n  );\n\n  const series = useMemo(\n    () =>\n      map(getChartData(data.rows, options), ({ name }) => ({\n        key: name,\n        color: (options.seriesOptions[name] || {}).color || null,\n      })),\n    [options, data]\n  );\n\n  const updateSeriesOption = useCallback(\n    (key, prop, value) => {\n      onOptionsChange({\n        seriesOptions: {\n          [key]: {\n            [prop]: value,\n          },\n        },\n      });\n    },\n    [onOptionsChange]\n  );\n\n  const columns = [\n    {\n      title:window.W_L.series,\n      dataIndex: \"key\",\n    },\n    {\n      title: window.W_L.color,\n      dataIndex: \"color\",\n      width: \"1%\",\n      render: (unused: any, item: any) => (\n        <ColorPicker\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          data-test={`Chart.Series.${item.key}.Color`}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'boolean' is not assignable to type 'never'.\n          interactive\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '{ \"Indian Red\": string; \"Green 2\": string; \"... Remove this comment to see the full error message\n          presetColors={colors}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          placement=\"topRight\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          color={item.color}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(value: any) => void' is not assignable to t... Remove this comment to see the full error message\n          onChange={(value: any) => updateSeriesOption(item.key, \"color\", value)}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'never'.\n          addonAfter={<ColorPicker.Label color={item.color} presetColors={colors} />}\n        />\n      ),\n    },\n  ];\n\n  // @ts-expect-error ts-migrate(2322) FIXME: Type 'boolean[]' is not assignable to type 'object... Remove this comment to see the full error message\n  return <Table showHeader={false} dataSource={series} columns={columns} pagination={false} />;\n}\n\nDefaultColorsSettings.propTypes = EditorPropTypes;\n","import React from \"react\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport PieColorsSettings from \"./PieColorsSettings\";\nimport HeatmapColorsSettings from \"./HeatmapColorsSettings\";\nimport DefaultColorsSettings from \"./DefaultColorsSettings\";\n\nconst components = {\n  pie: PieColorsSettings,\n  heatmap: HeatmapColorsSettings,\n};\n\nexport default function ColorsSettings({ options, ...props }: any) {\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  const Component = components[options.globalSeriesType] || DefaultColorsSettings;\n  return <Component options={options} {...props} />;\n}\n\nColorsSettings.propTypes = EditorPropTypes;\n","import { includes } from \"lodash\";\nimport React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Section, Input, Checkbox, ContextHelp } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nexport default function DataLabelsSettings({ options, onOptionsChange }: any) {\n  const isShowDataLabelsAvailable = includes(\n    [\"line\", \"area\", \"column\", \"scatter\", \"pie\", \"heatmap\"],\n    options.globalSeriesType\n  );\n\n  const [debouncedOnOptionsChange] = useDebouncedCallback(onOptionsChange, 200);\n\n  return (\n    <React.Fragment>\n      {isShowDataLabelsAvailable && (\n        // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n        <Section>\n          <Checkbox\n            data-test=\"Chart.DataLabels.ShowDataLabels\"\n            defaultChecked={options.showDataLabels}\n            onChange={event => onOptionsChange({ showDataLabels: event.target.checked })}>\n            {window.W_L.Show_Data_Labels}\n          </Checkbox>\n        </Section>\n      )}\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={\n            <React.Fragment>\n              {window.W_L.Number_format}\n              <ContextHelp.NumberFormatSpecs />\n            </React.Fragment>\n          }\n          data-test=\"Chart.DataLabels.NumberFormat\"\n          defaultValue={options.numberFormat}\n          onChange={(e: any) => debouncedOnOptionsChange({ numberFormat: e.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={\n            <React.Fragment>\n              {window.W_L.Percent_Values_Format}\n              <ContextHelp.NumberFormatSpecs />\n            </React.Fragment>\n          }\n          data-test=\"Chart.DataLabels.PercentFormat\"\n          defaultValue={options.percentFormat}\n          onChange={(e: any) => debouncedOnOptionsChange({ percentFormat: e.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={\n            <React.Fragment>\n              {window.W_L.Date_Time_format}\n              <ContextHelp.DateTimeFormatSpecs />\n            </React.Fragment>\n          }\n          data-test=\"Chart.DataLabels.DateTimeFormat\"\n          defaultValue={options.dateTimeFormat}\n          onChange={(e: any) => debouncedOnOptionsChange({ dateTimeFormat: e.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={\n            <React.Fragment>\n               {window.W_L.Data_Labels}\n              {/* @ts-expect-error ts-migrate(2746) FIXME: This JSX tag's 'children' prop expects a single ch... Remove this comment to see the full error message */}\n              <ContextHelp placement=\"topRight\" arrowPointAtCenter>\n                <div style={{ paddingBottom: 5 }}>Use special names to access additional properties:</div>\n                <div>\n                  <code>{\"{{ @@name }}\"}</code> series name;\n                </div>\n                <div>\n                  <code>{\"{{ @@x }}\"}</code> x-value;\n                </div>\n                <div>\n                  <code>{\"{{ @@y }}\"}</code> y-value;\n                </div>\n                <div>\n                  <code>{\"{{ @@yPercent }}\"}</code> relative y-value;\n                </div>\n                <div>\n                  <code>{\"{{ @@yError }}\"}</code> y deviation;\n                </div>\n                <div>\n                  <code>{\"{{ @@size }}\"}</code> bubble size;\n                </div>\n                <div style={{ paddingTop: 5 }}>\n                {window.W_L.Also_all_query_result_columns_can_be_referenced}\n                  <br />\n                  {window.W_L.using}\n                  <code style={{ whiteSpace: \"nowrap\" }}>{\"{{ column_name }}\"}</code>  {window.W_L.syntax}\n                </div>\n              </ContextHelp>\n            </React.Fragment>\n          }\n          data-test=\"Chart.DataLabels.TextFormat\"\n          placeholder=\"(auto)\"\n          defaultValue={options.textFormat}\n          onChange={(e: any) => debouncedOnOptionsChange({ textFormat: e.target.value })}\n        />\n      </Section>\n    </React.Fragment>\n  );\n}\n\nDataLabelsSettings.propTypes = EditorPropTypes;\n","import { isNil, trimStart } from \"lodash\";\nimport React from \"react\";\nimport { Section, Switch, TextArea } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nconst defaultCustomCode = trimStart(`\n// Available variables are x, ys, element, and Plotly\n// Type console.log(x, ys); for more info about x and ys\n// To plot your graph call Plotly.plot(element, ...)\n// Plotly examples and docs: https://plot.ly/javascript/\n`);\n\nexport default function CustomChartSettings({ options, onOptionsChange }: any) {\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <TextArea\n          label=\"Custom code\"\n          data-test=\"Chart.Custom.Code\"\n          rows=\"10\"\n          defaultValue={isNil(options.customCode) ? defaultCustomCode : options.customCode}\n          onChange={(event: any) => onOptionsChange({ customCode: event.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n        <Switch\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          data-test=\"Chart.Custom.EnableConsoleLogs\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          defaultChecked={options.enableConsoleLogs}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(enableConsoleLogs: any) => any' is not assi... Remove this comment to see the full error message\n          onChange={(enableConsoleLogs: any) => onOptionsChange({ enableConsoleLogs })}>\n          Show errors in the console\n        </Switch>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n        <Switch\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          id=\"chart-editor-auto-update-custom-chart\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          data-test=\"Chart.Custom.AutoUpdate\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          defaultChecked={options.autoRedraw}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(autoRedraw: any) => any' is not assignable ... Remove this comment to see the full error message\n          onChange={(autoRedraw: any) => onOptionsChange({ autoRedraw })}>\n          Auto update graph\n        </Switch>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nCustomChartSettings.propTypes = EditorPropTypes;\n","/* eslint-disable react/prop-types */\nimport React from \"react\";\nimport createTabbedEditor from \"@/components/chart/components/visualizations/editor/createTabbedEditor\";\n\nimport GeneralSettings from \"./GeneralSettings\";\nimport XAxisSettings from \"./XAxisSettings\";\nimport YAxisSettings from \"./YAxisSettings\";\nimport SeriesSettings from \"./SeriesSettings\";\nimport ColorsSettings from \"./ColorsSettings\";\nimport DataLabelsSettings from \"./DataLabelsSettings\";\nimport CustomChartSettings from \"./CustomChartSettings\";\n\nimport \"./editor.less\";\n\nconst isCustomChart = (options: any) => options.globalSeriesType === \"custom\";\nconst isPieChart = (options: any) => options.globalSeriesType === \"pie\";\n\nexport default createTabbedEditor([\n  {\n    key: \"General\",\n    title: window.W_L.general,\n    component: (props: any) => (\n      <React.Fragment>\n        <GeneralSettings {...props} />\n        {isCustomChart(props.options) && <CustomChartSettings {...props} />}\n      </React.Fragment>\n    ),\n  },\n  {\n    key: \"XAxis\",\n    title: ({ swappedAxes }: any) => (!swappedAxes ? window.W_L.x_column : window.W_L.y_column),\n    component: XAxisSettings,\n    isAvailable: (options: any) => !isCustomChart(options) && !isPieChart(options),\n  },\n  {\n    key: \"YAxis\",\n    title: ({ swappedAxes }: any) => (!swappedAxes ? window.W_L.y_column : window.W_L.x_column),\n    component: YAxisSettings,\n    isAvailable: (options: any) => !isCustomChart(options) && !isPieChart(options),\n  },\n  {\n    key: \"Series\",\n    title:window.W_L.series,\n    component: SeriesSettings,\n    isAvailable: (options: any) => !isCustomChart(options),\n  },\n  {\n    key: \"Colors\",\n    title: window.W_L.color,\n    component: ColorsSettings,\n    isAvailable: (options: any) => !isCustomChart(options),\n  },\n  {\n    key: \"DataLabels\",\n    title: window.W_L.data_labels,\n    component: DataLabelsSettings,\n    isAvailable: (options: any) => !isCustomChart(options),\n  },\n]);\n","import getOptions from \"./getOptions\";\nimport Renderer from \"./Renderer\";\nimport Editor from \"./Editor\";\n\nexport default {\n  type: \"CHART\",\n  name: \"图表(Chart)\",\n  isDefault: true,\n  getOptions,\n  Renderer,\n  Editor,\n\n  defaultColumns: 3,\n  defaultRows: 8,\n  minColumns: 1,\n  minRows: 5,\n};\n","import { extend } from \"lodash\";\nimport ColorPalette from \"@/components/chart/visualizations/ColorPalette\";\n\nexport default extend(\n  {\n    White: \"#ffffff\",\n    Black: \"#000000\",\n    \"Light Gray\": \"#dddddd\",\n  },\n  ColorPalette\n);\n","import { isNil, merge, first, keys, get } from \"lodash\";\nimport { visualizationsSettings } from \"@/components/chart/visualizations/visualizationsSettings\";\nimport ColorPalette from \"./ColorPalette\";\n\nfunction getDefaultMap() {\n  return first(keys(visualizationsSettings.choroplethAvailableMaps)) || null;\n}\n\nconst DEFAULT_OPTIONS = {\n  mapType: \"countries\",\n  keyColumn: null,\n  targetField: null,\n  valueColumn: null,\n  clusteringMode: \"e\",\n  steps: 5,\n  valueFormat: \"0,0.00\",\n  noValuePlaceholder: \"N/A\",\n  colors: {\n    min: ColorPalette[\"Light Blue\"],\n    max: ColorPalette[\"Dark Blue\"],\n    background: ColorPalette.White,\n    borders: ColorPalette.White,\n    noValue: ColorPalette[\"Light Gray\"],\n  },\n  legend: {\n    visible: true,\n    position: \"bottom-left\", \n    alignText: \"right\",\n  },\n  tooltip: {\n    enabled: true,\n    template: \"<b>{{ @@name }}</b>: {{ @@value }}\",\n  },\n  popup: {\n    enabled: true,\n    template: `${window.W_L.region}: <b>{{ @@name_long }} ({{ @@iso_a2 }})</b>\\n<br>\\n${window.W_L.value}: <b>{{ @@value }}</b>`,\n  },\n};\n\nexport default function getOptions(options: any) {\n  const result = merge({}, DEFAULT_OPTIONS, options);\n\n  // Both renderer and editor always provide new `bounds` array, so no need to clone it here.\n  // Keeping original object also reduces amount of updates in components\n  result.bounds = get(options, \"bounds\");\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  if (isNil(visualizationsSettings.choroplethAvailableMaps[result.mapType])) {\n    result.mapType = getDefaultMap();\n  }\n\n  // backward compatibility\n  if (!isNil(result.countryCodeColumn)) {\n    result.keyColumn = result.countryCodeColumn;\n  }\n  delete result.countryCodeColumn;\n\n  if (!isNil(result.countryCodeType)) {\n    result.targetField = result.countryCodeType;\n  }\n  delete result.countryCodeType;\n\n  return result;\n}\n","import { isString, isObject, get } from \"lodash\";\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { visualizationsSettings } from \"@/components/chart/visualizations/visualizationsSettings\";\nimport createReferenceCountingCache from \"@/components/chart/lib/referenceCountingCache\";\n\nconst cache = createReferenceCountingCache();\n\nexport default function useLoadGeoJson(mapType: any) {\n  const [geoJson, setGeoJson] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    const mapUrl = get(visualizationsSettings, `choroplethAvailableMaps.${mapType}.url`, undefined);\n\n    if (isString(mapUrl)) {\n      setIsLoading(true);\n      let cancelled = false;\n\n      const promise = cache.get(mapUrl, () => axios.get(mapUrl).catch(() => null));\n      promise.then(({ data }: any) => {\n        if (!cancelled) {\n          // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'object | null' is not assignable... Remove this comment to see the full error message\n          setGeoJson(isObject(data) ? data : null);\n          setIsLoading(false);\n        }\n      });\n\n      return () => {\n        cancelled = true;\n        cache.release(mapUrl);\n      };\n    } else {\n      setGeoJson(null);\n      setIsLoading(false);\n    }\n  }, [mapType]);\n\n  return [geoJson, isLoading];\n}\n","import { each, debounce } from \"lodash\";\n\nexport default function createReferenceCountingCache({ cleanupDelay = 2000 } = {}) {\n  const items = {};\n\n  const cleanup = debounce(() => {\n    each(items, (item, key) => {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'refCount' does not exist on type 'never'... Remove this comment to see the full error message\n      if (item.refCount <= 0) {\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        delete items[key];\n      }\n    });\n  }, cleanupDelay);\n\n  function get(key: any, getter: any) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    if (!items[key]) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      items[key] = {\n        value: getter(),\n        refCount: 0,\n      };\n    }\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const item = items[key];\n    item.refCount += 1;\n    return item.value;\n  }\n\n  function release(key: any) {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    if (items[key]) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      const item = items[key];\n      if (item.refCount > 0) {\n        item.refCount -= 1;\n        if (item.refCount <= 0) {\n          cleanup();\n        }\n      }\n    }\n  }\n\n  return { get, release };\n}\n","import { isString, isNumber, isObject, isFinite, each, map, extend, uniq, filter, first } from \"lodash\";\nimport chroma from \"chroma-js\";\nimport { createNumberFormatter as createFormatter } from \"@/components/chart/lib/value-format\";\n\nexport function darkenColor(color: any) {\n  return chroma(color)\n    .darken()\n    .hex();\n}\n\nexport function createNumberFormatter(format: any, placeholder: any) {\n  const formatter = createFormatter(format);\n  return (value: any) => {\n    if (isFinite(value)) {\n      return formatter(value);\n    }\n    return placeholder;\n  };\n}\n\nexport function prepareData(data: any, keyColumn: any, valueColumn: any) {\n  if (!keyColumn || !valueColumn) {\n    return {};\n  }\n\n  const result = {};\n  each(data, item => {\n    if (item[keyColumn]) {\n      const value = parseFloat(item[valueColumn]);\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      result[item[keyColumn]] = {\n        code: item[keyColumn],\n        value: isFinite(value) ? value : undefined,\n        item,\n      };\n    }\n  });\n  return result;\n}\n\nexport function prepareFeatureProperties(feature: any, valueFormatted: any, data: any, targetField: any) {\n  const result = {};\n  each(feature.properties, (value, key) => {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    result[\"@@\" + key] = value;\n  });\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  result[\"@@value\"] = valueFormatted;\n  const datum = data[feature.properties[targetField]] || {};\n  return extend(result, datum.item);\n}\n\nexport function getValueForFeature(feature: any, data: any, targetField: any) {\n  const code = feature.properties[targetField];\n  if (isString(code) && isObject(data[code])) {\n    return data[code].value;\n  }\n  if (isNumber(code) && isObject(data[code.toString()])) {\n    return data[code.toString()].value;\n  }\n  return undefined;\n}\n\nexport function getColorByValue(value: any, limits: any, colors: any, defaultColor: any) {\n  if (isFinite(value)) {\n    for (let i = 0; i < limits.length; i += 1) {\n      if (value <= limits[i]) {\n        return colors[i];\n      }\n    }\n  }\n  return defaultColor;\n}\n\nexport function createScale(features: any, data: any, options: any) {\n  // Calculate limits\n  const values = uniq(\n    filter(\n      map(features, feature => getValueForFeature(feature, data, options.targetField)),\n      isFinite\n    )\n  );\n  if (values.length === 0) {\n    return {\n      limits: [],\n      colors: [],\n      legend: [],\n    };\n  }\n  const steps = Math.min(values.length, options.steps);\n  if (steps === 1) {\n    return {\n      limits: values,\n      colors: [options.colors.max],\n      legend: [\n        {\n          color: options.colors.max,\n          limit: first(values),\n        },\n      ],\n    };\n  }\n  const limits = chroma.limits(values, options.clusteringMode, steps - 1);\n\n  // Create color buckets\n  const colors = chroma.scale([options.colors.min, options.colors.max]).colors(limits.length);\n\n  // Group values for legend\n  const legend = map(colors, (color, index) => ({\n    color,\n    limit: limits[index],\n  })).reverse();\n\n  return { limits, colors, legend };\n}\n","import { map } from \"lodash\";\nimport React from \"react\";\nimport ColorPicker from \"@/components/chart/components/ColorPicker\";\n\ntype OwnProps = {\n  items?: {\n    color: string;\n    text: string;\n  }[];\n  alignText?: \"left\" | \"center\" | \"right\";\n};\n\ntype Props = OwnProps & typeof Legend.defaultProps;\n\nexport default function Legend({ items, alignText }: Props) {\n  return (\n    <div className=\"choropleth-visualization-legend\">\n      {map(items, (item, index) => (\n        <div key={`legend${index}`} className=\"legend-item\">\n          {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'. */}\n          <ColorPicker.Swatch color={item.color} />\n          <div className={`legend-item-text text-${alignText}`}>{item.text}</div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nLegend.defaultProps = {\n  items: [],\n  alignText: \"left\",\n};\n","import { isFunction, isObject, isArray, map } from \"lodash\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"leaflet-fullscreen\";\nimport \"leaflet-fullscreen/dist/leaflet.fullscreen.css\";\nimport { formatSimpleTemplate } from \"@/components/chart/lib/value-format\";\nimport sanitize from \"@/services/sanitize\";\nimport resizeObserver from \"@/services/resizeObserver\";\nimport {\n  createNumberFormatter,\n  createScale,\n  darkenColor,\n  getColorByValue,\n  getValueForFeature,\n  prepareFeatureProperties,\n} from \"./utils\";\nimport Legend from \"./Legend\";\n\nconst CustomControl = L.Control.extend({\n  options: {\n    position: \"topright\",\n  },\n  onAdd() {\n    const div = document.createElement(\"div\");\n    div.className = \"leaflet-bar leaflet-custom-toolbar\";\n    div.style.background = \"#fff\";\n    div.style.backgroundClip = \"padding-box\";\n    return div;\n  },\n  onRemove() {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'getContainer' does not exist on type '{ ... Remove this comment to see the full error message\n    ReactDOM.unmountComponentAtNode(this.getContainer());\n  },\n});\n\nfunction prepareLayer({ feature, layer, data, options, limits, colors, formatValue }: any) {\n  const value = getValueForFeature(feature, data, options.targetField);\n  const valueFormatted = formatValue(value);\n  const featureData = prepareFeatureProperties(feature, valueFormatted, data, options.targetField);\n  const color = getColorByValue(value, limits, colors, options.colors.noValue);\n\n  layer.setStyle({\n    color: options.colors.borders,\n    weight: 1,\n    fillColor: color,\n    fillOpacity: 1,\n  });\n\n  if (options.tooltip.enabled) {\n    layer.bindTooltip(sanitize(formatSimpleTemplate(options.tooltip.template, featureData)), { sticky: true });\n  }\n\n  if (options.popup.enabled) {\n    layer.bindPopup(sanitize(formatSimpleTemplate(options.popup.template, featureData)));\n  }\n\n  layer.on(\"mouseover\", () => {\n    layer.setStyle({\n      weight: 2,\n      fillColor: darkenColor(color),\n    });\n  });\n  layer.on(\"mouseout\", () => {\n    layer.setStyle({\n      weight: 1,\n      fillColor: color,\n    });\n  });\n}\n\nfunction validateBounds(bounds: any, fallbackBounds: any) {\n  if (bounds) {\n    bounds = L.latLngBounds(bounds[0], bounds[1]);\n    if (bounds.isValid()) {\n      return bounds;\n    }\n  }\n  if (fallbackBounds && fallbackBounds.isValid()) {\n    return fallbackBounds;\n  }\n  return null;\n}\n\nexport default function initChoropleth(container: any, onBoundsChange: any) {\n  const _map = L.map(container, {\n    center: [0.0, 0.0],\n    zoom: 1,\n    zoomSnap: 0,\n    scrollWheelZoom: false,\n    maxBoundsViscosity: 1,\n    attributionControl: false,\n    // @ts-expect-error ts-migrate(2345) FIXME: Argument of type '{ center: [number, number]; zoom... Remove this comment to see the full error message\n    fullscreenControl: true,\n  });\n  let _choropleth: any = null;\n  const _legend = new CustomControl();\n\n  function handleMapBoundsChange() {\n    if (isFunction(onBoundsChange)) {\n      const bounds = _map.getBounds();\n      onBoundsChange([\n        // @ts-expect-error ts-migrate(2551) FIXME: Property '_southWest' does not exist on type 'LatL... Remove this comment to see the full error message\n        [bounds._southWest.lat, bounds._southWest.lng],\n        // @ts-expect-error ts-migrate(2551) FIXME: Property '_northEast' does not exist on type 'LatL... Remove this comment to see the full error message\n        [bounds._northEast.lat, bounds._northEast.lng],\n      ]);\n    }\n  }\n\n  let boundsChangedFromMap = false;\n  const onMapMoveEnd = () => {\n    handleMapBoundsChange();\n  };\n  _map.on(\"focus\", () => {\n    boundsChangedFromMap = true;\n    _map.on(\"moveend\", onMapMoveEnd);\n  });\n  _map.on(\"blur\", () => {\n    _map.off(\"moveend\", onMapMoveEnd);\n    boundsChangedFromMap = false;\n  });\n\n  function updateLayers(geoJson: any, data: any, options: any) {\n    _map.eachLayer(layer => _map.removeLayer(layer));\n    _map.removeControl(_legend);\n\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'features' does not exist on type 'object... Remove this comment to see the full error message\n    if (!isObject(geoJson) || !isArray(geoJson.features)) {\n      _choropleth = null;\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'null' is not assignable to param... Remove this comment to see the full error message\n      _map.setMaxBounds(null);\n      return;\n    }\n\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'features' does not exist on type 'object... Remove this comment to see the full error message\n    const { limits, colors, legend } = createScale(geoJson.features, data, options);\n    const formatValue = createNumberFormatter(options.valueFormat, options.noValuePlaceholder);\n\n    // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'object' is not assignable to par... Remove this comment to see the full error message\n    _choropleth = L.geoJSON(geoJson, {\n      onEachFeature(feature, layer) {\n        prepareLayer({ feature, layer, data, options, limits, colors, formatValue });\n      },\n    }).addTo(_map);\n\n    const mapBounds = _choropleth.getBounds();\n    const bounds = validateBounds(options.bounds, mapBounds);\n    _map.fitBounds(bounds, { animate: false, duration: 0 });\n\n    // equivalent to `_map.setMaxBounds(mapBounds)` but without animation\n    _map.options.maxBounds = mapBounds;\n    _map.panInsideBounds(mapBounds, { animate: false, duration: 0 });\n\n    // update legend\n    if (options.legend.visible && legend.length > 0) {\n      _legend.setPosition(options.legend.position.replace(\"-\", \"\"));\n      _map.addControl(_legend);\n      ReactDOM.render(\n        // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.\n        <Legend\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '{ text: any; color: any; limit: any; }[]' is... Remove this comment to see the full error message\n          items={map(legend, item => ({ ...item, text: formatValue(item.limit) }))}\n          alignText={options.legend.alignText}\n        />,\n        _legend.getContainer()\n      );\n    }\n  }\n\n  function updateBounds(bounds: any) {\n    if (!boundsChangedFromMap) {\n      const layerBounds = _choropleth ? _choropleth.getBounds() : _map.getBounds();\n      bounds = validateBounds(bounds, layerBounds);\n      if (bounds) {\n        _map.fitBounds(bounds, { animate: false, duration: 0 });\n      }\n    }\n  }\n\n  const unwatchResize = resizeObserver(container, () => {\n    _map.invalidateSize(false);\n  });\n\n  return {\n    updateLayers,\n    updateBounds,\n    destroy() {\n      unwatchResize();\n      _map.removeControl(_legend); // _map.remove() does not cleanup controls - bug in Leaflet?\n      _map.remove();\n    },\n  };\n}\n","import { omit, noop } from \"lodash\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport useMemoWithDeepCompare from \"@/components/chart/lib/hooks/useMemoWithDeepCompare\";\n\nimport useLoadGeoJson from \"../hooks/useLoadGeoJson\";\nimport initChoropleth from \"./initChoropleth\";\nimport { prepareData } from \"./utils\";\nimport \"./renderer.less\";\n\nexport default function Renderer({ data, options, onOptionsChange }: any) {\n  const [container, setContainer] = useState(null);\n  const [geoJson] = useLoadGeoJson(options.mapType);\n  const onBoundsChangeRef = useRef();\n  // @ts-expect-error ts-migrate(2322) FIXME: Type '(...args: any[]) => void' is not assignable ... Remove this comment to see the full error message\n  onBoundsChangeRef.current = onOptionsChange ? (bounds: any) => onOptionsChange({ ...options, bounds }) : noop;\n\n  const optionsWithoutBounds = useMemoWithDeepCompare(() => omit(options, [\"bounds\"]), [options]);\n\n  const [map, setMap] = useState(null);\n\n  useEffect(() => {\n    if (container) {\n      // @ts-expect-error ts-migrate(7019) FIXME: Rest parameter 'args' implicitly has an 'any[]' ty... Remove this comment to see the full error message\n      const _map = initChoropleth(container, (...args) => onBoundsChangeRef.current(...args));\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type '{ updateLayers: (geoJson: any, d... Remove this comment to see the full error message\n      setMap(_map);\n      return () => {\n        _map.destroy();\n      };\n    }\n  }, [container]);\n\n  useEffect(() => {\n    if (map) {\n      // @ts-expect-error ts-migrate(2531) FIXME: Object is possibly 'null'.\n      map.updateLayers(\n        geoJson,\n        // @ts-expect-error ts-migrate(2532) FIXME: Object is possibly 'undefined'.\n        prepareData(data.rows, optionsWithoutBounds.keyColumn, optionsWithoutBounds.valueColumn),\n        options // detect changes for all options except bounds, but pass them all!\n      );\n    }\n  }, [map, geoJson, data.rows, optionsWithoutBounds]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // This may come only from editor\n  useEffect(() => {\n    if (map) {\n      // @ts-expect-error ts-migrate(2531) FIXME: Object is possibly 'null'.\n      map.updateBounds(options.bounds);\n    }\n  }, [map, options, onOptionsChange]);\n\n  return (\n    // @ts-expect-error ts-migrate(2322) FIXME: Type 'Dispatch<SetStateAction<null>>' is not assig... Remove this comment to see the full error message\n    <div className=\"map-visualization-container\" style={{ background: options.colors.background }} ref={setContainer} />\n  );\n}\n\nRenderer.propTypes = RendererPropTypes;\n","import { isEqual } from \"lodash\";\nimport { useMemo, useRef } from \"react\";\n\nexport default function useMemoWithDeepCompare(create: any, inputs: any) {\n  const valueRef = useRef();\n  const value = useMemo(create, inputs);\n  if (!isEqual(value, valueRef.current)) {\n    // @ts-expect-error ts-migrate(2322) FIXME: Type 'unknown' is not assignable to type 'undefine... Remove this comment to see the full error message\n    valueRef.current = value;\n  }\n  return valueRef.current;\n}\n","import { isObject, isArray, reduce, keys, uniq } from \"lodash\";\nimport L from \"leaflet\";\n\nexport function getGeoJsonFields(geoJson: any) {\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'features' does not exist on type 'object... Remove this comment to see the full error message\n  const features = isObject(geoJson) && isArray(geoJson.features) ? geoJson.features : [];\n  return reduce(\n    features,\n    // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.\n    (result, feature) => {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'properties' does not exist on type 'obje... Remove this comment to see the full error message\n      const properties = isObject(feature) && isObject(feature.properties) ? feature.properties : {};\n      return uniq([...result, ...keys(properties)]);\n    },\n    []\n  );\n}\n\nexport function getGeoJsonBounds(geoJson: any) {\n  if (isObject(geoJson)) {\n    // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'object' is not assignable to par... Remove this comment to see the full error message\n    const layer = L.geoJSON(geoJson);\n    const bounds = layer.getBounds();\n    if (bounds.isValid()) {\n      return [\n        // @ts-expect-error ts-migrate(2551) FIXME: Property '_southWest' does not exist on type 'LatL... Remove this comment to see the full error message\n        [bounds._southWest.lat, bounds._southWest.lng],\n        // @ts-expect-error ts-migrate(2551) FIXME: Property '_northEast' does not exist on type 'LatL... Remove this comment to see the full error message\n        [bounds._northEast.lat, bounds._northEast.lng],\n      ];\n    }\n  }\n  return null;\n}\n","import { isString, map, filter, get } from \"lodash\";\nimport React, { useMemo, useCallback } from \"react\";\nimport * as Grid from \"antd/lib/grid\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport { Section, Select } from \"@/components/chart/components/visualizations/editor\";\nimport { visualizationsSettings } from \"@/components/chart/visualizations/visualizationsSettings\";\n\nimport useLoadGeoJson from \"../hooks/useLoadGeoJson\";\nimport { getGeoJsonFields } from \"./utils\";\n\nexport default function GeneralSettings({ options, data, onOptionsChange }: any) {\n  const [geoJson, isLoadingGeoJson] = useLoadGeoJson(options.mapType);\n  const geoJsonFields = useMemo(() => getGeoJsonFields(geoJson), [geoJson]);\n\n  // While geoJson is loading - show last selected field in select\n  const targetFields = isLoadingGeoJson ? filter([options.targetField], isString) : geoJsonFields;\n\n  const fieldNames = get(visualizationsSettings, `choroplethAvailableMaps.${options.mapType}.fieldNames`, {});\n\n  const handleMapChange = useCallback(\n    mapType => {\n      onOptionsChange({ mapType: mapType || null });\n    },\n    [onOptionsChange]\n  );\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          label={window.W_L.Map}\n          data-test=\"Choropleth.Editor.MapType\"\n          defaultValue={options.mapType}\n          onChange={handleMapChange}>\n          {map(visualizationsSettings.choroplethAvailableMaps, (_, mapType) => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={mapType} data-test={`Choropleth.Editor.MapType.${mapType}`}>\n              {get(visualizationsSettings, `choroplethAvailableMaps.${mapType}.name`, mapType)}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Grid.Row gutter={15}>\n          <Grid.Col span={12}>\n            <Select\n              label={window.W_L.Key_Column}\n              className=\"w-100\"\n              data-test=\"Choropleth.Editor.KeyColumn\"\n              disabled={data.columns.length === 0}\n              defaultValue={options.keyColumn}\n              onChange={(keyColumn: any) => onOptionsChange({ keyColumn })}>\n              {map(data.columns, ({ name }) => (\n                // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n                <Select.Option key={name} data-test={`Choropleth.Editor.KeyColumn.${name}`}>\n                  {name}\n                  {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n                </Select.Option>\n              ))}\n            </Select>\n          </Grid.Col>\n          <Grid.Col span={12}>\n            <Select\n              label={window.W_L.Target_Field}\n              className=\"w-100\"\n              data-test=\"Choropleth.Editor.TargetField\"\n              disabled={isLoadingGeoJson || targetFields.length === 0}\n              loading={isLoadingGeoJson}\n              value={options.targetField}\n              onChange={(targetField: any) => onOptionsChange({ targetField })}>\n              {map(targetFields, field => (\n                // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n                <Select.Option key={field} data-test={`Choropleth.Editor.TargetField.${field}`}>\n                  {fieldNames[field] || field}\n                  {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n                </Select.Option>\n              ))}\n            </Select>\n          </Grid.Col>\n        </Grid.Row>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          label={window.W_L.Value_Column}\n          data-test=\"Choropleth.Editor.ValueColumn\"\n          disabled={data.columns.length === 0}\n          defaultValue={options.valueColumn}\n          onChange={(valueColumn: any) => onOptionsChange({ valueColumn })}>\n          {map(data.columns, ({ name }) => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={name} data-test={`Choropleth.Editor.ValueColumn.${name}`}>\n              {name}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nGeneralSettings.propTypes = EditorPropTypes;\n","import React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Section, Select, InputNumber, ColorPicker } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport ColorPalette from \"../ColorPalette\";\n\nexport default function ColorsSettings({ options, onOptionsChange }: any) {\n  const [onOptionsChangeDebounced] = useDebouncedCallback(onOptionsChange, 200);\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          layout=\"horizontal\"\n          label={window.W_L.Clustering_Mode}\n          data-test=\"Choropleth.Editor.ClusteringMode\"\n          defaultValue={options.clusteringMode}\n          onChange={(clusteringMode: any) => onOptionsChange({ clusteringMode })}>\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"q\" data-test=\"Choropleth.Editor.ClusteringMode.q\">\n            分位数(quantile)\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"e\" data-test=\"Choropleth.Editor.ClusteringMode.e\">\n            等距(equidistant)\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"k\" data-test=\"Choropleth.Editor.ClusteringMode.k\">\n            K均值(k-means)\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <InputNumber\n          layout=\"horizontal\"\n          label={window.W_L.Steps}\n          data-test=\"Choropleth.Editor.ColorSteps\"\n          min={3}\n          max={11}\n          defaultValue={options.steps}\n          onChange={(steps: any) => onOptionsChangeDebounced({ steps })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <ColorPicker\n          layout=\"horizontal\"\n          label={window.W_L.min_color}\n          interactive\n          presetColors={ColorPalette}\n          placement=\"topRight\"\n          color={options.colors.min}\n          triggerProps={{ \"data-test\": \"Choropleth.Editor.Colors.Min\" }}\n          onChange={(min: any) => onOptionsChange({ colors: { min } })}\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'Label' does not exist on type '({ classN... Remove this comment to see the full error message\n          addonAfter={<ColorPicker.Label color={options.colors.min} presetColors={ColorPalette} />}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <ColorPicker\n          layout=\"horizontal\"\n          label={window.W_L.max_color}\n          interactive\n          presetColors={ColorPalette}\n          placement=\"topRight\"\n          color={options.colors.max}\n          triggerProps={{ \"data-test\": \"Choropleth.Editor.Colors.Max\" }}\n          onChange={(max: any) => onOptionsChange({ colors: { max } })}\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'Label' does not exist on type '({ classN... Remove this comment to see the full error message\n          addonAfter={<ColorPicker.Label color={options.colors.max} presetColors={ColorPalette} />}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <ColorPicker\n          layout=\"horizontal\"\n          label={window.W_L.No_Value_Color}\n          interactive\n          presetColors={ColorPalette}\n          placement=\"topRight\"\n          color={options.colors.noValue}\n          triggerProps={{ \"data-test\": \"Choropleth.Editor.Colors.NoValue\" }}\n          onChange={(noValue: any) => onOptionsChange({ colors: { noValue } })}\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'Label' does not exist on type '({ classN... Remove this comment to see the full error message\n          addonAfter={<ColorPicker.Label color={options.colors.noValue} presetColors={ColorPalette} />}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <ColorPicker\n          layout=\"horizontal\"\n          label={window.W_L.Background_Color}\n          interactive\n          presetColors={ColorPalette}\n          placement=\"topRight\"\n          color={options.colors.background}\n          triggerProps={{ \"data-test\": \"Choropleth.Editor.Colors.Background\" }}\n          onChange={(background: any) => onOptionsChange({ colors: { background } })}\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'Label' does not exist on type '({ classN... Remove this comment to see the full error message\n          addonAfter={<ColorPicker.Label color={options.colors.background} presetColors={ColorPalette} />}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <ColorPicker\n          layout=\"horizontal\"\n          label={window.W_L.Borders_Color}\n          interactive\n          presetColors={ColorPalette}\n          placement=\"topRight\"\n          color={options.colors.borders}\n          triggerProps={{ \"data-test\": \"Choropleth.Editor.Colors.Borders\" }}\n          onChange={(borders: any) => onOptionsChange({ colors: { borders } })}\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'Label' does not exist on type '({ classN... Remove this comment to see the full error message\n          addonAfter={<ColorPicker.Label color={options.colors.borders} presetColors={ColorPalette} />}\n        />\n      </Section>\n    </React.Fragment>\n  );\n}\n\nColorsSettings.propTypes = EditorPropTypes;\n","import { map } from \"lodash\";\nimport React, { useMemo } from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport * as Grid from \"antd/lib/grid\";\nimport {\n  Section,\n  Select,\n  Input,\n  Checkbox,\n  TextArea,\n  TextAlignmentSelect,\n  ContextHelp,\n} from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport useLoadGeoJson from \"../hooks/useLoadGeoJson\";\nimport { getGeoJsonFields } from \"./utils\";\n\ntype OwnTemplateFormatHintProps = {\n  geoJsonProperties?: string[];\n};\n\ntype TemplateFormatHintProps = OwnTemplateFormatHintProps & typeof TemplateFormatHint.defaultProps;\n\nfunction TemplateFormatHint({ geoJsonProperties }: TemplateFormatHintProps) {\n  return (\n    // @ts-expect-error ts-migrate(2746) FIXME: This JSX tag's 'children' prop expects a single ch... Remove this comment to see the full error message\n    <ContextHelp placement=\"topLeft\" arrowPointAtCenter>\n      <div style={{ paddingBottom: 5 }}>\n        <div>\n        {window.W_L.Also_all_query_result_columns_can_be_referenced}：<code>{\"{{ column_name }}\"}</code>。\n        </div>\n        <div>\n        Use<code>{\"{{ @@value }}\"}</code> to access formatted value.\n        </div>\n      </div>\n      {geoJsonProperties.length > 0 && (\n        <React.Fragment>\n          <div className=\"p-b-5\">GeoJSON properties could be accessed by these names:</div>\n          <div style={{ maxHeight: 300, overflow: \"auto\" }}>\n            {map(geoJsonProperties, property => (\n              <div key={property}>\n                <code>{`{{ @@${property}}}`}</code>\n              </div>\n            ))}\n          </div>\n        </React.Fragment>\n      )}\n    </ContextHelp>\n  );\n}\n\nTemplateFormatHint.defaultProps = {\n  geoJsonProperties: [],\n};\n\nexport default function GeneralSettings({ options, onOptionsChange }: any) {\n  const [onOptionsChangeDebounced] = useDebouncedCallback(onOptionsChange, 200);\n  const [geoJson] = useLoadGeoJson(options.mapType);\n  const geoJsonFields = useMemo(() => getGeoJsonFields(geoJson), [geoJson]);\n\n  const templateFormatHint = <TemplateFormatHint geoJsonProperties={geoJsonFields} />;\n\n  return (\n    <div className=\"choropleth-visualization-editor-format-settings\">\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Grid.Row gutter={15}>\n          <Grid.Col span={12}>\n            <Input\n              label={\n                <React.Fragment>\n                  {window.W_L.Value_Format}\n                  <ContextHelp.NumberFormatSpecs />\n                </React.Fragment>\n              }\n              data-test=\"Choropleth.Editor.ValueFormat\"\n              defaultValue={options.valueFormat}\n              onChange={(event: any) => onOptionsChangeDebounced({ valueFormat: event.target.value })}\n            />\n          </Grid.Col>\n          <Grid.Col span={12}>\n            <Input\n              label={window.W_L.Value_Placeholder}\n              data-test=\"Choropleth.Editor.ValuePlaceholder\"\n              defaultValue={options.noValuePlaceholder}\n              onChange={(event: any) => onOptionsChangeDebounced({ noValuePlaceholder: event.target.value })}\n            />\n          </Grid.Col>\n        </Grid.Row>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Checkbox\n          data-test=\"Choropleth.Editor.LegendVisibility\"\n          checked={options.legend.visible}\n          onChange={event => onOptionsChange({ legend: { visible: event.target.checked } })}>\n          {window.W_L.Show_Legend}\n        </Checkbox>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Grid.Row gutter={15}>\n          <Grid.Col span={12}>\n            <Select\n              label={window.W_L.Legend_Position}\n              data-test=\"Choropleth.Editor.LegendPosition\"\n              disabled={!options.legend.visible}\n              defaultValue={options.legend.position}\n              onChange={(position: any) => onOptionsChange({ legend: { position } })}>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option value=\"top-left\" data-test=\"Choropleth.Editor.LegendPosition.TopLeft\">\n              top / left\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option value=\"top-right\" data-test=\"Choropleth.Editor.LegendPosition.TopRight\">\n              top / right\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option value=\"bottom-left\" data-test=\"Choropleth.Editor.LegendPosition.BottomLeft\">\n              bottom / left\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option value=\"bottom-right\" data-test=\"Choropleth.Editor.LegendPosition.BottomRight\">\n              bottom / right\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n            </Select>\n          </Grid.Col>\n          <Grid.Col span={12}>\n            <TextAlignmentSelect\n              data-test=\"Choropleth.Editor.LegendTextAlignment\"\n              label={window.W_L.Legend_Text_Alignment}\n              disabled={!options.legend.visible}\n              defaultValue={options.legend.alignText}\n              onChange={(event: any) => onOptionsChange({ legend: { alignText: event.target.value } })}\n            />\n          </Grid.Col>\n        </Grid.Row>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Checkbox\n          data-test=\"Choropleth.Editor.TooltipEnabled\"\n          checked={options.tooltip.enabled}\n          onChange={event => onOptionsChange({ tooltip: { enabled: event.target.checked } })}>\n          {window.W_L.Show_tooltip}\n        </Checkbox>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={<React.Fragment>{window.W_L.Tooltip_template} {templateFormatHint}</React.Fragment>}\n          data-test=\"Choropleth.Editor.TooltipTemplate\"\n          disabled={!options.tooltip.enabled}\n          defaultValue={options.tooltip.template}\n          onChange={(event: any) => onOptionsChangeDebounced({ tooltip: { template: event.target.value } })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Checkbox\n          data-test=\"Choropleth.Editor.PopupEnabled\"\n          checked={options.popup.enabled}\n          onChange={event => onOptionsChange({ popup: { enabled: event.target.checked } })}>\n          {window.W_L.Show_popup}\n        </Checkbox>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <TextArea\n          label={<React.Fragment>{window.W_L.Popup_template} {templateFormatHint}</React.Fragment>}\n          data-test=\"Choropleth.Editor.PopupTemplate\"\n          disabled={!options.popup.enabled}\n          rows={4}\n          defaultValue={options.popup.template}\n          onChange={(event: any) => onOptionsChangeDebounced({ popup: { template: event.target.value } })}\n        />\n      </Section>\n    </div>\n  );\n}\n\nGeneralSettings.propTypes = EditorPropTypes;\n","import { isArray, isFinite, cloneDeep } from \"lodash\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport * as Grid from \"antd/lib/grid\";\nimport { Section, InputNumber, ControlLabel } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport useLoadGeoJson from \"../hooks/useLoadGeoJson\";\nimport { getGeoJsonBounds } from \"./utils\";\n\nexport default function BoundsSettings({ options, onOptionsChange }: any) {\n  // Bounds may be changed in editor or on preview (by drag/zoom map).\n  // Changes from preview does not come frequently (only when user release mouse button),\n  // but changes from editor should be debounced.\n  // Therefore this component has intermediate state to hold immediate user input,\n  // which is updated from `options.bounds` and by inputs immediately on user input,\n  // but `onOptionsChange` event is debounced and uses last value from internal state.\n\n  const [bounds, setBounds] = useState(options.bounds);\n  const [onOptionsChangeDebounced] = useDebouncedCallback(onOptionsChange, 200);\n\n  const [geoJson] = useLoadGeoJson(options.mapType);\n\n  // `options.bounds` could be empty only if user didn't edit bounds yet - through preview or in this editor.\n  // In this case we should keep empty bounds value because it tells renderer to fit map every time.\n  useEffect(() => {\n    if (options.bounds) {\n      setBounds(options.bounds);\n    } else {\n      const defaultBounds = getGeoJsonBounds(geoJson);\n      if (defaultBounds) {\n        setBounds(defaultBounds);\n      }\n    }\n  }, [options.bounds, geoJson]);\n\n  const updateBounds = useCallback(\n    (i, j, v) => {\n      v = parseFloat(v); // InputNumber may emit `null` and empty strings instead of numbers\n      if (isFinite(v)) {\n        const newBounds = cloneDeep(bounds);\n        newBounds[i][j] = v;\n        setBounds(newBounds);\n        onOptionsChangeDebounced({ bounds: newBounds });\n      }\n    },\n    [bounds, onOptionsChangeDebounced]\n  );\n\n  const boundsAvailable = isArray(bounds);\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'null | un... Remove this comment to see the full error message */}\n        <ControlLabel label={window.W_L.North_East_Latitude_and_Longitude}>\n          {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message */}\n          <Grid.Row gutter={15}>\n            <Grid.Col span={12}>\n              <InputNumber\n                disabled={!boundsAvailable}\n                value={boundsAvailable ? bounds[1][0] : undefined}\n                onChange={(value: any) => updateBounds(1, 0, value)}\n              />\n            </Grid.Col>\n            <Grid.Col span={12}>\n              <InputNumber\n                disabled={!boundsAvailable}\n                value={boundsAvailable ? bounds[1][1] : undefined}\n                onChange={(value: any) => updateBounds(1, 1, value)}\n              />\n            </Grid.Col>\n          </Grid.Row>\n        </ControlLabel>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'null | un... Remove this comment to see the full error message */}\n        <ControlLabel label={window.W_L.South_West_Latitude_and_Longitude}>\n          {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message */}\n          <Grid.Row gutter={15}>\n            <Grid.Col span={12}>\n              <InputNumber\n                disabled={!boundsAvailable}\n                value={boundsAvailable ? bounds[0][0] : undefined}\n                onChange={(value: any) => updateBounds(0, 0, value)}\n              />\n            </Grid.Col>\n            <Grid.Col span={12}>\n              <InputNumber\n                disabled={!boundsAvailable}\n                value={boundsAvailable ? bounds[0][1] : undefined}\n                onChange={(value: any) => updateBounds(0, 1, value)}\n              />\n            </Grid.Col>\n          </Grid.Row>\n        </ControlLabel>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nBoundsSettings.propTypes = EditorPropTypes;\n","import createTabbedEditor from \"@/components/chart/components/visualizations/editor/createTabbedEditor\";\n\nimport GeneralSettings from \"./GeneralSettings\";\nimport ColorsSettings from \"./ColorsSettings\";\nimport FormatSettings from \"./FormatSettings\";\nimport BoundsSettings from \"./BoundsSettings\";\n\nexport default createTabbedEditor([\n  { key: \"General\", title: window.W_L.general, component: GeneralSettings },\n  { key: \"Colors\", title: window.W_L.color, component: ColorsSettings },\n  { key: \"Format\", title: window.W_L.formatting, component: FormatSettings },\n  { key: \"Bounds\", title: window.W_L.border, component: BoundsSettings },\n]);\n","import getOptions from \"./getOptions\";\nimport Renderer from \"./Renderer\";\nimport Editor from \"./Editor\";\n\nexport default {\n  type: \"CHOROPLETH\",\n  name: \"地理分布图(Choropleth Map)\",\n  getOptions,\n  Renderer,\n  Editor,\n\n  defaultColumns: 3,\n  defaultRows: 8,\n  minColumns: 2,\n};\n","import { merge } from \"lodash\";\nimport ColorPalette from \"@/components/chart/visualizations/ColorPalette\";\n\nconst DEFAULT_OPTIONS = {\n  timeInterval: \"daily\",\n  mode: \"diagonal\",\n  dateColumn: \"date\",\n  stageColumn: \"day_number\",\n  totalColumn: \"total\",\n  valueColumn: \"value\",\n\n  showTooltips: true,\n  percentValues: true,\n\n  timeColumnTitle: \"Time\",\n  peopleColumnTitle: \"Users\",\n  stageColumnTitle: \"{{ @ }}\",\n\n  numberFormat: \"0,0[.]00\",\n  percentFormat: \"0.00%\",\n  noValuePlaceholder: \"-\",\n\n  colors: {\n    min: \"#ffffff\",\n    max: ColorPalette[\"Dark Blue\"],\n    steps: 7,\n  },\n};\n\nexport default function getOptions(options: any) {\n  return merge({}, DEFAULT_OPTIONS, options);\n}\n","import _ from \"lodash\";\nimport moment from \"moment\";\n\nconst momentInterval = {\n  weekly: \"weeks\",\n  daily: \"days\",\n  monthly: \"months\",\n};\n\nfunction groupData(sortedData: any) {\n  const result = {};\n\n  _.each(sortedData, item => {\n    const date = moment(item.date);\n    const groupKey = date.valueOf();\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    result[groupKey] = result[groupKey] || {\n      date,\n      total: parseInt(item.total, 10) || 0,\n      values: {},\n    };\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    result[groupKey].values[item.stage] = parseInt(item.value, 10) || null;\n  });\n\n  return _.values(result);\n}\n\nfunction prepareDiagonalData(sortedData: any, options: any) {\n  const timeInterval = options.timeInterval;\n  const grouped = groupData(sortedData);\n  const firstStage = _.min(_.map(sortedData, i => i.stage));\n  // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n  const stageCount = moment(_.last(grouped).date).diff(_.first(grouped).date, momentInterval[timeInterval]);\n  let lastStage = firstStage + stageCount;\n\n  let previousDate: any = null;\n\n  const data: any = [];\n  _.each(grouped, group => {\n    if (previousDate !== null) {\n      // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n      let diff = Math.abs(previousDate.diff(group.date, momentInterval[timeInterval]));\n      while (diff > 1) {\n        const row = [0];\n        for (let stage = firstStage; stage <= lastStage; stage += 1) {\n          // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n          row.push(group.values[stage] || 0);\n        }\n        data.push(row);\n        // It should be diagonal, so decrease count of stages for each next row\n        lastStage -= 1;\n        diff -= 1;\n      }\n    }\n\n    // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n    previousDate = group.date;\n\n    // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n    const row = [group.total];\n    for (let stage = firstStage; stage <= lastStage; stage += 1) {\n      // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n      row.push(group.values[stage] || 0);\n    }\n    // It should be diagonal, so decrease count of stages for each next row\n    lastStage -= 1;\n\n    data.push(row);\n  });\n\n  return data;\n}\n\nfunction prepareSimpleData(sortedData: any, options: any) {\n  const timeInterval = options.timeInterval;\n  const grouped = groupData(sortedData);\n  const stages = _.map(sortedData, i => i.stage);\n  const firstStage = _.min(stages);\n  const lastStage = _.max(stages);\n\n  let previousDate: any = null;\n\n  const data: any = [];\n  _.each(grouped, group => {\n    if (previousDate !== null) {\n      // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n      let diff = Math.abs(previousDate.diff(group.date, momentInterval[timeInterval]));\n      while (diff > 1) {\n        data.push([0]);\n        diff -= 1;\n      }\n    }\n\n    // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n    previousDate = group.date;\n\n    // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n    const row = [group.total];\n    for (let stage = firstStage; stage <= lastStage; stage += 1) {\n      // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n      row.push(group.values[stage]);\n    }\n\n    data.push(row);\n  });\n\n  return data;\n}\n\nfunction isDataValid(rawData: any, options: any) {\n  const columnNames = _.map(rawData.columns, c => c.name);\n  return (\n    rawData.rows.length > 0 &&\n    _.includes(columnNames, options.dateColumn) &&\n    _.includes(columnNames, options.stageColumn) &&\n    _.includes(columnNames, options.totalColumn) &&\n    _.includes(columnNames, options.valueColumn)\n  );\n}\n\nexport default function prepareData(rawData: any, options: any) {\n  if (!isDataValid(rawData, options)) {\n    return { data: [], initialDate: null };\n  }\n\n  rawData = _.map(rawData.rows, item => ({\n    date: item[options.dateColumn],\n    stage: parseInt(item[options.stageColumn], 10),\n    total: parseFloat(item[options.totalColumn]),\n    value: parseFloat(item[options.valueColumn]),\n  }));\n  const sortedData = _.sortBy(rawData, r => r.date + r.stage);\n  const initialDate = moment(sortedData[0].date).toDate();\n\n  let data;\n  switch (options.mode) {\n    case \"simple\":\n      data = prepareSimpleData(sortedData, options);\n      break;\n    default:\n      data = prepareDiagonalData(sortedData, options);\n      break;\n  }\n\n  return { data, initialDate };\n}\n","/*!\n * React port of Cornelius library (based on v0.1 released under the MIT license)\n * Original library: http://restorando.github.io/cornelius\n */\n\nimport { isNil, isFinite, map, extend, min, max } from \"lodash\";\nimport moment from \"moment\";\nimport chroma from \"chroma-js\";\nimport React, { useMemo } from \"react\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport { createNumberFormatter, formatSimpleTemplate } from \"@/components/chart/lib/value-format\";\nimport chooseTextColorForBackground from \"@/components/chart/lib/chooseTextColorForBackground\";\n\nimport \"./cornelius.less\";\n\nconst momentInterval = {\n  daily: \"days\",\n  weekly: \"weeks\",\n  monthly: \"months\",\n  yearly: \"years\",\n};\n\nconst timeLabelFormats = {\n  daily: \"MMMM D, YYYY\",\n  weekly: \"[Week of] MMM D, YYYY\",\n  monthly: \"MMMM YYYY\",\n  yearly: \"YYYY\",\n};\n\nconst defaultOptions = {\n  initialDate: null,\n  timeInterval: \"monthly\",\n  noValuePlaceholder: \"-\",\n  rawNumberOnHover: true,\n  displayAbsoluteValues: false,\n  initialIntervalNumber: 1,\n  maxColumns: Infinity,\n\n  title: null,\n  timeColumnTitle: \"Time\",\n  peopleColumnTitle: \"People\",\n  stageColumnTitle: \"{{ @ }}\",\n  numberFormat: \"0,0[.]00\",\n  percentFormat: \"0.00%\",\n  timeLabelFormat: timeLabelFormats.monthly,\n\n  colors: {\n    min: \"#ffffff\",\n    max: \"#041d66\",\n    steps: 7,\n  },\n};\n\nfunction prepareOptions(options: any) {\n  options = extend({}, defaultOptions, options, {\n    initialDate: moment(options.initialDate),\n    colors: extend({}, defaultOptions.colors, options.colors),\n  });\n\n  return extend(options, {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    timeLabelFormat: timeLabelFormats[options.timeInterval],\n    formatNumber: createNumberFormatter(options.numberFormat),\n    formatPercent: createNumberFormatter(options.percentFormat),\n    getColorForValue: chroma\n      .scale([options.colors.min, options.colors.max])\n      .mode(\"hsl\")\n      .domain([0, 100])\n      .classes(options.colors.steps),\n  });\n}\n\nfunction isLightColor(backgroundColor: any) {\n  backgroundColor = chroma(backgroundColor);\n  const white = \"#ffffff\";\n  const black = \"#000000\";\n  return chroma.contrast(backgroundColor, white) < chroma.contrast(backgroundColor, black);\n}\n\nfunction formatStageTitle(options: any, index: any) {\n  return formatSimpleTemplate(options.stageColumnTitle, { \"@\": options.initialIntervalNumber - 1 + index });\n}\n\nfunction formatTimeLabel(options: any, offset: any) {\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  const interval = momentInterval[options.timeInterval];\n  return options.initialDate\n    .clone()\n    .add(offset, interval)\n    .format(options.timeLabelFormat);\n}\n\nfunction CorneliusHeader({ options, maxRowLength }: any) {\n  // eslint-disable-line react/prop-types\n  const cells = [];\n  for (let i = 1; i < maxRowLength; i += 1) {\n    cells.push(\n      <th key={`col${i}`} className=\"cornelius-stage\">\n        {formatStageTitle(options, i)}\n      </th>\n    );\n  }\n\n  return (\n    <tr>\n      <th className=\"cornelius-time\">{options.timeColumnTitle}</th>\n      <th className=\"cornelius-people\">{options.peopleColumnTitle}</th>\n      {cells}\n    </tr>\n  );\n}\n\nfunction CorneliusRow({ options, data, index, maxRowLength }: any) {\n  // eslint-disable-line react/prop-types\n  const baseValue = data[0] || 0;\n\n  const cells = [];\n  for (let i = 1; i < maxRowLength; i += 1) {\n    const value = data[i];\n    const percentageValue = isFinite(value / baseValue) ? (value / baseValue) * 100 : null;\n    const cellProps = { key: `col${i}` };\n\n    if (isNil(percentageValue)) {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'className' does not exist on type '{ key... Remove this comment to see the full error message\n      cellProps.className = \"cornelius-empty\";\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'children' does not exist on type '{ key:... Remove this comment to see the full error message\n      cellProps.children = options.noValuePlaceholder;\n    } else {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'className' does not exist on type '{ key... Remove this comment to see the full error message\n      cellProps.className = options.displayAbsoluteValues ? \"cornelius-absolute\" : \"cornelius-percentage\";\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'children' does not exist on type '{ key:... Remove this comment to see the full error message\n      cellProps.children = options.displayAbsoluteValues\n        ? options.formatNumber(value)\n        : options.formatPercent(percentageValue);\n\n      const backgroundColor = options.getColorForValue(percentageValue);\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'style' does not exist on type '{ key: st... Remove this comment to see the full error message\n      cellProps.style = {\n        backgroundColor,\n        color: chooseTextColorForBackground(backgroundColor),\n      };\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'style' does not exist on type '{ key: st... Remove this comment to see the full error message\n      if (isLightColor(cellProps.style.color)) {\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'className' does not exist on type '{ key... Remove this comment to see the full error message\n        cellProps.className += \" cornelius-white-text\";\n      }\n\n      if (options.rawNumberOnHover && !options.displayAbsoluteValues) {\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'children' does not exist on type '{ key:... Remove this comment to see the full error message\n        cellProps.children = (\n          <Tooltip title={options.formatNumber(value)} mouseEnterDelay={0} mouseLeaveDelay={0}>\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'children' does not exist on type '{ key:... Remove this comment to see the full error message */}\n            <div>{cellProps.children}</div>\n          </Tooltip>\n        );\n      }\n    }\n\n    cells.push(<td {...cellProps} />);\n  }\n\n  return (\n    <tr>\n      <td className=\"cornelius-label\">{formatTimeLabel(options, index)}</td>\n      <td className=\"cornelius-people\">{options.formatNumber(baseValue)}</td>\n      {cells}\n    </tr>\n  );\n}\n\ntype OwnCorneliusProps = {\n  data?: number[][];\n  options?: {\n    initialDate: any; // TODO: PropTypes.instanceOf(Date)\n    timeInterval?: \"daily\" | \"weekly\" | \"monthly\" | \"yearly\";\n    noValuePlaceholder?: string;\n    rawNumberOnHover?: boolean;\n    displayAbsoluteValues?: boolean;\n    initialIntervalNumber?: number;\n    maxColumns?: number;\n    title?: string;\n    timeColumnTitle?: string;\n    peopleColumnTitle?: string;\n    stageColumnTitle?: string;\n    numberFormat?: string;\n    percentFormat?: string;\n    timeLabelFormat?: string;\n    colors?: {\n      min?: string;\n      max?: string;\n      steps?: number;\n    };\n  };\n};\n\ntype CorneliusProps = OwnCorneliusProps & typeof Cornelius.defaultProps;\n\nexport default function Cornelius({ data, options }: CorneliusProps) {\n  options = useMemo(() => prepareOptions(options), [options]);\n\n  const maxRowLength = useMemo(\n    () =>\n      min([\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'length' does not exist on type 'number'.\n        max(map(data, d => d.length)) || 0,\n        // @ts-expect-error ts-migrate(2532) FIXME: Object is possibly 'undefined'.\n        options.maxColumns + 1, // each row includes totals, but `maxColumns` is only for stage columns\n      ]),\n    [data, options.maxColumns]\n  );\n\n  if (data.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"cornelius-container\">\n      {options.title && <div className=\"cornelius-title\">{options.title}</div>}\n\n      <table className=\"cornelius-table\">\n        <thead>\n          <CorneliusHeader options={options} maxRowLength={maxRowLength} />\n        </thead>\n        <tbody>\n          {map(data, (row, index) => (\n            <CorneliusRow key={`row${index}`} options={options} data={row} index={index} maxRowLength={maxRowLength} />\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nCornelius.defaultProps = {\n  data: [],\n  options: {},\n};\n","import React, { useMemo } from \"react\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport prepareData from \"./prepareData\";\nimport \"./renderer.less\";\n\nimport Cornelius from \"./Cornelius\";\n\nexport default function Renderer({ data, options }: any) {\n  const { data: cohortData, initialDate } = useMemo(() => prepareData(data, options), [data, options]);\n\n  const corneliusOptions = useMemo(\n    () => ({\n      initialDate,\n      timeInterval: options.timeInterval,\n\n      noValuePlaceholder: options.noValuePlaceholder,\n      rawNumberOnHover: options.showTooltips,\n      displayAbsoluteValues: !options.percentValues,\n\n      timeColumnTitle: options.timeColumnTitle,\n      peopleColumnTitle: options.peopleColumnTitle,\n      stageColumnTitle: options.stageColumnTitle,\n\n      numberFormat: options.numberFormat,\n      percentFormat: options.percentFormat,\n\n      colors: options.colors,\n    }),\n    [options, initialDate]\n  );\n\n  if (cohortData.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"cohort-visualization-container\">\n      <Cornelius data={cohortData} options={corneliusOptions} />\n    </div>\n  );\n}\n\nRenderer.propTypes = RendererPropTypes;\n","import { map } from \"lodash\";\nimport React from \"react\";\nimport { Section, Select } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nexport default function ColumnsSettings({ options, data, onOptionsChange }: any) {\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          layout=\"horizontal\"\n          label=\"Date (Bucket)\"\n          data-test=\"Cohort.DateColumn\"\n          value={options.dateColumn}\n          onChange={(dateColumn: any) => onOptionsChange({ dateColumn })}>\n          {map(data.columns, ({ name }) => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={name} data-test={\"Cohort.DateColumn.\" + name}>\n              {name}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          layout=\"horizontal\"\n          label={window.W_L.Steps}\n          data-test=\"Cohort.StageColumn\"\n          value={options.stageColumn}\n          onChange={(stageColumn: any) => onOptionsChange({ stageColumn })}>\n          {map(data.columns, ({ name }) => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={name} data-test={\"Cohort.StageColumn.\" + name}>\n              {name}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          layout=\"horizontal\"\n          label=\"Bucket Population Size\"\n          data-test=\"Cohort.TotalColumn\"\n          value={options.totalColumn}\n          onChange={(totalColumn: any) => onOptionsChange({ totalColumn })}>\n          {map(data.columns, ({ name }) => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={name} data-test={\"Cohort.TotalColumn.\" + name}>\n              {name}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          layout=\"horizontal\"\n          label={window.W_L.Stage_Value}\n          data-test=\"Cohort.ValueColumn\"\n          value={options.valueColumn}\n          onChange={(valueColumn: any) => onOptionsChange({ valueColumn })}>\n          {map(data.columns, ({ name }) => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={name} data-test={\"Cohort.ValueColumn.\" + name}>\n              {name}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nColumnsSettings.propTypes = EditorPropTypes;\n","import { map } from \"lodash\";\nimport React from \"react\";\nimport { Section, Select } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nconst CohortTimeIntervals = {\n  daily: window.W_L.Daily,\n  weekly: window.W_L.Weekly,\n  monthly: window.W_L.Monthly,\n};\n\nconst CohortModes = {\n  diagonal: window.W_L.Fill_gaps_with_zeros,\n  simple: window.W_L.Show_data_as_is,\n};\n\nexport default function OptionsSettings({ options, onOptionsChange }: any) {\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          layout=\"horizontal\"\n          label={window.W_L.Time_Interval}\n          data-test=\"Cohort.TimeInterval\"\n          value={options.timeInterval}\n          onChange={(timeInterval: any) => onOptionsChange({ timeInterval })}>\n          {map(CohortTimeIntervals, (name, value) => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={value} data-test={\"Cohort.TimeInterval.\" + value}>\n              {name}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          layout=\"horizontal\"\n          label={window.W_L.Mode}\n          data-test=\"Cohort.Mode\"\n          value={options.mode}\n          onChange={(mode: any) => onOptionsChange({ mode })}>\n          {map(CohortModes, (name, value) => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={value} data-test={\"Cohort.Mode.\" + value}>\n              {name}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nOptionsSettings.propTypes = EditorPropTypes;\n","import { isFinite } from \"lodash\";\nimport React from \"react\";\nimport { Section, ColorPicker, InputNumber } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport DefaultColorPalette from \"@/components/chart/visualizations/ColorPalette\";\n\nconst ColorPalette = {\n  White: \"#FFFFFF\",\n  ...DefaultColorPalette,\n};\n\nconst minSteps = 3;\nconst maxSteps = 20;\n\nfunction validateSteps(value: any) {\n  value = isFinite(value) ? value : parseInt(value, 10);\n  value = isFinite(value) ? value : 0;\n  return Math.max(minSteps, Math.min(value, maxSteps));\n}\n\nexport default function ColorsSettings({ options, onOptionsChange }: any) {\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <ColorPicker\n          layout=\"horizontal\"\n          label={window.W_L.min_color}\n          presetColors={ColorPalette}\n          interactive\n          color={options.colors.min}\n          onChange={(min: any) => onOptionsChange({ colors: { min } })}\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'Label' does not exist on type '({ classN... Remove this comment to see the full error message\n          addonAfter={<ColorPicker.Label color={options.colors.min} presetColors={ColorPalette} />}\n        />\n      </Section>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <ColorPicker\n          layout=\"horizontal\"\n          label={window.W_L.max_color}\n          presetColors={ColorPalette}\n          interactive\n          color={options.colors.max}\n          onChange={(max: any) => onOptionsChange({ colors: { max } })}\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'Label' does not exist on type '({ classN... Remove this comment to see the full error message\n          addonAfter={<ColorPicker.Label color={options.colors.max} presetColors={ColorPalette} />}\n        />\n      </Section>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <InputNumber\n          layout=\"horizontal\"\n          label={window.W_L.Steps}\n          min={minSteps}\n          max={maxSteps}\n          value={options.colors.steps}\n          onChange={(value: any) => onOptionsChange({ colors: { steps: validateSteps(value) } })}\n        />\n      </Section>\n    </React.Fragment>\n  );\n}\n\nColorsSettings.propTypes = EditorPropTypes;\n","import React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Section, Input, Checkbox, ContextHelp } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nexport default function AppearanceSettings({ options, onOptionsChange }: any) {\n  const [debouncedOnOptionsChange] = useDebouncedCallback(onOptionsChange, 200);\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          layout=\"horizontal\"\n          label={window.W_L.Time_Column_Title}\n          defaultValue={options.timeColumnTitle}\n          onChange={(e: any) => debouncedOnOptionsChange({ timeColumnTitle: e.target.value })}\n        />\n      </Section>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          layout=\"horizontal\"\n          label={window.W_L.People_Column_Title}\n          defaultValue={options.peopleColumnTitle}\n          onChange={(e: any) => debouncedOnOptionsChange({ peopleColumnTitle: e.target.value })}\n        />\n      </Section>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          layout=\"horizontal\"\n          label={\n            <React.Fragment>\n              {window.W_L.Stage_Column_Title}\n              <ContextHelp placement=\"topRight\" arrowPointAtCenter>\n                {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message */}\n                <div>\n                  Use <code>{\"{{ @ }}\"}</code> to insert a stage number\n                </div>\n              </ContextHelp>\n            </React.Fragment>\n          }\n          defaultValue={options.stageColumnTitle}\n          onChange={(e: any) => debouncedOnOptionsChange({ stageColumnTitle: e.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          layout=\"horizontal\"\n          label={\n            <React.Fragment>\n              {window.W_L.Number_format}\n              <ContextHelp.NumberFormatSpecs />\n            </React.Fragment>\n          }\n          defaultValue={options.numberFormat}\n          onChange={(e: any) => debouncedOnOptionsChange({ numberFormat: e.target.value })}\n        />\n      </Section>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          layout=\"horizontal\"\n          label={\n            <React.Fragment>\n              {window.W_L.Percent_Values_Format}\n              <ContextHelp.NumberFormatSpecs />\n            </React.Fragment>\n          }\n          defaultValue={options.percentFormat}\n          onChange={(e: any) => debouncedOnOptionsChange({ percentFormat: e.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          layout=\"horizontal\"\n          label={window.W_L.No_Value_Placeholder}\n          defaultValue={options.noValuePlaceholder}\n          onChange={(e: any) => debouncedOnOptionsChange({ noValuePlaceholder: e.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Checkbox\n          defaultChecked={options.showTooltips}\n          onChange={event => onOptionsChange({ showTooltips: event.target.checked })}>\n          {window.W_L.Show_Tooltips}\n        </Checkbox>\n      </Section>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Checkbox\n          defaultChecked={options.percentValues}\n          onChange={event => onOptionsChange({ percentValues: event.target.checked })}>\n          {window.W_L.Normalize_values_to_percentage}\n        </Checkbox>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nAppearanceSettings.propTypes = EditorPropTypes;\n","import createTabbedEditor from \"@/components/chart/components/visualizations/editor/createTabbedEditor\";\n\nimport ColumnsSettings from \"./ColumnsSettings\";\nimport OptionsSettings from \"./OptionsSettings\";\nimport ColorsSettings from \"./ColorsSettings\";\nimport AppearanceSettings from \"./AppearanceSettings\";\n\nexport default createTabbedEditor([\n  { key: \"Columns\", title: window.W_L.column, component: ColumnsSettings },\n  { key: \"Options\", title: window.W_L.option, component: OptionsSettings },\n  { key: \"Colors\", title: window.W_L.color, component: ColorsSettings },\n  { key: \"Appearance\", title: window.W_L.exterior, component: AppearanceSettings },\n]);\n","import getOptions from \"./getOptions\";\nimport Renderer from \"./Renderer\";\nimport Editor from \"./Editor\";\n\nexport default {\n  type: \"COHORT\",\n  name: \"同期群分析(Cohort)\",\n  getOptions,\n  Renderer,\n  Editor,\n\n  autoHeight: true,\n  defaultRows: 8,\n};\n","import { isNumber, isFinite, toString } from \"lodash\";\nimport numeral from \"numeral\";\n\n// TODO: allow user to specify number format string instead of delimiters only\n// It will allow to remove this function (move all that weird formatting logic to a migration\n// that will set number format for all existing counter visualization)\nfunction numberFormat(value: any, decimalPoints: any, decimalDelimiter: any, thousandsDelimiter: any) {\n  // Temporarily update locale data (restore defaults after formatting)\n  const locale = numeral.localeData();\n  const savedDelimiters = locale.delimiters;\n\n  // Mimic old behavior - AngularJS `number` filter defaults:\n  // - `,` as thousands delimiter\n  // - `.` as decimal delimiter\n  // - three decimal points\n  locale.delimiters = {\n    thousands: \",\",\n    decimal: \".\",\n  };\n  let formatString = \"0,0.000\";\n  if ((Number.isFinite(decimalPoints) && decimalPoints >= 0) || decimalDelimiter || thousandsDelimiter) {\n    locale.delimiters = {\n      thousands: thousandsDelimiter,\n      decimal: decimalDelimiter || \".\",\n    };\n\n    formatString = \"0,0\";\n    if (decimalPoints > 0) {\n      formatString += \".\";\n      while (decimalPoints > 0) {\n        formatString += \"0\";\n        decimalPoints -= 1;\n      }\n    }\n  }\n  const result = numeral(value).format(formatString);\n\n  locale.delimiters = savedDelimiters;\n  return result;\n}\n\n// 0 - special case, use first record\n// 1..N - 1-based record number from beginning (wraps if greater than dataset size)\n// -1..-N - 1-based record number from end (wraps if greater than dataset size)\nfunction getRowNumber(index: any, rowsCount: any) {\n  index = parseInt(index, 10) || 0;\n  if (index === 0) {\n    return index;\n  }\n  const wrappedIndex = (Math.abs(index) - 1) % rowsCount;\n  return index > 0 ? wrappedIndex : rowsCount - wrappedIndex - 1;\n}\n\nfunction formatValue(value: any, { stringPrefix, stringSuffix, stringDecimal, stringDecChar, stringThouSep }: any) {\n  if (isNumber(value)) {\n    value = numberFormat(value, stringDecimal, stringDecChar, stringThouSep);\n    return toString(stringPrefix) + value + toString(stringSuffix);\n  }\n  return toString(value);\n}\n\nfunction formatTooltip(value: any, formatString: any) {\n  if (isNumber(value)) {\n    return numeral(value).format(formatString);\n  }\n  return toString(value);\n}\n\nexport function getCounterData(rows: any, options: any, visualizationName: any) {\n  const result = {};\n  const rowsCount = rows.length;\n\n  if (rowsCount > 0 || options.countRow) {\n    const counterColName = options.counterColName;\n    const targetColName = options.targetColName;\n\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'counterLabel' does not exist on type '{}... Remove this comment to see the full error message\n    result.counterLabel = options.counterLabel || visualizationName;\n\n    if (options.countRow) {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'counterValue' does not exist on type '{}... Remove this comment to see the full error message\n      result.counterValue = rowsCount;\n    } else if (counterColName) {\n      const rowNumber = getRowNumber(options.rowNumber, rowsCount);\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'counterValue' does not exist on type '{}... Remove this comment to see the full error message\n      result.counterValue = rows[rowNumber][counterColName];\n    }\n\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'showTrend' does not exist on type '{}'.\n    result.showTrend = false;\n\n    if (targetColName) {\n      const targetRowNumber = getRowNumber(options.targetRowNumber, rowsCount);\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'targetValue' does not exist on type '{}'... Remove this comment to see the full error message\n      result.targetValue = rows[targetRowNumber][targetColName];\n\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'counterValue' does not exist on type '{}... Remove this comment to see the full error message\n      if (Number.isFinite(result.counterValue) && isFinite(result.targetValue)) {\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'counterValue' does not exist on type '{}... Remove this comment to see the full error message\n        const delta = result.counterValue - result.targetValue;\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'showTrend' does not exist on type '{}'.\n        result.showTrend = true;\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'trendPositive' does not exist on type '{... Remove this comment to see the full error message\n        result.trendPositive = delta >= 0;\n      }\n    } else {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'targetValue' does not exist on type '{}'... Remove this comment to see the full error message\n      result.targetValue = null;\n    }\n\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'counterValueTooltip' does not exist on t... Remove this comment to see the full error message\n    result.counterValueTooltip = formatTooltip(result.counterValue, options.tooltipFormat);\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'targetValueTooltip' does not exist on ty... Remove this comment to see the full error message\n    result.targetValueTooltip = formatTooltip(result.targetValue, options.tooltipFormat);\n\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'counterValue' does not exist on type '{}... Remove this comment to see the full error message\n    result.counterValue = formatValue(result.counterValue, options);\n\n    if (options.formatTargetValue) {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'targetValue' does not exist on type '{}'... Remove this comment to see the full error message\n      result.targetValue = formatValue(result.targetValue, options);\n    } else {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'targetValue' does not exist on type '{}'... Remove this comment to see the full error message\n      if (isFinite(result.targetValue)) {\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'targetValue' does not exist on type '{}'... Remove this comment to see the full error message\n        result.targetValue = numeral(result.targetValue).format(\"0[.]00[0]\");\n      }\n    }\n  }\n\n  return result;\n}\n\nexport function isValueNumber(rows: any, options: any) {\n  if (options.countRow) {\n    return true; // array length is always a number\n  }\n\n  const rowsCount = rows.length;\n  if (rowsCount > 0) {\n    const rowNumber = getRowNumber(options.rowNumber, rowsCount);\n    const counterColName = options.counterColName;\n    if (counterColName) {\n      return isNumber(rows[rowNumber][counterColName]);\n    }\n  }\n\n  return false;\n}\n","import { isFinite } from \"lodash\";\nimport React, { useState, useEffect } from \"react\";\nimport cx from \"classnames\";\nimport resizeObserver from \"@/services/resizeObserver\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport { getCounterData } from \"./utils\";\n\nimport \"./render.less\";\n\nfunction getCounterStyles(scale: any) {\n  return {\n    msTransform: `scale(${scale})`,\n    MozTransform: `scale(${scale})`,\n    WebkitTransform: `scale(${scale})`,\n    transform: `scale(${scale})`,\n  };\n}\n\nfunction getCounterScale(container: any) {\n  const inner = container.firstChild;\n  const scale = Math.min(container.offsetWidth / inner.offsetWidth, container.offsetHeight / inner.offsetHeight);\n  return Number(isFinite(scale) ? scale : 1).toFixed(2); // keep only two decimal places\n}\n\nexport default function Renderer({ data, options, visualizationName }: any) {\n  const [scale, setScale] = useState(\"1.00\");\n  const [container, setContainer] = useState(null);\n\n  useEffect(() => {\n    if (container) {\n      const unwatch = resizeObserver(container, () => {\n        setScale(getCounterScale(container));\n      });\n      return unwatch;\n    }\n  }, [container]);\n\n  useEffect(() => {\n    if (container) {\n      // update scaling when options or data change (new formatting, values, etc.\n      // may change inner container dimensions which will not be tracked by `resizeObserver`);\n      setScale(getCounterScale(container));\n    }\n  }, [data, options, container]);\n\n  const {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'showTrend' does not exist on type '{}'.\n    showTrend,\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'trendPositive' does not exist on type '{... Remove this comment to see the full error message\n    trendPositive,\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'counterValue' does not exist on type '{}... Remove this comment to see the full error message\n    counterValue,\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'counterValueTooltip' does not exist on t... Remove this comment to see the full error message\n    counterValueTooltip,\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'targetValue' does not exist on type '{}'... Remove this comment to see the full error message\n    targetValue,\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'targetValueTooltip' does not exist on ty... Remove this comment to see the full error message\n    targetValueTooltip,\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'counterLabel' does not exist on type '{}... Remove this comment to see the full error message\n    counterLabel,\n  } = getCounterData(data.rows, options, visualizationName);\n  return (\n    <div\n      className={cx(\"counter-visualization-container\", {\n        \"trend-positive\": showTrend && trendPositive,\n        \"trend-negative\": showTrend && !trendPositive,\n      })}>\n      {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'Dispatch<SetStateAction<null>>' is not assig... Remove this comment to see the full error message */}\n      <div className=\"counter-visualization-content\" ref={setContainer}>\n        <div style={getCounterStyles(scale)}>\n          <div className=\"counter-visualization-value\" title={counterValueTooltip}>\n            {counterValue}\n          </div>\n          {targetValue && (\n            <div className=\"counter-visualization-target\" title={targetValueTooltip}>\n              ({targetValue})\n            </div>\n          )}\n          <div className=\"counter-visualization-label\">{counterLabel}</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nRenderer.propTypes = RendererPropTypes;\n","import { map } from \"lodash\";\nimport React from \"react\";\nimport { Section, Select, Input, InputNumber, Switch } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nexport default function GeneralSettings({ options, data, visualizationName, onOptionsChange }: any) {\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          layout=\"horizontal\"\n          label=\"Counter Label\"\n          data-test=\"Counter.General.Label\"\n          defaultValue={options.counterLabel}\n          placeholder={visualizationName}\n          onChange={(e: any) => onOptionsChange({ counterLabel: e.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          layout=\"horizontal\"\n          label=\"Counter Value Column Name\"\n          data-test=\"Counter.General.ValueColumn\"\n          defaultValue={options.counterColName}\n          disabled={options.countRow}\n          onChange={(counterColName: any) => onOptionsChange({ counterColName })}>\n          {map(data.columns, col => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={col.name} data-test={\"Counter.General.ValueColumn.\" + col.name}>\n              {col.name}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <InputNumber\n          layout=\"horizontal\"\n          label=\"Counter Value Row Number\"\n          data-test=\"Counter.General.ValueRowNumber\"\n          defaultValue={options.rowNumber}\n          disabled={options.countRow}\n          onChange={(rowNumber: any) => onOptionsChange({ rowNumber })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          layout=\"horizontal\"\n          label=\"Target Value Column Name\"\n          data-test=\"Counter.General.TargetValueColumn\"\n          defaultValue={options.targetColName}\n          onChange={(targetColName: any) => onOptionsChange({ targetColName })}>\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option value=\"\">No target value</Select.Option>\n          {map(data.columns, col => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={col.name} data-test={\"Counter.General.TargetValueColumn.\" + col.name}>\n              {col.name}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <InputNumber\n          layout=\"horizontal\"\n          label=\"Target Value Row Number\"\n          data-test=\"Counter.General.TargetValueRowNumber\"\n          defaultValue={options.targetRowNumber}\n          onChange={(targetRowNumber: any) => onOptionsChange({ targetRowNumber })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n        <Switch\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          data-test=\"Counter.General.CountRows\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          defaultChecked={options.countRow}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(countRow: any) => any' is not assignable to... Remove this comment to see the full error message\n          onChange={(countRow: any) => onOptionsChange({ countRow })}>\n          Count Rows\n        </Switch>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nGeneralSettings.propTypes = EditorPropTypes;\n","import React from \"react\";\nimport { Section, Input, InputNumber, Switch } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport { isValueNumber } from \"../utils\";\n\nexport default function FormatSettings({ options, data, onOptionsChange }: any) {\n  const inputsEnabled = isValueNumber(data.rows, options);\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <InputNumber\n          layout=\"horizontal\"\n          label=\"Formatting Decimal Place\"\n          data-test=\"Counter.Formatting.DecimalPlace\"\n          defaultValue={options.stringDecimal}\n          disabled={!inputsEnabled}\n          onChange={(stringDecimal: any) => onOptionsChange({ stringDecimal })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          layout=\"horizontal\"\n          label=\"Formatting Decimal Character\"\n          data-test=\"Counter.Formatting.DecimalCharacter\"\n          defaultValue={options.stringDecChar}\n          disabled={!inputsEnabled}\n          onChange={(e: any) => onOptionsChange({ stringDecChar: e.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          layout=\"horizontal\"\n          label=\"Formatting Thousands Separator\"\n          data-test=\"Counter.Formatting.ThousandsSeparator\"\n          defaultValue={options.stringThouSep}\n          disabled={!inputsEnabled}\n          onChange={(e: any) => onOptionsChange({ stringThouSep: e.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          layout=\"horizontal\"\n          label=\"Formatting String Prefix\"\n          data-test=\"Counter.Formatting.StringPrefix\"\n          defaultValue={options.stringPrefix}\n          disabled={!inputsEnabled}\n          onChange={(e: any) => onOptionsChange({ stringPrefix: e.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          layout=\"horizontal\"\n          label=\"Formatting String Suffix\"\n          data-test=\"Counter.Formatting.StringSuffix\"\n          defaultValue={options.stringSuffix}\n          disabled={!inputsEnabled}\n          onChange={(e: any) => onOptionsChange({ stringSuffix: e.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n        <Switch\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          data-test=\"Counter.Formatting.FormatTargetValue\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          defaultChecked={options.formatTargetValue}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(formatTargetValue: any) => any' is not assi... Remove this comment to see the full error message\n          onChange={(formatTargetValue: any) => onOptionsChange({ formatTargetValue })}>\n          Format Target Value\n        </Switch>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nFormatSettings.propTypes = EditorPropTypes;\n","import createTabbedEditor from \"@/components/chart/components/visualizations/editor/createTabbedEditor\";\n\nimport GeneralSettings from \"./GeneralSettings\";\nimport FormatSettings from \"./FormatSettings\";\n\nexport default createTabbedEditor([\n  { key: \"General\", title: window.W_L.general, component: GeneralSettings },\n  { key: \"Format\", title: window.W_L.formatting, component: FormatSettings },\n]);\n","import Renderer from \"./Renderer\";\nimport Editor from \"./Editor\";\n\nconst DEFAULT_OPTIONS = {\n  counterLabel: \"\",\n  counterColName: \"counter\",\n  rowNumber: 1,\n  targetRowNumber: 1,\n  stringDecimal: 0,\n  stringDecChar: \".\",\n  stringThouSep: \",\",\n  tooltipFormat: \"0,0.000\", // TODO: Show in editor\n};\n\nexport default {\n  type: \"COUNTER\",\n  name: \"计数器(Counter)\",\n  getOptions: (options: any) => ({\n    ...DEFAULT_OPTIONS,\n    ...options,\n  }),\n  Renderer,\n  Editor,\n\n  defaultColumns: 2,\n  defaultRows: 5,\n};\n","import React, { useState } from \"react\";\nimport { map, mapValues, keyBy } from \"lodash\";\nimport moment from \"moment\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport { visualizationsSettings } from \"@/components/chart/visualizations/visualizationsSettings\";\nimport Descriptions from \"antd/lib/descriptions\";\nimport Pagination from \"antd/lib/pagination\";\n\nimport \"./details.less\";\n\nfunction renderValue(value: any, type: any) {\n  const formats = {\n    date: visualizationsSettings.dateFormat,\n    datetime: visualizationsSettings.dateTimeFormat,\n  };\n\n  if (type === \"date\" || type === \"datetime\") {\n    if (moment.isMoment(value)) {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      return value.format(formats[type]);\n    }\n  }\n\n  return \"\" + value;\n}\n\nexport default function DetailsRenderer({ data }: any) {\n  const [page, setPage] = useState(0);\n\n  if (!data || !data.rows || data.rows.length === 0) {\n    return null;\n  }\n\n  const types = mapValues(keyBy(data.columns, \"name\"), \"type\");\n\n  // We use columsn to maintain order of columns in the view.\n  const columns = data.columns.map((column: any) => column.name);\n  const row = data.rows[page];\n\n  return (\n    <div className=\"details-viz\">\n      <Descriptions size=\"small\" column={1} bordered>\n        {map(columns, key => (\n          <Descriptions.Item key={key} label={key}>\n            {renderValue(row[key], types[key])}\n          </Descriptions.Item>\n        ))}\n      </Descriptions>\n      {data.rows.length > 1 && (\n        <div className=\"paginator-container\">\n          <Pagination\n            showSizeChanger={false}\n            current={page + 1}\n            defaultPageSize={1}\n            total={data.rows.length}\n            onChange={p => setPage(p - 1)}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\nDetailsRenderer.propTypes = RendererPropTypes;\n","import DetailsRenderer from \"./DetailsRenderer\";\n\nconst DEFAULT_OPTIONS = {};\n\nexport default {\n  type: \"DETAILS\",\n  name: \"<记录明细显示>\",\n  getOptions: (options: any) => ({\n    ...DEFAULT_OPTIONS,\n    ...options,\n  }),\n  Renderer: DetailsRenderer,\n  defaultColumns: 2,\n  defaultRows: 2,\n};\n","import { isFinite, map, merge, includes } from \"lodash\";\n\nconst DEFAULT_OPTIONS = {\n  stepCol: { colName: null, displayAs: \"Steps\" },\n  valueCol: { colName: null, displayAs: \"Value\" },\n  autoSort: true,\n  sortKeyCol: { colName: null, reverse: false },\n  itemsLimit: 100,\n  percentValuesRange: { min: 0.01, max: 1000.0 },\n  numberFormat: \"0,0[.]00\",\n  percentFormat: \"0[.]00%\",\n};\n\nexport default function getOptions(options: any, { columns }: any) {\n  options = merge({}, DEFAULT_OPTIONS, options);\n\n  // Validate\n  const availableColumns = map(columns, c => c.name);\n  if (!includes(availableColumns, options.stepCol.colName)) {\n    options.stepCol.colName = null;\n  }\n  if (!includes(availableColumns, options.valueCol.colName)) {\n    options.valueCol.colName = null;\n  }\n  if (!includes(availableColumns, options.sortKeyCol.colName)) {\n    options.sortKeyCol.colName = null;\n  }\n\n  if (!isFinite(options.itemsLimit)) {\n    options.itemsLimit = DEFAULT_OPTIONS.itemsLimit;\n  }\n  if (options.itemsLimit < 2) {\n    options.itemsLimit = 2;\n  }\n\n  if (options.autoSort) {\n    options.sortKeyCol.colName = options.valueCol.colName;\n    options.sortKeyCol.reverse = true;\n  }\n\n  return options;\n}\n","import { map, maxBy, sortBy, toString } from \"lodash\";\nimport moment from \"moment\";\nimport { visualizationsSettings } from \"@/components/chart/visualizations/visualizationsSettings\";\n\nfunction stepValueToString(value: any) {\n  if (moment.isMoment(value)) {\n    const format = visualizationsSettings.dateTimeFormat || \"DD/MM/YYYY HH:mm\";\n    return value.format(format);\n  }\n  return toString(value);\n}\n\nexport default function prepareData(rows: any, options: any) {\n  if (rows.length === 0 || !options.stepCol.colName || !options.valueCol.colName) {\n    return [];\n  }\n\n  rows = [...rows];\n  if (options.sortKeyCol.colName) {\n    rows = sortBy(rows, options.sortKeyCol.colName);\n  }\n  if (options.sortKeyCol.reverse) {\n    rows = rows.reverse();\n  }\n\n  const data = map(rows, row => ({\n    step: stepValueToString(row[options.stepCol.colName]),\n    value: parseFloat(row[options.valueCol.colName]) || 0.0,\n  }));\n\n  // @ts-expect-error ts-migrate(2532) FIXME: Object is possibly 'undefined'.\n  const maxVal = maxBy(data, d => d.value).value;\n  data.forEach((d, i) => {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'pctMax' does not exist on type '{ step: ... Remove this comment to see the full error message\n    d.pctMax = (d.value / maxVal) * 100.0;\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'pctPrevious' does not exist on type '{ s... Remove this comment to see the full error message\n    d.pctPrevious = i === 0 || d.value === data[i - 1].value ? 100.0 : (d.value / data[i - 1].value) * 100.0;\n  });\n\n  return data.slice(0, options.itemsLimit);\n}\n","import React from \"react\";\nimport cx from \"classnames\";\n\nimport \"./funnel-bar.less\";\n\ntype OwnProps = {\n  color?: string;\n  value?: number;\n  align?: \"left\" | \"center\" | \"right\";\n  className?: string;\n  children?: React.ReactNode;\n};\n\ntype Props = OwnProps & typeof FunnelBar.defaultProps;\n\nexport default function FunnelBar({ color, value, align, className, children }: Props) {\n  return (\n    <div className={cx(\"funnel-bar\", `funnel-bar-${align}`, className)}>\n      <div className=\"funnel-bar-value\" style={{ backgroundColor: color, width: value + \"%\" }} />\n      <div className=\"funnel-bar-label\">{children}</div>\n    </div>\n  );\n}\n\nFunnelBar.defaultProps = {\n  color: \"#dadada\",\n  value: 0.0,\n  align: \"left\",\n  className: null,\n  children: null,\n};\n","import { maxBy } from \"lodash\";\nimport React, { useMemo } from \"react\";\nimport Table from \"antd/lib/table\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport ColorPalette from \"@/components/chart/visualizations/ColorPalette\";\nimport { createNumberFormatter } from \"@/components/chart/lib/value-format\";\n\nimport prepareData from \"./prepareData\";\nimport FunnelBar from \"./FunnelBar\";\nimport \"./index.less\";\n\nfunction generateRowKeyPrefix() {\n  return Math.trunc(Math.random() * Number.MAX_SAFE_INTEGER).toString(36) + \":\";\n}\n\nexport default function Renderer({ data, options }: any) {\n  const funnelData = useMemo(() => prepareData(data.rows, options), [data, options]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const rowKeyPrefix = useMemo(() => generateRowKeyPrefix(), [funnelData]);\n\n  const formatValue = useMemo(() => createNumberFormatter(options.numberFormat), [options.numberFormat]);\n\n  const formatPercentValue = useMemo(() => {\n    const format = createNumberFormatter(options.percentFormat);\n    return (value: any) => {\n      if (value < options.percentValuesRange.min) {\n        return `<${format(options.percentValuesRange.min)}`;\n      }\n      if (value > options.percentValuesRange.max) {\n        return `>${format(options.percentValuesRange.max)}`;\n      }\n      return format(value);\n    };\n  }, [options.percentFormat, options.percentValuesRange]);\n\n  const columns = useMemo(() => {\n    if (funnelData.length === 0) {\n      return [];\n    }\n\n    // @ts-expect-error ts-migrate(2532) FIXME: Object is possibly 'undefined'.\n    const maxToPrevious = maxBy(funnelData, d => (isFinite(d.pctPrevious) ? d.pctPrevious : 0)).pctPrevious;\n    return [\n      {\n        title: options.stepCol.displayAs,\n        dataIndex: \"step\",\n        width: \"25%\",\n        className: \"text-ellipsis\",\n        render: (text: any) => (\n          <Tooltip title={text} mouseEnterDelay={0} mouseLeaveDelay={0}>\n            {text}\n          </Tooltip>\n        ),\n      },\n      {\n        title: options.valueCol.displayAs,\n        dataIndex: \"value\",\n        width: \"45%\",\n        align: \"center\",\n        render: (value: any, item: any) => (\n          // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n          <FunnelBar align=\"center\" color={ColorPalette.Cyan} value={item.pctMax}>\n            {formatValue(value)}\n          </FunnelBar>\n        ),\n      },\n      {\n        title: \"% Max\",\n        dataIndex: \"pctMax\",\n        width: \"15%\",\n        align: \"center\",\n        render: (value: any) => formatPercentValue(value),\n      },\n      {\n        title: \"% Previous\",\n        dataIndex: \"pctPrevious\",\n        width: \"15%\",\n        align: \"center\",\n        render: (value: any) => (\n          // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n          <FunnelBar className=\"funnel-percent-column\" value={(value / maxToPrevious) * 100.0}>\n            {formatPercentValue(value)}\n          </FunnelBar>\n        ),\n      },\n    ];\n  }, [options.stepCol.displayAs, options.valueCol.displayAs, funnelData, formatValue, formatPercentValue]);\n\n  if (funnelData.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"funnel-visualization-container\">\n      <Table\n        // @ts-expect-error ts-migrate(2322) FIXME: Type '({ title: any; dataIndex: string; width: str... Remove this comment to see the full error message\n        columns={columns}\n        dataSource={funnelData}\n        rowKey={(record, index) => rowKeyPrefix + index}\n        pagination={false}\n      />\n    </div>\n  );\n}\n\nRenderer.propTypes = RendererPropTypes;\n","import { map } from \"lodash\";\nimport React, { useMemo } from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Section, Select, Input, Checkbox } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nexport default function GeneralSettings({ options, data, onOptionsChange }: any) {\n  const columnNames = useMemo(() => map(data.columns, c => c.name), [data]);\n\n  const [onOptionsChangeDebounced] = useDebouncedCallback(onOptionsChange, 200);\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          layout=\"horizontal\"\n          label=\"Step Column\"\n          data-test=\"Funnel.StepColumn\"\n          placeholder=\"Choose column...\"\n          defaultValue={options.stepCol.colName || undefined}\n          onChange={(colName: any) => onOptionsChange({ stepCol: { colName: colName || null } })}>\n          {map(columnNames, col => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={col} data-test={`Funnel.StepColumn.${col}`}>\n              {col}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          layout=\"horizontal\"\n          label=\"Step Column Title\"\n          data-test=\"Funnel.StepColumnTitle\"\n          defaultValue={options.stepCol.displayAs}\n          onChange={(event: any) => onOptionsChangeDebounced({ stepCol: { displayAs: event.target.value } })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          layout=\"horizontal\"\n          label=\"Value Column\"\n          data-test=\"Funnel.ValueColumn\"\n          placeholder=\"Choose column...\"\n          defaultValue={options.valueCol.colName || undefined}\n          onChange={(colName: any) => onOptionsChange({ valueCol: { colName: colName || null } })}>\n          {map(columnNames, col => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={col} data-test={`Funnel.ValueColumn.${col}`}>\n              {col}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          layout=\"horizontal\"\n          label=\"Value Column Title\"\n          data-test=\"Funnel.ValueColumnTitle\"\n          defaultValue={options.valueCol.displayAs}\n          onChange={(event: any) => onOptionsChangeDebounced({ valueCol: { displayAs: event.target.value } })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Checkbox\n          data-test=\"Funnel.CustomSort\"\n          checked={!options.autoSort}\n          onChange={event => onOptionsChange({ autoSort: !event.target.checked })}>\n          Custom Sorting\n        </Checkbox>\n      </Section>\n\n      {!options.autoSort && (\n        <React.Fragment>\n          {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n          <Section>\n            <Select\n              layout=\"horizontal\"\n              label=\"Sort Column\"\n              data-test=\"Funnel.SortColumn\"\n              allowClear\n              placeholder=\"Choose column...\"\n              defaultValue={options.sortKeyCol.colName || undefined}\n              onChange={(colName: any) => onOptionsChange({ sortKeyCol: { colName: colName || null } })}>\n              {map(columnNames, col => (\n                // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n                <Select.Option key={col} data-test={`Funnel.SortColumn.${col}`}>\n                  {col}\n                  {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n                </Select.Option>\n              ))}\n            </Select>\n          </Section>\n\n          {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n          <Section>\n            <Select\n              layout=\"horizontal\"\n              label=\"Sort Order\"\n              data-test=\"Funnel.SortDirection\"\n              disabled={!options.sortKeyCol.colName}\n              defaultValue={options.sortKeyCol.reverse ? \"desc\" : \"asc\"}\n              onChange={(order: any) => onOptionsChange({ sortKeyCol: { reverse: order === \"desc\" } })}>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option value=\"asc\" data-test=\"Funnel.SortDirection.Ascending\">\n                ascending\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option value=\"desc\" data-test=\"Funnel.SortDirection.Descending\">\n                descending\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n            </Select>\n          </Section>\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n}\n\nGeneralSettings.propTypes = EditorPropTypes;\n","import React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Section, Input, InputNumber, ContextHelp } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nexport default function AppearanceSettings({ options, onOptionsChange }: any) {\n  const [onOptionsChangeDebounced] = useDebouncedCallback(onOptionsChange, 200);\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          layout=\"horizontal\"\n          label={\n            <React.Fragment>\n             {window.W_L.Number_format}\n              <ContextHelp.NumberFormatSpecs />\n            </React.Fragment>\n          }\n          data-test=\"Funnel.NumberFormat\"\n          defaultValue={options.numberFormat}\n          onChange={(event: any) => onOptionsChangeDebounced({ numberFormat: event.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          layout=\"horizontal\"\n          label={\n            <React.Fragment>\n{window.W_L.Percent_Values_Format}\n              <ContextHelp.NumberFormatSpecs />\n            </React.Fragment>\n          }\n          data-test=\"Funnel.PercentFormat\"\n          defaultValue={options.percentFormat}\n          onChange={(event: any) => onOptionsChangeDebounced({ percentFormat: event.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <InputNumber\n          layout=\"horizontal\"\n          label={window.W_L.Items_Count_Limit}\n          data-test=\"Funnel.ItemsLimit\"\n          min={2}\n          defaultValue={options.itemsLimit}\n          onChange={(itemsLimit: any) => onOptionsChangeDebounced({ itemsLimit })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <InputNumber\n          layout=\"horizontal\"\n          label={window.W_L.Min_Percent_Value}\n          data-test=\"Funnel.PercentRangeMin\"\n          min={0}\n          defaultValue={options.percentValuesRange.min}\n          onChange={(min: any) => onOptionsChangeDebounced({ percentValuesRange: { min } })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <InputNumber\n          layout=\"horizontal\"\n          label={window.W_L.Max_Percent_Value}\n          data-test=\"Funnel.PercentRangeMax\"\n          min={0}\n          defaultValue={options.percentValuesRange.max}\n          onChange={(max: any) => onOptionsChangeDebounced({ percentValuesRange: { max } })}\n        />\n      </Section>\n    </React.Fragment>\n  );\n}\n\nAppearanceSettings.propTypes = EditorPropTypes;\n","import createTabbedEditor from \"@/components/chart/components/visualizations/editor/createTabbedEditor\";\n\nimport GeneralSettings from \"./GeneralSettings\";\nimport AppearanceSettings from \"./AppearanceSettings\";\n\nexport default createTabbedEditor([\n  { key: \"General\", title: window.W_L.general, component: GeneralSettings },\n  { key: \"Appearance\", title: window.W_L.exterior, component: AppearanceSettings },\n]);\n","import getOptions from \"./getOptions\";\nimport Renderer from \"./Renderer\";\nimport Editor from \"./Editor\";\n\nexport default {\n  type: \"FUNNEL\",\n  name: \"漏斗分析(Funnel)\",\n  getOptions,\n  Renderer,\n  Editor,\n\n  defaultRows: 10,\n};\n","import { merge } from \"lodash\";\n\nexport type LeafletBaseIconType = \"marker\" | \"rectangle\" | \"circle\" | \"rectangle-dot\" | \"circle-dot\" | \"doughnut\";\nexport interface MapOptionsType {\n  latColName: string;\n  lonColName: string;\n  classify: any;\n  groups: Record<string, any>;\n  mapTileUrl: string;\n  clusterMarkers: boolean;\n  customizeMarkers: boolean;\n  iconShape: LeafletBaseIconType;\n  iconFont: LeafletBaseIconType;\n  foregroundColor: string;\n  backgroundColor: string;\n  borderColor: string;\n  bounds: any;\n  tooltip: {\n    enabled: boolean;\n    template: string;\n  };\n  popup: {\n    enabled: boolean;\n    template: string;\n  };\n}\n\nconst DEFAULT_OPTIONS: MapOptionsType = {\n  latColName: \"lat\",\n  lonColName: \"lon\",\n  classify: null,\n  groups: {},\n  mapTileUrl: \"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n  clusterMarkers: true,\n  customizeMarkers: false,\n  iconShape: \"marker\",\n  iconFont: \"circle\",\n  foregroundColor: \"#ffffff\",\n  backgroundColor: \"#356AFF\",\n  borderColor: \"#356AFF\",\n  bounds: null,\n  tooltip: {\n    enabled: false,\n    template: \"\",\n  },\n  popup: {\n    enabled: true,\n    template: \"\",\n  },\n};\n\nexport default function getOptions(options: MapOptionsType) {\n  options = merge({}, DEFAULT_OPTIONS, options);\n  options.mapTileUrl = options.mapTileUrl || DEFAULT_OPTIONS.mapTileUrl;\n\n  // Backward compatibility\n  if (options.classify === \"none\") {\n    options.classify = null;\n  }\n\n  return options;\n}\n","import d3 from \"d3\";\nimport { isNil, extend, map, filter, groupBy, omit } from \"lodash\";\n\nexport default function prepareData(data: any, options: any) {\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'scale' does not exist on type 'typeof im... Remove this comment to see the full error message\n  const colorScale = d3.scale.category10();\n\n  const { classify, latColName, lonColName } = options;\n\n  const pointGroups = classify ? groupBy(data.rows, classify) : { All: data.rows };\n\n  return filter(\n    map(pointGroups, (rows, name) => {\n      const points = filter(\n        map(rows, row => {\n          const lat = row[latColName];\n          const lon = row[lonColName];\n          if (isNil(lat) || isNil(lon)) {\n            return null;\n          }\n          return { lat, lon, row: omit(row, [latColName, lonColName]) };\n        })\n      );\n      if (points.length === 0) {\n        return null;\n      }\n\n      const result = extend({}, options.groups[name], { name, points });\n      if (isNil(result.color)) {\n        result.color = colorScale(name);\n      }\n\n      return result;\n    })\n  );\n}\n","import { isFunction, each, map, toString, clone } from \"lodash\";\nimport chroma from \"chroma-js\";\nimport L from \"leaflet\";\nimport \"leaflet.markercluster\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"leaflet.markercluster/dist/MarkerCluster.css\";\nimport \"leaflet.markercluster/dist/MarkerCluster.Default.css\";\nimport \"beautifymarker\";\nimport \"beautifymarker/leaflet-beautify-marker-icon.css\";\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'leaflet/dist/images/marker-ico... Remove this comment to see the full error message\nimport markerIcon from \"leaflet/dist/images/marker-icon.png\";\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'leaflet/dist/images/marker-ico... Remove this comment to see the full error message\nimport markerIconRetina from \"leaflet/dist/images/marker-icon-2x.png\";\n// @ts-expect-error ts-migrate(2307) FIXME: Cannot find module 'leaflet/dist/images/marker-sha... Remove this comment to see the full error message\nimport markerShadow from \"leaflet/dist/images/marker-shadow.png\";\nimport \"leaflet-fullscreen\";\nimport \"leaflet-fullscreen/dist/leaflet.fullscreen.css\";\nimport { formatSimpleTemplate } from \"@/components/chart/lib/value-format\";\nimport sanitize from \"@/services/sanitize\";\nimport resizeObserver from \"@/services/resizeObserver\";\nimport chooseTextColorForBackground from \"@/components/chart/lib/chooseTextColorForBackground\";\n\n// This is a workaround for an issue with giving Leaflet load the icon on its own.\nL.Icon.Default.mergeOptions({\n  iconUrl: markerIcon,\n  iconRetinaUrl: markerIconRetina,\n  shadowUrl: markerShadow,\n});\n\n// @ts-expect-error ts-migrate(2339) FIXME: Property '_getIconUrl' does not exist on type 'Def... Remove this comment to see the full error message\ndelete L.Icon.Default.prototype._getIconUrl;\n\nconst iconAnchors = {\n  marker: [14, 32],\n  circle: [10, 10],\n  rectangle: [11, 11],\n  \"circle-dot\": [1, 2],\n  \"rectangle-dot\": [1, 2],\n  doughnut: [8, 8],\n};\n\nconst popupAnchors = {\n  rectangle: [0, -3],\n  circle: [1, -3],\n};\n\nconst createHeatpointMarker = (lat: any, lon: any, color: any) =>\n  L.circleMarker([lat, lon], { fillColor: color, fillOpacity: 0.9, stroke: false });\n\n// @ts-expect-error ts-migrate(2339) FIXME: Property 'MarkerClusterIcon' does not exist on typ... Remove this comment to see the full error message\nL.MarkerClusterIcon = L.DivIcon.extend({\n  options: {\n    color: null,\n    className: \"marker-cluster\",\n    iconSize: new L.Point(40, 40),\n  },\n  // @ts-expect-error ts-migrate(7019) FIXME: Rest parameter 'args' implicitly has an 'any[]' ty... Remove this comment to see the full error message\n  createIcon(...args) {\n    const color = chroma(this.options.color);\n    const textColor = chooseTextColorForBackground(color);\n    const borderColor = color.alpha(0.4).css();\n    const backgroundColor = color.alpha(0.8).css();\n\n    const icon = L.DivIcon.prototype.createIcon.call(this, ...args);\n    icon.innerHTML = `\n      <div style=\"background: ${backgroundColor}\">\n        <span style=\"color: ${textColor}\">${toString(this.options.html)}</span>\n      </div>\n    `;\n    icon.style.background = borderColor;\n    return icon;\n  },\n});\n// @ts-expect-error ts-migrate(2339) FIXME: Property 'markerClusterIcon' does not exist on typ... Remove this comment to see the full error message\nL.markerClusterIcon = (...args) => new L.MarkerClusterIcon(...args);\n\nfunction createIconMarker(\n  lat: any,\n  lon: any,\n  { iconShape, iconFont, foregroundColor, backgroundColor, borderColor }: any\n) {\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'BeautifyIcon' does not exist on type 'ty... Remove this comment to see the full error message\n  const icon = L.BeautifyIcon.icon({\n    iconShape,\n    icon: iconFont,\n    iconSize: iconShape === \"rectangle\" ? [22, 22] : false,\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    iconAnchor: iconAnchors[iconShape],\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    popupAnchor: popupAnchors[iconShape],\n    prefix: \"fa\",\n    textColor: foregroundColor,\n    backgroundColor,\n    borderColor,\n  });\n\n  return L.marker([lat, lon], { icon });\n}\n\nfunction createMarkerClusterGroup(color: any) {\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'markerClusterGroup' does not exist on ty... Remove this comment to see the full error message\n  return L.markerClusterGroup({\n    iconCreateFunction(cluster: any) {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'markerClusterIcon' does not exist on typ... Remove this comment to see the full error message\n      return L.markerClusterIcon({ color, html: cluster.getChildCount() });\n    },\n  });\n}\n\nfunction createMarkersLayer(options: any, { color, points }: any) {\n  const { classify, clusterMarkers, customizeMarkers } = options;\n\n  const result = clusterMarkers ? createMarkerClusterGroup(color) : L.featureGroup();\n\n  // create markers\n  each(points, ({ lat, lon, row }) => {\n    const rowCopy = clone(row);\n    rowCopy[options.latColName] = lat;\n    rowCopy[options.lonColName] = lon;\n\n    let marker;\n    if (classify) {\n      marker = createHeatpointMarker(lat, lon, color);\n    } else {\n      if (customizeMarkers) {\n        marker = createIconMarker(lat, lon, options);\n      } else {\n        marker = L.marker([lat, lon]);\n      }\n    }\n\n    if (options.tooltip.enabled) {\n      if (options.tooltip.template !== \"\") {\n        marker.bindTooltip(sanitize(formatSimpleTemplate(options.tooltip.template, rowCopy)));\n      } else {\n        marker.bindTooltip(`\n          <strong>${lat}, ${lon}</strong>\n        `);\n      }\n    }\n\n    if (options.popup.enabled) {\n      if (options.popup.template !== \"\") {\n        marker.bindPopup(sanitize(formatSimpleTemplate(options.popup.template, rowCopy)));\n      } else {\n        marker.bindPopup(`\n          <ul style=\"list-style-type: none; padding-left: 0\">\n            <li><strong>${lat}, ${lon}</strong>\n            ${map(row, (v, k) => `<li>${k}: ${v}</li>`).join(\"\")}\n          </ul>\n        `);\n      }\n    }\n    result.addLayer(marker);\n  });\n\n  return result;\n}\n\nexport default function initMap(container: any) {\n  const _map = L.map(container, {\n    center: [0.0, 0.0],\n    zoom: 1,\n    scrollWheelZoom: false,\n    // @ts-expect-error ts-migrate(2345) FIXME: Argument of type '{ center: [number, number]; zoom... Remove this comment to see the full error message\n    fullscreenControl: true,\n  });\n  const _tileLayer = L.tileLayer(\"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  }).addTo(_map);\n  const _markerLayers = L.featureGroup().addTo(_map);\n  const _layersControls = L.control.layers().addTo(_map);\n\n  let onBoundsChange = () => {};\n\n  let boundsChangedFromMap = false;\n  const onMapMoveEnd = () => {\n    // @ts-expect-error ts-migrate(2554) FIXME: Expected 0 arguments, but got 1.\n    onBoundsChange(_map.getBounds());\n  };\n  _map.on(\"focus\", () => {\n    boundsChangedFromMap = true;\n    _map.on(\"moveend\", onMapMoveEnd);\n  });\n  _map.on(\"blur\", () => {\n    _map.off(\"moveend\", onMapMoveEnd);\n    boundsChangedFromMap = false;\n  });\n\n  function updateLayers(groups: any, options: any) {\n    _tileLayer.setUrl(options.mapTileUrl);\n\n    _markerLayers.eachLayer(layer => {\n      _markerLayers.removeLayer(layer);\n      _layersControls.removeLayer(layer);\n    });\n\n    each(groups, group => {\n      const layer = createMarkersLayer(options, group);\n      _markerLayers.addLayer(layer);\n      _layersControls.addOverlay(layer, group.name);\n    });\n\n    // hide layers control if it is empty\n    if (groups.length > 0) {\n      _layersControls.addTo(_map);\n    } else {\n      _layersControls.remove();\n    }\n  }\n\n  function updateBounds(bounds: any) {\n    if (!boundsChangedFromMap) {\n      bounds = bounds\n        ? L.latLngBounds([bounds._southWest.lat, bounds._southWest.lng], [bounds._northEast.lat, bounds._northEast.lng])\n        : _markerLayers.getBounds();\n      if (bounds.isValid()) {\n        _map.fitBounds(bounds, { animate: false, duration: 0 });\n      }\n    }\n  }\n\n  const unwatchResize = resizeObserver(container, () => {\n    _map.invalidateSize(false);\n  });\n\n  return {\n    get onBoundsChange() {\n      return onBoundsChange;\n    },\n    set onBoundsChange(value) {\n      onBoundsChange = isFunction(value) ? value : () => {};\n    },\n    updateLayers,\n    updateBounds,\n    destroy() {\n      unwatchResize();\n      _map.remove();\n    },\n  };\n}\n","import { isEqual, omit, merge } from \"lodash\";\nimport React, { useState, useEffect, useRef, useMemo } from \"react\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport prepareData from \"./prepareData\";\nimport initMap from \"./initMap\";\n\nfunction useMemoWithDeepCompare(create: any, inputs: any) {\n  const valueRef = useRef();\n  const value = useMemo(create, inputs);\n  if (!isEqual(value, valueRef.current)) {\n    // @ts-expect-error ts-migrate(2322) FIXME: Type 'unknown' is not assignable to type 'undefine... Remove this comment to see the full error message\n    valueRef.current = value;\n  }\n  return valueRef.current;\n}\n\nexport default function Renderer({ data, options, onOptionsChange }: any) {\n  const [container, setContainer] = useState(null);\n\n  const optionsWithoutBounds = useMemoWithDeepCompare(() => omit(options, [\"bounds\"]), [options]);\n\n  const groups = useMemo(() => prepareData(data, optionsWithoutBounds), [data, optionsWithoutBounds]);\n\n  const [map, setMap] = useState(null);\n\n  useEffect(() => {\n    if (container) {\n      const _map = initMap(container);\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type '{ onBoundsChange: () => void; up... Remove this comment to see the full error message\n      setMap(_map);\n      return () => {\n        _map.destroy();\n      };\n    }\n  }, [container]);\n\n  useEffect(() => {\n    if (map) {\n      // @ts-expect-error ts-migrate(2531) FIXME: Object is possibly 'null'.\n      map.updateLayers(groups, optionsWithoutBounds);\n    }\n  }, [map, groups, optionsWithoutBounds]);\n\n  useEffect(() => {\n    if (map) {\n      // @ts-expect-error ts-migrate(2531) FIXME: Object is possibly 'null'.\n      map.updateBounds(options.bounds);\n    }\n  }, [map, options.bounds]);\n\n  useEffect(() => {\n    if (map && onOptionsChange) {\n      // @ts-expect-error ts-migrate(2531) FIXME: Object is possibly 'null'.\n      map.onBoundsChange = (bounds: any) => {\n        onOptionsChange(merge({}, options, { bounds }));\n      };\n    }\n  }, [map, options, onOptionsChange]);\n\n  // @ts-expect-error ts-migrate(2322) FIXME: Type 'Dispatch<SetStateAction<null>>' is not assig... Remove this comment to see the full error message\n  return <div className=\"map-visualization-container\" ref={setContainer} />;\n}\n\nRenderer.propTypes = RendererPropTypes;\n","import { isNil, map, filter, difference } from \"lodash\";\nimport React, { useMemo } from \"react\";\nimport { Section, Select } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nfunction getColumns(column: any, unusedColumns: any) {\n  return filter([column, ...unusedColumns], v => !isNil(v));\n}\n\nexport default function GeneralSettings({ options, data, onOptionsChange }: any) {\n  const unusedColumns = useMemo(\n    () =>\n      difference(\n        map(data.columns, c => c.name),\n        [options.latColName, options.lonColName, options.classify]\n      ),\n    [data, options.latColName, options.lonColName, options.classify]\n  );\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          label= {window.W_L.Latitude_Column_Name}\n          data-test=\"Map.Editor.LatitudeColumnName\"\n          value={options.latColName}\n          onChange={(latColName: any) => onOptionsChange({ latColName })}>\n          {map(getColumns(options.latColName, unusedColumns), col => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={col} data-test={\"Map.Editor.LatitudeColumnName.\" + col}>\n              {col}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          label= {window.W_L.Longitude_Column_Name}\n          data-test=\"Map.Editor.LongitudeColumnName\"\n          value={options.lonColName}\n          onChange={(lonColName: any) => onOptionsChange({ lonColName })}>\n          {map(getColumns(options.lonColName, unusedColumns), col => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={col} data-test={\"Map.Editor.LongitudeColumnName.\" + col}>\n              {col}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          label={window.W_L.group_by}\n          data-test=\"Map.Editor.GroupBy\"\n          allowClear\n          placeholder=\"none\"\n          value={options.classify || undefined}\n          onChange={(column: any) => onOptionsChange({ classify: column || null })}>\n          {map(getColumns(options.classify, unusedColumns), col => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={col} data-test={\"Map.Editor.GroupBy.\" + col}>\n              {col}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nGeneralSettings.propTypes = EditorPropTypes;\n","import { map } from \"lodash\";\nimport React, { useMemo, useCallback } from \"react\";\nimport Table from \"antd/lib/table\";\nimport ColorPicker from \"@/components/chart/components/ColorPicker\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport ColorPalette from \"@/components/chart/visualizations/ColorPalette\";\n\nimport prepareData from \"../prepareData\";\n\nexport default function GroupsSettings({ options, data, onOptionsChange }: any) {\n  const groups = useMemo(\n    () => map(prepareData(data, options), ({ name }) => ({ name, color: (options.groups[name] || {}).color || null })),\n    [data, options]\n  );\n\n  const colors = useMemo(\n    () => ({\n      Automatic: null,\n      ...ColorPalette,\n    }),\n    []\n  );\n\n  const updateGroupOption = useCallback(\n    (name, prop, value) => {\n      onOptionsChange({\n        groups: {\n          [name]: {\n            [prop]: value,\n          },\n        },\n      });\n    },\n    [onOptionsChange]\n  );\n\n  const columns = [\n    {\n      title: \"Group\",\n      dataIndex: \"name\",\n    },\n    {\n      title: \"Color\",\n      dataIndex: \"color\",\n      width: \"1%\",\n      render: (unused: any, item: any) => (\n        <ColorPicker\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'boolean' is not assignable to type 'never'.\n          interactive\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '{ \"Indian Red\": string; \"Green 2\": string; \"... Remove this comment to see the full error message\n          presetColors={colors}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          placement=\"topRight\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          color={item.color}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          triggerProps={{ \"data-test\": `Map.Editor.Groups.${item.name}.Color` }}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(value: any) => void' is not assignable to t... Remove this comment to see the full error message\n          onChange={(value: any) => updateGroupOption(item.name, \"color\", value)}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'never'.\n          addonAfter={<ColorPicker.Label color={item.color} presetColors={colors} />}\n        />\n      ),\n    },\n  ];\n\n  return <Table columns={columns} dataSource={groups} rowKey=\"name\" showHeader={false} pagination={false} />;\n}\n\nGroupsSettings.propTypes = EditorPropTypes;\n","import React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Section, Input, Checkbox, TextArea, ContextHelp } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nfunction TemplateFormatHint() {\n  // eslint-disable-line react/prop-types\n  return (\n    // @ts-expect-error ts-migrate(2746) FIXME: This JSX tag's 'children' prop expects a single ch... Remove this comment to see the full error message\n    <ContextHelp placement=\"topLeft\" arrowPointAtCenter>\n      <div style={{ paddingBottom: 5 }}>\n      {window.W_L.Also_all_query_result_columns_can_be_referenced} <code>{\"{{ column_name }}\"}</code> syntax.\n      </div>\n      <div style={{ paddingBottom: 5 }}>{window.W_L.Leave_empty_to_use_default_value}</div>\n    </ContextHelp>\n  );\n}\n\nexport default function FormatSettings({ options, onOptionsChange }: any) {\n  const [onOptionsChangeDebounced] = useDebouncedCallback(onOptionsChange, 200);\n\n  const templateFormatHint = <TemplateFormatHint />;\n\n  return (\n    <div className=\"map-visualization-editor-format-settings\">\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Checkbox\n          data-test=\"Map.Editor.TooltipEnabled\"\n          checked={options.tooltip.enabled}\n          onChange={event => onOptionsChange({ tooltip: { enabled: event.target.checked } })}>\n            {window.W_L.Show_tooltip}\n        </Checkbox>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={<React.Fragment>{window.W_L.Tooltip_template} {templateFormatHint}</React.Fragment>}\n          data-test=\"Map.Editor.TooltipTemplate\"\n          disabled={!options.tooltip.enabled}\n          placeholder={window.W_L.default_template}\n          defaultValue={options.tooltip.template}\n          onChange={(event: any) => onOptionsChangeDebounced({ tooltip: { template: event.target.value } })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Checkbox\n          data-test=\"Map.Editor.PopupEnabled\"\n          checked={options.popup.enabled}\n          onChange={event => onOptionsChange({ popup: { enabled: event.target.checked } })}>\n          {window.W_L.Show_popup}\n        </Checkbox>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <TextArea\n          label={<React.Fragment>{window.W_L.Popup_template} {templateFormatHint}</React.Fragment>}\n          data-test=\"Map.Editor.PopupTemplate\"\n          disabled={!options.popup.enabled}\n          rows={4}\n          placeholder= {window.W_L.default_template}\n          defaultValue={options.popup.template}\n          onChange={(event: any) => onOptionsChangeDebounced({ popup: { template: event.target.value } })}\n        />\n      </Section>\n    </div>\n  );\n}\n\nFormatSettings.propTypes = EditorPropTypes;\n","import { isNil, map } from \"lodash\";\nimport React, { useMemo } from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Section, Select, Checkbox, Input, ColorPicker, ContextHelp } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport ColorPalette from \"@/components/chart/visualizations/ColorPalette\";\n\nconst mapTiles = [\n  {\n    name: \"OpenStreetMap\",\n    url: \"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n  },\n  {\n    name: \"OpenStreetMap BW\",\n    url: \"//{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png\",\n  },\n  {\n    name: \"OpenStreetMap DE\",\n    url: \"//{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png\",\n  },\n  {\n    name: \"OpenStreetMap FR\",\n    url: \"//{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png\",\n  },\n  {\n    name: \"OpenStreetMap Hot\",\n    url: \"//{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png\",\n  },\n  {\n    name: \"Thunderforest\",\n    url: \"//{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png\",\n  },\n  {\n    name: \"Thunderforest Spinal\",\n    url: \"//{s}.tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png\",\n  },\n  {\n    name: \"OpenMapSurfer\",\n    url: \"//korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}\",\n  },\n  {\n    name: \"Stamen Toner\",\n    url: \"//stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png\",\n  },\n  {\n    name: \"Stamen Toner Background\",\n    url: \"//stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}.png\",\n  },\n  {\n    name: \"Stamen Toner Lite\",\n    url: \"//stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png\",\n  },\n  {\n    name: \"OpenTopoMap\",\n    url: \"//{s}.tile.opentopomap.org/{z}/{x}/{y}.png\",\n  },\n];\n\nconst CustomColorPalette = {\n  White: \"#ffffff\",\n  ...ColorPalette,\n};\n\nfunction getCustomIconOptionFields(iconShape: any) {\n  switch (iconShape) {\n    case \"doughnut\":\n      return { showIcon: false, showBackgroundColor: true, showBorderColor: true };\n    case \"circle-dot\":\n    case \"rectangle-dot\":\n      return { showIcon: false, showBackgroundColor: false, showBorderColor: true };\n    default:\n      return { showIcon: true, showBackgroundColor: true, showBorderColor: true };\n  }\n}\n\nexport default function StyleSettings({ options, onOptionsChange }: any) {\n  const [debouncedOnOptionsChange] = useDebouncedCallback(onOptionsChange, 200);\n\n  const { showIcon, showBackgroundColor, showBorderColor } = useMemo(\n    () => getCustomIconOptionFields(options.iconShape),\n    [options.iconShape]\n  );\n\n  const isCustomMarkersStyleAllowed = isNil(options.classify);\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          label={window.W_L.Map_Tiles}\n          data-test=\"Map.Editor.Tiles\"\n          value={options.mapTileUrl}\n          onChange={(mapTileUrl: any) => onOptionsChange({ mapTileUrl })}>\n          {map(mapTiles, ({ name, url }) => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={url} data-test={\"Map.Editor.Tiles.\" + name}>\n              {name}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section.Title>{window.W_L.Markers}</Section.Title>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Checkbox\n          data-test=\"Map.Editor.ClusterMarkers\"\n          defaultChecked={options.clusterMarkers}\n          onChange={event => onOptionsChange({ clusterMarkers: event.target.checked })}>\n          {window.W_L.Cluster_Markers}\n        </Checkbox>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2746) FIXME: This JSX tag's 'children' prop expects a single ch... Remove this comment to see the full error message */}\n      <Section>\n        <Checkbox\n          data-test=\"Map.Editor.CustomizeMarkers\"\n          disabled={!isCustomMarkersStyleAllowed}\n          defaultChecked={options.customizeMarkers}\n          onChange={event => onOptionsChange({ customizeMarkers: event.target.checked })}>\n          {window.W_L.Override_default_style}\n        </Checkbox>\n        {!isCustomMarkersStyleAllowed && (\n          // @ts-expect-error ts-migrate(2746) FIXME: This JSX tag's 'children' prop expects a single ch... Remove this comment to see the full error message\n          <ContextHelp placement=\"topLeft\" arrowPointAtCenter>\n            Custom marker styles are not available\n            <br />\n            when <b>Group By</b> column selected.\n          </ContextHelp>\n        )}\n      </Section>\n\n      {isCustomMarkersStyleAllowed && options.customizeMarkers && (\n        <React.Fragment>\n          {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n          <Section>\n            <Select\n              layout=\"horizontal\"\n              label={window.W_L.Shape}\n              data-test=\"Map.Editor.MarkerShape\"\n              value={options.iconShape}\n              onChange={(iconShape: any) => onOptionsChange({ iconShape })}>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option key=\"marker\" data-test=\"Map.Editor.MarkerShape.marker\">\n              {window.W_L.Markers} + {window.W_L.icon}\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option key=\"doughnut\" data-test=\"Map.Editor.MarkerShape.doughnut\">\n              {window.W_L.Circle}\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option key=\"circle-dot\" data-test=\"Map.Editor.MarkerShape.circle-dot\">\n              {window.W_L.Circle_Dot}\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option key=\"circle\" data-test=\"Map.Editor.MarkerShape.circle\">\n              {window.W_L.Circle} + {window.W_L.icon}\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option key=\"rectangle-dot\" data-test=\"Map.Editor.MarkerShape.rectangle-dot\">\n              {window.W_L.Square_Dot}\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              <Select.Option key=\"rectangle\" data-test=\"Map.Editor.MarkerShape.rectangle\">\n              {window.W_L.Square} + {window.W_L.icon}\n                {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n              </Select.Option>\n            </Select>\n          </Section>\n\n          {showIcon && (\n            // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n            <Section>\n              <Input\n                layout=\"horizontal\"\n                label={\n                  <React.Fragment>\n                    {window.W_L.icon}\n                    {/* @ts-expect-error ts-migrate(2746) FIXME: This JSX tag's 'children' prop expects a single ch... Remove this comment to see the full error message */}\n                    <ContextHelp placement=\"topLeft\" arrowPointAtCenter>\n                      <div style={{ marginBottom: 5 }}>\n                      {window.W_L.Enter_an_icon_name_from}{\" \"}\n                        <a href=\"https://fontawesome.com/v4.7.0/icons/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                          Font-Awesome 4.7\n                        </a>\n                      </div>\n                      <div style={{ marginBottom: 5 }}>\n                      {window.W_L.Examples}：<code>check</code>, <code>times-circle</code>, <code>flag</code>\n                      </div>\n                      <div>{window.W_L.Leave_blank_to_remove}</div>\n                    </ContextHelp>\n                  </React.Fragment>\n                }\n                data-test=\"Map.Editor.MarkerIcon\"\n                defaultValue={options.iconFont}\n                onChange={(event: any) => debouncedOnOptionsChange({ iconFont: event.target.value })}\n              />\n            </Section>\n          )}\n\n          {showIcon && (\n            // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n            <Section>\n              <ColorPicker\n                layout=\"horizontal\"\n                label={window.W_L.Icon_Color}\n                interactive\n                presetColors={CustomColorPalette}\n                placement=\"topRight\"\n                color={options.foregroundColor}\n                triggerProps={{ \"data-test\": \"Map.Editor.MarkerIconColor\" }}\n                onChange={(foregroundColor: any) => onOptionsChange({ foregroundColor })}\n                // @ts-expect-error ts-migrate(2339) FIXME: Property 'Label' does not exist on type '({ classN... Remove this comment to see the full error message\n                addonAfter={<ColorPicker.Label color={options.foregroundColor} presetColors={CustomColorPalette} />}\n              />\n            </Section>\n          )}\n\n          {showBackgroundColor && (\n            // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n            <Section>\n              <ColorPicker\n                layout=\"horizontal\"\n                label={window.W_L.Background_Color}\n                interactive\n                presetColors={CustomColorPalette}\n                placement=\"topRight\"\n                color={options.backgroundColor}\n                triggerProps={{ \"data-test\": \"Map.Editor.MarkerBackgroundColor\" }}\n                onChange={(backgroundColor: any) => onOptionsChange({ backgroundColor })}\n                // @ts-expect-error ts-migrate(2339) FIXME: Property 'Label' does not exist on type '({ classN... Remove this comment to see the full error message\n                addonAfter={<ColorPicker.Label color={options.backgroundColor} presetColors={CustomColorPalette} />}\n              />\n            </Section>\n          )}\n\n          {showBorderColor && (\n            // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n            <Section>\n              <ColorPicker\n                layout=\"horizontal\"\n                label={window.W_L.Borders_Color}\n                interactive\n                presetColors={CustomColorPalette}\n                placement=\"topRight\"\n                color={options.borderColor}\n                triggerProps={{ \"data-test\": \"Map.Editor.MarkerBorderColor\" }}\n                onChange={(borderColor: any) => onOptionsChange({ borderColor })}\n                // @ts-expect-error ts-migrate(2339) FIXME: Property 'Label' does not exist on type '({ classN... Remove this comment to see the full error message\n                addonAfter={<ColorPicker.Label color={options.borderColor} presetColors={CustomColorPalette} />}\n              />\n            </Section>\n          )}\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n}\n\nStyleSettings.propTypes = EditorPropTypes;\n","import createTabbedEditor from \"@/components/chart/components/visualizations/editor/createTabbedEditor\";\n\nimport GeneralSettings from \"./GeneralSettings\";\nimport GroupsSettings from \"./GroupsSettings\";\nimport FormatSettings from \"./FormatSettings\";\nimport StyleSettings from \"./StyleSettings\";\n\nexport default createTabbedEditor([\n  { key: \"General\", title: window.W_L.general, component: GeneralSettings },\n  { key: \"Groups\", title: window.W_L.role, component: GroupsSettings },\n  { key: \"Format\", title: window.W_L.formatting, component: FormatSettings },\n  { key: \"Style\", title: window.W_L.style, component: StyleSettings },\n]);\n","import getOptions from \"./getOptions\";\nimport Renderer from \"./Renderer\";\nimport Editor from \"./Editor\";\n\nexport default {\n  type: \"MAP\",\n  name: \"地理标记(Map Markers)\",\n  getOptions,\n  Renderer,\n  Editor,\n\n  defaultColumns: 3,\n  defaultRows: 8,\n  minColumns: 2,\n};\n","import moment from \"moment\";\nimport { visualizationsSettings } from \"@/components/chart/visualizations/visualizationsSettings\";\n\nfunction formatDateTime(value: any) {\n  if (!value) {\n    return \"\";\n  }\n\n  const parsed = moment(value);\n  if (!parsed.isValid()) {\n    return \"-\";\n  }\n\n  return parsed.format(visualizationsSettings.dateTimeFormat);\n}\n\nfunction formatDate(value: any) {\n  if (!value) {\n    return \"\";\n  }\n\n  const parsed = moment(value);\n  if (!parsed.isValid()) {\n    return \"-\";\n  }\n\n  return parsed.format(visualizationsSettings.dateFormat);\n}\n\nexport function formatColumnValue(value: any, columnType = null) {\n  if (moment.isMoment(value)) {\n    if (columnType === \"date\") {\n      return formatDate(value);\n    }\n    return formatDateTime(value);\n  }\n\n  if (typeof value === \"boolean\") {\n    return value.toString();\n  }\n\n  return value;\n}\n","import React, { useState, useEffect, useMemo } from \"react\";\nimport { get, find, pick, map, mapValues } from \"lodash\";\n// @ts-expect-error ts-migrate(7016) FIXME: Could not find a declaration file for module 'reac... Remove this comment to see the full error message\nimport PivotTableUI from \"react-pivottable/PivotTableUI\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport { formatColumnValue } from \"@/components/chart/lib/utils\";\n\nimport \"react-pivottable/pivottable.css\";\nimport \"./renderer.less\";\n\nconst VALID_OPTIONS = [\n  \"rows\",\n  \"cols\",\n  \"vals\",\n  \"aggregatorName\",\n  \"valueFilter\",\n  \"sorters\",\n  \"rowOrder\",\n  \"colOrder\",\n  \"derivedAttributes\",\n  \"rendererName\",\n  \"hiddenAttributes\",\n  \"hiddenFromAggregators\",\n  \"hiddenFromDragDrop\",\n  \"menuLimit\",\n  \"unusedOrientationCutoff\",\n  \"controls\",\n  \"rendererOptions\",\n];\n\nfunction formatRows({ rows, columns }: any) {\n  return map(rows, row => mapValues(row, (value, key) => formatColumnValue(value, find(columns, { name: key }).type)));\n}\n\nexport default function Renderer({ data, options, onOptionsChange }: any) {\n  const [config, setConfig] = useState({ ...options });\n  const dataRows = useMemo(() => formatRows(data), [data]);\n\n  useEffect(() => {\n    setConfig({ ...options });\n  }, [options]);\n\n  const onChange = (updatedOptions: any) => {\n    const validOptions = pick(updatedOptions, VALID_OPTIONS);\n    setConfig({ ...validOptions });\n    onOptionsChange(validOptions);\n  };\n\n  // Legacy behavior: hideControls when controls.enabled is true\n  const hideControls = get(options, \"controls.enabled\");\n  const hideRowTotals = !get(options, \"rendererOptions.table.rowTotals\");\n  const hideColumnTotals = !get(options, \"rendererOptions.table.colTotals\");\n  return (\n    <div\n      className=\"pivot-table-visualization-container\"\n      data-hide-controls={hideControls || null}\n      data-hide-row-totals={hideRowTotals || null}\n      data-hide-column-totals={hideColumnTotals || null}\n      data-test=\"PivotTableVisualization\">\n      <PivotTableUI {...pick(config, VALID_OPTIONS)} data={dataRows} onChange={onChange} />\n    </div>\n  );\n}\n\nRenderer.propTypes = RendererPropTypes;\nRenderer.defaultProps = { onOptionsChange: () => {} };\n","import { merge } from \"lodash\";\nimport React from \"react\";\nimport { Section, Switch } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nexport default function Editor({ options, onOptionsChange }: any) {\n  const updateOptions = (updates: any) => {\n    onOptionsChange(merge({}, options, updates));\n  };\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n        <Switch\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          data-test=\"PivotEditor.HideControls\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          id=\"pivot-show-controls\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'boolean' is not assignable to type 'never'.\n          defaultChecked={!options.controls.enabled}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(enabled: any) => void' is not assignable to... Remove this comment to see the full error message\n          onChange={(enabled: any) => updateOptions({ controls: { enabled: !enabled } })}>\n          {window.W_L.Show_Pivot_Controls}\n        </Switch>\n      </Section>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n        <Switch\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          id=\"pivot-show-row-totals\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          defaultChecked={options.rendererOptions.table.rowTotals}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(rowTotals: any) => void' is not assignable ... Remove this comment to see the full error message\n          onChange={(rowTotals: any) => updateOptions({ rendererOptions: { table: { rowTotals } } })}>\n          {window.W_L.Show_Row_Totals}\n        </Switch>\n      </Section>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n        <Switch\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          id=\"pivot-show-column-totals\"\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          defaultChecked={options.rendererOptions.table.colTotals}\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '(colTotals: any) => void' is not assignable ... Remove this comment to see the full error message\n          onChange={(colTotals: any) => updateOptions({ rendererOptions: { table: { colTotals } } })}>\n          {window.W_L.Show_Column_Totals}\n        </Switch>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nEditor.propTypes = EditorPropTypes;\n","import { merge } from \"lodash\";\n\nimport Renderer from \"./Renderer\";\nimport Editor from \"./Editor\";\n\nconst DEFAULT_OPTIONS = {\n  controls: {\n    enabled: false, // `false` means \"show controls\" o_O\n  },\n  rendererOptions: {\n    table: {\n      colTotals: true,\n      rowTotals: true,\n    },\n  },\n};\n\nexport default {\n  type: \"PIVOT\",\n  name: \"数据透视表(Pivot Table)\",\n  getOptions: (options: any) => merge({}, DEFAULT_OPTIONS, options),\n  Renderer,\n  Editor,\n\n  defaultRows: 10,\n  defaultColumns: 3,\n  minColumns: 2,\n};\n","/* eslint-disable */\n\nimport d3 from \"d3\";\n\nexport interface LinkType {\n  id: number;\n  name: string;\n  color: string;\n  x: number;\n  y: number;\n  dx: number;\n  dy: number;\n  source: SourceTargetType;\n  target: SourceTargetType;\n}\n\nexport type SourceTargetType = {\n  sourceLinks: Array<LinkType>;\n  targetLinks: Array<LinkType>;\n};\n\nexport type NodeType = LinkType & SourceTargetType;\nexport interface D3SankeyType {\n  nodeWidth: (...args: any[]) => any;\n  nodeHeight: (...args: any[]) => any;\n  nodePadding: (...args: any[]) => any;\n  nodes: (...args: any[]) => any[];\n  link: (...args: any[]) => any;\n  links: (...args: any[]) => any[];\n  size: (...args: any[]) => any;\n  layout: (...args: any[]) => any;\n  relayout: (...args: any[]) => any;\n}\n\nexport type DType = { sy: number; ty: number; value: number; source: LinkType; target: LinkType } & LinkType;\n\nfunction center(node: any) {\n  return node.y + node.dy / 2;\n}\n\nfunction value(link: any) {\n  return link.value;\n}\n\nfunction Sankey(): D3SankeyType {\n  const sankey = {};\n  let nodeWidth = 24;\n  let nodePadding = 8;\n  let size = [1, 1];\n  let nodes: any[] = [];\n  let links: any[] = [];\n\n  // Populate the sourceLinks and targetLinks for each node.\n  // Also, if the source and target are not objects, assume they are indices.\n  function computeNodeLinks() {\n    nodes.forEach(node => {\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    });\n    links.forEach(link => {\n      let source = link.source;\n      let target = link.target;\n      if (typeof source === \"number\") source = link.source = nodes[link.source];\n      if (typeof target === \"number\") target = link.target = nodes[link.target];\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    });\n  }\n\n  // Compute the value (size) of each node by summing the associated links.\n  function computeNodeValues() {\n    nodes.forEach(node => {\n      node.value = Math.max(d3.sum(node.sourceLinks, value), d3.sum(node.targetLinks, value));\n    });\n  }\n\n  function moveSinksRight(x: any) {\n    nodes.forEach(node => {\n      if (!node.sourceLinks.length) {\n        node.x = x - 1;\n      }\n    });\n  }\n\n  function scaleNodeBreadths(kx: any) {\n    nodes.forEach(node => {\n      node.x *= kx;\n    });\n  }\n\n  // Iteratively assign the breadth (x-position) for each node.\n  // Nodes are assigned the maximum breadth of incoming neighbors plus one;\n  // nodes with no incoming links are assigned breadth zero, while\n  // nodes with no outgoing links are assigned the maximum breadth.\n  function computeNodeBreadths() {\n    let remainingNodes = nodes;\n    let nextNodes: any;\n    let x = 0;\n\n    function assignBreadth(node: any) {\n      node.x = x;\n      node.dx = nodeWidth;\n      node.sourceLinks.forEach((link: any) => {\n        if (nextNodes.indexOf(link.target) < 0) {\n          nextNodes.push(link.target);\n        }\n      });\n    }\n\n    while (remainingNodes.length) {\n      nextNodes = [];\n      remainingNodes.forEach(assignBreadth);\n      remainingNodes = nextNodes;\n      x += 1;\n    }\n\n    moveSinksRight(x);\n    x = Math.max(\n      d3.max(nodes, n => n.x),\n      2\n    ); // get new maximum x value (min 2)\n    scaleNodeBreadths((size[0] - nodeWidth) / (x - 1));\n  }\n\n  function computeNodeDepths(iterations: any) {\n    const nodesByBreadth = d3\n      // @ts-expect-error\n      .nest()\n      .key((d: any) => d.x)\n      .sortKeys(d3.ascending)\n      .entries(nodes)\n      .map((d: any) => d.values);\n\n    function initializeNodeDepth() {\n      // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n      const ky = d3.min(nodesByBreadth, n => (size[1] - (n.length - 1) * nodePadding) / d3.sum(n, value));\n\n      nodesByBreadth.forEach((n: any) => {\n        n.forEach((node: any, i: any) => {\n          node.y = i;\n          // @ts-expect-error ts-migrate(2532) FIXME: Object is possibly 'undefined'.\n          node.dy = node.value * ky;\n        });\n      });\n\n      links.forEach(link => {\n        // @ts-expect-error ts-migrate(2532) FIXME: Object is possibly 'undefined'.\n        link.dy = link.value * ky;\n      });\n    }\n\n    function relaxLeftToRight(alpha: any) {\n      function weightedSource(link: any) {\n        return center(link.source) * link.value;\n      }\n\n      nodesByBreadth.forEach((n: any) => {\n        n.forEach((node: any) => {\n          if (node.targetLinks.length) {\n            const y = d3.sum(node.targetLinks, weightedSource) / d3.sum(node.targetLinks, value);\n            node.y += (y - center(node)) * alpha;\n          }\n        });\n      });\n    }\n\n    function resolveCollisions() {\n      nodesByBreadth.forEach((nodes: any) => {\n        const n = nodes.length;\n        let node;\n        let dy;\n        let y0 = 0;\n        let i;\n\n        // Push any overlapping nodes down.\n        nodes.sort(ascendingDepth);\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y0 - node.y;\n          if (dy > 0) node.y += dy;\n          y0 = node.y + node.dy + nodePadding;\n        }\n\n        // If the bottommost node goes outside the bounds, push it back up.\n        dy = y0 - nodePadding - size[1];\n        if (dy > 0) {\n          y0 = node.y -= dy;\n\n          // Push any overlapping nodes back up.\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y + node.dy + nodePadding - y0;\n            if (dy > 0) node.y -= dy;\n            y0 = node.y;\n          }\n        }\n      });\n    }\n\n    initializeNodeDepth();\n    resolveCollisions();\n\n    for (let alpha = 1; iterations > 0; iterations -= 1) {\n      relaxRightToLeft((alpha *= 0.99));\n      resolveCollisions();\n      relaxLeftToRight(alpha);\n      resolveCollisions();\n    }\n\n    function relaxRightToLeft(alpha: any) {\n      nodesByBreadth\n        .slice()\n        .reverse()\n        .forEach((nodes: any) => {\n          nodes.forEach((node: any) => {\n            if (node.sourceLinks.length) {\n              const y = d3.sum(node.sourceLinks, weightedTarget) / d3.sum(node.sourceLinks, value);\n              node.y += (y - center(node)) * alpha;\n            }\n          });\n        });\n\n      function weightedTarget(link: any) {\n        return center(link.target) * link.value;\n      }\n    }\n\n    function ascendingDepth(a: any, b: any) {\n      return a.y - b.y;\n    }\n  }\n\n  function computeLinkDepths() {\n    nodes.forEach(node => {\n      node.sourceLinks.sort(ascendingTargetDepth);\n      node.targetLinks.sort(ascendingSourceDepth);\n    });\n    nodes.forEach(node => {\n      let sy = 0,\n        ty = 0;\n      node.sourceLinks.forEach((link: any) => {\n        link.sy = sy;\n        sy += link.dy;\n      });\n      node.targetLinks.forEach((link: any) => {\n        link.ty = ty;\n        ty += link.dy;\n      });\n    });\n\n    function ascendingSourceDepth(a: any, b: any) {\n      return a.source.y - b.source.y;\n    }\n\n    function ascendingTargetDepth(a: any, b: any) {\n      return a.target.y - b.target.y;\n    }\n  }\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'nodeWidth' does not exist on type '{}'.\n  sankey.nodeWidth = function(_: any) {\n    if (!arguments.length) return nodeWidth;\n    nodeWidth = +_;\n    return sankey;\n  };\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'nodePadding' does not exist on type '{}'... Remove this comment to see the full error message\n  sankey.nodePadding = function(_: any) {\n    if (!arguments.length) return nodePadding;\n    nodePadding = +_;\n    return sankey;\n  };\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'nodes' does not exist on type '{}'.\n  sankey.nodes = function(_: any) {\n    if (!arguments.length) return nodes;\n    nodes = _;\n    return sankey;\n  };\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'links' does not exist on type '{}'.\n  sankey.links = function(_: any) {\n    if (!arguments.length) return links;\n    links = _;\n    return sankey;\n  };\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'size' does not exist on type '{}'.\n  sankey.size = function(_: any) {\n    if (!arguments.length) return size;\n    size = _;\n    return sankey;\n  };\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'layout' does not exist on type '{}'.\n  sankey.layout = function(iterations: any) {\n    computeNodeLinks();\n    computeNodeValues();\n    computeNodeBreadths();\n    computeNodeDepths(iterations);\n    computeLinkDepths();\n    return sankey;\n  };\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'relayout' does not exist on type '{}'.\n  sankey.relayout = function() {\n    computeLinkDepths();\n    return sankey;\n  };\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'link' does not exist on type '{}'.\n  sankey.link = function() {\n    let curvature = 0.5;\n\n    function link(d: DType) {\n      const x0 = d.source.x + d.source.dx;\n      const x1 = d.target.x;\n      const xi = d3.interpolateNumber(x0, x1);\n      const x2 = xi(curvature);\n      const x3 = xi(1 - curvature);\n      const y0 = d.source.y + d.sy + d.dy / 2;\n      const y1 = d.target.y + d.ty + d.dy / 2;\n\n      return `M${x0},${y0}C${x2},${y0} ${x3},${y1} ${x1},${y1}`;\n    }\n\n    link.curvature = (_: any) => {\n      if (!arguments.length) return curvature;\n      curvature = +_;\n      return link;\n    };\n\n    return link;\n  };\n\n  return sankey as D3SankeyType;\n}\n\nexport default Sankey;\n","import {\n  isNil,\n  map,\n  extend,\n  sortBy,\n  includes,\n  filter,\n  reduce,\n  find,\n  keys,\n  values,\n  identity,\n  mapValues,\n  every,\n  isNaN,\n  isNumber,\n  isString,\n} from \"lodash\";\nimport d3 from \"d3\";\nimport d3sankey, { NodeType, LinkType, SourceTargetType, DType } from \"./d3sankey\";\nimport { SankeyDataType } from \".\";\n\nexport type ExtendedSankeyDataType = Partial<SankeyDataType> & { nodes: any[]; links: any[] };\n\nfunction getConnectedNodes(node: NodeType) {\n  console.log(node);\n  // source link = this node is the source, I need the targets\n  const nodes: any = [];\n  node.sourceLinks.forEach((link: LinkType) => {\n    nodes.push(link.target);\n  });\n  node.targetLinks.forEach((link: LinkType) => {\n    nodes.push(link.source);\n  });\n\n  return nodes;\n}\n\nfunction graph(data: ExtendedSankeyDataType[\"rows\"]) {\n  const nodesDict = {};\n  const links = {};\n  const nodes: any[] = [];\n\n  const validKey = (key: any) => key !== \"value\";\n  // @ts-expect-error\n  const dataKeys = sortBy(filter(keys(data[0]), validKey), identity);\n\n  function normalizeName(name: any) {\n    if (!isNil(name)) {\n      return \"\" + name;\n    }\n\n    return \"Exit\";\n  }\n\n  function getNode(name: string, level: any) {\n    name = normalizeName(name);\n    const key = `${name}:${String(level)}`;\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    let node = nodesDict[key];\n    if (!node) {\n      node = { name };\n      node.id = nodes.push(node) - 1;\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      nodesDict[key] = node;\n    }\n    return node;\n  }\n\n  function getLink(source: SourceTargetType, target: SourceTargetType) {\n    // @ts-expect-error ts-migrate(2538) FIXME: Type 'any[]' cannot be used as an index type.\n    let link = links[[source, target]];\n    if (!link) {\n      link = { target, source, value: 0 };\n      // @ts-expect-error ts-migrate(2538) FIXME: Type 'any[]' cannot be used as an index type.\n      links[[source, target]] = link;\n    }\n\n    return link;\n  }\n\n  function addLink(sourceName: any, targetName: any, value: any, depth: any) {\n    if ((sourceName === \"\" || !sourceName) && depth > 1) {\n      return;\n    }\n\n    const source = getNode(sourceName, depth);\n    const target = getNode(targetName, depth + 1);\n    const link = getLink(source.id, target.id);\n    link.value += parseInt(value, 10);\n  }\n\n  // @ts-expect-error\n  data.forEach((row: any) => {\n    addLink(row[dataKeys[0]], row[dataKeys[1]], row.value || 0, 1);\n    addLink(row[dataKeys[1]], row[dataKeys[2]], row.value || 0, 2);\n    addLink(row[dataKeys[2]], row[dataKeys[3]], row.value || 0, 3);\n    addLink(row[dataKeys[3]], row[dataKeys[4]], row.value || 0, 4);\n    addLink(row[dataKeys[4]], null, row.value || 0, 5); // this line ensures that the last stage has a corresponding exit node\n  });\n\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'scale' does not exist on type 'typeof im... Remove this comment to see the full error message\n  const color = d3.scale.category20();\n\n  return {\n    nodes: map(nodes, d => extend(d, { color: color(d.name.replace(/ .*/, \"\")) })),\n    links: values(links),\n  };\n}\n\nfunction spreadNodes(height: any, data: ExtendedSankeyDataType) {\n  const nodesByBreadth = d3\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'nest' does not exist on type 'typeof imp... Remove this comment to see the full error message\n    .nest()\n    .key((d: DType) => d.x)\n    .entries(data.nodes)\n    // @ts-expect-error\n    .map((d: DType) => d.values);\n\n  nodesByBreadth.forEach((nodes: any) => {\n    nodes = filter(\n      sortBy(nodes, node => -node.value),\n      node => node.name !== \"Exit\"\n    );\n\n    // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n    const sum = d3.sum(nodes, o => o.dy);\n    const padding = (height - sum) / nodes.length;\n\n    reduce(\n      nodes,\n      (y0, node) => {\n        node.y = y0;\n        return y0 + node.dy + padding;\n      },\n      0\n    );\n  });\n}\n\nfunction isDataValid(data: ExtendedSankeyDataType) {\n  // data should contain column named 'value', otherwise no reason to render anything at all\n  if (!data || !find(data.columns, c => c.name === \"value\")) {\n    return false;\n  }\n  // prepareData will have coerced any invalid data rows into NaN, which is verified below\n  return every(data.rows, row =>\n    every(row, v => {\n      if (!v || isString(v)) {\n        return true;\n      }\n      return isFinite(v);\n    })\n  );\n}\n\n// will coerce number strings into valid numbers\nfunction prepareDataRows(rows: ExtendedSankeyDataType[\"rows\"]) {\n  return map(rows, row =>\n    mapValues(row, v => {\n      if (!v || isNumber(v)) {\n        return v;\n      }\n      return isNaN(parseFloat(v)) ? v : parseFloat(v);\n    })\n  );\n}\n\nexport default function initSankey(data: ExtendedSankeyDataType) {\n  data.rows = prepareDataRows(data.rows) as ExtendedSankeyDataType[\"rows\"];\n\n  if (!isDataValid(data)) {\n    return (element: HTMLDivElement) => {\n      d3.select(element)\n        .selectAll(\"*\")\n        .remove();\n    };\n  }\n\n  data = graph(data.rows);\n  // @ts-expect-error\n  const format = (d: DType) => d3.format(\",.0f\")(d); // TODO: editor option ?\n\n  return (element: HTMLDivElement) => {\n    d3.select(element)\n      .selectAll(\"*\")\n      .remove();\n\n    const margin = {\n      top: 10,\n      right: 10,\n      bottom: 10,\n      left: 10,\n    };\n    const width = element.offsetWidth - margin.left - margin.right;\n    const height = element.offsetHeight - margin.top - margin.bottom;\n\n    if (width <= 0 || height <= 0) {\n      return;\n    }\n\n    // append the svg canvas to the page\n    const svg: d3.Selection<SVGGElement, any, any, any> = d3\n      .select(element)\n      .append(\"svg\")\n      .attr(\"class\", \"sankey\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n    // Set the sankey diagram properties\n    const sankey = d3sankey()\n      .nodeWidth(15)\n      .nodePadding(10)\n      .size([width, height]);\n\n    const path = sankey.link();\n\n    sankey\n      .nodes(data.nodes)\n      .links(data.links)\n      .layout(0);\n\n    spreadNodes(height, data);\n    sankey.relayout();\n\n    // add in the links\n    const link = svg\n      .append(\"g\")\n      .selectAll(\".link\")\n      .data(data.links)\n      .enter()\n      .append(\"path\")\n      .filter(l => l.target.name !== \"Exit\")\n      .attr(\"class\", \"link\")\n      .attr(\"d\", path)\n      .style(\"stroke-width\", d => Math.max(1, d.dy))\n      .sort((a, b) => b.dy - a.dy);\n\n    // add the link titles\n    link.append(\"title\").text(d => `${d.source.name} → ${d.target.name}\\n${format(d.value)}`);\n\n    const node = svg\n      .append(\"g\")\n      .selectAll(\".node\")\n      .data(data.nodes)\n      .enter()\n      .append(\"g\")\n      .filter(n => n.name !== \"Exit\")\n      .attr(\"class\", \"node\")\n      .attr(\"transform\", (d: DType) => `translate(${d.x},${d.y})`);\n\n    function nodeMouseOver(currentNode: NodeType) {\n      let nodes = getConnectedNodes(currentNode);\n      nodes = map(nodes, i => i.id);\n      node\n        .filter(d => {\n          if (d === currentNode) {\n            return false;\n          }\n          return !includes(nodes, d.id);\n        })\n        .style(\"opacity\", 0.2);\n      link\n        .filter(l => !(includes(currentNode.sourceLinks, l) || includes(currentNode.targetLinks, l)))\n        .style(\"opacity\", 0.2);\n    }\n\n    function nodeMouseOut() {\n      node.style(\"opacity\", 1);\n      link.style(\"opacity\", 1);\n    }\n\n    // add in the nodes\n    node.on(\"mouseover\", nodeMouseOver).on(\"mouseout\", nodeMouseOut);\n\n    // add the rectangles for the nodes\n    // FIXME: d is DType, but d3 will not accept a nonstandard function\n    node\n      .append(\"rect\")\n      .attr(\"height\", (d: any) => d.dy)\n      .attr(\"width\", sankey.nodeWidth())\n      .style(\"fill\", (d: any) => d.color)\n      // @ts-expect-error\n      .style(\"stroke\", (d: any) => d3.rgb(d.color).darker(2))\n      .append(\"title\")\n      .text((d: any) => `${d.name}\\n${format(d.value)}`);\n\n    // add in the title for the nodes\n    node\n      .append(\"text\")\n      .attr(\"x\", -6)\n      .attr(\"y\", (d: any) => d.dy / 2)\n      .attr(\"dy\", \".35em\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"transform\", null)\n      .text((d: any) => d.name)\n      .filter((d: any) => d.x < width / 2)\n      .attr(\"x\", 6 + sankey.nodeWidth())\n      .attr(\"text-anchor\", \"start\");\n  };\n}\n","import React, { useState, useEffect, useMemo } from \"react\";\nimport resizeObserver from \"@/services/resizeObserver\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport { SankeyDataType } from \"./index\";\nimport initSankey, { ExtendedSankeyDataType } from \"./initSankey\";\nimport \"./renderer.less\";\n\nexport default function Renderer({ data }: { data: SankeyDataType }) {\n  const [container, setContainer] = useState<null | HTMLDivElement>(null);\n\n  const render = useMemo(() => initSankey(data as ExtendedSankeyDataType), [data]);\n\n  useEffect(() => {\n    if (container) {\n      render(container);\n      const unwatch = resizeObserver(container, () => {\n        render(container);\n      });\n      return unwatch;\n    }\n  }, [container, render]);\n\n  return <div className=\"sankey-visualization-container\" ref={setContainer} />;\n}\n\nRenderer.propTypes = RendererPropTypes;\n","import Renderer from \"./Renderer\";\nimport Editor from \"./Editor\";\nexport interface SankeyDataType {\n  columns: {\n    name: string;\n    friendly_name: string;\n    type: \"integer\";\n  }[];\n\n  rows: {\n    value: number;\n    [name: string]: number | string | null;\n  }[];\n}\n\nexport default {\n  type: \"SANKEY\",\n  name: \"桑基图(Sankey)\",\n  getOptions: (options: {}) => ({\n    ...options,\n  }),\n  Renderer,\n  Editor,\n\n  defaultRows: 7,\n};\n","import React from \"react\";\n\nexport default function Editor() {\n  return (\n    <React.Fragment>\n      <p>{window.W_L.This_visualization_expects_the_query_result_to_have_rows_in_one_of_the_following_formats}：</p>\n      <ul>\n        <li>\n          <strong>stage1</strong> - {window.W_L.stage_1_value}\n        </li>\n        <li>\n          <strong>stage2</strong> - {window.W_L.stage_2_value_or_null}\n        </li>\n        <li>\n          <strong>stage3</strong> - {window.W_L.stage_3_value_or_null}\n        </li>\n        <li>\n          <strong>stage4</strong> - {window.W_L.stage_4_value_or_null}\n        </li>\n        <li>\n          <strong>stage5</strong> - {window.W_L.stage_5_value_or_null}\n        </li>\n        <li>\n          <strong>value</strong> -{window.W_L.number_of_times_this_sequence_occurred}\n        </li>\n      </ul>\n    </React.Fragment>\n  );\n}\n","/**\n * The following is based on @chrisrzhou's example from: http://bl.ocks.org/chrisrzhou/d5bdd8546f64ca0e4366.\n */\n\nimport * as d3 from \"d3\";\nimport { has, map, keys, groupBy, sortBy, filter, find, compact, first, every, identity } from \"lodash\";\n\nconst exitNode = \"<<<Exit>>>\";\n// @ts-expect-error ts-migrate(2339) FIXME: Property 'scale' does not exist on type 'typeof im... Remove this comment to see the full error message\nconst colors = d3.scale.category10();\n\n// helper function colorMap - color gray if \"end\" is detected\nfunction colorMap(d: any) {\n  return colors(d.name);\n}\n\n// Return array of ancestors of nodes, highest first, but excluding the root.\nfunction getAncestors(node: any) {\n  const path = [];\n  let current = node;\n\n  while (current.parent) {\n    path.unshift(current);\n    current = current.parent;\n  }\n  return path;\n}\n\nfunction buildNodesFromHierarchyData(data: any) {\n  const grouped = groupBy(data, \"sequence\");\n\n  return map(grouped, value => {\n    const sorted = sortBy(value, \"stage\");\n    return {\n      size: value[0].value || 0,\n      sequence: value[0].sequence,\n      nodes: map(sorted, i => i.node),\n    };\n  });\n}\n\nfunction buildNodesFromTableData(data: any) {\n  const validKey = (key: any) => key !== \"value\";\n  const dataKeys = sortBy(filter(keys(data[0]), validKey), identity);\n\n  return map(data, (row, sequence) => ({\n    size: row.value || 0,\n    sequence,\n    nodes: compact(map(dataKeys, key => row[key])),\n  }));\n}\n\nfunction isDataInHierarchyFormat(data: any) {\n  const firstRow = first(data);\n  return every([\"sequence\", \"stage\", \"node\", \"value\"], field => has(firstRow, field));\n}\n\nfunction buildHierarchy(data: any) {\n  data = isDataInHierarchyFormat(data) ? buildNodesFromHierarchyData(data) : buildNodesFromTableData(data);\n\n  // build tree\n  const root = {\n    name: \"root\",\n    children: [],\n  };\n\n  data.forEach((d: any) => {\n    const nodes = d.nodes;\n    const size = parseInt(d.size, 10);\n\n    // build graph, nodes, and child nodes\n    let currentNode = root;\n    for (let j = 0; j < nodes.length; j += 1) {\n      let children = currentNode.children;\n      const nodeName = nodes[j];\n      const isLeaf = j + 1 === nodes.length;\n\n      if (!children) {\n        currentNode.children = children = [];\n        children.push({\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'never'.\n          name: exitNode,\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          size: currentNode.size,\n        });\n      }\n\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'name' does not exist on type 'never'.\n      let childNode = find(children, child => child.name === nodeName);\n\n      if (isLeaf && childNode) {\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'children' does not exist on type 'never'... Remove this comment to see the full error message\n        childNode.children = childNode.children || [];\n        // @ts-expect-error ts-migrate(2339) FIXME: Property 'children' does not exist on type 'never'... Remove this comment to see the full error message\n        childNode.children.push({\n          name: exitNode,\n          size,\n        });\n      } else if (isLeaf) {\n        children.push({\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'any' is not assignable to type 'never'.\n          name: nodeName,\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'number' is not assignable to type 'never'.\n          size,\n        });\n      } else {\n        if (!childNode) {\n          // @ts-expect-error ts-migrate(2322) FIXME: Type '{ name: any; children: never[]; }' is not as... Remove this comment to see the full error message\n          childNode = {\n            name: nodeName,\n            children: [],\n          };\n          // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'undefined' is not assignable to ... Remove this comment to see the full error message\n          children.push(childNode);\n        }\n\n        // @ts-expect-error ts-migrate(2322) FIXME: Type 'undefined' is not assignable to type '{ name... Remove this comment to see the full error message\n        currentNode = childNode;\n      }\n    }\n  });\n\n  return root;\n}\n\nfunction isDataValid(data: any) {\n  return data && data.rows.length > 0;\n}\n\nexport default function initSunburst(data: any) {\n  if (!isDataValid(data)) {\n    return (element: any) => {\n      d3.select(element)\n        .selectAll(\"*\")\n        .remove();\n    };\n  }\n\n  data = buildHierarchy(data.rows);\n\n  return (element: any) => {\n    d3.select(element)\n      .selectAll(\"*\")\n      .remove();\n\n    // svg dimensions\n    const width = element.clientWidth;\n    const height = element.offsetHeight;\n\n    // Breadcrumb dimensions: width, height, spacing, width of tip/tail.\n    const b = {\n      w: width / 6,\n      h: 30,\n      s: 3,\n      t: 10,\n    };\n\n    const radius = Math.min(width - b.h, height - b.h) / 2 - 5;\n    if (radius <= 0) {\n      return;\n    }\n\n    // margins\n    const margin = {\n      top: radius,\n      bottom: 50,\n      left: radius,\n      right: 0,\n    };\n\n    // Drawing variables: e.g. colors, totalSize, partitions, arcs\n\n    // Total size of all nodes, to be used later when data is loaded\n    let totalSize = 0;\n\n    // create d3.layout.partition\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'layout' does not exist on type 'typeof i... Remove this comment to see the full error message\n    const partition = d3.layout\n      .partition()\n      .size([2 * Math.PI, radius * radius])\n      .value((d: any) => d.size);\n\n    // create arcs for drawing D3 paths\n    const arc = d3.svg\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'arc' does not exist on type '(url: strin... Remove this comment to see the full error message\n      .arc()\n      .startAngle((d: any) => d.x)\n      .endAngle((d: any) => d.x + d.dx)\n      .innerRadius((d: any) => Math.sqrt(d.y))\n      .outerRadius((d: any) => Math.sqrt(d.y + d.dy));\n\n    /**\n     * Define and initialize D3 select references and div-containers\n     *\n     * e.g. vis, breadcrumbs, lastCrumb, summary, sunburst, legend\n     */\n    const vis = d3.select(element);\n\n    // create and position breadcrumbs container and svg\n    const breadcrumbs = vis\n      .append(\"div\")\n      .classed(\"breadcrumbs-container\", true)\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", b.h)\n      .attr(\"fill\", \"white\")\n      .attr(\"font-weight\", 600);\n\n    // create and position SVG\n    const container = vis.append(\"div\");\n\n    // create and position summary container\n    const summary = container.append(\"div\").classed(\"summary-container\", true);\n\n    const sunburst = container\n      .append(\"div\")\n      .classed(\"sunburst-container\", true)\n      .append(\"svg\")\n      .attr(\"width\", radius * 2)\n      .attr(\"height\", radius * 2)\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n    // create last breadcrumb element\n    const lastCrumb = breadcrumbs.append(\"text\").classed(\"lastCrumb\", true);\n\n    // Generate a string representation for drawing a breadcrumb polygon.\n    function breadcrumbPoints(d: any, i: any) {\n      const points = [];\n      points.push(\"0,0\");\n      points.push(`${b.w},0`);\n      points.push(`${b.w + b.t},${b.h / 2}`);\n      points.push(`${b.w},${b.h}`);\n      points.push(`0,${b.h}`);\n\n      if (i > 0) {\n        // Leftmost breadcrumb; don't include 6th vertex.\n        points.push(`${b.t},${b.h / 2}`);\n      }\n      return points.join(\" \");\n    }\n\n    // Update the breadcrumb breadcrumbs to show the current sequence and percentage.\n    function updateBreadcrumbs(ancestors: any, percentageString: any) {\n      // Data join, where primary key = name + depth.\n      // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n      const g = breadcrumbs.selectAll(\"g\").data(ancestors, d => d.name + d.depth);\n\n      // Add breadcrumb and label for entering nodes.\n      const breadcrumb = g.enter().append(\"g\");\n\n      breadcrumb\n        .append(\"polygon\")\n        .classed(\"breadcrumbs-shape\", true)\n        .attr(\"points\", breadcrumbPoints)\n        .attr(\"fill\", colorMap);\n\n      breadcrumb\n        .append(\"text\")\n        .classed(\"breadcrumbs-text\", true)\n        .attr(\"x\", (b.w + b.t) / 2)\n        .attr(\"y\", b.h / 2)\n        .attr(\"dy\", \"0.35em\")\n        .attr(\"font-size\", \"10px\")\n        .attr(\"text-anchor\", \"middle\")\n        // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n        .text(d => d.name);\n\n      // Set position for entering and updating nodes.\n      g.attr(\"transform\", (d, i) => `translate(${i * (b.w + b.s)}, 0)`);\n\n      // Remove exiting nodes.\n      g.exit().remove();\n\n      // Update percentage at the lastCrumb.\n      lastCrumb\n        .attr(\"x\", (ancestors.length + 0.5) * (b.w + b.s))\n        .attr(\"y\", b.h / 2)\n        .attr(\"dy\", \"0.35em\")\n        .attr(\"text-anchor\", \"middle\")\n        .attr(\"fill\", \"black\")\n        .attr(\"font-weight\", 600)\n        .text(percentageString);\n    }\n\n    // helper function mouseover to handle mouseover events/animations and calculation\n    // of ancestor nodes etc\n    function mouseover(d: any) {\n      // build percentage string\n      const percentage = ((100 * d.value) / totalSize).toPrecision(3);\n      let percentageString = `${percentage}%`;\n      // @ts-expect-error ts-migrate(2365) FIXME: Operator '<' cannot be applied to types 'string' a... Remove this comment to see the full error message\n      if (percentage < 1) {\n        percentageString = \"< 1.0%\";\n      }\n\n      // update breadcrumbs (get all ancestors)\n      const ancestors = getAncestors(d);\n      updateBreadcrumbs(ancestors, percentageString);\n\n      // update sunburst (Fade all the segments and highlight only ancestors of current segment)\n      sunburst.selectAll(\"path\").attr(\"opacity\", 0.3);\n      sunburst\n        .selectAll(\"path\")\n        .filter(node => ancestors.indexOf(node) >= 0)\n        .attr(\"opacity\", 1);\n\n      // update summary\n      summary.html(`\n      <span>层级:${d.depth}</span>\n      <span class='percentage' style='font-size: 2em;'>${percentageString}</span>\n      <span>${d.value} / ${totalSize}</span>\n    `);\n\n      // display summary and breadcrumbs if hidden\n      summary.style(\"visibility\", \"\");\n      breadcrumbs.style(\"visibility\", \"\");\n    }\n\n    // helper function click to handle mouseleave events/animations\n    function click() {\n      // Deactivate all segments then retransition each segment to full opacity.\n      sunburst.selectAll(\"path\").on(\"mouseover\", null);\n      sunburst\n        .selectAll(\"path\")\n        .transition()\n        .duration(1000)\n        .attr(\"opacity\", 1)\n        // @ts-expect-error ts-migrate(2554) FIXME: Expected 1 arguments, but got 2.\n        .each(\"end\", function endClick() {\n          // @ts-expect-error ts-migrate(2683) FIXME: 'this' implicitly has type 'any' because it does n... Remove this comment to see the full error message\n          d3.select(this).on(\"mouseover\", mouseover);\n        });\n\n      // hide summary and breadcrumbs if visible\n      breadcrumbs.style(\"visibility\", \"hidden\");\n      summary.style(\"visibility\", \"hidden\");\n    }\n\n    // Build only nodes of a threshold \"visible\" sizes to improve efficiency\n    // 0.005 radians = 0.29 degrees\n    const nodes = partition.nodes(data).filter((d: any) => d.dx > 0.005 && d.name !== exitNode);\n\n    // this section is required to update the colors.domain() every time the data updates\n    const uniqueNames = (function uniqueNames(a) {\n      const output: any = [];\n      a.forEach((d: any) => {\n        if (output.indexOf(d.name) === -1) output.push(d.name);\n      });\n      return output;\n    })(nodes);\n    colors.domain(uniqueNames); // update domain colors\n\n    // create path based on nodes\n    const path = sunburst\n      .data([data])\n      .selectAll(\"path\")\n      .data(nodes)\n      .enter()\n      .append(\"path\")\n      .classed(\"nodePath\", true)\n      // @ts-expect-error ts-migrate(2571) FIXME: Object is of type 'unknown'.\n      .attr(\"display\", d => (d.depth ? null : \"none\"))\n      .attr(\"d\", arc)\n      .attr(\"fill\", colorMap)\n      .attr(\"opacity\", 1)\n      .attr(\"stroke\", \"white\")\n      .on(\"mouseover\", mouseover);\n\n    // // trigger mouse click over sunburst to reset visualization summary\n    vis.on(\"click\", click);\n\n    // Update totalSize of the tree = value of root node from partition.\n    // @ts-expect-error ts-migrate(2531) FIXME: Object is possibly 'null'.\n    totalSize = path.node().__data__.value;\n  };\n}\n","import React, { useState, useEffect, useMemo } from \"react\";\nimport resizeObserver from \"@/services/resizeObserver\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport initSunburst from \"./initSunburst\";\nimport \"./renderer.less\";\n\nexport default function Renderer({ data }: any) {\n  const [container, setContainer] = useState(null);\n\n  const render = useMemo(() => initSunburst(data), [data]);\n\n  useEffect(() => {\n    if (container) {\n      render(container);\n      const unwatch = resizeObserver(container, () => {\n        render(container);\n      });\n      return unwatch;\n    }\n  }, [container, render]);\n\n  // @ts-expect-error ts-migrate(2322) FIXME: Type 'Dispatch<SetStateAction<null>>' is not assig... Remove this comment to see the full error message\n  return <div className=\"sunburst-visualization-container\" ref={setContainer} />;\n}\n\nRenderer.propTypes = RendererPropTypes;\n","import Renderer from \"./Renderer\";\nimport Editor from \"./Editor\";\n\nexport default {\n  type: \"SUNBURST_SEQUENCE\",\n  name: \"旭辉图(Sunburst Sequence)\",\n  getOptions: (options: any) => ({\n    ...options,\n  }),\n  Renderer,\n  Editor,\n\n  defaultRows: 7,\n};\n","import React from \"react\";\nimport { Section } from \"@/components/chart/components/visualizations/editor\";\n\nexport default function Editor() {\n  return (\n    <React.Fragment>\n      <p>{window.W_L.This_visualization_expects_the_query_result_to_have_rows_in_one_of_the_following_formats}：</p>\n      {/* @ts-expect-error ts-migrate(2746) FIXME: This JSX tag's 'children' prop expects a single ch... Remove this comment to see the full error message */}\n      <Section>\n        <p>\n          <strong>{window.W_L.Option}1：</strong>\n        </p>\n        <ul>\n          <li>\n            <strong>sequence</strong> - {window.W_L.sequence_id}\n          </li>\n          <li>\n            <strong>stage</strong> - {window.W_L.what_stage_in_sequence_this_is_1_2}\n          </li>\n          <li>\n            <strong>node</strong> - {window.W_L.stage_name}\n          </li>\n          <li>\n            <strong>value</strong> - {window.W_L.number_of_times_this_sequence_occurred}\n          </li>\n        </ul>\n      </Section>\n      {/* @ts-expect-error ts-migrate(2746) FIXME: This JSX tag's 'children' prop expects a single ch... Remove this comment to see the full error message */}\n      <Section>\n        <p>\n          <strong>{window.W_L.Option}2：</strong>\n        </p>\n        <ul>\n          <li>\n            <strong>stage1</strong> - {window.W_L.stage_1_value}\n          </li>\n          <li>\n            <strong>stage2</strong> - {window.W_L.stage_2_value_or_null}\n          </li>\n          <li>\n            <strong>stage3</strong> - {window.W_L.stage_3_value_or_null}\n          </li>\n          <li>\n            <strong>stage4</strong> - {window.W_L.stage_4_value_or_null}\n          </li>\n          <li>\n            <strong>stage5</strong> - {window.W_L.stage_5_value_or_null}\n          </li>\n          <li>\n            <strong>value</strong> - {window.W_L.number_of_times_this_sequence_occurred}\n          </li>\n        </ul>\n      </Section>\n    </React.Fragment>\n  );\n}\n","import _ from \"lodash\";\nimport { visualizationsSettings } from \"@/components/chart/visualizations/visualizationsSettings\";\n\nconst DEFAULT_OPTIONS = {\n  itemsPerPage: 25,\n  paginationSize: \"default\", // not editable through Editor\n};\n\nconst filterTypes = [\"filter\", \"multi-filter\", \"multiFilter\"];\n\nfunction getColumnNameWithoutType(column: any) {\n  let typeSplit;\n  if (column.indexOf(\"::\") !== -1) {\n    typeSplit = \"::\";\n  } else if (column.indexOf(\"__\") !== -1) {\n    typeSplit = \"__\";\n  } else {\n    return column;\n  }\n\n  const parts = column.split(typeSplit);\n  if (parts[0] === \"\" && parts.length === 2) {\n    return parts[1];\n  }\n\n  if (!_.includes(filterTypes, parts[1])) {\n    return column;\n  }\n\n  return parts[0];\n}\n\nfunction getColumnContentAlignment(type: any) {\n  return [\"integer\", \"float\", \"boolean\", \"date\", \"datetime\"].indexOf(type) >= 0 ? \"right\" : \"left\";\n}\n\nfunction getDefaultColumnsOptions(columns: any) {\n  const displayAs = {\n    integer: \"number\",\n    float: \"number\",\n    boolean: \"boolean\",\n    date: \"datetime\",\n    datetime: \"datetime\",\n  };\n\n  return _.map(columns, (col, index) => ({\n    name: col.name,\n    type: col.type,\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    displayAs: displayAs[col.type] || \"string\",\n    visible: true,\n    order: 100000 + index,\n    title: getColumnNameWithoutType(col.name),\n    allowSearch: false,\n    alignContent: getColumnContentAlignment(col.type),\n    // `string` cell options\n    allowHTML: true,\n    highlightLinks: false,\n  }));\n}\n\nfunction getDefaultFormatOptions(column: any) {\n  const dateTimeFormat = {\n    date: visualizationsSettings.dateFormat || \"DD/MM/YYYY\",\n    datetime: visualizationsSettings.dateTimeFormat || \"DD/MM/YYYY HH:mm\",\n  };\n  const numberFormat = {\n    integer: visualizationsSettings.integerFormat || \"0,0\",\n    float: visualizationsSettings.floatFormat || \"0,0.00\",\n  };\n  return {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    dateTimeFormat: dateTimeFormat[column.type],\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    numberFormat: numberFormat[column.type],\n    booleanValues: visualizationsSettings.booleanValues || [\"false\", \"true\"],\n    // `image` cell options\n    imageUrlTemplate: \"{{ @ }}\",\n    imageTitleTemplate: \"{{ @ }}\",\n    imageWidth: \"\",\n    imageHeight: \"\",\n    // `link` cell options\n    linkUrlTemplate: \"{{ @ }}\",\n    linkTextTemplate: \"{{ @ }}\",\n    linkTitleTemplate: \"{{ @ }}\",\n    linkOpenInNewTab: true,\n  };\n}\n\nfunction wereColumnsReordered(queryColumns: any, visualizationColumns: any) {\n  queryColumns = _.map(queryColumns, col => col.name);\n  visualizationColumns = _.map(visualizationColumns, col => col.name);\n\n  // Some columns may be removed - so skip them (but keep original order)\n  visualizationColumns = _.filter(visualizationColumns, col => _.includes(queryColumns, col));\n  // Pick query columns that were previously saved with viz (but keep order too)\n  queryColumns = _.filter(queryColumns, col => _.includes(visualizationColumns, col));\n\n  // Both array now have the same size as they both contains only common columns\n  // (in fact, it was an intersection, that kept order of items on both arrays).\n  // Now check for equality item-by-item; if common columns are in the same order -\n  // they were not reordered in editor\n  for (let i = 0; i < queryColumns.length; i += 1) {\n    if (visualizationColumns[i] !== queryColumns[i]) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction getColumnsOptions(columns: any, visualizationColumns: any) {\n  const options = getDefaultColumnsOptions(columns);\n\n  if (wereColumnsReordered(columns, visualizationColumns)) {\n    visualizationColumns = _.fromPairs(\n      _.map(visualizationColumns, (col, index) => [col.name, _.extend({}, col, { order: index })])\n    );\n  } else {\n    visualizationColumns = _.fromPairs(_.map(visualizationColumns, col => [col.name, _.omit(col, \"order\")]));\n  }\n\n  _.each(options, col => _.extend(col, visualizationColumns[col.name]));\n\n  return _.sortBy(options, \"order\");\n}\n\nexport default function getOptions(options: any, { columns }: any) {\n  options = { ...DEFAULT_OPTIONS, ...options };\n  options.columns = _.map(getColumnsOptions(columns, options.columns), col => ({\n    ...getDefaultFormatOptions(col),\n    ...col,\n  }));\n  return options;\n}\n","import React from \"react\";\nimport HtmlContent from \"@/components/chart/components/HtmlContent\";\nimport { Section, Checkbox } from \"@/components/chart/components/visualizations/editor\";\nimport { createTextFormatter } from \"@/components/chart/lib/value-format\";\n\ntype Props = {\n  column: {\n    name: string;\n    allowHTML?: boolean;\n    highlightLinks?: boolean;\n  };\n  onChange: (...args: any[]) => any;\n};\n\nfunction Editor({ column, onChange }: Props) {\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Checkbox\n          data-test=\"Table.ColumnEditor.Text.AllowHTML\"\n          checked={column.allowHTML}\n          onChange={event => onChange({ allowHTML: event.target.checked })}>\n           {window.W_L.Allow_HTML_content}\n        </Checkbox>\n      </Section>\n\n      {column.allowHTML && (\n        // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n        <Section>\n          <Checkbox\n            data-test=\"Table.ColumnEditor.Text.HighlightLinks\"\n            checked={column.highlightLinks}\n            onChange={event => onChange({ highlightLinks: event.target.checked })}>\n            {window.W_L.Highlight_links}\n          </Checkbox>\n        </Section>\n      )}\n    </React.Fragment>\n  );\n}\n\nexport default function initTextColumn(column: any) {\n  const format = createTextFormatter(column.allowHTML && column.highlightLinks);\n\n  function prepareData(row: any) {\n    return {\n      text: format(row[column.name]),\n    };\n  }\n\n  function TextColumn({ row }: any) {\n    // eslint-disable-line react/prop-types\n    const { text } = prepareData(row);\n    return column.allowHTML ? <HtmlContent>{text}</HtmlContent> : text;\n  }\n\n  TextColumn.prepareData = prepareData;\n\n  return TextColumn;\n}\n\ninitTextColumn.friendlyName = window.W_L.text;\ninitTextColumn.Editor = Editor;\n","import React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Section, Input, ContextHelp } from \"@/components/chart/components/visualizations/editor\";\nimport { createNumberFormatter } from \"@/components/chart/lib/value-format\";\n\ntype Props = {\n  column: {\n    name: string;\n    numberFormat?: string;\n  };\n  onChange: (...args: any[]) => any;\n};\n\nfunction Editor({ column, onChange }: Props) {\n  const [onChangeDebounced] = useDebouncedCallback(onChange, 200);\n\n  return (\n    // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n    <Section>\n      <Input\n        label={\n          <React.Fragment>\n             {window.W_L.Number_format}\n            <ContextHelp.NumberFormatSpecs />\n          </React.Fragment>\n        }\n        data-test=\"Table.ColumnEditor.Number.Format\"\n        defaultValue={column.numberFormat}\n        onChange={(event: any) => onChangeDebounced({ numberFormat: event.target.value })}\n      />\n    </Section>\n  );\n}\n\nexport default function initNumberColumn(column: any) {\n  const format = createNumberFormatter(column.numberFormat);\n\n  function prepareData(row: any) {\n    return {\n      text: format(row[column.name]),\n    };\n  }\n\n  function NumberColumn({ row }: any) {\n    // eslint-disable-line react/prop-types\n    const { text } = prepareData(row);\n    return text;\n  }\n\n  NumberColumn.prepareData = prepareData;\n\n  return NumberColumn;\n}\n\ninitNumberColumn.friendlyName =window.W_L.number;\ninitNumberColumn.Editor = Editor;\n","import React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Section, Input, ContextHelp } from \"@/components/chart/components/visualizations/editor\";\nimport { createDateTimeFormatter } from \"@/components/chart/lib/value-format\";\n\ntype Props = {\n  column: {\n    name: string;\n    dateTimeFormat?: string;\n  };\n  onChange: (...args: any[]) => any;\n};\n\nfunction Editor({ column, onChange }: Props) {\n  const [onChangeDebounced] = useDebouncedCallback(onChange, 200);\n\n  return (\n    // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n    <Section>\n      <Input\n        label={\n          <React.Fragment>\n             {window.W_L.Date_Time_format}\n            <ContextHelp.DateTimeFormatSpecs />\n          </React.Fragment>\n        }\n        data-test=\"Table.ColumnEditor.DateTime.Format\"\n        defaultValue={column.dateTimeFormat}\n        onChange={(event: any) => onChangeDebounced({ dateTimeFormat: event.target.value })}\n      />\n    </Section>\n  );\n}\n\nexport default function initDateTimeColumn(column: any) {\n  const format = createDateTimeFormatter(column.dateTimeFormat);\n\n  function prepareData(row: any) {\n    return {\n      text: format(row[column.name]),\n    };\n  }\n\n  function DateTimeColumn({ row }: any) {\n    // eslint-disable-line react/prop-types\n    const { text } = prepareData(row);\n    return text;\n  }\n\n  DateTimeColumn.prepareData = prepareData;\n\n  return DateTimeColumn;\n}\n\ninitDateTimeColumn.friendlyName = window.W_L.datetime;\ninitDateTimeColumn.Editor = Editor;\n","import React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Section, Input } from \"@/components/chart/components/visualizations/editor\";\nimport { createBooleanFormatter } from \"@/components/chart/lib/value-format\";\n\ntype Props = {\n  column: {\n    name: string;\n    booleanValues?: string[];\n  };\n  onChange: (...args: any[]) => any;\n};\n\nfunction Editor({ column, onChange }: Props) {\n  function handleChange(index: any, value: any) {\n    // @ts-expect-error ts-migrate(2488) FIXME: Type 'string[] | undefined' must have a '[Symbol.i... Remove this comment to see the full error message\n    const booleanValues = [...column.booleanValues];\n    booleanValues.splice(index, 1, value);\n    onChange({ booleanValues });\n  }\n\n  const [handleChangeDebounced] = useDebouncedCallback(handleChange, 200);\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={\n            <React.Fragment>\n              {window.W_L.Value_for} <code>false</code>\n            </React.Fragment>\n          }\n          data-test=\"Table.ColumnEditor.Boolean.False\"\n          // @ts-expect-error ts-migrate(2532) FIXME: Object is possibly 'undefined'.\n          defaultValue={column.booleanValues[0]}\n          onChange={(event: any) => handleChangeDebounced(0, event.target.value)}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={\n            <React.Fragment>\n               {window.W_L.Value_for} <code>true</code>\n            </React.Fragment>\n          }\n          data-test=\"Table.ColumnEditor.Boolean.True\"\n          // @ts-expect-error ts-migrate(2532) FIXME: Object is possibly 'undefined'.\n          defaultValue={column.booleanValues[1]}\n          onChange={(event: any) => handleChangeDebounced(1, event.target.value)}\n        />\n      </Section>\n    </React.Fragment>\n  );\n}\n\nexport default function initBooleanColumn(column: any) {\n  const format = createBooleanFormatter(column.booleanValues);\n\n  function prepareData(row: any) {\n    return {\n      text: format(row[column.name]),\n    };\n  }\n\n  function BooleanColumn({ row }: any) {\n    // eslint-disable-line react/prop-types\n    const { text } = prepareData(row);\n    return text;\n  }\n\n  BooleanColumn.prepareData = prepareData;\n\n  return BooleanColumn;\n}\n\ninitBooleanColumn.friendlyName = window.W_L.Boolean;\ninitBooleanColumn.Editor = Editor;\n","import { extend, trim } from \"lodash\";\nimport React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Section, Input, Checkbox, ContextHelp } from \"@/components/chart/components/visualizations/editor\";\nimport { formatSimpleTemplate } from \"@/components/chart/lib/value-format\";\n\ntype Props = {\n  column: {\n    name: string;\n    linkUrlTemplate?: string;\n    linkTextTemplate?: string;\n    linkTitleTemplate?: string;\n    linkOpenInNewTab?: boolean;\n  };\n  onChange: (...args: any[]) => any;\n};\n\nfunction Editor({ column, onChange }: Props) {\n  const [onChangeDebounced] = useDebouncedCallback(onChange, 200);\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={window.W_L.URL_template}\n          data-test=\"Table.ColumnEditor.Link.UrlTemplate\"\n          defaultValue={column.linkUrlTemplate}\n          onChange={(event: any) => onChangeDebounced({ linkUrlTemplate: event.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={window.W_L.Text_template}\n          data-test=\"Table.ColumnEditor.Link.TextTemplate\"\n          defaultValue={column.linkTextTemplate}\n          onChange={(event: any) => onChangeDebounced({ linkTextTemplate: event.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={window.W_L.Title_template}\n          data-test=\"Table.ColumnEditor.Link.TitleTemplate\"\n          defaultValue={column.linkTitleTemplate}\n          onChange={(event: any) => onChangeDebounced({ linkTitleTemplate: event.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Checkbox\n          data-test=\"Table.ColumnEditor.Link.OpenInNewTab\"\n          checked={column.linkOpenInNewTab}\n          onChange={event => onChange({ linkOpenInNewTab: event.target.checked })}>\n          {window.W_L.Open_in_new_tab}\n        </Checkbox>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2746) FIXME: This JSX tag's 'children' prop expects a single ch... Remove this comment to see the full error message */}\n        <ContextHelp\n          placement=\"topLeft\"\n          arrowPointAtCenter\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message\n          icon={<span style={{ cursor: \"default\" }}>Format specs {ContextHelp.defaultIcon}</span>}>\n          <div>\n          {window.W_L.All_columns_can_be_referenced_using}<code>{\"{{ column_name }}\"}</code> {window.W_L.syntax}\n          </div>\n          <div>\n          {window.W_L.Use} <code>{\"{{ @ }}\"}</code> {window.W_L.to_reference_current_this_column}\n          </div>\n          <div>{window.W_L.This_syntax_is_applicable_to_URL_Text_and_Title_options}</div>\n        </ContextHelp>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nexport default function initLinkColumn(column: any) {\n  function prepareData(row: any) {\n    row = extend({ \"@\": row[column.name] }, row);\n\n    const href = trim(formatSimpleTemplate(column.linkUrlTemplate, row));\n    if (href === \"\") {\n      return {};\n    }\n\n    const title = trim(formatSimpleTemplate(column.linkTitleTemplate, row));\n    const text = trim(formatSimpleTemplate(column.linkTextTemplate, row));\n\n    const result = {\n      href,\n      text: text !== \"\" ? text : href,\n    };\n\n    if (title !== \"\") {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'title' does not exist on type '{ href: s... Remove this comment to see the full error message\n      result.title = title;\n    }\n    if (column.linkOpenInNewTab) {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'target' does not exist on type '{ href: ... Remove this comment to see the full error message\n      result.target = \"_blank\";\n    }\n\n    return result;\n  }\n\n  function LinkColumn({ row }: any) {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'text' does not exist on type '{}'.\n    // eslint-disable-line react/prop-types\n    const { text, ...props } = prepareData(row);\n    return <a {...props}>{text}</a>;\n  }\n\n  LinkColumn.prepareData = prepareData;\n\n  return LinkColumn;\n}\n\ninitLinkColumn.friendlyName = window.W_L.Link;\ninitLinkColumn.Editor = Editor;\n","import { extend, trim } from \"lodash\";\nimport React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport { Section, Input, ControlLabel, ContextHelp } from \"@/components/chart/components/visualizations/editor\";\nimport { formatSimpleTemplate } from \"@/components/chart/lib/value-format\";\n\ntype Props = {\n  column: {\n    name: string;\n    imageUrlTemplate?: string;\n    imageWidth?: string;\n    imageHeight?: string;\n    imageTitleTemplate?: string;\n  };\n  onChange: (...args: any[]) => any;\n};\n\nfunction Editor({ column, onChange }: Props) {\n  const [onChangeDebounced] = useDebouncedCallback(onChange, 200);\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={window.W_L.URL_template}\n          data-test=\"Table.ColumnEditor.Image.UrlTemplate\"\n          defaultValue={column.imageUrlTemplate}\n          onChange={(event: any) => onChangeDebounced({ imageUrlTemplate: event.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <ControlLabel\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message\n          label={\n            <React.Fragment>\n              {window.W_L.Size}\n              {/* @ts-expect-error ts-migrate(2746) FIXME: This JSX tag's 'children' prop expects a single ch... Remove this comment to see the full error message */}\n              <ContextHelp placement=\"topLeft\" arrowPointAtCenter>\n                <div style={{ marginBottom: 5 }}>{window.W_L.Any_positive_integer_value_that_specifies_size_in_pixels}</div>\n                <div>{window.W_L.Leave_empty_to_use_default_value}</div>\n              </ContextHelp>\n            </React.Fragment>\n          }>\n          {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message */}\n          <div className=\"image-dimension-selector\">\n            <Input\n              data-test=\"Table.ColumnEditor.Image.Width\"\n              placeholder={window.W_L.Width}\n              defaultValue={column.imageWidth}\n              onChange={(event: any) => onChangeDebounced({ imageWidth: event.target.value })}\n            />\n            <span className=\"image-dimension-selector-spacer\">&times;</span>\n            <Input\n              data-test=\"Table.ColumnEditor.Image.Height\"\n              placeholder={window.W_L.Height}\n              defaultValue={column.imageHeight}\n              onChange={(event: any) => onChangeDebounced({ imageHeight: event.target.value })}\n            />\n          </div>\n        </ControlLabel>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label={window.W_L.Title_template}\n          data-test=\"Table.ColumnEditor.Image.TitleTemplate\"\n          defaultValue={column.imageTitleTemplate}\n          onChange={(event: any) => onChangeDebounced({ imageTitleTemplate: event.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2746) FIXME: This JSX tag's 'children' prop expects a single ch... Remove this comment to see the full error message */}\n        <ContextHelp\n          placement=\"topLeft\"\n          arrowPointAtCenter\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message\n          icon={<span style={{ cursor: \"default\" }}>Format specs {ContextHelp.defaultIcon}</span>}>\n          <div>\n          {window.W_L.All_columns_can_be_referenced_using}<code>{\"{{ column_name }}\"}</code> {window.W_L.syntax}\n          </div>\n          <div>\n          {window.W_L.Use} <code>{\"{{ @ }}\"}</code> {window.W_L.to_reference_current_this_column}\n          </div>\n          <div>{window.W_L.This_syntax_is_applicable_to_URL_Text_and_Title_options}</div>\n        </ContextHelp>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nexport default function initImageColumn(column: any) {\n  function prepareData(row: any) {\n    row = extend({ \"@\": row[column.name] }, row);\n\n    const src = trim(formatSimpleTemplate(column.imageUrlTemplate, row));\n    if (src === \"\") {\n      return {};\n    }\n\n    const width = parseInt(formatSimpleTemplate(column.imageWidth, row), 10);\n    const height = parseInt(formatSimpleTemplate(column.imageHeight, row), 10);\n    const title = trim(formatSimpleTemplate(column.imageTitleTemplate, row));\n\n    const result = { src };\n\n    if (Number.isFinite(width) && width > 0) {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'width' does not exist on type '{ src: st... Remove this comment to see the full error message\n      result.width = width;\n    }\n    if (Number.isFinite(height) && height > 0) {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'height' does not exist on type '{ src: s... Remove this comment to see the full error message\n      result.height = height;\n    }\n    if (title !== \"\") {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'text' does not exist on type '{ src: str... Remove this comment to see the full error message\n      result.text = title; // `text` is used for search\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'title' does not exist on type '{ src: st... Remove this comment to see the full error message\n      result.title = title;\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'alt' does not exist on type '{ src: stri... Remove this comment to see the full error message\n      result.alt = title;\n    }\n\n    return result;\n  }\n\n  function ImageColumn({ row }: any) {\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'text' does not exist on type '{}'.\n    // eslint-disable-line react/prop-types\n    const { text, ...props } = prepareData(row);\n    return <img alt=\"\" {...props} />;\n  }\n\n  ImageColumn.prepareData = prepareData;\n\n  return ImageColumn;\n}\n\ninitImageColumn.friendlyName = window.W_L.Image;\ninitImageColumn.Editor = Editor;\n","/* eslint-disable react/prop-types */\n\nimport { isFinite, isString, isArray, isObject, keys, map } from \"lodash\";\nimport React, { useState } from \"react\";\nimport cx from \"classnames\";\n\nimport \"./json-view-interactive.less\";\n\nfunction JsonBlock({ value, children, openingBrace, closingBrace, withKeys }: any) {\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  const objectKeys = keys(value);\n  const count = objectKeys.length;\n\n  return (\n    <React.Fragment>\n      {count > 0 && (\n        <span className=\"jvi-toggle\" onClick={() => setIsExpanded(!isExpanded)}>\n          <i className={cx(\"fa\", { \"fa-caret-right\": !isExpanded, \"fa-caret-down\": isExpanded })} />\n        </span>\n      )}\n      <span className=\"jvi-punctuation jvi-braces\">{openingBrace}</span>\n      {!isExpanded && count > 0 && (\n        <span className=\"jvi-punctuation jvi-ellipsis\" onClick={() => setIsExpanded(true)}>\n          &hellip;\n        </span>\n      )}\n      {isExpanded && (\n        <span className=\"jvi-block\">\n          {map(objectKeys, (key, index) => {\n            const isFirst = index === 0;\n            const isLast = index === count - 1;\n            const comma = isLast ? null : <span className=\"jvi-punctuation jvi-comma\">,</span>;\n            return (\n              <span\n                key={\"item-\" + key}\n                className={cx(\"jvi-item\", { \"jvi-nested-first\": isFirst, \"jvi-nested-last\": isLast })}>\n                {withKeys && (\n                  <span className=\"jvi-object-key\">\n                    <JsonValue value={key}>\n                      <span className=\"jvi-punctuation\">: </span>\n                    </JsonValue>\n                  </span>\n                )}\n                <JsonValue value={value[key]}>{comma}</JsonValue>\n              </span>\n            );\n          })}\n        </span>\n      )}\n      <span className=\"jvi-punctuation jvi-braces\">{closingBrace}</span>\n      {children}\n      {!isExpanded && <span className=\"jvi-comment\">{\" // \" + count + \" \" + (count === 1 ? \"item\" : \"items\")}</span>}\n    </React.Fragment>\n  );\n}\n\nfunction JsonValue({ value, children }: any) {\n  if (value === null || value === false || value === true || isFinite(value)) {\n    return (\n      <span className=\"jvi-value jvi-primitive\">\n        {\"\" + value}\n        {children}\n      </span>\n    );\n  }\n  if (isString(value)) {\n    return (\n      <React.Fragment>\n        <span className=\"jvi-punctuation jvi-string\">&quot;</span>\n        <span className=\"jvi-value jvi-string\">{value}</span>\n        <span className=\"jvi-punctuation jvi-string\">&quot;</span>\n        {children}\n      </React.Fragment>\n    );\n  }\n  if (isArray(value)) {\n    return (\n      <JsonBlock value={value} openingBrace=\"[\" closingBrace=\"]\">\n        {children}\n      </JsonBlock>\n    );\n  }\n  if (isObject(value)) {\n    return (\n      <JsonBlock value={value} openingBrace=\"{\" closingBrace=\"}\" withKeys>\n        {children}\n      </JsonBlock>\n    );\n  }\n  return null;\n}\n\ntype OwnJsonViewInteractiveProps = {\n  value?: any;\n};\n\ntype JsonViewInteractiveProps = OwnJsonViewInteractiveProps & typeof JsonViewInteractive.defaultProps;\n\nexport default function JsonViewInteractive({ value }: JsonViewInteractiveProps) {\n  return (\n    <span className=\"jvi-item jvi-root\">\n      <JsonValue value={value} />\n    </span>\n  );\n}\n\nJsonViewInteractive.defaultProps = {\n  // `null` will be rendered as \"null\" because it is a valid JSON value, so use `undefined` for no value\n  value: undefined,\n};\n","import { isString, isUndefined } from \"lodash\";\nimport React from \"react\";\nimport JsonViewInteractive from \"@/components/chart/components/json-view-interactive/JsonViewInteractive\";\nimport { visualizationsSettings } from \"@/components/chart/visualizations/visualizationsSettings\";\n\nexport default function initJsonColumn(column: any) {\n  function prepareData(row: any) {\n    const text = row[column.name];\n    if (isString(text) && text.length <= visualizationsSettings.tableCellMaxJSONSize) {\n      try {\n        return { text, value: JSON.parse(text) };\n      } catch (e) {\n        // ignore `JSON.parse` error and return default value\n      }\n    }\n    return { text, value: undefined };\n  }\n\n  function JsonColumn({ row }: any) {\n    // eslint-disable-line react/prop-types\n    const { text, value } = prepareData(row);\n    if (isUndefined(value)) {\n      return <div className=\"json-cell-invalid\">{\"\" + text}</div>;\n    }\n\n    return (\n      <div className=\"json-cell-valid\">\n        <JsonViewInteractive value={value} />\n      </div>\n    );\n  }\n\n  JsonColumn.prepareData = prepareData;\n\n  return JsonColumn;\n}\n\ninitJsonColumn.friendlyName = \"JSON\";\n","import initTextColumn from \"./text\";\nimport initNumberColumn from \"./number\";\nimport initDateTimeColumn from \"./datetime\";\nimport initBooleanColumn from \"./boolean\";\nimport initLinkColumn from \"./link\";\nimport initImageColumn from \"./image\";\nimport initJsonColumn from \"./json\";\n\n// this map should contain all possible values for `column.displayAs` property\nexport default {\n  string: initTextColumn,\n  number: initNumberColumn,\n  datetime: initDateTimeColumn,\n  boolean: initBooleanColumn,\n  link: initLinkColumn,\n  image: initImageColumn,\n  json: initJsonColumn,\n};\n","import { isNil, map, get, filter, each, sortBy, some, findIndex, toString } from \"lodash\";\nimport React from \"react\";\nimport cx from \"classnames\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport ColumnTypes from \"./columns\";\n\nfunction nextOrderByDirection(direction: any) {\n  switch (direction) {\n    case \"ascend\":\n      return \"descend\";\n    case \"descend\":\n      return null;\n    default:\n      return \"ascend\";\n  }\n}\n\nfunction toggleOrderBy(columnName: any, orderBy = [], multiColumnSort = false) {\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'name' does not exist on type 'never'.\n  const index = findIndex(orderBy, i => i.name === columnName);\n  const item = { name: columnName, direction: \"ascend\" };\n  if (index >= 0) {\n    // @ts-expect-error ts-migrate(2322) FIXME: Type 'string | null' is not assignable to type 'st... Remove this comment to see the full error message\n    item.direction = nextOrderByDirection(orderBy[index].direction);\n  }\n\n  if (multiColumnSort) {\n    if (!item.direction) {\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'name' does not exist on type 'never'.\n      return filter(orderBy, i => i.name !== columnName);\n    }\n    if (index >= 0) {\n      // @ts-expect-error ts-migrate(2322) FIXME: Type '{ name: any; direction: string; }' is not as... Remove this comment to see the full error message\n      orderBy[index] = item;\n    } else {\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type '{ name: any; direction: string; ... Remove this comment to see the full error message\n      orderBy.push(item);\n    }\n    return [...orderBy];\n  }\n  return item.direction ? [item] : [];\n}\n\nfunction getOrderByInfo(orderBy: any) {\n  const result = {};\n  each(orderBy, ({ name, direction }, index) => {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    result[name] = { direction, index: index + 1 };\n  });\n  return result;\n}\n\nexport function prepareColumns(columns: any, searchInput: any, orderBy: any, onOrderByChange: any) {\n  columns = filter(columns, \"visible\");\n  columns = sortBy(columns, \"order\");\n\n  const isMultiColumnSort = orderBy.length > 1;\n  const orderByInfo = getOrderByInfo(orderBy);\n\n  let tableColumns = map(columns, column => {\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const isAscend = orderByInfo[column.name] && orderByInfo[column.name].direction === \"ascend\";\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const isDescend = orderByInfo[column.name] && orderByInfo[column.name].direction === \"descend\";\n\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const sortColumnIndex = isMultiColumnSort && orderByInfo[column.name] ? orderByInfo[column.name].index : null;\n\n    const result = {\n      key: column.name,\n      dataIndex: `record[${JSON.stringify(column.name)}]`,\n      align: column.alignContent,\n      sorter: { multiple: 1 }, // using { multiple: 1 } to allow built-in multi-column sort arrows\n      sortOrder: get(orderByInfo, [column.name, \"direction\"], null),\n      title: (\n        <React.Fragment>\n          {column.description && (\n            <span style={{ paddingRight: 5 }}>\n              <Tooltip placement=\"top\" title={column.description}>\n                <div className=\"table-visualization-heading\">\n                  <i className=\"fa fa-info-circle\" aria-hidden=\"true\"></i>\n                </div>\n              </Tooltip>\n            </span>\n          )}\n          <Tooltip placement=\"top\" title={column.title}>\n            <div className=\"table-visualization-heading\" data-sort-column-index={sortColumnIndex}>\n              {column.title}\n            </div>\n          </Tooltip>\n        </React.Fragment>\n      ),\n      onHeaderCell: () => ({\n        className: cx({\n          \"table-visualization-column-is-sorted\": isAscend || isDescend,\n        }),\n        onClick: (event: any) => onOrderByChange(toggleOrderBy(column.name, orderBy, event.shiftKey)),\n      }),\n    };\n\n    // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const initColumn = ColumnTypes[column.displayAs];\n    const Component = initColumn(column);\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'render' does not exist on type '{ key: a... Remove this comment to see the full error message\n    result.render = (unused: any, row: any) => ({\n      children: <Component row={row.record} />,\n      props: { className: `display-as-${column.displayAs}` },\n    });\n\n    return result;\n  });\n\n  tableColumns.push({\n    key: \"###Redash::Visualizations::Table::Spacer###\",\n    // @ts-expect-error ts-migrate(2322) FIXME: Type 'null' is not assignable to type 'string'.\n    dataIndex: null,\n    // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'Element'.\n    title: \"\",\n    className: \"table-visualization-spacer\",\n    render: () => \"\",\n    // @ts-expect-error ts-migrate(2741) FIXME: Property 'onClick' is missing in type '{ className... Remove this comment to see the full error message\n    onHeaderCell: () => ({ className: \"table-visualization-spacer\" }),\n  });\n\n  if (searchInput) {\n    // Add searchInput as the ColumnGroup for all table columns\n    tableColumns = [\n      {\n        key: \"table-search\",\n        title: searchInput,\n        // @ts-expect-error ts-migrate(2741) FIXME: Property 'onClick' is missing in type '{ className... Remove this comment to see the full error message\n        onHeaderCell: () => ({ className: \"table-visualization-search\" }),\n        children: tableColumns,\n      },\n    ];\n  }\n\n  return tableColumns;\n}\n\nexport function initRows(rows: any) {\n  return map(rows, (record, index) => ({ key: `record${index}`, record }));\n}\n\nexport function filterRows(rows: any, searchTerm: any, searchColumns: any) {\n  if (searchTerm !== \"\" && searchColumns.length > 0) {\n    searchTerm = searchTerm.toUpperCase();\n    const matchFields = map(searchColumns, column => {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      const initColumn = ColumnTypes[column.displayAs];\n      const { prepareData } = initColumn(column);\n      return (row: any) => {\n        const { text } = prepareData(row);\n        return (\n          toString(text)\n            .toUpperCase()\n            .indexOf(searchTerm) >= 0\n        );\n      };\n    });\n\n    return filter(rows, row => some(matchFields, match => match(row.record)));\n  }\n  return rows;\n}\n\nexport function sortRows(rows: any, orderBy: any) {\n  if (orderBy.length === 0 || rows.length === 0) {\n    return rows;\n  }\n\n  const directions = { ascend: 1, descend: -1 };\n\n  // Create a copy of array before sorting, because .sort() will modify original array\n  return [...rows].sort((a, b) => {\n    let va;\n    let vb;\n    for (let i = 0; i < orderBy.length; i += 1) {\n      va = a.record[orderBy[i].name];\n      vb = b.record[orderBy[i].name];\n      if (isNil(va) || va < vb) {\n        // if a < b - we should return -1, but take in account direction\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        return -1 * directions[orderBy[i].direction];\n      }\n      if (va > vb || isNil(vb)) {\n        // if a > b - we should return 1, but take in account direction\n        // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        return 1 * directions[orderBy[i].direction];\n      }\n    }\n    return 0;\n  });\n}\n","import { filter, map, get, initial, last, reduce } from \"lodash\";\nimport React, { useMemo, useState, useEffect } from \"react\";\nimport Table from \"antd/lib/table\";\nimport Input from \"antd/lib/input\";\nimport InfoCircleFilledIcon from \"@ant-design/icons/InfoCircleFilled\";\nimport Popover from \"antd/lib/popover\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport { prepareColumns, initRows, filterRows, sortRows } from \"./utils\";\n\nimport \"./renderer.less\";\n\nfunction joinColumns(array: any, separator = \", \") {\n  return reduce(\n    array,\n    (result, item, index) => {\n      // @ts-expect-error ts-migrate(2365) FIXME: Operator '>' cannot be applied to types 'string' a... Remove this comment to see the full error message\n      if (index > 0) {\n        // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'string' is not assignable to par... Remove this comment to see the full error message\n        result.push(separator);\n      }\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'any' is not assignable to parame... Remove this comment to see the full error message\n      result.push(item);\n      return result;\n    },\n    []\n  );\n}\n\nfunction getSearchColumns(columns: any, { limit = Infinity, renderColumn = (col: any) => col.title } = {}) {\n  const firstColumns = map(columns.slice(0, limit), col => renderColumn(col));\n  const restColumns = map(columns.slice(limit), col => col.title);\n  if (restColumns.length > 0) {\n    return [...joinColumns(firstColumns), ` and ${restColumns.length} others`];\n  }\n  if (firstColumns.length > 1) {\n    return [...joinColumns(initial(firstColumns)), ` and `, last(firstColumns)];\n  }\n  return firstColumns;\n}\n\nfunction SearchInputInfoIcon({ searchColumns }: any) {\n  return (\n    <Popover\n      arrowPointAtCenter\n      placement=\"topRight\"\n      content={\n        <div className=\"table-visualization-search-info-content\">\n          {window.W_L.search} {getSearchColumns(searchColumns, { renderColumn: col => <code key={col.name}>{col.title}</code> })}\n        </div>\n      }>\n      <InfoCircleFilledIcon className=\"table-visualization-search-info-icon\" />\n    </Popover>\n  );\n}\n\ntype OwnSearchInputProps = {\n  onChange?: (...args: any[]) => any;\n};\n\ntype SearchInputProps = OwnSearchInputProps & typeof SearchInput.defaultProps;\n\n// @ts-expect-error ts-migrate(2339) FIXME: Property 'searchColumns' does not exist on type 'S... Remove this comment to see the full error message\nfunction SearchInput({ searchColumns, ...props }: SearchInputProps) {\n  if (searchColumns.length <= 0) {\n    return null;\n  }\n\n  const searchColumnsLimit = 3;\n  return (\n    <Input.Search\n      {...props}\n      placeholder={`${window.W_L.search} ${getSearchColumns(searchColumns, { limit: searchColumnsLimit }).join(\"\")}...`}\n      suffix={searchColumns.length > searchColumnsLimit ? <SearchInputInfoIcon searchColumns={searchColumns} /> : null}\n    />\n  );\n}\n\nSearchInput.defaultProps = {\n  onChange: () => {},\n};\n\nexport default function Renderer({ options, data }: any) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [orderBy, setOrderBy] = useState([]);\n\n  const searchColumns = useMemo(() => filter(options.columns, \"allowSearch\"), [options.columns]);\n\n  const tableColumns = useMemo(() => {\n    const searchInput =\n      searchColumns.length > 0 ? (\n        // @ts-expect-error ts-migrate(2322) FIXME: Type '(event: any) => void' is not assignable to t... Remove this comment to see the full error message\n        <SearchInput searchColumns={searchColumns} onChange={(event: any) => setSearchTerm(event.target.value)} />\n      ) : null;\n    return prepareColumns(options.columns, searchInput, orderBy, (newOrderBy: any) => {\n      setOrderBy(newOrderBy);\n      // Remove text selection - may occur accidentally\n      // @ts-expect-error ts-migrate(2531) FIXME: Object is possibly 'null'.\n      document.getSelection().removeAllRanges();\n    });\n  }, [options.columns, searchColumns, orderBy]);\n\n  const preparedRows = useMemo(() => sortRows(filterRows(initRows(data.rows), searchTerm, searchColumns), orderBy), [\n    data.rows,\n    searchTerm,\n    searchColumns,\n    orderBy,\n  ]);\n\n  // If data or config columns change - reset sorting\n  useEffect(() => {\n    setOrderBy([]);\n  }, [options.columns, data.columns]);\n\n  if (data.rows.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"table-visualization-container\">\n      <Table\n        className=\"table-fixed-header\"\n        data-percy=\"show-scrollbars\"\n        data-test=\"TableVisualization\"\n        // @ts-expect-error ts-migrate(2322) FIXME: Type '{ key: any; dataIndex: string; align: any; s... Remove this comment to see the full error message\n        columns={tableColumns}\n        dataSource={preparedRows}\n        pagination={{\n          size: get(options, \"paginationSize\", \"\"),\n          // @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'TablePagi... Remove this comment to see the full error message\n          position: \"bottom\",\n          pageSize: options.itemsPerPage,\n          hideOnSinglePage: true,\n          showSizeChanger: false,\n        }}\n        showSorterTooltip={false}\n      />\n    </div>\n  );\n}\n\nRenderer.propTypes = RendererPropTypes;\n","import { map, keys } from \"lodash\";\nimport React from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport * as Grid from \"antd/lib/grid\";\nimport { Section, Select, Input, Checkbox, TextAlignmentSelect } from \"@/components/chart/components/visualizations/editor\";\n\nimport ColumnTypes from \"../columns\";\n\ntype OwnProps = {\n  column: {\n    name: string;\n    title?: string;\n    visible?: boolean;\n    alignContent?: \"left\" | \"center\" | \"right\";\n    displayAs?: any; // TODO: PropTypes.oneOf(keys(ColumnTypes))\n  };\n  onChange?: (...args: any[]) => any;\n};\n\ntype Props = OwnProps & typeof ColumnEditor.defaultProps;\n\nexport default function ColumnEditor({ column, onChange }: Props) {\n  function handleChange(changes: any) {\n    onChange({ ...column, ...changes });\n  }\n\n  const [handleChangeDebounced] = useDebouncedCallback(handleChange, 200);\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  const AdditionalOptions = ColumnTypes[column.displayAs].Editor || null;\n\n  return (\n    <div className=\"table-visualization-editor-column\">\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2322) FIXME: Type '{ children: Element[]; gutter: number; type:... Remove this comment to see the full error message */}\n        <Grid.Row gutter={15} type=\"flex\" align=\"middle\">\n          <Grid.Col span={16}>\n            <Input\n              data-test={`Table.Column.${column.name}.Title`}\n              defaultValue={column.title}\n              onChange={(event: any) => handleChangeDebounced({ title: event.target.value })}\n            />\n          </Grid.Col>\n          <Grid.Col span={8}>\n            <TextAlignmentSelect\n              data-test={`Table.Column.${column.name}.TextAlignment`}\n              defaultValue={column.alignContent}\n              onChange={(event: any) => handleChange({ alignContent: event.target.value })}\n            />\n          </Grid.Col>\n        </Grid.Row>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Checkbox\n          data-test={`Table.Column.${column.name}.UseForSearch`}\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'allowSearch' does not exist on type '{ n... Remove this comment to see the full error message\n          defaultChecked={column.allowSearch}\n          onChange={event => handleChange({ allowSearch: event.target.checked })}>\n          Use for search\n        </Checkbox>\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Input\n          label=\"Description\"\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'description' does not exist on type '{ n... Remove this comment to see the full error message\n          defaultValue={column.description}\n          onChange={(event: any) => handleChangeDebounced({ description: event.target.value })}\n        />\n      </Section>\n\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          label=\"Display as:\"\n          data-test={`Table.Column.${column.name}.DisplayAs`}\n          defaultValue={column.displayAs}\n          onChange={(displayAs: any) => handleChange({ displayAs })}>\n          {map(ColumnTypes, ({ friendlyName }, key) => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={key} data-test={`Table.Column.${column.name}.DisplayAs.${key}`}>\n              {friendlyName}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n\n      {AdditionalOptions && <AdditionalOptions column={column} onChange={handleChange} />}\n    </div>\n  );\n}\n\nColumnEditor.defaultProps = {\n  onChange: () => {},\n};\n","import { map } from \"lodash\";\nimport React from \"react\";\nimport Collapse from \"antd/lib/collapse\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport Typography from \"antd/lib/typography\";\n// @ts-expect-error ts-migrate(2724) FIXME: Module '\"../../../../node_modules/react-sortable-h... Remove this comment to see the full error message\nimport { sortableElement } from \"react-sortable-hoc\";\nimport { SortableContainer, DragHandle } from \"@/components/chart/components/sortable\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport EyeOutlinedIcon from \"@ant-design/icons/EyeOutlined\";\nimport EyeInvisibleOutlinedIcon from \"@ant-design/icons/EyeInvisibleOutlined\";\n\nimport ColumnEditor from \"./ColumnEditor\";\n\nconst { Text } = Typography;\n\nconst SortableItem = sortableElement(Collapse.Panel);\n\nexport default function ColumnsSettings({ options, onOptionsChange }: any) {\n  function handleColumnChange(newColumn: any, event: any) {\n    if (event) {\n      event.stopPropagation();\n    }\n    const columns = map(options.columns, c => (c.name === newColumn.name ? newColumn : c));\n    onOptionsChange({ columns });\n  }\n\n  function handleColumnsReorder({ oldIndex, newIndex }: any) {\n    const columns = [...options.columns];\n    columns.splice(newIndex, 0, ...columns.splice(oldIndex, 1));\n    onOptionsChange({ columns });\n  }\n\n  return (\n    <SortableContainer\n      axis=\"y\"\n      lockAxis=\"y\"\n      useDragHandle\n      helperClass=\"table-editor-columns-dragged-item\"\n      helperContainer={(container: any) => container.firstChild}\n      onSortEnd={handleColumnsReorder}\n      containerProps={{\n        className: \"table-visualization-editor-columns\",\n      }}>\n      {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message */}\n      <Collapse bordered={false} defaultActiveKey={[]} expandIconPosition=\"right\">\n        {map(options.columns, (column, index) => (\n          <SortableItem\n            key={column.name}\n            index={index}\n            header={\n              <React.Fragment>\n                <DragHandle />\n                <span data-test={`Table.Column.${column.name}.Name`}>\n                  {column.name}\n                  {column.title !== \"\" && column.title !== column.name && (\n                    <Text type=\"secondary\" style={{ marginLeft: 5 }}>\n                      <i>({column.title})</i>\n                    </Text>\n                  )}\n                </span>\n              </React.Fragment>\n            }\n            extra={\n              <Tooltip title= {window.W_L.toggle_visibility} mouseEnterDelay={0} mouseLeaveDelay={0}>\n                {column.visible ? (\n                  <EyeOutlinedIcon\n                    data-test={`Table.Column.${column.name}.Visibility`}\n                    onClick={event => handleColumnChange({ ...column, visible: !column.visible }, event)}\n                  />\n                ) : (\n                  <EyeInvisibleOutlinedIcon\n                    data-test={`Table.Column.${column.name}.Visibility`}\n                    onClick={event => handleColumnChange({ ...column, visible: !column.visible }, event)}\n                  />\n                )}\n              </Tooltip>\n            }>\n            {/* @ts-expect-error ts-migrate(2322) FIXME: Type '(newColumn: any, event: any) => void' is not... Remove this comment to see the full error message */}\n            <ColumnEditor column={column} onChange={handleColumnChange} />\n          </SortableItem>\n        ))}\n      </Collapse>\n    </SortableContainer>\n  );\n}\n\nColumnsSettings.propTypes = EditorPropTypes;\n","import { map } from \"lodash\";\nimport React from \"react\";\nimport { Section, Select } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nconst ALLOWED_ITEM_PER_PAGE = [5, 10, 15, 20, 25, 50, 100, 150, 200, 250, 500];\n\nexport default function GridSettings({ options, onOptionsChange }: any) {\n  return (\n    // @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message\n    <Section>\n      <Select\n        label= {window.W_L.items_per_page}\n        data-test=\"Table.ItemsPerPage\"\n        defaultValue={options.itemsPerPage}\n        onChange={(itemsPerPage: any) => onOptionsChange({ itemsPerPage })}>\n        {map(ALLOWED_ITEM_PER_PAGE, value => (\n          // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n          <Select.Option key={`ipp${value}`} value={value} data-test={`Table.ItemsPerPage.${value}`}>\n            {value}\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n        ))}\n      </Select>\n    </Section>\n  );\n}\n\nGridSettings.propTypes = EditorPropTypes;\n","import getOptions from \"./getOptions\";\nimport Renderer from \"./Renderer\";\nimport Editor from \"./Editor\";\n\nexport default {\n  type: \"TABLE\",\n  name: \"表格(Table)\",\n  getOptions,\n  Renderer,\n  Editor,\n\n  autoHeight: true,\n  defaultRows: 14,\n  defaultColumns: 3,\n  minColumns: 2,\n};\n","import createTabbedEditor from \"@/components/chart/components/visualizations/editor/createTabbedEditor\";\n\nimport ColumnsSettings from \"./ColumnsSettings\";\nimport GridSettings from \"./GridSettings\";\n\nimport \"./editor.less\";\n\nexport default createTabbedEditor([\n  { key: \"Columns\", title: window.W_L.columns, component: ColumnsSettings },\n  { key: \"Grid\", title: window.W_L.grid, component: GridSettings },\n]);\n","import d3 from \"d3\";\nimport cloud from \"d3-cloud\";\nimport { each, filter, map, min, max, sortBy, toString } from \"lodash\";\nimport React, { useMemo, useState, useEffect } from \"react\";\nimport resizeObserver from \"@/services/resizeObserver\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nimport \"./renderer.less\";\n\nfunction computeWordFrequencies(rows: any, column: any) {\n  const result = {};\n\n  each(rows, row => {\n    const wordsList = toString(row[column]).split(/\\s/g);\n    each(wordsList, d => {\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      result[d] = (result[d] || 0) + 1;\n    });\n  });\n\n  return result;\n}\n\nfunction getWordsWithFrequencies(rows: any, wordColumn: any, frequencyColumn: any) {\n  const result = {};\n\n  each(rows, row => {\n    const count = parseFloat(row[frequencyColumn]);\n    if (Number.isFinite(count) && count > 0) {\n      const word = toString(row[wordColumn]);\n      // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      result[word] = count;\n    }\n  });\n\n  return result;\n}\n\nfunction applyLimitsToWords(words: any, { wordLength, wordCount }: any) {\n  wordLength.min = Number.isFinite(wordLength.min) ? wordLength.min : null;\n  wordLength.max = Number.isFinite(wordLength.max) ? wordLength.max : null;\n\n  wordCount.min = Number.isFinite(wordCount.min) ? wordCount.min : null;\n  wordCount.max = Number.isFinite(wordCount.max) ? wordCount.max : null;\n\n  return filter(words, ({ text, count }) => {\n    const wordLengthFits =\n      (!wordLength.min || text.length >= wordLength.min) && (!wordLength.max || text.length <= wordLength.max);\n    const wordCountFits = (!wordCount.min || count >= wordCount.min) && (!wordCount.max || count <= wordCount.max);\n    return wordLengthFits && wordCountFits;\n  });\n}\n\nfunction prepareWords(rows: any, options: any) {\n  let result: any = [];\n\n  if (options.column) {\n    if (options.frequenciesColumn) {\n      result = getWordsWithFrequencies(rows, options.column, options.frequenciesColumn);\n    } else {\n      result = computeWordFrequencies(rows, options.column);\n    }\n    result = sortBy(\n      map(result, (count, text) => ({ text, count })),\n      [({ count }) => -count, ({ text }) => -text.length] // \"count\" desc, length(\"text\") desc\n    );\n  }\n\n  // Add additional attributes\n  const counts = map(result, item => item.count);\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'scale' does not exist on type 'typeof im... Remove this comment to see the full error message\n  const wordSize = d3.scale\n    .linear()\n    .domain([min(counts), max(counts)])\n    .range([10, 100]); // min/max word size\n  // @ts-expect-error ts-migrate(2339) FIXME: Property 'scale' does not exist on type 'typeof im... Remove this comment to see the full error message\n  const color = d3.scale.category20();\n\n  each(result, (item, index) => {\n    item.size = wordSize(item.count);\n    item.color = color(index);\n    // @ts-expect-error ts-migrate(2362) FIXME: The left-hand side of an arithmetic operation must... Remove this comment to see the full error message\n    item.angle = (index % 2) * 90; // make it stable between renderings\n  });\n\n  return applyLimitsToWords(result, {\n    wordLength: options.wordLengthLimit,\n    wordCount: options.wordCountLimit,\n  });\n}\n\nfunction scaleElement(node: any, container: any) {\n  node.style.transform = null;\n  const { width: nodeWidth, height: nodeHeight } = node.getBoundingClientRect();\n  const { width: containerWidth, height: containerHeight } = container.getBoundingClientRect();\n\n  const scaleX = containerWidth / nodeWidth;\n  const scaleY = containerHeight / nodeHeight;\n\n  node.style.transform = `scale(${Math.min(scaleX, scaleY)})`;\n}\n\nfunction createLayout() {\n  const fontFamily = window.getComputedStyle(document.body).fontFamily;\n\n  return (\n    // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.\n    cloud()\n      // make the area large enough to contain even very long words; word cloud will be placed in the center of the area\n      // TODO: dimensions probably should be larger, but `d3-cloud` has some performance issues related to these values\n      .size([5000, 5000])\n      .padding(3)\n      .font(fontFamily)\n      // @ts-expect-error ts-migrate(2339) FIXME: Property 'angle' does not exist on type 'Word'.\n      .rotate(d => d.angle)\n      .fontSize(d => d.size)\n      .random(() => 0.5)\n  ); // do not place words randomly - use compact layout\n}\n\nfunction render(container: any, words: any) {\n  container = d3.select(container);\n  container.selectAll(\"*\").remove();\n\n  const svg = container.append(\"svg\");\n  const g = svg.append(\"g\");\n  g.selectAll(\"text\")\n    .data(words)\n    .enter()\n    .append(\"text\")\n    .style(\"font-size\", (d: any) => `${d.size}px`)\n    .style(\"font-family\", (d: any) => d.font)\n    .style(\"fill\", (d: any) => d.color)\n    .attr(\"text-anchor\", \"middle\")\n    .attr(\"transform\", (d: any) => `translate(${[d.x, d.y]}) rotate(${d.rotate})`)\n    .text((d: any) => d.text);\n\n  const svgBounds = svg.node().getBoundingClientRect();\n  const gBounds = g.node().getBoundingClientRect();\n\n  svg.attr(\"width\", Math.ceil(gBounds.width)).attr(\"height\", Math.ceil(gBounds.height));\n  g.attr(\"transform\", `translate(${svgBounds.left - gBounds.left},${svgBounds.top - gBounds.top})`);\n\n  scaleElement(svg.node(), container.node());\n}\n\nexport default function Renderer({ data, options }: any) {\n  const [container, setContainer] = useState(null);\n  const [words, setWords] = useState([]);\n  const layout = useMemo(createLayout, []);\n\n  // @ts-expect-error ts-migrate(2345) FIXME: Argument of type '() => () => layout.Cloud<cloud.W... Remove this comment to see the full error message\n  useEffect(() => {\n    layout\n      .words(prepareWords(data.rows, options))\n      // @ts-expect-error ts-migrate(2345) FIXME: Argument of type 'Word[]' is not assignable to par... Remove this comment to see the full error message\n      .on(\"end\", w => setWords(w))\n      .start();\n    // @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call.\n    return () => layout.on(\"end\", null).stop();\n  }, [layout, data, options, setWords]);\n\n  useEffect(() => {\n    if (container) {\n      render(container, words);\n    }\n  }, [container, words]);\n\n  useEffect(() => {\n    if (container) {\n      const unwatch = resizeObserver(container, () => {\n        // @ts-expect-error ts-migrate(2531) FIXME: Object is possibly 'null'.\n        const svg = container.querySelector(\"svg\");\n        if (svg) {\n          scaleElement(svg, container);\n        }\n      });\n      return unwatch;\n    }\n  }, [container]);\n\n  // @ts-expect-error ts-migrate(2322) FIXME: Type 'Dispatch<SetStateAction<null>>' is not assig... Remove this comment to see the full error message\n  return <div className=\"word-cloud-visualization-container\" ref={setContainer} />;\n}\n\nRenderer.propTypes = RendererPropTypes;\n","import { map, merge } from \"lodash\";\nimport React from \"react\";\nimport * as Grid from \"antd/lib/grid\";\nimport { Section, Select, InputNumber, ControlLabel } from \"@/components/chart/components/visualizations/editor\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\n\nexport default function Editor({ options, data, onOptionsChange }: any) {\n  const optionsChanged = (newOptions: any) => {\n    onOptionsChange(merge({}, options, newOptions));\n  };\n\n  return (\n    <React.Fragment>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          label=\"Words Column\"\n          data-test=\"WordCloud.WordsColumn\"\n          value={options.column}\n          onChange={(column: any) => optionsChanged({ column })}>\n          {map(data.columns, ({ name }) => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={name} data-test={\"WordCloud.WordsColumn.\" + name}>\n              {name}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        <Select\n          label=\"Frequencies Column\"\n          data-test=\"WordCloud.FrequenciesColumn\"\n          value={options.frequenciesColumn}\n          onChange={(frequenciesColumn: any) => optionsChanged({ frequenciesColumn })}>\n          {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          <Select.Option key=\"none\" value=\"\">\n            <i>(count word frequencies automatically)</i>\n            {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n          </Select.Option>\n          {map(data.columns, ({ name }) => (\n            // @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message\n            <Select.Option key={\"column-\" + name} value={name} data-test={\"WordCloud.FrequenciesColumn.\" + name}>\n              {name}\n              {/* @ts-expect-error ts-migrate(2339) FIXME: Property 'Option' does not exist on type '({ class... Remove this comment to see the full error message */}\n            </Select.Option>\n          ))}\n        </Select>\n      </Section>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'null | un... Remove this comment to see the full error message */}\n        <ControlLabel label=\"Words Length Limit\">\n          {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message */}\n          <Grid.Row gutter={15} type=\"flex\">\n            <Grid.Col span={12}>\n              <InputNumber\n                data-test=\"WordCloud.WordLengthLimit.Min\"\n                placeholder=\"Min\"\n                min={0}\n                value={options.wordLengthLimit.min}\n                onChange={(value: any) => optionsChanged({ wordLengthLimit: { min: value > 0 ? value : null } })}\n              />\n            </Grid.Col>\n            <Grid.Col span={12}>\n              <InputNumber\n                data-test=\"WordCloud.WordLengthLimit.Max\"\n                placeholder=\"Max\"\n                min={0}\n                value={options.wordLengthLimit.max}\n                onChange={(value: any) => optionsChanged({ wordLengthLimit: { max: value > 0 ? value : null } })}\n              />\n            </Grid.Col>\n          </Grid.Row>\n        </ControlLabel>\n      </Section>\n      {/* @ts-expect-error ts-migrate(2745) FIXME: This JSX tag's 'children' prop expects type 'never... Remove this comment to see the full error message */}\n      <Section>\n        {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'string' is not assignable to type 'null | un... Remove this comment to see the full error message */}\n        <ControlLabel label=\"Frequencies Limit\">\n          {/* @ts-expect-error ts-migrate(2322) FIXME: Type 'Element' is not assignable to type 'null | u... Remove this comment to see the full error message */}\n          <Grid.Row gutter={15} type=\"flex\">\n            <Grid.Col span={12}>\n              <InputNumber\n                data-test=\"WordCloud.WordCountLimit.Min\"\n                placeholder=\"Min\"\n                min={0}\n                value={options.wordCountLimit.min}\n                onChange={(value: any) => optionsChanged({ wordCountLimit: { min: value > 0 ? value : null } })}\n              />\n            </Grid.Col>\n            <Grid.Col span={12}>\n              <InputNumber\n                data-test=\"WordCloud.WordCountLimit.Max\"\n                placeholder=\"Max\"\n                min={0}\n                value={options.wordCountLimit.max}\n                onChange={(value: any) => optionsChanged({ wordCountLimit: { max: value > 0 ? value : null } })}\n              />\n            </Grid.Col>\n          </Grid.Row>\n        </ControlLabel>\n      </Section>\n    </React.Fragment>\n  );\n}\n\nEditor.propTypes = EditorPropTypes;\n","import { merge } from \"lodash\";\n\nimport Renderer from \"./Renderer\";\nimport Editor from \"./Editor\";\n\nconst DEFAULT_OPTIONS = {\n  column: \"\",\n  frequenciesColumn: \"\",\n  wordLengthLimit: { min: null, max: null },\n  wordCountLimit: { min: null, max: null },\n};\n\nexport default {\n  type: \"WORD_CLOUD\",\n  name: \"词云图(Word Cloud)\",\n  getOptions: (options: any) => merge({}, DEFAULT_OPTIONS, options),\n  Renderer,\n  Editor,\n\n  defaultRows: 8,\n};\n","import { find, flatten, each } from \"lodash\";\nimport PropTypes from \"prop-types\";\n\nimport boxPlotVisualization from \"./box-plot\";\nimport chartVisualization from \"./chart\";\nimport choroplethVisualization from \"./choropleth\";\nimport cohortVisualization from \"./cohort\";\nimport counterVisualization from \"./counter\";\nimport detailsVisualization from \"./details\";\nimport funnelVisualization from \"./funnel\";\nimport mapVisualization from \"./map\";\nimport pivotVisualization from \"./pivot\";\nimport sankeyVisualization from \"./sankey\";\nimport sunburstVisualization from \"./sunburst\";\nimport tableVisualization from \"./table\";\nimport wordCloudVisualization from \"./word-cloud\";\n\ntype VisualizationConfig = {\n  type: string;\n  name: string;\n  getOptions: (...args: any[]) => any;\n  isDefault?: boolean;\n  isDeprecated?: boolean;\n  Renderer: (...args: any[]) => any;\n  Editor?: (...args: any[]) => any;\n  autoHeight?: boolean;\n  defaultRows?: number;\n  defaultColumns?: number;\n  minRows?: number;\n  maxRows?: number;\n  minColumns?: number;\n  maxColumns?: number;\n};\n\n// @ts-expect-error ts-migrate(2322) FIXME: Type 'Requireable<InferProps<{ type: Validator<str... Remove this comment to see the full error message\nconst VisualizationConfig: PropTypes.Requireable<VisualizationConfig> = PropTypes.shape({\n  type: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  getOptions: PropTypes.func.isRequired,\n  isDefault: PropTypes.bool,\n  isDeprecated: PropTypes.bool,\n  Renderer: PropTypes.func.isRequired,\n  Editor: PropTypes.func,\n  // other config options\n  autoHeight: PropTypes.bool,\n  defaultRows: PropTypes.number,\n  defaultColumns: PropTypes.number,\n  minRows: PropTypes.number,\n  maxRows: PropTypes.number,\n  minColumns: PropTypes.number,\n  maxColumns: PropTypes.number,\n});\n\nconst registeredVisualizations = {};\n\nfunction validateVisualizationConfig(config: any) {\n  const typeSpecs = { config: VisualizationConfig };\n  const values = { config };\n  PropTypes.checkPropTypes(typeSpecs, values, \"prop\", \"registerVisualization\");\n}\n\nfunction registerVisualization(config: any) {\n  validateVisualizationConfig(config);\n  config = {\n    Editor: () => null,\n    ...config,\n    isDefault: config.isDefault && !config.isDeprecated,\n  };\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  if (registeredVisualizations[config.type]) {\n    throw new Error(`Visualization ${config.type} already registered.`);\n  }\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  registeredVisualizations[config.type] = config;\n}\n\neach(\n  flatten([\n    boxPlotVisualization,\n    chartVisualization,\n    choroplethVisualization,\n    cohortVisualization,\n    counterVisualization,\n    detailsVisualization,\n    funnelVisualization,\n    mapVisualization,\n    pivotVisualization,\n    sankeyVisualization,\n    sunburstVisualization,\n    tableVisualization,\n    wordCloudVisualization,\n  ]),\n  registerVisualization\n);\n\nexport default registeredVisualizations;\n\nexport function getDefaultVisualization() {\n  // return any visualization explicitly marked as default, or any non-deprecated otherwise\n  return (\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'isDefault' does not exist on type 'never... Remove this comment to see the full error message\n    find(registeredVisualizations, visualization => visualization.isDefault) ||\n    // @ts-expect-error ts-migrate(2339) FIXME: Property 'isDeprecated' does not exist on type 'ne... Remove this comment to see the full error message\n    find(registeredVisualizations, visualization => !visualization.isDeprecated)\n  );\n}\n\nexport function newVisualization(type = null, options = {}) {\n  // @ts-expect-error ts-migrate(2538) FIXME: Type 'null' cannot be used as an index type.\n  const visualization = type ? registeredVisualizations[type] : getDefaultVisualization();\n  return {\n    type: visualization.type,\n    name: visualization.name,\n    description: \"\",\n    options,\n  };\n}\n","import moment from \"moment\";\nimport { axios } from \"@/services/axios\";\nimport {\n  each,\n  pick,\n  extend,\n  isObject,\n  truncate,\n  keys,\n  difference,\n  filter,\n  map,\n  merge,\n  sortBy,\n  indexOf,\n  size,\n  includes,\n} from \"lodash\";\nimport location from \"@/services/location\";\nimport { cloneParameter } from \"@/services/parameters\";\nimport dashboardGridOptions from \"@/config/dashboard-grid-options\";\nimport { registeredVisualizations } from \"@/components/chart/index\";\nimport { Query } from \"./query\";\n\nexport const WidgetTypeEnum = {\n  TEXTBOX: \"textbox\",\n  VISUALIZATION: \"visualization\",\n  RESTRICTED: \"restricted\",\n};\n\nfunction calculatePositionOptions(widget) {\n  widget.width = 1; // Backward compatibility, user on back-end\n\n  const visualizationOptions = {\n    autoHeight: false,\n    sizeX: Math.round(dashboardGridOptions.columns / 2),\n    sizeY: dashboardGridOptions.defaultSizeY,\n    minSizeX: dashboardGridOptions.minSizeX,\n    maxSizeX: dashboardGridOptions.maxSizeX,\n    minSizeY: dashboardGridOptions.minSizeY,\n    maxSizeY: dashboardGridOptions.maxSizeY,\n  };\n\n  const config = widget.visualization ? registeredVisualizations[widget.visualization.type] : null;\n  if (isObject(config)) {\n    if (Object.prototype.hasOwnProperty.call(config, \"autoHeight\")) {\n      visualizationOptions.autoHeight = config.autoHeight;\n    }\n\n    // Width constraints\n    const minColumns = parseInt(config.minColumns, 10);\n    if (isFinite(minColumns) && minColumns >= 0) {\n      visualizationOptions.minSizeX = minColumns;\n    }\n    const maxColumns = parseInt(config.maxColumns, 10);\n    if (isFinite(maxColumns) && maxColumns >= 0) {\n      visualizationOptions.maxSizeX = Math.min(maxColumns, dashboardGridOptions.columns);\n    }\n\n    // Height constraints\n    // `minRows` is preferred, but it should be kept for backward compatibility\n    const height = parseInt(config.height, 10);\n    if (isFinite(height)) {\n      visualizationOptions.minSizeY = Math.ceil(height / dashboardGridOptions.rowHeight);\n    }\n    const minRows = parseInt(config.minRows, 10);\n    if (isFinite(minRows)) {\n      visualizationOptions.minSizeY = minRows;\n    }\n    const maxRows = parseInt(config.maxRows, 10);\n    if (isFinite(maxRows) && maxRows >= 0) {\n      visualizationOptions.maxSizeY = maxRows;\n    }\n\n    // Default dimensions\n    const defaultWidth = parseInt(config.defaultColumns, 10);\n    if (isFinite(defaultWidth) && defaultWidth > 0) {\n      visualizationOptions.sizeX = defaultWidth;\n    }\n    const defaultHeight = parseInt(config.defaultRows, 10);\n    if (isFinite(defaultHeight) && defaultHeight > 0) {\n      visualizationOptions.sizeY = defaultHeight;\n    }\n  }\n\n  return visualizationOptions;\n}\n\nexport const ParameterMappingType = {\n  DashboardLevel: \"dashboard-level\",\n  WidgetLevel: \"widget-level\",\n  StaticValue: \"static-value\",\n};\n\nclass Widget {\n  static MappingType = ParameterMappingType;\n\n  constructor(data) {\n    // Copy properties\n    extend(this, data);\n\n    const visualizationOptions = calculatePositionOptions(this);\n\n    this.options = this.options || {};\n    this.options.position = extend(\n      {},\n      visualizationOptions,\n      pick(this.options.position, [\"col\", \"row\", \"sizeX\", \"sizeY\", \"autoHeight\"])\n    );\n\n    if (this.options.position.sizeY < 0) {\n      this.options.position.autoHeight = true;\n    }\n  }\n\n  get type() {\n    if (this.visualization) {\n      return WidgetTypeEnum.VISUALIZATION;\n    } else if (this.restricted) {\n      return WidgetTypeEnum.RESTRICTED;\n    }\n    return WidgetTypeEnum.TEXTBOX;\n  }\n\n  getQuery() {\n    if (!this.query && this.visualization) {\n      this.query = new Query(this.visualization.query);\n    }\n\n    return this.query;\n  }\n\n  getQueryResult() {\n    return this.data;\n  }\n\n  getName() {\n    if (this.visualization) {\n      return `${this.visualization.query.name} (${this.visualization.name})`;\n    }\n    return truncate(this.text, 20);\n  }\n\n  load(force, maxAge) {\n    if (!this.visualization) {\n      return Promise.resolve();\n    }\n\n    // Both `this.data` and `this.queryResult` are query result objects;\n    // `this.data` is last loaded query result;\n    // `this.queryResult` is currently loading query result;\n    // while widget is refreshing, `this.data` !== `this.queryResult`\n\n    if (force || this.queryResult === undefined) {\n      this.loading = true;\n      this.refreshStartedAt = moment();\n\n      if (maxAge === undefined || force) {\n        maxAge = force ? 0 : undefined;\n      }\n\n      const queryResult = this.getQuery().getQueryResult(maxAge);\n      this.queryResult = queryResult;\n\n      queryResult\n        .toPromise()\n        .then(result => {\n          if (this.queryResult === queryResult) {\n            this.loading = false;\n            this.data = result;\n          }\n          return result;\n        })\n        .catch(error => {\n          if (this.queryResult === queryResult) {\n            this.loading = false;\n            this.data = error;\n          }\n          return error;\n        });\n    }\n\n    return this.queryResult.toPromise();\n  }\n\n  save(key, value) {\n    const data = pick(this, \"options\", \"text\", \"id\", \"width\", \"dashboard_id\", \"visualization_id\");\n    if (key && value) {\n      data[key] = merge({}, data[key], value); // done like this so `this.options` doesn't get updated by side-effect\n    }\n\n    let url = \"api/widgets\";\n    if (this.id) {\n      url = `${url}/${this.id}`;\n    }\n\n    return axios.post(url, data).then(data => {\n      each(data, (v, k) => {\n        this[k] = v;\n      });\n\n      return this;\n    });\n  }\n\n  delete() {\n    const url = `api/widgets/${this.id}`;\n    return axios.delete(url);\n  }\n\n  isStaticParam(param) {\n    const mappings = this.getParameterMappings();\n    const mappingType = mappings[param.name].type;\n    return mappingType === Widget.MappingType.StaticValue;\n  }\n\n  getParametersDefs() {\n    const mappings = this.getParameterMappings();\n    // textboxes does not have query\n    const params = this.getQuery() ? this.getQuery().getParametersDefs() : [];\n\n    const queryParams = location.search;\n\n    const localTypes = [Widget.MappingType.WidgetLevel, Widget.MappingType.StaticValue];\n    const localParameters = map(\n      filter(params, param => localTypes.indexOf(mappings[param.name].type) >= 0),\n      param => {\n        const mapping = mappings[param.name];\n        const result = cloneParameter(param);\n        result.title = mapping.title || param.title;\n        result.locals = [param];\n        result.urlPrefix = `p_w${this.id}_`;\n        if (mapping.type === Widget.MappingType.StaticValue) {\n          result.setValue(mapping.value);\n        } else {\n          result.fromUrlParams(queryParams);\n        }\n        return result;\n      }\n    );\n\n    // order widget params using paramOrder\n    return sortBy(localParameters, param =>\n      includes(this.options.paramOrder, param.name)\n        ? indexOf(this.options.paramOrder, param.name)\n        : size(this.options.paramOrder)\n    );\n  }\n\n  getParameterMappings() {\n    if (!isObject(this.options.parameterMappings)) {\n      this.options.parameterMappings = {};\n    }\n\n    const existingParams = {};\n    // textboxes does not have query\n    const params = this.getQuery() ? this.getQuery().getParametersDefs(false) : [];\n    each(params, param => {\n      existingParams[param.name] = true;\n      if (!isObject(this.options.parameterMappings[param.name])) {\n        // \"migration\" for old dashboards: parameters with `global` flag\n        // should be mapped to a dashboard-level parameter with the same name\n        this.options.parameterMappings[param.name] = {\n          name: param.name,\n          type: param.global ? Widget.MappingType.DashboardLevel : Widget.MappingType.WidgetLevel,\n          mapTo: param.name, // map to param with the same name\n          value: null, // for StaticValue\n          title: \"\", // Use parameter's title\n        };\n      }\n    });\n\n    // Remove mappings for parameters that do not exists anymore\n    const removedParams = difference(keys(this.options.parameterMappings), keys(existingParams));\n    each(removedParams, name => {\n      delete this.options.parameterMappings[name];\n    });\n\n    return this.options.parameterMappings;\n  }\n\n  getLocalParameters() {\n    return filter(this.getParametersDefs(), param => !this.isStaticParam(param));\n  }\n}\n\nexport default Widget;\n","import _ from \"lodash\";\nimport { axios } from \"@/services/axios\";\nimport dashboardGridOptions from \"@/config/dashboard-grid-options\";\nimport Widget from \"./widget\";\nimport location from \"@/services/location\";\nimport { cloneParameter } from \"@/services/parameters\";\nimport { policy } from \"@/services/policy\";\n\nexport const urlForDashboard = ({ id, slug }) => `dashboards/${id}-${slug}`;\n\nexport function collectDashboardFilters(dashboard, queryResults, urlParams) {\n  const filters = {};\n  _.each(queryResults, queryResult => {\n    const queryFilters = queryResult && queryResult.getFilters ? queryResult.getFilters() : [];\n    _.each(queryFilters, queryFilter => {\n      const hasQueryStringValue = _.has(urlParams, queryFilter.name);\n\n      if (!(hasQueryStringValue || dashboard.dashboard_filters_enabled)) {\n        // If dashboard filters not enabled, or no query string value given,\n        // skip filters linking.\n        return;\n      }\n\n      if (hasQueryStringValue) {\n        queryFilter.current = urlParams[queryFilter.name];\n      }\n\n      const filter = { ...queryFilter };\n      if (!_.has(filters, queryFilter.name)) {\n        filters[filter.name] = filter;\n      } else {\n        filters[filter.name].values = _.union(filters[filter.name].values, filter.values);\n      }\n    });\n  });\n\n  return _.values(filters);\n}\n\nfunction prepareWidgetsForDashboard(widgets) {\n  // Default height for auto-height widgets.\n  // Compute biggest widget size and choose between it and some magic number.\n  // This value should be big enough so auto-height widgets will not overlap other ones.\n  const defaultWidgetSizeY =\n    Math.max(\n      _.chain(widgets)\n        .map(w => w.options.position.sizeY)\n        .max()\n        .value(),\n      20\n    ) + 5;\n\n  // Fix layout:\n  // 1. sort and group widgets by row\n  // 2. update position of widgets in each row - place it right below\n  //    biggest widget from previous row\n  _.chain(widgets)\n    .sortBy(widget => widget.options.position.row)\n    .groupBy(widget => widget.options.position.row)\n    .reduce((row, widgetsAtRow) => {\n      let height = 1;\n      _.each(widgetsAtRow, widget => {\n        height = Math.max(\n          height,\n          widget.options.position.autoHeight ? defaultWidgetSizeY : widget.options.position.sizeY\n        );\n        widget.options.position.row = row;\n        if (widget.options.position.sizeY < 1) {\n          widget.options.position.sizeY = defaultWidgetSizeY;\n        }\n      });\n      return row + height;\n    }, 0)\n    .value();\n\n  // Sort widgets by updated column and row value\n  widgets = _.sortBy(widgets, widget => widget.options.position.col);\n  widgets = _.sortBy(widgets, widget => widget.options.position.row);\n\n  return widgets;\n}\n\nfunction calculateNewWidgetPosition(existingWidgets, newWidget) {\n  const width = _.extend({ sizeX: dashboardGridOptions.defaultSizeX }, _.extend({}, newWidget.options).position).sizeX;\n\n  // Find first free row for each column\n  const bottomLine = _.chain(existingWidgets)\n    .map(w => {\n      const options = _.extend({}, w.options);\n      const position = _.extend({ row: 0, sizeY: 0 }, options.position);\n      return {\n        left: position.col,\n        top: position.row,\n        right: position.col + position.sizeX,\n        bottom: position.row + position.sizeY,\n        width: position.sizeX,\n        height: position.sizeY,\n      };\n    })\n    .reduce((result, item) => {\n      const from = Math.max(item.left, 0);\n      const to = Math.min(item.right, result.length + 1);\n      for (let i = from; i < to; i += 1) {\n        result[i] = Math.max(result[i], item.bottom);\n      }\n      return result;\n    }, _.map(new Array(dashboardGridOptions.columns), _.constant(0)))\n    .value();\n\n  // Go through columns, pick them by count necessary to hold new block,\n  // and calculate bottom-most free row per group.\n  // Choose group with the top-most free row (comparing to other groups)\n  return _.chain(_.range(0, dashboardGridOptions.columns - width + 1))\n    .map(col => ({\n      col,\n      row: _.chain(bottomLine)\n        .slice(col, col + width)\n        .max()\n        .value(),\n    }))\n    .sortBy(\"row\")\n    .first()\n    .value();\n}\n\nexport function Dashboard(dashboard) {\n  _.extend(this, dashboard);\n  Object.defineProperty(this, \"url\", {\n    get: function() {\n      return urlForDashboard(this);\n    },\n  });\n}\n\nfunction prepareDashboardWidgets(widgets) {\n  return prepareWidgetsForDashboard(_.map(widgets, widget => new Widget(widget)));\n}\n\nfunction transformSingle(dashboard) {\n  dashboard = new Dashboard(dashboard);\n  if (dashboard.widgets) {\n    dashboard.widgets = prepareDashboardWidgets(dashboard.widgets);\n  }\n  dashboard.publicAccessEnabled = dashboard.public_url !== undefined;\n  return dashboard;\n}\n\nfunction transformResponse(data) {\n  if (data.results) {\n    data = { ...data, results: _.map(data.results, transformSingle) };\n  } else {\n    data = transformSingle(data);\n  }\n  return data;\n}\n\nconst saveOrCreateUrl = data => (data.id ? `api/dashboards/${data.id}` : \"api/dashboards\");\nconst DashboardService = {\n  get: ({ id, slug }) => {\n    const params = {};\n    if (!id) {\n      params.legacy = null;\n    }\n    return axios.get(`api/dashboards/${id || slug}`, { params }).then(transformResponse);\n  },\n  getByToken: ({ token }) => axios.get(`api/dashboards/public/${token}`).then(transformResponse),\n  save: data => axios.post(saveOrCreateUrl(data), data).then(transformResponse),\n  delete: ({ id }) => axios.delete(`api/dashboards/${id}`).then(transformResponse),\n  query: params => axios.get(\"api/dashboards\", { params }).then(transformResponse),\n  recent: params => axios.get(\"api/dashboards/recent\", { params }).then(transformResponse),\n  myDashboards: params => axios.get(\"api/dashboards/my\", { params }).then(transformResponse),\n  favorites: params => axios.get(\"api/dashboards/favorites\", { params }).then(transformResponse),\n  favorite: ({ id }) => axios.post(`api/dashboards/${id}/favorite`),\n  unfavorite: ({ id }) => axios.delete(`api/dashboards/${id}/favorite`),\n};\n\n_.extend(Dashboard, DashboardService);\n\nDashboard.prepareDashboardWidgets = prepareDashboardWidgets;\nDashboard.prepareWidgetsForDashboard = prepareWidgetsForDashboard;\n\nDashboard.prototype.canEdit = function canEdit() {\n  return policy.canEdit(this);\n};\n\nDashboard.prototype.getParametersDefs = function getParametersDefs() {\n  const globalParams = {};\n  const queryParams = location.search;\n  _.each(this.widgets, widget => {\n    if (widget.getQuery()) {\n      const mappings = widget.getParameterMappings();\n      widget\n        .getQuery()\n        .getParametersDefs(false)\n        .forEach(param => {\n          const mapping = mappings[param.name];\n          if (mapping.type === Widget.MappingType.DashboardLevel) {\n            // create global param\n            if (!globalParams[mapping.mapTo]) {\n              globalParams[mapping.mapTo] = cloneParameter(param);\n              globalParams[mapping.mapTo].name = mapping.mapTo;\n              globalParams[mapping.mapTo].title = mapping.title || param.title;\n              globalParams[mapping.mapTo].locals = [];\n            }\n\n            // add to locals list\n            globalParams[mapping.mapTo].locals.push(param);\n          }\n        });\n    }\n  });\n  const resultingGlobalParams = _.values(\n    _.each(globalParams, param => {\n      param.setValue(param.value); // apply global param value to all locals\n      param.fromUrlParams(queryParams); // try to initialize from url (may do nothing)\n    })\n  );\n\n  // order dashboard params using paramOrder\n  return _.sortBy(resultingGlobalParams, param =>\n    _.includes(this.options.globalParamOrder, param.name)\n      ? _.indexOf(this.options.globalParamOrder, param.name)\n      : _.size(this.options.globalParamOrder)\n  );\n};\n\nDashboard.prototype.addWidget = function addWidget(textOrVisualization, options = {}) {\n  const props = {\n    dashboard_id: this.id,\n    options: {\n      ...options,\n      isHidden: false,\n      position: {},\n    },\n    text: \"\",\n    visualization_id: null,\n    visualization: null,\n  };\n\n  if (_.isString(textOrVisualization)) {\n    props.text = textOrVisualization;\n  } else if (_.isObject(textOrVisualization)) {\n    props.visualization_id = textOrVisualization.id;\n    props.visualization = textOrVisualization;\n  } else {\n    // TODO: Throw an error?\n  }\n\n  const widget = new Widget(props);\n\n  const position = calculateNewWidgetPosition(this.widgets, widget);\n  widget.options.position.col = position.col;\n  widget.options.position.row = position.row;\n\n  return widget.save().then(() => {\n    this.widgets = [...this.widgets, widget];\n    return widget;\n  });\n};\n\nDashboard.prototype.favorite = function favorite() {\n  return Dashboard.favorite(this);\n};\n\nDashboard.prototype.unfavorite = function unfavorite() {\n  return Dashboard.unfavorite(this);\n};\n","import { trim } from \"lodash\";\nimport React, { useState } from \"react\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { policy } from \"@/services/policy\";\nimport { Dashboard } from \"@/services/dashboard\";\n\nfunction CreateDashboardDialog({ dialog }) {\n  const [name, setName] = useState(\"\");\n  const [isValid, setIsValid] = useState(false);\n  const [saveInProgress, setSaveInProgress] = useState(false);\n  const isCreateDashboardEnabled = policy.isCreateDashboardEnabled();\n\n  function handleNameChange(event) {\n    const value = trim(event.target.value);\n    setName(value);\n    setIsValid(value !== \"\");\n  }\n\n  function save() {\n    if (name !== \"\") {\n      setSaveInProgress(true);\n\n      Dashboard.save({ name }).then(data => {\n        dialog.close();\n        navigateTo(`${data.url}?edit`);\n      });\n      recordEvent(\"create\", \"dashboard\");\n    }\n  }\n\n  return (\n    <Modal\n      {...dialog.props}\n      {...(isCreateDashboardEnabled ? {} : { footer: null })}\n      title={window.W_L.new_dashboard}\n      okText={window.W_L.save}\n      cancelText={window.W_L.cancel}\n      okButtonProps={{\n        disabled: !isValid || saveInProgress,\n        loading: saveInProgress,\n        \"data-test\": \"DashboardSaveButton\",\n      }}\n      cancelButtonProps={{\n        disabled: saveInProgress,\n      }}\n      onOk={save}\n      closable={!saveInProgress}\n      maskClosable={!saveInProgress}\n      wrapProps={{\n        \"data-test\": \"CreateDashboardDialog\",\n      }}>\n      <DynamicComponent name=\"CreateDashboardDialogExtra\" disabled={!isCreateDashboardEnabled}>\n        <Input\n          defaultValue={name}\n          onChange={handleNameChange}\n          onPressEnter={save}\n          placeholder={window.W_L.dashboard_name}\n          aria-label={window.W_L.dashboard_name}\n          disabled={saveInProgress}\n          autoFocus\n        />\n      </DynamicComponent>\n    </Modal>\n  );\n}\n\nCreateDashboardDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n};\n\nexport default wrapDialog(CreateDashboardDialog);\n","import { keys, some } from \"lodash\";\nimport React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport CloseOutlinedIcon from \"@ant-design/icons/CloseOutlined\";\nimport Link from \"@/components/Link\";\nimport PlainButton from \"@/components/PlainButton\";\nimport CreateDashboardDialog from \"@/components/dashboards/CreateDashboardDialog\";\nimport { currentUser } from \"@/services/auth\";\nimport organizationStatus from \"@/services/organizationStatus\";\n\nimport \"./empty-state.less\";\n\nexport function Step({ show, completed, text, url, urlText, onClick }) {\n  if (!show) {\n    return null;\n  }\n\n  const commonProps = { children: urlText, onClick };\n\n  return (\n    <li className={classNames({ done: completed })}>\n      {url ? <Link href={url} {...commonProps} /> : <PlainButton type=\"link\" {...commonProps} />} {text}\n    </li>\n  );\n}\n\nStep.propTypes = {\n  show: PropTypes.bool.isRequired,\n  completed: PropTypes.bool.isRequired,\n  text: PropTypes.node,\n  url: PropTypes.string,\n  urlTarget: PropTypes.string,\n  urlText: PropTypes.node,\n  onClick: PropTypes.func,\n};\n\nStep.defaultProps = {\n  url: null,\n  urlTarget: null,\n  urlText: null,\n  text: null,\n  onClick: null,\n};\n\nexport function EmptyStateHelpMessage({ helpTriggerType }) {\n  return (\n    <>\n    </>\n  );\n}\n\nEmptyStateHelpMessage.propTypes = {\n  helpTriggerType: PropTypes.string.isRequired,\n};\n\nfunction EmptyState({\n  icon,\n  header,\n  description,\n  illustration,\n  helpMessage,\n  closable,\n  onClose,\n  onboardingMode,\n  showAlertStep,\n  showDashboardStep,\n  showDataSourceStep,\n  showInviteStep,\n  getStepsItems,\n  illustrationPath,\n}) {\n  const isAvailable = {\n    dataSource: showDataSourceStep,\n    query: true,\n    alert: showAlertStep,\n    dashboard: showDashboardStep,\n    inviteUsers: showInviteStep,\n  };\n\n  const isCompleted = {\n    dataSource: organizationStatus.objectCounters.data_sources > 0,\n    query: organizationStatus.objectCounters.queries > 0,\n    alert: organizationStatus.objectCounters.alerts > 0,\n    dashboard: organizationStatus.objectCounters.dashboards > 0,\n    inviteUsers: organizationStatus.objectCounters.users > 1,\n  };\n\n  const showCreateDashboardDialog = useCallback(() => {\n    CreateDashboardDialog.showModal();\n  }, []);\n\n  // Show if `onboardingMode=false` or any requested step not completed\n  const shouldShow = !onboardingMode || some(keys(isAvailable), step => isAvailable[step] && !isCompleted[step]);\n\n  if (!shouldShow) {\n    return null;\n  }\n\n  const renderDataSourcesStep = () => {\n    if (currentUser.isAdmin) {\n      return (\n        <Step\n          key=\"dataSources\"\n          show={isAvailable.dataSource}\n          completed={isCompleted.dataSource}\n          url=\"data_sources/new\"\n          urlText={window.W_L.connect_new_datasource}\n        />\n      );\n    }\n\n    return (\n      <Step\n        key=\"dataSources\"\n        show={isAvailable.dataSource}\n        completed={isCompleted.dataSource}\n        text={window.W_L.ask_database_info}\n      />\n    );\n  };\n\n  const defaultStepsItems = [\n    {\n      key: \"dataSources\",\n      node: renderDataSourcesStep(),\n    },\n    {\n      key: \"queries\",\n      node: (\n        <Step\n          key=\"queries\"\n          show={isAvailable.query}\n          completed={isCompleted.query}\n          url=\"queries/new\"\n          urlText={window.W_L.create_query}\n        />\n      ),\n    },\n    {\n      key: \"alerts\",\n      node: (\n        <Step\n          key=\"alerts\"\n          show={isAvailable.alert}\n          completed={isCompleted.alert}\n          url=\"alerts/new\"\n          urlText={window.W_L.create_alert}\n        />\n      ),\n    },\n    {\n      key: \"dashboards\",\n      node: (\n        <Step\n          key=\"dashboards\"\n          show={isAvailable.dashboard}\n          completed={isCompleted.dashboard}\n          onClick={showCreateDashboardDialog}\n          urlText={window.W_L.create_dashboard}\n        />\n      ),\n    },\n    {\n      key: \"users\",\n      node: (\n        <Step\n          key=\"users\"\n          show={isAvailable.inviteUsers}\n          completed={isCompleted.inviteUsers}\n          url=\"users/new\"\n          urlText={window.W_L.invite_new_user}\n        />\n      ),\n    },\n  ];\n\n  const stepsItems = getStepsItems ? getStepsItems(defaultStepsItems) : defaultStepsItems;\n  const imageSource = illustrationPath ? illustrationPath : \"static/images/illustrations/\" + illustration + \".svg\";\n\n  return (\n    <div className=\"empty-state-wrapper\">\n      <div className=\"empty-state bg-white tiled\">\n        <div className=\"empty-state__summary\">\n          {header && <h4>{header}</h4>}\n          <h2>\n            <i className={icon} aria-hidden=\"true\" />\n          </h2>\n          <p>{description}</p>\n          <img src={imageSource} alt={illustration + \" Illustration\"} width=\"75%\" />\n        </div>\n        <div className=\"empty-state__steps\">\n          <h4>{window.W_L.start}</h4>\n          <ol>{stepsItems.map(item => item.node)}</ol>\n          {helpMessage}\n        </div>\n      </div>\n      {closable && (\n        <PlainButton className=\"close-button\" aria-label=\"Close\" onClick={onClose}>\n          <CloseOutlinedIcon />\n        </PlainButton>\n      )}\n    </div>\n  );\n}\n\nEmptyState.propTypes = {\n  icon: PropTypes.string,\n  header: PropTypes.string,\n  description: PropTypes.string.isRequired,\n  illustration: PropTypes.string.isRequired,\n  illustrationPath: PropTypes.string,\n  helpMessage: PropTypes.node,\n  closable: PropTypes.bool,\n  onClose: PropTypes.func,\n\n  onboardingMode: PropTypes.bool,\n  showAlertStep: PropTypes.bool,\n  showDashboardStep: PropTypes.bool,\n  showDataSourceStep: PropTypes.bool,\n  showInviteStep: PropTypes.bool,\n\n  getStepItems: PropTypes.func,\n};\n\nEmptyState.defaultProps = {\n  icon: null,\n  header: null,\n  helpMessage: null,\n  closable: false,\n  onClose: () => {},\n\n  onboardingMode: false,\n  showAlertStep: false,\n  showDashboardStep: false,\n  showDataSourceStep: true,\n  showInviteStep: false,\n};\n\nexport default EmptyState;\n","import notification from \"antd/lib/notification\";\n\nnotification.config({\n  placement: \"bottomRight\",\n  duration: 3,\n});\n\nconst simpleNotification = {};\n\n[\"success\", \"error\", \"info\", \"warning\", \"warn\"].forEach(action => {\n  // eslint-disable-next-line arrow-body-style\n  simpleNotification[action] = (message, description = null, props = null) => {\n    return notification[action]({ ...props, message, description });\n  };\n});\n\nexport default {\n  // export Ant's notification and replace actions\n  ...notification,\n  ...simpleNotification,\n};\n","import { axios } from \"@/services/axios\";\nimport notification from \"@/services/notification\";\n\nexport default {\n  get: () => axios.get(\"api/settings/organization\"),\n  save: (data, message = window.W_L.save_success) =>\n    axios\n      .post(\"api/settings/organization\", data)\n      .then(data => {\n        notification.success(message);\n        return data;\n      })\n      .catch(() => { \n        notification.error(window.W_L.save_failed);\n      }),\n};\n","import React, { useState } from \"react\";\nimport Card from \"antd/lib/card\";\nimport Button from \"antd/lib/button\";\nimport Typography from \"antd/lib/typography\";\nimport { clientConfig } from \"@/services/auth\";\nimport Link from \"@/components/Link\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport OrgSettings from \"@/services/organizationSettings\";\n\nconst Text = Typography.Text;\n\nfunction BeaconConsent() {\n  const [hide, setHide] = useState(false);\n\n  if (!clientConfig.showBeaconConsentMessage || hide) {\n    return null;\n  }\n\n  const hideConsentCard = () => {\n    clientConfig.showBeaconConsentMessage = false;\n    setHide(true);\n  };\n\n  const confirmConsent = confirm => {\n    let message = window.W_L.thank_you;\n\n    if (!confirm) {\n      message = window.W_L.setting_saved_success;\n    }\n\n    OrgSettings.save({ beacon_consent: confirm }, message)\n      // .then(() => {\n      //   // const settings = get(response, 'settings');\n      //   // this.setState({ settings, formValues: { ...settings } });\n      // })\n      .finally(hideConsentCard);\n  };\n\n  return (\n    <DynamicComponent name=\"BeaconConsent\">\n      <div className=\"m-t-10 tiled\">\n        <Card\n          title={\n            <>\n              {window.W_L.share_info}{\" \"}\n              <HelpTrigger type=\"USAGE_DATA_SHARING\" />\n            </>\n          }\n          bordered={false}>\n          <Text>{window.W_L.help_redash}：</Text>\n          <div className=\"m-t-5\">\n            <ul>\n              <li> {window.W_L.redash_about_1}</li>\n              <li> {window.W_L.redash_about_2}</li>\n            </ul>\n          </div>\n          <Text>{window.W_L.redash_info}</Text>\n          <div className=\"m-t-5\">\n            <Button type=\"primary\" className=\"m-r-5\" onClick={() => confirmConsent(true)}>\n              {window.W_L.accept}\n            </Button>\n            <Button type=\"default\" onClick={() => confirmConsent(false)}>\n              {window.W_L.reject}\n            </Button>\n          </div>\n          <div className=\"m-t-15\">\n            <Text type=\"secondary\">\n              {window.W_L.set_info_in}{\" \"}\n              <Link href=\"settings/general\">{window.W_L.sys_setting}</Link> {window.W_L.sys_setting_add}。\n            </Text>\n          </div>\n        </Card>\n      </div>\n    </DynamicComponent>\n  );\n}\n\nexport default BeaconConsent;\n","import { isString, isObject, filter, sortBy } from \"lodash\";\nimport React from \"react\";\nimport { Context, Route as UniversalRouterRoute } from \"universal-router\";\nimport pathToRegexp from \"path-to-regexp\";\n\nexport interface CurrentRoute<P> {\n  id: string | null;\n  key?: string;\n  title: string;\n  routeParams: P;\n}\n\nexport interface RedashRoute<P = {}, C extends Context = Context, R = any> extends UniversalRouterRoute<C, R> {\n  path: string; // we don't use other UniversalRouterRoute options, path should be available and should be a string\n  key?: string; // generated in Router.jsx\n  title: string;\n  render?: (currentRoute: CurrentRoute<P>) => React.ReactNode;\n  getApiKey?: () => string;\n}\n\ninterface RouteItem extends RedashRoute<any> {\n  id: string | null;\n}\n\nfunction getRouteParamsCount(path: string) {\n  const tokens = pathToRegexp.parse(path);\n  return filter(tokens, isObject).length;\n}\n\nclass Routes {\n  _items: RouteItem[] = [];\n  _sorted = false;\n\n  get items(): RouteItem[] {\n    if (!this._sorted) {\n      this._items = sortBy(this._items, [\n        item => getRouteParamsCount(item.path), // simple definitions first, with more params - last\n        item => -item.path.length, // longer first\n        item => item.path, // if same type and length - sort alphabetically\n      ]);\n      this._sorted = true;\n    }\n    return this._items;\n  }\n\n  public register<P>(id: string, route: RedashRoute<P>) {\n    const idOrNull = isString(id) ? id : null;\n    this.unregister(idOrNull);\n    if (isObject(route)) {\n      this._items = [...this.items, { ...route, id: idOrNull }];\n      this._sorted = false;\n    }\n  }\n\n  public unregister(id: string | null) {\n    if (isString(id)) {\n      // removing item does not break their order (if already sorted)\n      this._items = filter(this.items, item => item.id !== id);\n    }\n  }\n  public navigate(id: string, params: Record<string, string | number>) {\n    const route = this._items.find(item => item.id === id);\n    if (route) {\n      let url = route.path;\n      for (const key in params) {\n        url = url.replace(`:${key}`, String(params[key]));\n      }\n      window.location.href = url;\n    } else {\n      console.error(`No route found with id: ${id}`);\n    }\n  }\n}\n\nexport default new Routes();\n","import { isEmpty } from \"lodash\";\nimport React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Link from \"@/components/Link\";\nimport LoadingOutlinedIcon from \"@ant-design/icons/LoadingOutlined\";\n\nimport { Dashboard } from \"@/services/dashboard\";\nimport { Query } from \"@/services/query\";\n\nexport function FavoriteList({ title, resource, itemUrl, emptyState }) {\n  const [items, setItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    setLoading(true);\n    resource\n      .favorites()\n      .then(({ results }) => setItems(results))\n      .finally(() => setLoading(false));\n  }, [resource]);\n\n  return (\n    <>\n      <div className=\"d-flex align-items-center m-b-20\">\n        <p className=\"flex-fill f-500 c-black m-0\">{title}</p>\n        {loading && <LoadingOutlinedIcon />}\n      </div>\n      {!isEmpty(items) && (\n        <div role=\"list\" className=\"list-group\">\n          {items.map(item => (\n            <Link key={itemUrl(item)} role=\"listitem\" className=\"list-group-item\" href={itemUrl(item)}>\n              <span className=\"btn-favorite m-r-5\">\n                <i className=\"fa fa-star\" aria-hidden=\"true\" />\n              </span>\n              {item.name}\n              {item.is_draft && <span className=\"label label-default m-l-5\">{window.W_L.unpublished}</span>}\n            </Link>\n          ))}\n        </div>\n      )}\n      {isEmpty(items) && !loading && emptyState}\n    </>\n  );\n}\n\nFavoriteList.propTypes = {\n  title: PropTypes.string.isRequired,\n  resource: PropTypes.func.isRequired, // eslint-disable-line react/forbid-prop-types\n  itemUrl: PropTypes.func.isRequired,\n  emptyState: PropTypes.node,\n};\nFavoriteList.defaultProps = { emptyState: null };\n\nexport function DashboardAndQueryFavoritesList() {\n  return (\n    <div className=\"tile\">\n      <div className=\"t-body tb-padding\">\n        <div className=\"row home-favorites-list\">\n          <div className=\"col-sm-6 m-t-20\">\n            <FavoriteList\n              title={window.W_L.my_favorite_dashboard}\n              resource={Dashboard}\n              itemUrl={dashboard => dashboard.url}\n              emptyState={\n                <p>\n                  <span className=\"btn-favorite m-r-5\">\n                    <i className=\"fa fa-star\" aria-hidden=\"true\" />\n                  </span>\n                  <Link href=\"dashboards\">{window.W_L.my_favorite_dashboard}</Link>\n                </p>\n              }\n            />\n          </div>\n          <div className=\"col-sm-6 m-t-20\">\n            <FavoriteList\n              title={window.W_L.my_favorite_query}\n              resource={Query}\n              itemUrl={query => `queries/${query.id}`}\n              emptyState={\n                <p>\n                  <span className=\"btn-favorite m-r-5\">\n                    <i className=\"fa fa-star\" aria-hidden=\"true\" />\n                  </span>\n                  <Link href=\"queries\">{window.W_L.my_favorite_query}</Link>\n                </p>\n              }\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { includes } from \"lodash\";\nimport React, { useEffect } from \"react\";\n\nimport Alert from \"antd/lib/alert\";\nimport Link from \"@/components/Link\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport EmptyState, { EmptyStateHelpMessage } from \"@/components/empty-state/EmptyState\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport BeaconConsent from \"@/components/BeaconConsent\";\nimport PlainButton from \"@/components/PlainButton\";\n\nimport { axios } from \"@/services/axios\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { messages } from \"@/services/auth\";\nimport notification from \"@/services/notification\";\nimport routes from \"@/services/routes\";\n\nimport { DashboardAndQueryFavoritesList } from \"./components/FavoritesList\";\n\nimport \"./Home.less\";\n\nfunction DeprecatedEmbedFeatureAlert() {\n  return (\n    <Alert\n      className=\"m-b-15\"\n      type=\"warning\"\n      message={\n          <>\n          你已设置参数 <code>ALLOW_PARAMETERS_IN_EMBEDS</code>，但该特征暂时不可用。{\" \"}\n          <Link\n            href=\"https://discuss.redash.io/t/support-for-parameters-in-embedded-visualizations/3337\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\">\n            Read more\n          </Link>\n          .\n        </>\n      }\n    />\n  );\n}\n\nfunction EmailNotVerifiedAlert() {\n  const verifyEmail = () => {\n    axios.post(\"verification_email/\").then(data => {\n      notification.success(data.message);\n    });\n  };\n\n  return (\n    <Alert\n      className=\"m-b-15\"\n      type=\"warning\"\n      message={\n        <>\n\t\t  {window.W_L.email_send}{\" \"}\n          <PlainButton type=\"link\" onClick={verifyEmail}>\n            {window.W_L.re_send_email}\n          </PlainButton>\n          .\n        </>\n      }\n    />\n  );\n}\n\nexport default function Home() {\n  useEffect(() => {\n    recordEvent(\"view\", \"page\", \"personal_homepage\");\n  }, []);\n\n  return (\n    <div className=\"home-page\">\n      <div className=\"container\">\n        {includes(messages, \"using-deprecated-embed-feature\") && <DeprecatedEmbedFeatureAlert />}\n        {includes(messages, \"email-not-verified\") && <EmailNotVerifiedAlert />}\n        <DynamicComponent name=\"Home.EmptyState\">\n          <EmptyState\n            header={window.W_L.redash_welcome}\n            description={window.W_L.redash_desc}\n            illustration=\"dashboard\"\n            helpMessage={<EmptyStateHelpMessage helpTriggerType=\"GETTING_STARTED\" />}\n            showDashboardStep\n            showInviteStep\n            onboardingMode\n          />\n        </DynamicComponent>\n        <DynamicComponent name=\"HomeExtra\" />\n        <DashboardAndQueryFavoritesList />\n        <BeaconConsent />\n\n      </div>\n    </div>\n  );\n}\n\nroutes.register(\n  \"Home\",\n  routeWithUserSession({\n    path: \"/home\",\n    title: \"DeepBI\",\n    render: pageProps => <Home {...pageProps} />,\n  })\n);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport \"./index.less\";\n\nexport default function PageHeader({ title, actions }) {\n  return (\n    <div className=\"page-header-wrapper\">\n      <h3>{title}</h3>\n      {actions && <div className=\"page-header-actions\">{actions}</div>}\n    </div>\n  );\n}\n\nPageHeader.propTypes = {\n  title: PropTypes.string,\n  actions: PropTypes.node,\n};\n\nPageHeader.defaultProps = {\n  title: \"\",\n  actions: null,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Menu from \"antd/lib/menu\";\nimport PageHeader from \"@/components/PageHeader\";\nimport Link from \"@/components/Link\";\n\nimport \"./layout.less\";\n\nexport default function Layout({ activeTab, children }) {\n  return (\n    <div className=\"admin-page-layout\">\n      <div className=\"container\">\n        <PageHeader title=\"Admin\" />\n        <div className=\"bg-white tiled\">\n          <Menu selectedKeys={[activeTab]} selectable={false} mode=\"horizontal\">\n            <Menu.Item key=\"system_status\">\n              <Link href=\"admin/status\">{window.W_L.sys_status}</Link>\n            </Menu.Item>\n            <Menu.Item key=\"jobs\">\n              <Link href=\"admin/queries/jobs\">{window.W_L.task_queen_status}</Link>\n            </Menu.Item>\n            <Menu.Item key=\"outdated_queries\">\n              <Link href=\"admin/queries/outdated\">{window.W_L.outdated_query}</Link>\n            </Menu.Item>\n          </Menu>\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nLayout.propTypes = {\n  activeTab: PropTypes.string,\n  children: PropTypes.node,\n};\n\nLayout.defaultProps = {\n  activeTab: \"system_status\",\n  children: null,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport PlainButton from \"@/components/PlainButton\";\n\nexport default class FavoritesControl extends React.Component {\n  static propTypes = {\n    item: PropTypes.shape({\n      is_favorite: PropTypes.bool.isRequired,\n    }).isRequired,\n    onChange: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onChange: () => {},\n  };\n\n  toggleItem(event, item, callback) {\n    const action = item.is_favorite ? item.unfavorite.bind(item) : item.favorite.bind(item);\n    const savedIsFavorite = item.is_favorite;\n\n    action().then(() => {\n      item.is_favorite = !savedIsFavorite;\n      this.forceUpdate();\n      callback();\n    });\n  }\n\n  render() {\n    const { item, onChange } = this.props;\n    const icon = item.is_favorite ? \"fa fa-star\" : \"fa fa-star-o\";\n    const title = item.is_favorite ? window.W_L.add_favorite : window.W_L.remove_favorite;\n    return (\n      <PlainButton\n        title={title}\n        aria-label={title}\n        className=\"favorites-control btn-favorite\"\n        onClick={event => this.toggleItem(event, item, onChange)}>\n        <i className={icon} aria-hidden=\"true\" />\n      </PlainButton>\n    );\n  }\n}\n","import PropTypes from \"prop-types\";\nimport { wrap } from \"lodash\";\nimport moment from \"moment\";\n\nexport const DataSource = PropTypes.shape({\n  syntax: PropTypes.string,\n  options: PropTypes.shape({\n    doc: PropTypes.string,\n    doc_url: PropTypes.string,\n  }),\n  type_name: PropTypes.string,\n});\n\nexport const Table = PropTypes.shape({\n  columns: PropTypes.arrayOf(PropTypes.string).isRequired,\n});\n\nexport const Schema = PropTypes.arrayOf(Table);\n\nexport const RefreshScheduleType = PropTypes.shape({\n  interval: PropTypes.number,\n  time: PropTypes.string,\n  day_of_week: PropTypes.string,\n  until: PropTypes.string,\n});\n\nexport const RefreshScheduleDefault = {\n  interval: null,\n  time: null,\n  day_of_week: null,\n  until: null,\n};\n\nexport const UserProfile = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  email: PropTypes.string.isRequired,\n  profileImageUrl: PropTypes.string,\n  apiKey: PropTypes.string,\n  isDisabled: PropTypes.bool,\n});\n\nexport const Destination = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  icon: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n});\n\nexport const Query = PropTypes.shape({\n  id: PropTypes.any.isRequired,\n  name: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  data_source_id: PropTypes.any.isRequired,\n  created_at: PropTypes.string.isRequired,\n  updated_at: PropTypes.string,\n  user: UserProfile,\n  query: PropTypes.string,\n  queryHash: PropTypes.string,\n  is_safe: PropTypes.bool.isRequired,\n  is_draft: PropTypes.bool.isRequired,\n  is_archived: PropTypes.bool.isRequired,\n  api_key: PropTypes.string.isRequired,\n});\n\nexport const AlertOptions = PropTypes.shape({\n  column: PropTypes.string,\n  op: PropTypes.oneOf([\">\", \">=\", \"<\", \"<=\", \"==\", \"!=\"]),\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  custom_subject: PropTypes.string,\n  custom_body: PropTypes.string,\n});\n\nexport const Alert = PropTypes.shape({\n  id: PropTypes.any,\n  name: PropTypes.string,\n  created_at: PropTypes.string,\n  last_triggered_at: PropTypes.string,\n  updated_at: PropTypes.string,\n  rearm: PropTypes.number,\n  state: PropTypes.oneOf([\"ok\", \"triggered\", \"unknown\"]),\n  user: UserProfile,\n  query: Query,\n  options: PropTypes.shape({\n    column: PropTypes.string,\n    op: PropTypes.string,\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  }).isRequired,\n});\n\nfunction checkMoment(isRequired, props, propName, componentName) {\n  const value = props[propName];\n  const isRequiredValid = isRequired && value !== null && value !== undefined && moment.isMoment(value);\n  const isOptionalValid = !isRequired && (value === null || value === undefined || moment.isMoment(value));\n  if (!isRequiredValid && !isOptionalValid) {\n    return new Error(\"Prop `\" + propName + \"` supplied to `\" + componentName + \"` should be a Moment.js instance.\");\n  }\n}\n\nexport const Moment = wrap(false, checkMoment);\nMoment.isRequired = wrap(true, checkMoment);\n","import moment from \"moment\";\nimport { isNil } from \"lodash\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Moment } from \"@/components/proptypes\";\nimport { clientConfig } from \"@/services/auth\";\nimport Tooltip from \"@/components/Tooltip\";\n\nfunction toMoment(value) {\n  value = !isNil(value) ? moment(value) : null;\n  return value && value.isValid() ? value : null;\n}\n\nexport default function TimeAgo({ date, placeholder, autoUpdate, variation }) {\n  const startDate = toMoment(date);\n  const [value, setValue] = useState(null);\n  const title = useMemo(() => (startDate ? startDate.format(clientConfig.dateTimeFormat) : null), [startDate]);\n\n  useEffect(() => {\n    function update() {\n      setValue(startDate ? startDate.fromNow() : placeholder);\n    }\n    update();\n\n    if (autoUpdate) {\n      const timer = setInterval(update, 30 * 1000);\n      return () => clearInterval(timer);\n    }\n  }, [autoUpdate, startDate, placeholder]);\n\n  if (variation === \"timeAgoInTooltip\") {\n    return (\n      <Tooltip title={value}>\n        <span data-test=\"TimeAgo\">{title}</span>\n      </Tooltip>\n    );\n  }\n  return (\n    <Tooltip title={title}>\n      <span data-test=\"TimeAgo\">{value}</span>\n    </Tooltip>\n  );\n}\n\nTimeAgo.propTypes = {\n  date: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.instanceOf(Date), Moment]),\n  placeholder: PropTypes.string,\n  autoUpdate: PropTypes.bool,\n  variation: PropTypes.oneOf([\"timeAgoInTooltip\"]),\n};\n\nTimeAgo.defaultProps = {\n  date: null,\n  placeholder: \"\",\n  autoUpdate: true,\n};\n","import moment from \"moment\";\nimport { clientConfig } from \"@/services/auth\";\n\nexport const IntervalEnum = {\n  NEVER: \"不自动刷新\",\n  SECONDS: \"秒\",\n  MINUTES: \"分钟\",\n  HOURS: \"小时\",\n  DAYS: \"天\",\n  WEEKS: \"周\",\n  MILLISECONDS: \"毫秒\",\n};\n\nexport const AbbreviatedTimeUnits = {\n  SECONDS: \"s\",\n  MINUTES: \"m\",\n  HOURS: \"h\",\n  DAYS: \"d\",\n  WEEKS: \"w\",\n  MILLISECONDS: \"ms\",\n};\n\nfunction formatDateTimeValue(value, format) {\n  if (!value) {\n    return \"\";\n  }\n\n  const parsed = moment(value);\n  if (!parsed.isValid()) {\n    return \"-\";\n  }\n\n  return parsed.format(format);\n}\n\nexport function formatDateTime(value) {\n  return formatDateTimeValue(value, clientConfig.dateTimeFormat);\n}\n\nexport function formatDateTimePrecise(value, withMilliseconds = false) {\n  return formatDateTimeValue(value, clientConfig.dateFormat + (withMilliseconds ? \" HH:mm:ss.SSS\" : \" HH:mm:ss\"));\n}\n\nexport function formatDate(value) {\n  return formatDateTimeValue(value, clientConfig.dateFormat);\n}\n\nexport function localizeTime(time) {\n  const [hrs, mins] = time.split(\":\");\n  return moment\n    .utc()\n    .hour(hrs)\n    .minute(mins)\n    .local()\n    .format(\"HH:mm\");\n}\n\nexport function secondsToInterval(count) {\n  let IntervalInfo = window.W_L.language_mode===\"CN\"?IntervalEnum:AbbreviatedTimeUnits\n  if (!count) {\n    return { interval: IntervalInfo.NEVER };\n  }\n\n  let interval = IntervalInfo.SECONDS;\n  if (count >= 60) {\n    count /= 60;\n    interval = IntervalInfo.MINUTES;\n  }\n  if (count >= 60) {\n    count /= 60;\n    interval = IntervalInfo.HOURS;\n  }\n  if (count >= 24 && interval === IntervalInfo.HOURS) {\n    count /= 24;\n    interval = IntervalInfo.DAYS;\n  }\n  if (count >= 7 && !(count % 7) && interval === IntervalInfo.DAYS) {\n    count /= 7;\n    interval = IntervalInfo.WEEKS;\n  }\n  return { count, interval };\n}\n\nexport function pluralize(text, count) {\n  const should = count !== 1;\n  return text + (should ? \"\" : \"\");          //英文复数(should ? \"s\" : \"\")\n}\n\nexport function durationHumanize(durationInSeconds, options = {}) {\n  if (!durationInSeconds) {\n    return \"-\";\n  }\n  let ret = \"\";\n  const { interval, count } = secondsToInterval(durationInSeconds);\n  const rounded = Math.round(count);\n  if (rounded !== 1 || !options.omitSingleValueNumber) {\n    ret = `${rounded} `;\n  }\n  ret += pluralize(interval, rounded);\n  return ret;\n}\n\nexport function toHuman(text) {\n  return text.replace(/_/g, \" \").replace(/(?:^|\\s)\\S/g, a => a.toUpperCase());\n}\n\nexport function remove(items, item) {\n  if (items === undefined) {\n    return items;\n  }\n\n  let notEquals;\n\n  if (item instanceof Array) {\n    notEquals = other => item.indexOf(other) === -1;\n  } else {\n    notEquals = other => item !== other;\n  }\n\n  const filtered = [];\n\n  for (let i = 0; i < items.length; i += 1) {\n    if (notEquals(items[i])) {\n      filtered.push(items[i]);\n    }\n  }\n\n  return filtered;\n}\n\n/**\n * Formats number to string\n * @param value {number}\n * @param [fractionDigits] {number}\n * @return {string}\n */\nexport function formatNumber(value, fractionDigits = 3) {\n  return Math.round(value) !== value ? value.toFixed(fractionDigits) : value.toString();\n}\n\n/**\n * Formats any number using predefined units\n * @param value {string|number}\n * @param divisor {number}\n * @param [units] {Array<string>}\n * @param [fractionDigits] {number}\n * @return {{unit: string, value: string, divisor: number}}\n */\nexport function prettyNumberWithUnit(value, divisor, units = [], fractionDigits) {\n  if (isNaN(parseFloat(value)) || !isFinite(value)) {\n    return {\n      value: \"\",\n      unit: \"\",\n      divisor: 1,\n    };\n  }\n\n  let unit = 0;\n  let greatestDivisor = 1;\n\n  while (value >= divisor && unit < units.length - 1) {\n    value /= divisor;\n    greatestDivisor *= divisor;\n    unit += 1;\n  }\n\n  return {\n    value: formatNumber(value, fractionDigits),\n    unit: units[unit],\n    divisor: greatestDivisor,\n  };\n}\n\nexport function prettySizeWithUnit(bytes, fractionDigits) {\n  return prettyNumberWithUnit(bytes, 1024, [\"bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\"], fractionDigits);\n}\n\nexport function prettySize(bytes) {\n  const { value, unit } = prettySizeWithUnit(bytes);\n  if (!value) {\n    return \"?\";\n  }\n  return value + \" \" + unit;\n}\n\nexport function join(arr) {\n  if (arr === undefined || arr === null) {\n    return \"\";\n  }\n\n  return arr.join(\" / \");\n}\n\nexport function formatColumnValue(value, columnType = null) {\n  if (moment.isMoment(value)) {\n    if (columnType === \"date\") {\n      return formatDate(value);\n    }\n    return formatDateTime(value);\n  }\n\n  if (typeof value === \"boolean\") {\n    return value.toString();\n  }\n\n  return value;\n}\n","import { isFunction, map, filter, extend, omit, identity, range, isEmpty } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport Table from \"antd/lib/table\";\nimport Skeleton from \"antd/lib/skeleton\";\nimport FavoritesControl from \"@/components/FavoritesControl\";\nimport TimeAgo from \"@/components/TimeAgo\";\nimport { durationHumanize, formatDate, formatDateTime } from \"@/lib/utils\";\n\n// `this` refers to previous function in the chain (`Columns.***`).\n// Adds `sorter: true` field to column definition\nfunction sortable(...args) {\n  return extend(this(...args), { sorter: true });\n}\n\nexport const Columns = {\n  favorites(overrides) {\n    return extend(\n      {\n        width: \"1%\",\n        render: (text, item) => <FavoritesControl item={item} />,\n      },\n      overrides\n    );\n  },\n  avatar(overrides, formatTitle) {\n    formatTitle = isFunction(formatTitle) ? formatTitle : identity;\n    return extend(\n      {\n        width: \"1%\",\n        render: (user, item) => (\n          <img\n            src={item.user.profile_image_url}\n            className=\"profile__image_thumb\"\n            alt={formatTitle(user.name, item)}\n            title={formatTitle(user.name, item)}\n          />\n        ),\n      },\n      overrides\n    );\n  },\n  date(overrides) {\n    return extend(\n      {\n        render: text => formatDate(text),\n      },\n      overrides\n    );\n  },\n  dateTime(overrides) {\n    return extend(\n      {\n        render: text => formatDateTime(text),\n      },\n      overrides\n    );\n  },\n  duration(overrides) {\n    return extend(\n      {\n        width: \"1%\",\n        className: \"text-nowrap\",\n        render: text => durationHumanize(text),\n      },\n      overrides\n    );\n  },\n  timeAgo(overrides, timeAgoCustomProps = undefined) {\n    return extend(\n      {\n        render: value => <TimeAgo date={value} {...timeAgoCustomProps} />,\n      },\n      overrides\n    );\n  },\n  custom(render, overrides) {\n    return extend(\n      {\n        render,\n      },\n      overrides\n    );\n  },\n};\n\nColumns.date.sortable = sortable;\nColumns.dateTime.sortable = sortable;\nColumns.duration.sortable = sortable;\nColumns.timeAgo.sortable = sortable;\nColumns.custom.sortable = sortable;\n\nexport default class ItemsTable extends React.Component {\n  static propTypes = {\n    loading: PropTypes.bool,\n    // eslint-disable-next-line react/forbid-prop-types\n    items: PropTypes.arrayOf(PropTypes.object),\n    columns: PropTypes.arrayOf(\n      PropTypes.shape({\n        field: PropTypes.string, // data field\n        orderByField: PropTypes.string, // field to order by (defaults to `field`)\n        render: PropTypes.func, // (prop, item) => text | node; `prop` is `item[field]`\n        isAvailable: PropTypes.func, // return `true` to show column and `false` to hide; if omitted: show column\n      })\n    ),\n    showHeader: PropTypes.bool,\n    onRowClick: PropTypes.func, // (event, item) => void\n\n    orderByField: PropTypes.string,\n    orderByReverse: PropTypes.bool,\n    toggleSorting: PropTypes.func,\n    \"data-test\": PropTypes.string,\n    rowKey: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  };\n\n  static defaultProps = {\n    loading: false,\n    items: [],\n    columns: [],\n    showHeader: true,\n    onRowClick: null,\n\n    orderByField: null,\n    orderByReverse: false,\n    toggleSorting: () => {},\n  };\n\n  prepareColumns() {\n    const { orderByField, orderByReverse, toggleSorting } = this.props;\n    const orderByDirection = orderByReverse ? \"descend\" : \"ascend\";\n\n    return map(\n      map(\n        filter(this.props.columns, column => (isFunction(column.isAvailable) ? column.isAvailable() : true)),\n        column => extend(column, { orderByField: column.orderByField || column.field })\n      ),\n      (column, index) => {\n        // Bind click events only to sortable columns\n        const onHeaderCell = column.sorter ? () => ({ onClick: () => toggleSorting(column.orderByField) }) : null;\n\n        // Wrap render function to pass correct arguments\n        const render = isFunction(column.render) ? (text, row) => column.render(text, row.item) : identity;\n\n        return extend(omit(column, [\"field\", \"orderByField\", \"render\"]), {\n          key: \"column\" + index,\n          dataIndex: [\"item\", column.field],\n          defaultSortOrder: column.orderByField === orderByField ? orderByDirection : null,\n          onHeaderCell,\n          render,\n        });\n      }\n    );\n  }\n\n  getRowKey = record => {\n    const { rowKey } = this.props;\n    if (rowKey) {\n      if (isFunction(rowKey)) {\n        return rowKey(record.item);\n      }\n      return record.item[rowKey];\n    }\n    return record.key;\n  };\n\n  render() {\n    const tableDataProps = {\n      columns: this.prepareColumns(),\n      dataSource: map(this.props.items, (item, index) => ({ key: \"row\" + index, item })),\n    };\n\n    // Bind events only if `onRowClick` specified\n    const onTableRow = isFunction(this.props.onRowClick)\n      ? row => ({\n          onClick: event => {\n            this.props.onRowClick(event, row.item);\n          },\n        })\n      : null;\n\n    const { showHeader } = this.props;\n    if (this.props.loading) {\n      if (isEmpty(tableDataProps.dataSource)) {\n        tableDataProps.columns = tableDataProps.columns.map(column => ({\n          ...column,\n          sorter: false,\n          render: () => <Skeleton active paragraph={false} />,\n        }));\n        tableDataProps.dataSource = range(10).map(key => ({ key: `${key}` }));\n      } else {\n        tableDataProps.loading = { indicator: null };\n      }\n    }\n\n    return (\n      <Table\n        className={classNames(\"table-data\", { \"ant-table-headerless\": !showHeader })}\n        showHeader={showHeader}\n        rowKey={this.getRowKey}\n        pagination={false}\n        onRow={onTableRow}\n        data-test={this.props[\"data-test\"]}\n        {...tableDataProps}\n      />\n    );\n  }\n}\n","import { map } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Badge from \"antd/lib/badge\";\nimport Card from \"antd/lib/card\";\nimport Spin from \"antd/lib/spin\";\nimport Table from \"antd/lib/table\";\nimport { Columns } from \"@/components/items-list/components/ItemsTable\";\n\n// CounterCard\n\nexport function CounterCard({ title, value, loading }) {\n  return (\n    <Spin spinning={loading}>\n      <Card>\n        {title}\n        <div className=\"f-20\">{value}</div>\n      </Card>\n    </Spin>\n  );\n}\n\nCounterCard.propTypes = {\n  title: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  loading: PropTypes.bool.isRequired,\n};\n\nCounterCard.defaultProps = {\n  value: \"\",\n};\n\n// Tables\n\nconst queryJobsColumns = [\n  { title: window.W_L.queue, dataIndex: \"origin\" },\n  { title: window.W_L.query_id, dataIndex: [\"meta\", \"query_id\"] },\n  { title: window.W_L.org_id, dataIndex: [\"meta\", \"org_id\"] },\n  { title: window.W_L.data_source_id, dataIndex: [\"meta\", \"data_source_id\"] },\n  { title: window.W_L.user_id, dataIndex: [\"meta\", \"user_id\"] },\n  Columns.custom(scheduled => scheduled.toString(), { title: window.W_L.scheduled, dataIndex: [\"meta\", \"scheduled\"] }),\n  Columns.timeAgo({ title: window.W_L.start_time, dataIndex: \"started_at\" }),\n  Columns.timeAgo({ title: window.W_L.queue_time, dataIndex: \"enqueued_at\" }),\n];\n\nconst otherJobsColumns = [\n  { title: window.W_L.queue, dataIndex: \"origin\" },\n  { title: window.W_L.job_name, dataIndex: \"name\" },\n  Columns.timeAgo({ title: window.W_L.start_time, dataIndex: \"started_at\" }),\n  Columns.timeAgo({ title: window.W_L.queue_time, dataIndex: \"enqueued_at\" }),\n];\n\nconst workersColumns = [\n  Columns.custom(\n    value => (\n      <span>\n        <Badge status={{ busy: \"processing\", idle: \"default\", started: \"success\", suspended: \"warning\" }[value]} />{\" \"}\n        {value}\n      </span>\n    ),\n    { title: \"State\", dataIndex: \"state\" }\n  ),\n]\n  .concat(\n    map([\"Hostname\", \"PID\", \"Name\", \"Queues\", \"Current Job\", \"Successful Jobs\", \"Failed Jobs\"], c => ({\n      title: c,\n      dataIndex: c.toLowerCase().replace(/\\s/g, \"_\"),\n    }))\n  )\n  .concat([\n    Columns.dateTime({ title: window.W_L.birth_date, dataIndex: \"birth_date\" }),\n    Columns.duration({ title: window.W_L.total_work_time, dataIndex: \"total_working_time\" }),\n  ]);\n\nconst queuesColumns = map([\"Name\", \"Started\", \"Queued\"], c => ({ title: c, dataIndex: c.toLowerCase() }));\n\nconst TablePropTypes = {\n  loading: PropTypes.bool.isRequired,\n  items: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n\nexport function WorkersTable({ loading, items }) {\n  return (\n    <Table\n      loading={loading}\n      columns={workersColumns}\n      rowKey=\"name\"\n      dataSource={items}\n      pagination={{\n        defaultPageSize: 25,\n        pageSizeOptions: [\"10\", \"25\", \"50\"],\n        showSizeChanger: true,\n      }}\n    />\n  );\n}\n\nWorkersTable.propTypes = TablePropTypes;\n\nexport function QueuesTable({ loading, items }) {\n  return (\n    <Table\n      loading={loading}\n      columns={queuesColumns}\n      rowKey=\"name\"\n      dataSource={items}\n      pagination={{\n        defaultPageSize: 25,\n        pageSizeOptions: [\"10\", \"25\", \"50\"],\n        showSizeChanger: true,\n      }}\n    />\n  );\n}\n\nQueuesTable.propTypes = TablePropTypes;\n\nexport function QueryJobsTable({ loading, items }) {\n  return (\n    <Table\n      loading={loading}\n      columns={queryJobsColumns}\n      rowKey=\"id\"\n      dataSource={items}\n      pagination={{\n        defaultPageSize: 25,\n        pageSizeOptions: [\"10\", \"25\", \"50\"],\n        showSizeChanger: true,\n      }}\n    />\n  );\n}\n\nQueryJobsTable.propTypes = TablePropTypes;\n\nexport function OtherJobsTable({ loading, items }) {\n  return (\n    <Table\n      loading={loading}\n      columns={otherJobsColumns}\n      rowKey=\"id\"\n      dataSource={items}\n      pagination={{\n        defaultPageSize: 25,\n        pageSizeOptions: [\"10\", \"25\", \"50\"],\n        showSizeChanger: true,\n      }}\n    />\n  );\n}\n\nOtherJobsTable.propTypes = TablePropTypes;\n","import { partition, flatMap, values } from \"lodash\";\nimport React from \"react\";\nimport moment from \"moment\";\n\nimport Alert from \"antd/lib/alert\";\nimport Tabs from \"antd/lib/tabs\";\nimport * as Grid from \"antd/lib/grid\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport Layout from \"@/components/admin/Layout\";\nimport { CounterCard, WorkersTable, QueuesTable, QueryJobsTable, OtherJobsTable } from \"@/components/admin/RQStatus\";\n\nimport { axios } from \"@/services/axios\";\nimport location from \"@/services/location\";\nimport recordEvent from \"@/services/recordEvent\";\nimport routes from \"@/services/routes\";\n\nclass Jobs extends React.Component {\n  state = {\n    activeTab: location.hash,\n    isLoading: true,\n    error: null,\n\n    queueCounters: [],\n    overallCounters: { started: 0, queued: 0 },\n    startedJobs: [],\n    workers: [],\n  };\n\n  _refreshTimer = null;\n\n  componentDidMount() {\n    recordEvent(\"view\", \"page\", \"admin/rq_status\");\n    this.refresh();\n  }\n\n  componentWillUnmount() {\n    // Ignore data after component unmounted\n    clearTimeout(this._refreshTimer);\n    this.processQueues = () => {};\n    this.handleError = () => {};\n  }\n\n  refresh = () => {\n    axios\n      .get(\"/api/admin/queries/rq_status\")\n      .then(data => this.processQueues(data))\n      .catch(error => this.handleError(error));\n\n    this._refreshTimer = setTimeout(this.refresh, 60 * 1000);\n  };\n\n  processQueues = ({ queues, workers }) => {\n    const queueCounters = values(queues).map(({ started, ...rest }) => ({\n      started: started.length,\n      ...rest,\n    }));\n\n    const overallCounters = queueCounters.reduce(\n      (c, q) => ({\n        started: c.started + q.started,\n        queued: c.queued + q.queued,\n      }),\n      { started: 0, queued: 0 }\n    );\n\n    const startedJobs = flatMap(values(queues), queue =>\n      queue.started.map(job => ({\n        ...job,\n        enqueued_at: moment.utc(job.enqueued_at),\n        started_at: moment.utc(job.started_at),\n      }))\n    );\n\n    this.setState({ isLoading: false, queueCounters, startedJobs, overallCounters, workers });\n  };\n\n  handleError = error => {\n    this.setState({ isLoading: false, error });\n  };\n\n  render() {\n    const { isLoading, error, queueCounters, startedJobs, overallCounters, workers, activeTab } = this.state;\n    const [startedQueryJobs, otherStartedJobs] = partition(startedJobs, [\n      \"name\",\n      \"redash.tasks.queries.execution.execute_query\",\n    ]);\n\n    const changeTab = newTab => {\n      location.setHash(newTab);\n      this.setState({ activeTab: newTab });\n    };\n\n    return (\n      <Layout activeTab=\"jobs\">\n        <div className=\"p-15\">\n          {error && <Alert type=\"error\" message={window.W_L.loading_failed} />}\n\n          {!error && (\n            <React.Fragment>\n              <Grid.Row gutter={15} className=\"m-b-15\">\n                <Grid.Col span={8}>\n                  <CounterCard title={window.W_L.started_job} value={overallCounters.started} loading={isLoading} />\n                </Grid.Col>\n                <Grid.Col span={8}>\n                  <CounterCard title={window.W_L.queen_job} value={overallCounters.queued} loading={isLoading} />\n                </Grid.Col>\n              </Grid.Row>\n\n              <Tabs activeKey={activeTab || \"queues\"} onTabClick={changeTab} animated={false}>\n                <Tabs.TabPane key=\"queues\" tab=\"Queues\">\n                  <QueuesTable loading={isLoading} items={queueCounters} />\n                </Tabs.TabPane>\n                <Tabs.TabPane key=\"workers\" tab=\"Workers\">\n                  <WorkersTable loading={isLoading} items={workers} />\n                </Tabs.TabPane>\n                <Tabs.TabPane key=\"queries\" tab=\"Queries\">\n                  <QueryJobsTable loading={isLoading} items={startedQueryJobs} />\n                </Tabs.TabPane>\n                <Tabs.TabPane key=\"other\" tab=\"Other Jobs\">\n                  <OtherJobsTable loading={isLoading} items={otherStartedJobs} />\n                </Tabs.TabPane>\n              </Tabs>\n            </React.Fragment>\n          )}\n        </div>\n      </Layout>\n    );\n  }\n}\n\nroutes.register(\n  \"Admin.Jobs\",\n  routeWithUserSession({\n    path: \"/admin/queries/jobs\",\n    title: window.W_L.queen_status,\n    render: pageProps => <Jobs {...pageProps} />,\n  })\n);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Pagination from \"antd/lib/pagination\";\n\nconst MIN_ITEMS_PER_PAGE = 5;\n\nexport default function Paginator({ page, showPageSizeSelect, pageSize, onPageSizeChange, totalCount, onChange }) {\n  if (totalCount <= (showPageSizeSelect ? MIN_ITEMS_PER_PAGE : pageSize)) {\n    return null;\n  }\n  return (\n    <div className=\"paginator-container\">\n      <Pagination\n        showSizeChanger={showPageSizeSelect}\n        pageSizeOptions={[\"5\", \"10\", \"20\", \"50\", \"100\"]}\n        onShowSizeChange={(_, size) => onPageSizeChange(size)}\n        defaultCurrent={page}\n        pageSize={pageSize}\n        total={totalCount}\n        onChange={onChange}\n      />\n    </div>\n  );\n}\n\nPaginator.propTypes = {\n  page: PropTypes.number.isRequired,\n  showPageSizeSelect: PropTypes.bool,\n  pageSize: PropTypes.number.isRequired,\n  totalCount: PropTypes.number.isRequired,\n  onPageSizeChange: PropTypes.func,\n  onChange: PropTypes.func,\n};\n\nPaginator.defaultProps = {\n  showPageSizeSelect: false,\n  onChange: () => {},\n  onPageSizeChange: () => {},\n};\n","import { map, trim, uniq, compact } from \"lodash\";\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Select from \"antd/lib/select\";\nimport Modal from \"antd/lib/modal\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\n\nfunction EditTagsDialog({ dialog, tags, getAvailableTags }) {\n  const [availableTags, setAvailableTags] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [values, setValues] = useState(() => uniq(map(tags, trim))); // lazy evaluate\n  const [selectRef, setSelectRef] = useState(null);\n\n  // Select is initially disabled, so autoFocus prop cannot make it focused.\n  // Solution is to pass focus to the select when available tags are loaded and\n  // select becomes enabled.\n  useEffect(() => {\n    if (selectRef && !isLoading) {\n      selectRef.focus();\n    }\n  }, [selectRef, isLoading]);\n\n  useEffect(() => {\n    let isCancelled = false;\n    getAvailableTags().then(availableTags => {\n      if (!isCancelled) {\n        setAvailableTags(uniq(compact(map(availableTags, trim))));\n        setIsLoading(false);\n      }\n    });\n    return () => {\n      isCancelled = true;\n    };\n  }, [getAvailableTags]);\n\n  return (\n    <Modal\n      {...dialog.props}\n      onOk={() => dialog.close(values)}\n      title={window.W_L.add_edit_tag}\n      okText={window.W_L.ok_text}\n      cancelText={window.W_L.cancel}\n      className=\"shortModal\"\n      wrapProps={{ \"data-test\": \"EditTagsDialog\" }}>\n      <Select\n        ref={setSelectRef}\n        mode=\"tags\"\n        className=\"w-100\"\n        placeholder={window.W_L.add_more_tag}\n        defaultValue={values}\n        onChange={v => setValues(compact(map(v, trim)))}\n        disabled={isLoading}\n        loading={isLoading}>\n        {map(availableTags, tag => (\n          <Select.Option key={tag}>{tag}</Select.Option>\n        ))}\n      </Select>\n    </Modal>\n  );\n}\n\nEditTagsDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  tags: PropTypes.arrayOf(PropTypes.string),\n  getAvailableTags: PropTypes.func.isRequired,\n};\n\nEditTagsDialog.defaultProps = {\n  tags: [],\n};\n\nexport default wrapDialog(EditTagsDialog);\n","import { map, trim } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Tooltip from \"@/components/Tooltip\";\nimport EditTagsDialog from \"./EditTagsDialog\";\nimport PlainButton from \"@/components/PlainButton\";\n\nexport class TagsControl extends React.Component {\n  static propTypes = {\n    tags: PropTypes.arrayOf(PropTypes.string),\n    canEdit: PropTypes.bool,\n    getAvailableTags: PropTypes.func,\n    onEdit: PropTypes.func,\n    className: PropTypes.string,\n    tagsExtra: PropTypes.node,\n    tagSeparator: PropTypes.node,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    tags: [],\n    canEdit: false,\n    getAvailableTags: () => Promise.resolve([]),\n    onEdit: () => {},\n    className: \"\",\n    tagsExtra: null,\n    tagSeparator: null,\n    children: null,\n  };\n\n  editTags = (tags, getAvailableTags) => {\n    EditTagsDialog.showModal({ tags, getAvailableTags }).onClose(this.props.onEdit);\n  };\n\n  renderEditButton() {\n    const tags = map(this.props.tags, trim);\n    return (\n      <PlainButton\n        className=\"label label-tag hidden-xs\"\n        onClick={() => this.editTags(tags, this.props.getAvailableTags)}\n        data-test=\"EditTagsButton\">\n        {tags.length === 0 && (\n          <React.Fragment>\n            <i className=\"zmdi zmdi-plus m-r-5\" aria-hidden=\"true\" />\n            {window.W_L.add_tag}\n          </React.Fragment>\n        )}\n        {tags.length > 0 && (\n          <>\n            <i className=\"zmdi zmdi-edit\" aria-hidden=\"true\" />\n            <span className=\"sr-only\">Edit</span>\n          </>\n        )}\n      </PlainButton>\n    );\n  }\n\n  render() {\n    const { tags, tagSeparator } = this.props;\n    return (\n      <div className={\"tags-control \" + this.props.className} data-test=\"TagsControl\">\n        {this.props.children}\n        {map(tags, (tag, i) => (\n          <React.Fragment key={tag}>\n            {tagSeparator && i > 0 && <span className=\"tag-separator\">{tagSeparator}</span>}\n            <span className=\"label label-tag\" key={tag} title={tag} data-test=\"TagLabel\">\n              {tag}\n            </span>\n          </React.Fragment>\n        ))}\n        {this.props.canEdit && this.renderEditButton()}\n        {this.props.tagsExtra}\n      </div>\n    );\n  }\n}\n\nfunction modelTagsControl({ archivedTooltip }) {\n  // See comment for `propTypes`/`defaultProps`\n  // eslint-disable-next-line react/prop-types\n  function ModelTagsControl({ isDraft, isArchived, ...props }) {\n    return (\n      <TagsControl {...props}>\n        {!isArchived && isDraft && <span className=\"label label-tag-unpublished\">{window.W_L.draft}</span>}\n        {isArchived && (\n          <Tooltip placement=\"right\" title={archivedTooltip}>\n            <span className=\"label label-tag-archived\">{window.W_L.archived}</span>\n          </Tooltip>\n        )}\n      </TagsControl>\n    );\n  }\n\n  ModelTagsControl.propTypes = {\n    isDraft: PropTypes.bool,\n    isArchived: PropTypes.bool,\n  };\n\n  ModelTagsControl.defaultProps = {\n    isDraft: false,\n    isArchived: false,\n  };\n\n  return ModelTagsControl;\n}\n\nexport const QueryTagsControl = modelTagsControl({\n  archivedTooltip: window.W_L.archived_info,\n});\n\nexport const DashboardTagsControl = modelTagsControl({\n  archivedTooltip: window.W_L.archived_info,\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Tooltip from \"@/components/Tooltip\";\nimport PlainButton from \"@/components/PlainButton\";\nimport { localizeTime, durationHumanize } from \"@/lib/utils\";\nimport { RefreshScheduleType, RefreshScheduleDefault } from \"../proptypes\";\n\nimport \"./ScheduleDialog.css\";\n\nexport default class SchedulePhrase extends React.Component {\n  static propTypes = {\n    schedule: RefreshScheduleType,\n    isNew: PropTypes.bool.isRequired,\n    isLink: PropTypes.bool,\n    onClick: PropTypes.func,\n  };\n\n  static defaultProps = {\n    schedule: RefreshScheduleDefault,\n    isLink: false,\n    onClick: () => {},\n  };\n\n  get content() {\n    const { interval: seconds } = this.props.schedule || SchedulePhrase.defaultProps.schedule;\n    if (!seconds) {\n      return [window.W_L.flush_never];\n    }\n    const humanized = durationHumanize(seconds, {\n      omitSingleValueNumber: true, \n    });\n    const short = window.W_L.every + `${humanized}`;\n    let full = window.W_L.every + `${humanized}`+ window.W_L.auto_flush;\n\n    const { time, day_of_week: dayOfWeek } = this.props.schedule;\n    if (time) {\n      full += window.W_L.at +`  ${localizeTime(time)}`;\n    }\n    if (dayOfWeek) {\n      full += window.W_L.on + `  ${dayOfWeek}`;\n    }\n\n    return [short, full];\n  }\n\n  render() {\n    if (this.props.isNew) {\n      return window.W_L.flush_never;\n    }\n\n    const [short, full] = this.content;\n    const content = full ? <Tooltip title={full}>{short}</Tooltip> : short;\n\n    return this.props.isLink ? (\n      <PlainButton type=\"link\" className=\"schedule-phrase\" onClick={this.props.onClick} data-test=\"EditSchedule\">\n        {content}\n      </PlainButton>\n    ) : (\n      content\n    );\n  }\n}\n","import { omit, debounce } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport hoistNonReactStatics from \"hoist-non-react-statics\";\nimport { clientConfig } from \"@/services/auth\";\nimport { AxiosError } from \"axios\";\n\nexport interface PaginationOptions {\n  page?: number;\n  itemsPerPage?: number;\n}\n\nexport interface Controller<I, P = any> {\n  params: P; // TODO: Find out what params is (except merging with props)\n\n  isLoaded: boolean;\n  isEmpty: boolean;\n\n  // search\n  searchTerm?: string;\n  updateSearch: (searchTerm: string) => void;\n\n  // tags\n  selectedTags: string[];\n  updateSelectedTags: (selectedTags: string[]) => void;\n\n  // sorting\n  orderByField?: string;\n  orderByReverse: boolean;\n  toggleSorting: (orderByField: string) => void;\n\n  // pagination\n  page: number;\n  itemsPerPage: number;\n  totalItemsCount: number;\n  pageSizeOptions: number[];\n  pageItems: I[];\n  updatePagination: (options: PaginationOptions) => void; // ({ page: number, itemsPerPage: number }) => void\n\n  handleError: (error: any) => void; // TODO: Find out if error is string or object or Exception.\n}\n\nexport const ControllerType = PropTypes.shape({\n  // values of props declared by wrapped component and some additional props from items list\n  params: PropTypes.object.isRequired,\n\n  isLoaded: PropTypes.bool.isRequired,\n  isEmpty: PropTypes.bool.isRequired,\n\n  // search\n  searchTerm: PropTypes.string,\n  updateSearch: PropTypes.func.isRequired, // (searchTerm: string) => void\n\n  // tags\n  selectedTags: PropTypes.array.isRequired,\n  updateSelectedTags: PropTypes.func.isRequired, // (selectedTags: array of tags) => void\n\n  // sorting\n  orderByField: PropTypes.string,\n  orderByReverse: PropTypes.bool.isRequired,\n  toggleSorting: PropTypes.func.isRequired, // (orderByField: string) => void\n\n  // pagination\n  page: PropTypes.number.isRequired,\n  itemsPerPage: PropTypes.number.isRequired,\n  totalItemsCount: PropTypes.number.isRequired,\n  pageSizeOptions: PropTypes.arrayOf(PropTypes.number).isRequired,\n  pageItems: PropTypes.array.isRequired,\n  updatePagination: PropTypes.func.isRequired, // ({ page: number, itemsPerPage: number }) => void\n\n  handleError: PropTypes.func.isRequired, // (error) => void\n});\n\nexport type GenericItemSourceError = AxiosError | Error;\n\nexport interface ItemsListWrapperProps {\n  onError?: (error: AxiosError | Error) => void;\n  children: React.ReactNode;\n}\n\ninterface ItemsListWrapperState<I, P = any> extends Controller<I, P> {\n  totalCount?: number;\n  update: () => void;\n}\n\ntype ItemsSource = any; // TODO: Type ItemsSource\ntype StateStorage = any; // TODO: Type StateStore\n\nexport interface ItemsListWrappedComponentProps<I, P = any> {\n  controller: Controller<I, P>;\n}\n\nexport function wrap<I, P = any>(\n  WrappedComponent: React.ComponentType<ItemsListWrappedComponentProps<I>>,\n  createItemsSource: () => ItemsSource,\n  createStateStorage: () => StateStorage\n) {\n  class ItemsListWrapper extends React.Component<ItemsListWrapperProps, ItemsListWrapperState<I, P>> {\n    private _itemsSource: ItemsSource;\n\n    static propTypes = {\n      onError: PropTypes.func,\n      children: PropTypes.node,\n    };\n\n    static defaultProps = {\n      onError: (error: GenericItemSourceError) => {\n        // Allow calling chain to roll up, and then throw the error in global context\n        setTimeout(() => {\n          throw error;\n        });\n      },\n      children: null,\n    };\n\n    constructor(props: ItemsListWrapperProps) {\n      super(props);\n\n      const stateStorage = createStateStorage();\n      const itemsSource = createItemsSource();\n      this._itemsSource = itemsSource;\n\n      itemsSource.setState({ ...stateStorage.getState(), validate: false });\n      itemsSource.getCallbackContext = () => this.state;\n\n      itemsSource.onBeforeUpdate = () => {\n        const state = itemsSource.getState();\n        stateStorage.setState(state);\n        this.setState(this.getState({ ...state, isLoaded: false }));\n      };\n\n      itemsSource.onAfterUpdate = () => {\n        const state = itemsSource.getState();\n        this.setState(this.getState({ ...state, isLoaded: true }));\n      };\n\n      itemsSource.onError = (error: GenericItemSourceError) =>\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        this.props.onError!(error);\n\n      const initialState = this.getState({ ...itemsSource.getState(), isLoaded: false });\n      const { updatePagination, toggleSorting, updateSearch, updateSelectedTags, update, handleError } = itemsSource;\n      this.state = {\n        ...initialState,\n        toggleSorting, // eslint-disable-line react/no-unused-state\n        updateSearch: debounce(updateSearch, 200), // eslint-disable-line react/no-unused-state\n        updateSelectedTags, // eslint-disable-line react/no-unused-state\n        updatePagination, // eslint-disable-line react/no-unused-state\n        update, // eslint-disable-line react/no-unused-state\n        handleError, // eslint-disable-line react/no-unused-state\n      };\n    }\n\n    componentDidMount() {\n      this.state.update();\n    }\n\n    componentWillUnmount() {\n      // eslint-disable-next-line @typescript-eslint/no-empty-function\n      this._itemsSource.onBeforeUpdate = () => {};\n      // eslint-disable-next-line @typescript-eslint/no-empty-function\n      this._itemsSource.onAfterUpdate = () => {};\n      // eslint-disable-next-line @typescript-eslint/no-empty-function\n      this._itemsSource.onError = () => {};\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getState({\n      isLoaded,\n      totalCount,\n      pageItems,\n      params,\n      ...rest\n    }: ItemsListWrapperState<I, P>): ItemsListWrapperState<I, P> {\n      return {\n        ...rest,\n\n        params: {\n          ...params, // custom params from items source\n          ...omit(this.props, [\"onError\", \"children\"]), // add all props except of own ones\n        },\n\n        isLoaded,\n        isEmpty: !isLoaded || totalCount === 0,\n        totalItemsCount: totalCount || 0,\n        pageSizeOptions: (clientConfig as any).pageSizeOptions, // TODO: Type auth.js\n        pageItems: pageItems || [],\n      };\n    }\n\n    render() {\n      // don't pass own props to wrapped component\n      const { children, onError, ...props } = this.props;\n      return (\n        <WrappedComponent {...props} controller={this.state}>\n          {children}\n        </WrappedComponent>\n      );\n    }\n  }\n\n  // Copy static methods from `WrappedComponent`\n  hoistNonReactStatics(ItemsListWrapper, WrappedComponent);\n\n  return ItemsListWrapper;\n}\n","import { isUndefined } from \"lodash\";\n\nexport default class Paginator {\n  page = 1;\n\n  itemsPerPage = 20;\n\n  totalCount = 0;\n\n  get totalPages() {\n    return Math.ceil(this.totalCount / this.itemsPerPage);\n  }\n\n  setPage(value, validate = true) {\n    if (isUndefined(value)) {\n      return;\n    }\n    value = parseInt(value, 10) || 1;\n    if (validate) {\n      this.page = value >= 1 && value <= this.totalPages ? value : 1;\n    } else {\n      this.page = value >= 1 ? value : 1;\n    }\n  }\n\n  setItemsPerPage(value, validate = true) {\n    if (isUndefined(value)) {\n      return;\n    }\n    value = parseInt(value, 10) || 20;\n    this.itemsPerPage = value >= 1 ? value : 1;\n    if (validate) {\n      this.setPage(this.page, validate);\n    }\n  }\n\n  setTotalCount(value, validate = true) {\n    if (isUndefined(value)) {\n      return;\n    }\n    value = parseInt(value, 10) || 0;\n    this.totalCount = value;\n    if (validate) {\n      this.setPage(this.page, validate);\n    }\n  }\n\n  constructor({ page, itemsPerPage, totalCount, validate = true } = {}) {\n    this.setItemsPerPage(itemsPerPage, validate);\n    this.setTotalCount(totalCount, validate);\n    this.setPage(page, validate);\n  }\n\n  getItemsForPage(items) {\n    const first = this.itemsPerPage * (this.page - 1);\n    const last = first + this.itemsPerPage;\n\n    return items.slice(first, last);\n  }\n}\n","import { isString, sortBy } from \"lodash\";\n\nconst ORDER_BY_REVERSE = \"-\";\n\nexport function compile(field, reverse) {\n  if (!field) {\n    return null;\n  }\n  return reverse ? ORDER_BY_REVERSE + field : field;\n}\n\nexport function parse(compiled) {\n  compiled = isString(compiled) ? compiled : \"\";\n  const reverse = compiled.startsWith(ORDER_BY_REVERSE);\n  if (reverse) {\n    compiled = compiled.substring(1);\n  }\n  const field = compiled !== \"\" ? compiled : null;\n  return { field, reverse };\n}\n\nexport default class Sorter {\n  field = null;\n\n  reverse = false;\n\n  sortByIteratees = null;\n\n  get compiled() {\n    return compile(this.field, this.reverse);\n  }\n\n  set compiled(value) {\n    const { field, reverse } = parse(value);\n    this.field = field;\n    this.reverse = reverse;\n  }\n\n  setField(value) {\n    this.field = isString(value) && value !== \"\" ? value : null;\n  }\n\n  setReverse(value) {\n    this.reverse = !!value; // cast to boolean\n  }\n\n  constructor({ orderByField, orderByReverse } = {}, sortByIteratees = undefined) {\n    this.setField(orderByField);\n    this.setReverse(orderByReverse);\n    this.sortByIteratees = sortByIteratees;\n  }\n\n  toggleField(field) {\n    if (!isString(field) || field === \"\") {\n      return;\n    }\n    if (field === this.field) {\n      this.reverse = !this.reverse;\n    } else {\n      this.field = field;\n      this.reverse = false;\n    }\n  }\n\n  sort(items) {\n    if (this.field) {\n      const customIteratee = this.sortByIteratees && this.sortByIteratees[this.field];\n      items = sortBy(items, customIteratee ? [customIteratee] : this.field);\n      if (this.reverse) {\n        items.reverse();\n      }\n      return items;\n    }\n  }\n}\n","import { identity, isFunction, isNil, isString } from \"lodash\";\n\nclass ItemsFetcher {\n  _getRequest(state, context) {\n    return this._originalGetRequest({}, context);\n  }\n\n  _processResults({ results, count }, state, context) {\n    return {\n      results: this._originalProcessResults(results, context),\n      count,\n    };\n  }\n\n  constructor({ getRequest, doRequest, processResults }) {\n    this._originalGetRequest = isFunction(getRequest) ? getRequest : identity;\n    this._originalDoRequest = doRequest;\n    this._originalProcessResults = isFunction(processResults) ? processResults : identity;\n  }\n\n  fetch(changes, state, context) {\n    const request = this._getRequest(state, context);\n    return this._originalDoRequest(request, context).then(data => this._processResults(data, state, context));\n  }\n}\n\n// For endpoints that return just an array with items; sorting and pagination\n// is performed on client\nexport class PlainListFetcher extends ItemsFetcher {\n  _allItems = [];\n\n  _getRequest({ searchTerm, selectedTags }, context) {\n    return this._originalGetRequest(\n      {\n        q: isString(searchTerm) && searchTerm !== \"\" ? searchTerm : undefined,\n        tags: selectedTags,\n      },\n      context\n    );\n  }\n\n  _processResults(data, { paginator, sorter }, context) {\n    this._allItems = this._originalProcessResults(data, context);\n    this._allItems = sorter.sort(this._allItems);\n    return {\n      results: paginator.getItemsForPage(this._allItems),\n      count: this._allItems.length,\n      allResults: this._allItems,\n    };\n  }\n\n  fetch(changes, state, context) {\n    // For plain lists we need to reload items from server only if tags or search changes.\n    if (isNil(changes) || changes.tags || changes.sorting) {\n      return super.fetch(changes, state, context);\n    }\n    // Sorting and pagination could be updated using previously fetched items.\n    const { paginator, sorter } = state;\n    if (changes.sorting) {\n      this._allItems = sorter.sort(this._allItems);\n    }\n    return Promise.resolve({\n      results: paginator.getItemsForPage(this._allItems),\n      count: this._allItems.length,\n      allResults: this._allItems,\n    });\n  }\n}\n\n// For endpoints that support server-side pagination (return object with\n// items for current page and total items count)\nexport class PaginatedListFetcher extends ItemsFetcher {\n  _getRequest({ paginator, sorter, searchTerm, selectedTags }, context) {\n    return this._originalGetRequest(\n      {\n        page: paginator.page,\n        page_size: paginator.itemsPerPage,\n        order: sorter.compiled,\n        q: isString(searchTerm) && searchTerm !== \"\" ? searchTerm : undefined,\n        tags: selectedTags,\n      },\n      context\n    );\n  }\n}\n","import { isFunction, identity, map, extend } from \"lodash\";\nimport Paginator from \"./Paginator\";\nimport Sorter from \"./Sorter\";\nimport { PlainListFetcher, PaginatedListFetcher } from \"./ItemsFetcher\";\n\nexport class ItemsSource {\n  onBeforeUpdate = null;\n\n  onAfterUpdate = null;\n\n  onError = null;\n\n  sortByIteratees = undefined;\n\n  getCallbackContext = () => null;\n\n  _beforeUpdate() {\n    if (isFunction(this.onBeforeUpdate)) {\n      return Promise.resolve(this.onBeforeUpdate(this.getState(), this.getCallbackContext()));\n    }\n    return Promise.resolve();\n  }\n\n  _afterUpdate() {\n    if (isFunction(this.onAfterUpdate)) {\n      return Promise.resolve(this.onAfterUpdate(this.getState(), this.getCallbackContext()));\n    }\n    return Promise.resolve();\n  }\n\n  // changes: object with flags or null (full refresh requested)\n  _changed(changes) {\n    const state = {\n      paginator: this._paginator,\n      sorter: this._sorter,\n      searchTerm: this._searchTerm,\n      selectedTags: this._selectedTags,\n    };\n    const customParams = {};\n    const context = {\n      ...this.getCallbackContext(),\n      setCustomParams: params => {\n        extend(customParams, params);\n      },\n    };\n    return this._beforeUpdate().then(() => {\n      const fetchToken = Math.random()\n        .toString(36)\n        .substr(2);\n      this._currentFetchToken = fetchToken;\n      return this._fetcher\n        .fetch(changes, state, context)\n        .then(({ results, count, allResults }) => {\n          if (this._currentFetchToken === fetchToken) {\n            this._pageItems = results;\n            this._allItems = allResults || null;\n            this._paginator.setTotalCount(count);\n            this._params = { ...this._params, ...customParams };\n            return this._afterUpdate();\n          }\n        })\n        .catch(error => this.handleError(error));\n    });\n  }\n\n  constructor({\n    getRequest,\n    doRequest,\n    processResults,\n    isPlainList = false,\n    sortByIteratees = undefined,\n    ...defaultState\n  }) {\n    if (!isFunction(getRequest)) {\n      getRequest = identity;\n    }\n\n    this._fetcher = isPlainList\n      ? new PlainListFetcher({ getRequest, doRequest, processResults })\n      : new PaginatedListFetcher({ getRequest, doRequest, processResults });\n\n    this.sortByIteratees = sortByIteratees;\n\n    this.setState(defaultState);\n    this._pageItems = [];\n\n    this._params = {};\n  }\n\n  getState() {\n    return {\n      page: this._paginator.page,\n      itemsPerPage: this._paginator.itemsPerPage,\n      orderByField: this._sorter.field,\n      orderByReverse: this._sorter.reverse,\n      searchTerm: this._searchTerm,\n      selectedTags: this._selectedTags,\n      totalCount: this._paginator.totalCount,\n      pageItems: this._pageItems,\n      allItems: this._allItems,\n      params: this._params,\n    };\n  }\n\n  setState(state) {\n    this._paginator = new Paginator(state);\n    this._sorter = new Sorter(state, this.sortByIteratees);\n\n    this._searchTerm = state.searchTerm || \"\";\n    this._selectedTags = state.selectedTags || [];\n\n    this._savedOrderByField = this._sorter.field;\n  }\n\n  updatePagination = ({ page, itemsPerPage }) => {\n    const { page: prevPage, itemsPerPage: prevItemsPerPage } = this._paginator;\n    this._paginator.setItemsPerPage(itemsPerPage);\n    this._paginator.setPage(page);\n    this._changed({\n      pagination: {\n        page: prevPage !== this._paginator.page, // page changed flag\n        itemsPerPage: prevItemsPerPage !== this._paginator.itemsPerPage, // items per page changed flags\n      },\n    });\n  };\n\n  toggleSorting = orderByField => {\n    this._sorter.toggleField(orderByField);\n    this._savedOrderByField = this._sorter.field;\n    this._changed({ sorting: true });\n  };\n\n  updateSearch = searchTerm => {\n    // here we update state directly, but later `fetchData` will update it properly\n    this._searchTerm = searchTerm;\n    // in search mode ignore the ordering and use the ranking order\n    // provided by the server-side FTS backend instead, unless it was\n    // requested by the user by actively ordering in search mode\n    if (searchTerm === \"\") {\n      this._sorter.setField(this._savedOrderByField); // restore ordering\n    } else {\n      this._sorter.setField(null);\n    }\n    this._paginator.setPage(1);\n    this._changed({ search: true, pagination: { page: true } });\n  };\n\n  updateSelectedTags = selectedTags => {\n    this._selectedTags = selectedTags;\n    this._paginator.setPage(1);\n    this._changed({ tags: true, pagination: { page: true } });\n  };\n\n  update = () => this._changed();\n\n  handleError = error => {\n    if (isFunction(this.onError)) {\n      this.onError(error);\n    }\n  };\n}\n\nexport class ResourceItemsSource extends ItemsSource {\n  constructor({ getResource, getItemProcessor, ...rest }) {\n    getItemProcessor = isFunction(getItemProcessor) ? getItemProcessor : () => null;\n    super({\n      ...rest,\n      doRequest: (request, context) => {\n        const resource = getResource(context)(request);\n        return resource;\n      },\n      processResults: (results, context) => {\n        let processItem = getItemProcessor(context);\n        processItem = isFunction(processItem) ? processItem : identity;\n        return map(results, item => processItem(item, context));\n      },\n    });\n  }\n}\n","import { defaults } from \"lodash\";\nimport { clientConfig } from \"@/services/auth\";\nimport location from \"@/services/location\";\nimport { parse as parseOrderBy, compile as compileOrderBy } from \"./Sorter\";\n\nexport class StateStorage {\n  constructor(state = {}) {\n    this._state = { ...state };\n  }\n\n  getState() {\n    return defaults(this._state, {\n      page: 1,\n      itemsPerPage: clientConfig.pageSize,\n      orderByField: \"created_at\",\n      orderByReverse: false,\n      searchTerm: \"\",\n      tags: [],\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  setState() {}\n}\n\nexport class UrlStateStorage extends StateStorage {\n  getState() {\n    const defaultState = super.getState();\n    const params = location.search;\n\n    const searchTerm = params.q || \"\";\n\n    // in search mode order by should be explicitly specified in url, otherwise use default\n    const defaultOrderBy =\n      searchTerm !== \"\" ? \"\" : compileOrderBy(defaultState.orderByField, defaultState.orderByReverse);\n\n    const { field: orderByField, reverse: orderByReverse } = parseOrderBy(params.order || defaultOrderBy);\n\n    return {\n      page: parseInt(params.page, 10) || defaultState.page,\n      itemsPerPage: parseInt(params.page_size, 10) || defaultState.itemsPerPage,\n      orderByField,\n      orderByReverse,\n      searchTerm,\n    };\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  setState({ page, itemsPerPage, orderByField, orderByReverse, searchTerm }) {\n    location.setSearch(\n      {\n        page,\n        page_size: itemsPerPage,\n        order: compileOrderBy(orderByField, orderByReverse),\n        q: searchTerm !== \"\" ? searchTerm : null,\n      },\n      true\n    );\n  }\n}\n","import React from \"react\";\nimport BigMessage from \"@/components/BigMessage\";\n\n// Default \"loading\" message for list pages\nexport default function LoadingState(props) {\n  return (\n    <div className=\"text-center\">\n      <BigMessage icon=\"fa-spinner fa-2x fa-pulse\" message={window.W_L.loading} {...props} />\n    </div>\n  );\n}\n","import { map, uniqueId } from \"lodash\";\nimport React from \"react\";\n\nimport Switch from \"antd/lib/switch\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport Link from \"@/components/Link\";\nimport Paginator from \"@/components/Paginator\";\nimport { QueryTagsControl } from \"@/components/tags-control/TagsControl\";\nimport SchedulePhrase from \"@/components/queries/SchedulePhrase\";\nimport TimeAgo from \"@/components/TimeAgo\";\nimport Layout from \"@/components/admin/Layout\";\n\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { StateStorage } from \"@/components/items-list/classes/StateStorage\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\n\nimport { axios } from \"@/services/axios\";\nimport { Query } from \"@/services/query\";\nimport recordEvent from \"@/services/recordEvent\";\nimport routes from \"@/services/routes\";\n\nclass OutdatedQueries extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  listColumns = [\n    {\n      title: \"ID\",\n      field: \"id\",\n      width: \"1%\",\n      align: \"right\",\n      sorter: true,\n    },\n    Columns.custom.sortable(\n      (text, item) => (\n        <React.Fragment>\n          <Link className=\"table-main-title\" href={\"queries/\" + item.id}>\n            {item.name}\n          </Link>\n          <QueryTagsControl\n            className=\"d-block\"\n            tags={item.tags}\n            isDraft={item.is_draft}\n            isArchived={item.is_archived}\n          />\n        </React.Fragment>\n      ),\n      {\n        title: window.W_L.name,\n        field: \"name\",\n        width: null,\n      }\n    ),\n    Columns.avatar({ field: \"user\", className: \"p-l-0 p-r-0\" }, name => window.W_L.create_user +` ${name}`),\n    Columns.dateTime.sortable({ title: window.W_L.create_time, field: \"created_at\" }),\n    Columns.duration.sortable({ title: window.W_L.run_time, field: \"runtime\" }),\n    Columns.dateTime.sortable({ title: window.W_L.last_exec_datetime, field: \"retrieved_at\", orderByField: \"executed_at\" }),\n    Columns.custom.sortable((text, item) => <SchedulePhrase schedule={item.schedule} isNew={item.isNew()} />, {\n      title:window.W_L.update_schedule,\n      field: \"schedule\",\n    }),\n  ];\n\n  state = {\n    autoUpdate: true,\n  };\n\n  _updateTimer = null;\n  autoUpdateSwitchId = uniqueId(\"auto-update-switch\");\n\n  componentDidMount() {\n    recordEvent(\"view\", \"page\", \"admin/queries/outdated\");\n    this.update(true);\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this._updateTimer);\n  }\n\n  update = (isInitialCall = false) => {\n    if (!isInitialCall && this.state.autoUpdate) {\n      this.props.controller.update();\n    }\n    this._updateTimer = setTimeout(this.update, 60 * 1000);\n  };\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <Layout activeTab={controller.params.currentPage}>\n        <div className=\"m-15\">\n          <div>\n            <label htmlFor={this.autoUpdateSwitchId} className=\"m-0\">\n              {window.W_L.auto_update}\n            </label>\n            <Switch\n              id={this.autoUpdateSwitchId}\n              className=\"m-l-10\"\n              checked={this.state.autoUpdate}\n              onChange={autoUpdate => this.setState({ autoUpdate })}\n            />\n          </div>\n          {controller.params.lastUpdatedAt && (\n            <div className=\"m-t-5\">\n              {window.W_L.last_update_time}：<TimeAgo date={controller.params.lastUpdatedAt * 1000} />\n            </div>\n          )}\n        </div>\n        {!controller.isLoaded && <LoadingState />}\n        {controller.isLoaded && controller.isEmpty && (\n          <div className=\"text-center p-15\">There are no outdated queries.</div>\n        )}\n        {controller.isLoaded && !controller.isEmpty && (\n          <div className=\"bg-white tiled table-responsive\">\n            <ItemsTable\n              items={controller.pageItems}\n              columns={this.listColumns}\n              orderByField={controller.orderByField}\n              orderByReverse={controller.orderByReverse}\n              toggleSorting={controller.toggleSorting}\n            />\n            <Paginator\n              showPageSizeSelect\n              totalCount={controller.totalItemsCount}\n              pageSize={controller.itemsPerPage}\n              onPageSizeChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n              page={controller.page}\n              onChange={page => controller.updatePagination({ page })}\n            />\n          </div>\n        )}\n      </Layout>\n    );\n  }\n}\n\nconst OutdatedQueriesPage = itemsList(\n  OutdatedQueries,\n  () =>\n    new ItemsSource({\n      doRequest(request, context) {\n        return (\n          axios\n            .get(\"/api/admin/queries/outdated\")\n            // eslint-disable-next-line camelcase\n            .then(({ queries, updated_at }) => {\n              context.setCustomParams({ lastUpdatedAt: parseFloat(updated_at) });\n              return queries;\n            })\n        );\n      },\n      processResults(items) {\n        return map(items, item => new Query(item));\n      },\n      isPlainList: true,\n    }),\n  () => new StateStorage({ orderByField: \"created_at\", orderByReverse: true })\n);\n\nroutes.register(\n  \"Admin.OutdatedQueries\",\n  routeWithUserSession({\n    path: \"/admin/queries/outdated\",\n    title: window.W_L.out_date_query,\n    render: pageProps => <OutdatedQueriesPage {...pageProps} currentPage=\"outdated_queries\" />,\n  })\n);\n","/* eslint-disable react/prop-types */\n\nimport { toPairs } from \"lodash\";\nimport React from \"react\";\n\nimport List from \"antd/lib/list\";\nimport Card from \"antd/lib/card\";\nimport TimeAgo from \"@/components/TimeAgo\";\n\nimport { toHuman, prettySize } from \"@/lib/utils\";\n\nexport function General({ info }) {\n  info = toPairs(info);\n  return (\n    <Card title={window.W_L.general} size=\"small\">\n      {info.length === 0 && <div className=\"text-muted text-center\">{window.W_L.no_data}</div>}\n      {info.length > 0 && (\n        <List\n          size=\"small\"\n          itemLayout=\"vertical\"\n          dataSource={info}\n          renderItem={([name, value]) => (\n            <List.Item extra={<span className=\"badge\">{value}</span>}>{toHuman(name)}</List.Item>\n          )}\n        />\n      )}\n    </Card>\n  );\n}\n\nexport function DatabaseMetrics({ info }) {\n  return (\n    <Card title={window.W_L.database} size=\"small\">\n      {info.length === 0 && <div className=\"text-muted text-center\">{window.W_L.no_data}</div>}\n      {info.length > 0 && (\n        <List\n          size=\"small\"\n          itemLayout=\"vertical\"\n          dataSource={info}\n          renderItem={([name, size]) => (\n            <List.Item extra={<span className=\"badge\">{prettySize(size)}</span>}>{name}</List.Item>\n          )}\n        />\n      )}\n    </Card>\n  );\n}\n\nexport function Queues({ info }) {\n  info = toPairs(info);\n  return (\n    <Card title={window.W_L.queue} size=\"small\">\n      {info.length === 0 && <div className=\"text-muted text-center\">{window.W_L.no_data}</div>}\n      {info.length > 0 && (\n        <List\n          size=\"small\"\n          itemLayout=\"vertical\"\n          dataSource={info}\n          renderItem={([name, queue]) => (\n            <List.Item extra={<span className=\"badge\">{queue.size}</span>}>{name}</List.Item>\n          )}\n        />\n      )}\n    </Card>\n  );\n}\n\nexport function Manager({ info }) {\n  const items = info\n    ? [\n        <List.Item\n          extra={\n            <span className=\"badge\">\n              <TimeAgo date={info.lastRefreshAt} placeholder=\"n/a\" />\n            </span>\n          }>\n          {window.W_L.last_fresh}\n        </List.Item>,\n        <List.Item\n          extra={\n            <span className=\"badge\">\n              <TimeAgo date={info.startedAt} placeholder=\"n/a\" />\n            </span>\n          }>\n          {window.W_L.started}\n        </List.Item>,\n        <List.Item extra={<span className=\"badge\">{info.outdatedQueriesCount}</span>}>\n          {window.W_L.outdated_query_count}\n        </List.Item>,\n      ]\n    : [];\n\n  return (\n    <Card title={window.W_L.manage} size=\"small\">\n      {!info && <div className=\"text-muted text-center\">{window.W_L.no_data}</div>}\n      {info && <List size=\"small\" itemLayout=\"vertical\" dataSource={items} renderItem={item => item} />}\n    </Card>\n  );\n}\n","import { omit } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport Layout from \"@/components/admin/Layout\";\nimport * as StatusBlock from \"@/components/admin/StatusBlock\";\n\nimport { axios } from \"@/services/axios\";\nimport recordEvent from \"@/services/recordEvent\";\nimport routes from \"@/services/routes\";\n\nimport \"./system-status.less\";\n\nclass SystemStatus extends React.Component {\n  static propTypes = {\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onError: () => {},\n  };\n\n  state = {\n    queues: [],\n    manager: null,\n    databaseMetrics: {},\n    status: {},\n  };\n\n  _refreshTimer = null;\n\n  componentDidMount() {\n    recordEvent(\"view\", \"page\", \"admin/status\");\n    this.refresh();\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this._refreshTimer);\n  }\n\n  refresh = () => {\n    axios\n      .get(\"/status.json\")\n      .then(data => {\n        this.setState({\n          queues: data.manager.queues,\n          manager: {\n            startedAt: data.manager.started_at * 1000,\n            lastRefreshAt: data.manager.last_refresh_at * 1000,\n            outdatedQueriesCount: data.manager.outdated_queries_count,\n          },\n          databaseMetrics: data.database_metrics.metrics || [],\n          status: omit(data, [\"workers\", \"manager\", \"database_metrics\"]),\n        });\n      })\n      .catch(error => this.props.onError(error));\n    this._refreshTimer = setTimeout(this.refresh, 60 * 1000);\n  };\n\n  render() {\n    return (\n      <Layout activeTab=\"system_status\">\n        <div className=\"system-status-page\">\n          <div className=\"system-status-page-blocks\">\n            <div className=\"system-status-page-block\">\n              <StatusBlock.General info={this.state.status} />\n            </div>\n            <div className=\"system-status-page-block\">\n              <StatusBlock.Manager info={this.state.manager} />\n            </div>\n            <div className=\"system-status-page-block\">\n              <StatusBlock.Queues info={this.state.queues} />\n            </div>\n            <div className=\"system-status-page-block\">\n              <StatusBlock.DatabaseMetrics info={this.state.databaseMetrics} />\n            </div>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n}\n\nroutes.register(\n  \"Admin.SystemStatus\",\n  routeWithUserSession({\n    path: \"/admin/status\",\n    title: window.W_L.out_date_query,\n    render: pageProps => <SystemStatus {...pageProps} />,\n  })\n);\n","import { axios } from \"@/services/axios\";\nimport { merge } from \"lodash\";\n\n// backwards compatibility\nconst normalizeCondition = {\n  \"greater than\": \">\",\n  \"less than\": \"<\",\n  equals: \"=\",\n};\n\nconst transformResponse = data =>\n  merge({}, data, {\n    options: {\n      op: normalizeCondition[data.options.op] || data.options.op,\n    },\n  });\n\nconst transformRequest = data => {\n  const newData = Object.assign({}, data);\n  if (newData.query_id === undefined) {\n    newData.query_id = newData.query.id;\n    newData.destination_id = newData.destinations;\n    delete newData.query;\n    delete newData.destinations;\n  }\n\n  return newData;\n};\n\nconst saveOrCreateUrl = data => (data.id ? `api/alerts/${data.id}` : \"api/alerts\");\n\nconst Alert = {\n  query: () => axios.get(\"api/alerts\"),\n  get: ({ id }) => axios.get(`api/alerts/${id}`).then(transformResponse),\n  save: data => axios.post(saveOrCreateUrl(data), transformRequest(data)),\n  delete: data => axios.delete(`api/alerts/${data.id}`),\n  mute: data => axios.post(`api/alerts/${data.id}/mute`),\n  unmute: data => axios.delete(`api/alerts/${data.id}/mute`),\n};\n\nexport default Alert;\n","import { toUpper } from \"lodash\";\nimport React from \"react\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport Link from \"@/components/Link\";\nimport PageHeader from \"@/components/PageHeader\";\nimport Paginator from \"@/components/Paginator\";\nimport EmptyState, { EmptyStateHelpMessage } from \"@/components/empty-state/EmptyState\";\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { StateStorage } from \"@/components/items-list/classes/StateStorage\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\n\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\n\nimport Alert from \"@/services/alert\";\nimport { currentUser } from \"@/services/auth\";\nimport routes from \"@/services/routes\";\n\nexport const STATE_CLASS = {\n  unknown: \"label-warning\",\n  ok: \"label-success\",\n  triggered: \"label-danger\",\n};\n\nclass AlertsList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  listColumns = [\n    Columns.custom.sortable(\n      (text, alert) => (\n        <span title={alert.options.muted ? \"Muted\" : \"Active\"}>\n          <i className={`fa fa-bell-${alert.options.muted ? \"slash\" : \"o\"} p-r-0`} aria-hidden=\"true\" />\n          <span className=\"sr-only\">{alert.options.muted ? \"Muted\" : \"Active\"}</span>\n        </span>\n      ),\n      {\n        title: (\n          <>\n            <i className=\"fa fa-bell p-r-0\" aria-hidden=\"true\" />\n            <span className=\"sr-only\">Sort by notification status.</span>\n          </>\n        ),\n        field: \"muted\",\n        width: \"1%\",\n      }\n    ),\n    Columns.custom.sortable(\n      (text, alert) => (\n        <div>\n          <Link className=\"table-main-title\" href={\"alerts/\" + alert.id}>\n            {alert.name}\n          </Link>\n        </div>\n      ),\n      {\n        title: window.W_L.name,\n        field: \"name\",\n      }\n    ),\n    Columns.custom((text, item) => item.user.name, { title: window.W_L.create_user, width: \"1%\" }),\n    Columns.custom.sortable(\n      (text, alert) => (\n        <div>\n          <span className={`label ${STATE_CLASS[alert.state]}`}>{toUpper(alert.state)}</span>\n        </div>\n      ),\n      {\n        title: window.W_L.status,\n        field: \"state\",\n        width: \"1%\",\n        className: \"text-nowrap\",\n      }\n    ),\n    Columns.timeAgo.sortable({ title: window.W_L.last_update_time, field: \"updated_at\", width: \"1%\" }),\n    Columns.dateTime.sortable({ title: window.W_L.create_time, field: \"created_at\", width: \"1%\" }),\n  ];\n\n  render() {\n    const { controller } = this.props;\n\n    return (\n      <div className=\"page-alerts-list\">\n        <div className=\"container\">\n          <PageHeader\n            title={controller.params.pageTitle}\n            actions={\n              currentUser.hasPermission(\"list_alerts\") ? (\n                <Link.Button block type=\"primary\" href=\"alerts/new\">\n                  <i className=\"fa fa-plus m-r-5\" aria-hidden=\"true\" />\n                  {window.W_L.new_alert}\n                </Link.Button>\n              ) : null\n            }\n          />\n          <div>\n            {controller.isLoaded && controller.isEmpty ? (\n              <DynamicComponent name=\"AlertsList.EmptyState\">\n                <EmptyState\n                  icon=\"fa fa-bell-o\"\n                  illustration=\"alert\"\n                  description={window.W_L.get_notice_event}\n                  helpMessage={<EmptyStateHelpMessage helpTriggerType=\"ALERTS\" />}\n                  showAlertStep\n                />\n              </DynamicComponent>\n            ) : (\n              <div className=\"table-responsive bg-white tiled\">\n                <ItemsTable\n                  loading={!controller.isLoaded}\n                  items={controller.pageItems}\n                  columns={this.listColumns}\n                  orderByField={controller.orderByField}\n                  orderByReverse={controller.orderByReverse}\n                  toggleSorting={controller.toggleSorting}\n                />\n                <Paginator\n                  showPageSizeSelect\n                  totalCount={controller.totalItemsCount}\n                  pageSize={controller.itemsPerPage}\n                  onPageSizeChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n                  page={controller.page}\n                  onChange={page => controller.updatePagination({ page })}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst AlertsListPage = itemsList(\n  AlertsList,\n  () =>\n    new ResourceItemsSource({\n      isPlainList: true,\n      getRequest() {\n        return {};\n      },\n      getResource() {\n        return Alert.query.bind(Alert);\n      },\n    }),\n  () => new StateStorage({ orderByField: \"created_at\", orderByReverse: true, itemsPerPage: 20 })\n);\n\nroutes.register(\n  \"Alerts.List\",\n  routeWithUserSession({\n    path: \"/alerts\",\n    title: window.W_L.alerts,\n    render: pageProps => <AlertsListPage {...pageProps} currentPage=\"alerts\" />,\n  })\n);\n","import React, { useState, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\n\nimport Modal from \"antd/lib/modal\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Menu from \"antd/lib/menu\";\nimport Button from \"antd/lib/button\";\n\nimport LoadingOutlinedIcon from \"@ant-design/icons/LoadingOutlined\";\nimport EllipsisOutlinedIcon from \"@ant-design/icons/EllipsisOutlined\";\nimport PlainButton from \"@/components/PlainButton\";\n\nexport default function MenuButton({ doDelete, canEdit, mute, unmute, muted }) {\n  const [loading, setLoading] = useState(false);\n\n  const execute = useCallback(action => {\n    setLoading(true);\n    action().finally(() => {\n      setLoading(false);\n    });\n  }, []);\n\n  const confirmDelete = useCallback(() => {\n    Modal.confirm({\n      title: window.W_L.delete_alert,\n      content: window.W_L.delete_alert_confirm,\n      okText: window.W_L.ok_text,\n      cancelText: window.W_L.cancel,\n      okType: \"danger\",\n      onOk: () => {\n        setLoading(true);\n        doDelete().catch(() => {\n          setLoading(false);\n        });\n      },\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  }, [doDelete]);\n\n  return (\n    <Dropdown\n      className={cx(\"m-l-5\", { disabled: !canEdit })}\n      trigger={[canEdit ? \"click\" : undefined]}\n      placement=\"bottomRight\"\n      overlay={\n        <Menu>\n          <Menu.Item>\n            {muted ? (\n              <PlainButton onClick={() => execute(unmute)}>{window.W_L.alert_unmute}</PlainButton>\n            ) : (\n              <PlainButton onClick={() => execute(mute)}>{window.W_L.alert_mute}</PlainButton>\n            )}\n          </Menu.Item>\n          <Menu.Item>\n            <PlainButton onClick={confirmDelete}>{window.W_L.delete}</PlainButton>\n          </Menu.Item>\n        </Menu>\n      }>\n      <Button aria-label=\"More actions\">\n        {loading ? <LoadingOutlinedIcon /> : <EllipsisOutlinedIcon rotate={90} aria-hidden=\"true\" />}\n      </Button>\n    </Dropdown>\n  );\n}\n\nMenuButton.propTypes = {\n  doDelete: PropTypes.func.isRequired,\n  canEdit: PropTypes.bool.isRequired,\n  mute: PropTypes.func.isRequired,\n  unmute: PropTypes.func.isRequired,\n  muted: PropTypes.bool,\n};\n\nMenuButton.defaultProps = {\n  muted: false,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Input from \"antd/lib/input\";\nimport { getDefaultName } from \"../Alert\";\n\nimport { Alert as AlertType } from \"@/components/proptypes\";\n\nimport \"./Title.less\";\n\nexport default function Title({ alert, editMode, name, onChange, children }) {\n  const defaultName = getDefaultName(alert);\n  return (\n    <div className=\"alert-header\">\n      <div className=\"alert-title\">\n        <h3>\n          {editMode && alert.query ? (\n            // BUG: Input is not the same width as the container\n            // TODO: consider adding a label (not obvious for sighted users)\n            <Input\n              className=\"f-inherit\"\n              placeholder={defaultName}\n              value={name}\n              aria-label=\"Alert title\"\n              onChange={e => onChange(e.target.value)}\n            />\n          ) : (\n            name || defaultName\n          )}\n        </h3>\n      </div>\n      <div className=\"alert-actions\">{children}</div>\n    </div>\n  );\n}\n\nTitle.propTypes = {\n  alert: AlertType.isRequired,\n  name: PropTypes.string,\n  children: PropTypes.node,\n  onChange: PropTypes.func,\n  editMode: PropTypes.bool,\n};\n\nTitle.defaultProps = {\n  name: null,\n  children: null,\n  onChange: null,\n  editMode: false,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { head, includes, toString, isEmpty } from \"lodash\";\n\nimport Input from \"antd/lib/input\";\nimport WarningFilledIcon from \"@ant-design/icons/WarningFilled\";\nimport Select from \"antd/lib/select\";\nimport Divider from \"antd/lib/divider\";\n\nimport { AlertOptions as AlertOptionsType } from \"@/components/proptypes\";\n\nimport \"./Criteria.less\";\n\nconst CONDITIONS = {\n  \">\": \"\\u003e\",\n  \">=\": \"\\u2265\",\n  \"<\": \"\\u003c\",\n  \"<=\": \"\\u2264\",\n  \"==\": \"\\u003d\",\n  \"!=\": \"\\u2260\",\n};\n\nconst VALID_STRING_CONDITIONS = [\"==\", \"!=\"];\n\nfunction DisabledInput({ children, minWidth }) {\n  return (\n    <div className=\"criteria-disabled-input\" style={{ minWidth }}>\n      {children}\n    </div>\n  );\n}\n\nDisabledInput.propTypes = {\n  children: PropTypes.node.isRequired,\n  minWidth: PropTypes.number.isRequired,\n};\n\nexport default function Criteria({ columnNames, resultValues, alertOptions, onChange, editMode }) {\n  const columnValue = !isEmpty(resultValues) ? head(resultValues)[alertOptions.column] : null;\n  const invalidMessage = (() => {\n    // bail if condition is valid for strings\n    if (includes(VALID_STRING_CONDITIONS, alertOptions.op)) {\n      return null;\n    }\n\n    if (isNaN(alertOptions.value)) {\n      return window.W_L.type_not_match_value;\n    }\n\n    if (isNaN(columnValue)) {\n      return window.W_L.type_not_match_condition;\n    }\n\n    return null;\n  })();\n\n  const columnHint = (\n    <small className=\"alert-criteria-hint\">\n      {window.W_L.top_value} <code className=\"p-0\">{toString(columnValue) || \"unknown\"}</code>\n    </small>\n  );\n\n  return (\n    <div data-test=\"Criteria\">\n      <div className=\"input-title\">\n        <span className=\"input-label\">{window.W_L.column_value}</span>\n        {editMode ? (\n          <Select\n            value={alertOptions.column}\n            onChange={column => onChange({ column })}\n            dropdownMatchSelectWidth={false}\n            style={{ minWidth: 100 }}>\n            {columnNames.map(name => (\n              <Select.Option key={name}>{name}</Select.Option>\n            ))}\n          </Select>\n        ) : (\n          <DisabledInput minWidth={70}>{alertOptions.column}</DisabledInput>\n        )}\n      </div>\n      <div className=\"input-title\">\n        <span className=\"input-label\">{window.W_L.condition}</span>\n        {editMode ? (\n          <Select\n            value={alertOptions.op}\n            onChange={op => onChange({ op })}\n            optionLabelProp=\"label\"\n            dropdownMatchSelectWidth={false}\n            style={{ width: 55 }}>\n            <Select.Option value=\">\" label={CONDITIONS[\">\"]}>\n              {CONDITIONS[\">\"]} {window.W_L.great_then}\n            </Select.Option>\n            <Select.Option value=\">=\" label={CONDITIONS[\">=\"]}>\n              {CONDITIONS[\">=\"]} {window.W_L.great_and_equals}\n            </Select.Option>\n            <Select.Option disabled key=\"dv1\">\n              <Divider className=\"select-option-divider m-t-10 m-b-5\" />\n            </Select.Option>\n            <Select.Option value=\"<\" label={CONDITIONS[\"<\"]}>\n              {CONDITIONS[\"<\"]} {window.W_L.less_then}\n            </Select.Option>\n            <Select.Option value=\"<=\" label={CONDITIONS[\"<=\"]}>\n              {CONDITIONS[\"<=\"]} {window.W_L.less_and_equals}\n            </Select.Option>\n            <Select.Option disabled key=\"dv2\">\n              <Divider className=\"select-option-divider m-t-10 m-b-5\" />\n            </Select.Option>\n            <Select.Option value=\"==\" label={CONDITIONS[\"==\"]}>\n              {CONDITIONS[\"==\"]}  {window.W_L.equals}\n            </Select.Option>\n            <Select.Option value=\"!=\" label={CONDITIONS[\"!=\"]}>\n              {CONDITIONS[\"!=\"]}  {window.W_L.not_equals}\n            </Select.Option>\n          </Select>\n        ) : (\n          <DisabledInput minWidth={50}>{CONDITIONS[alertOptions.op]}</DisabledInput>\n        )}\n      </div>\n      <div className=\"input-title\">\n        <label className=\"input-label\" htmlFor=\"threshold-criterion\">\n          {window.W_L.threshold}\n        </label>\n        {editMode ? (\n          <Input\n            id=\"threshold-criterion\"\n            style={{ width: 90 }}\n            value={alertOptions.value}\n            onChange={e => onChange({ value: e.target.value })}\n          />\n        ) : (\n          <DisabledInput minWidth={50}>{alertOptions.value}</DisabledInput>\n        )}\n      </div>\n      <div className=\"ant-form-item-explain\">\n        {columnHint}\n        <br />\n        {invalidMessage && (\n          <small>\n            <WarningFilledIcon className=\"warning-icon-danger\" /> {invalidMessage}\n          </small>\n        )}\n      </div>\n    </div>\n  );\n}\n\nCriteria.propTypes = {\n  columnNames: PropTypes.arrayOf(PropTypes.string).isRequired,\n  resultValues: PropTypes.arrayOf(PropTypes.object).isRequired,\n  alertOptions: AlertOptionsType.isRequired,\n  onChange: PropTypes.func,\n  editMode: PropTypes.bool,\n};\n\nCriteria.defaultProps = {\n  onChange: () => {},\n  editMode: false,\n};\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { toLower, isNumber } from \"lodash\";\n\nimport InputNumber from \"antd/lib/input-number\";\nimport Select from \"antd/lib/select\";\n\nimport \"./Rearm.less\";\n\nconst DURATIONS = [\n  [window.W_L.second, 1],\n  [window.W_L.minute, 60],\n  [window.W_L.hour, 3600],\n  [window.W_L.day, 86400],\n  [window.W_L.week, 604800],\n];\n\nfunction RearmByDuration({ value, onChange, editMode }) {\n  const [durationIdx, setDurationIdx] = useState();\n  const [count, setCount] = useState();\n\n  useEffect(() => {\n    for (let i = DURATIONS.length - 1; i >= 0; i -= 1) {\n      const [, durValue] = DURATIONS[i];\n      if (value % durValue === 0) {\n        setDurationIdx(i);\n        setCount(value / durValue);\n        break;\n      }\n    }\n  }, [value]);\n\n  if (!isNumber(count) || !isNumber(durationIdx)) {\n    return null;\n  }\n\n  const onChangeCount = newCount => {\n    setCount(newCount);\n    onChange(newCount * DURATIONS[durationIdx][1]);\n  };\n\n  const onChangeIdx = newIdx => {\n    setDurationIdx(newIdx);\n    onChange(count * DURATIONS[newIdx][1]);\n  };\n\n  const plural = count !== 1 ? \"s\" : \"\";\n\n  if (editMode) {\n    return (\n      <>\n        <InputNumber value={count} onChange={onChangeCount} min={1} precision={0} />\n        <Select value={durationIdx} onChange={onChangeIdx}>\n          {DURATIONS.map(([name], idx) => (\n            <Select.Option value={idx} key={name}>\n              {name}\n              {plural}\n            </Select.Option>\n          ))}\n        </Select>\n      </>\n    );\n  }\n\n  const [name] = DURATIONS[durationIdx];\n  return count + \" \" + toLower(name) + plural;\n}\n\nRearmByDuration.propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.number.isRequired,\n  editMode: PropTypes.bool.isRequired,\n};\n\nRearmByDuration.defaultProps = {\n  onChange: () => {},\n};\n\nfunction RearmEditor({ value, onChange }) {\n  const [selected, setSelected] = useState(value < 2 ? value : 2);\n\n  const _onChange = newSelected => {\n    setSelected(newSelected);\n    onChange(newSelected < 2 ? newSelected : 3600);\n  };\n\n  return (\n    <div className=\"alert-rearm\">\n      <Select\n        optionLabelProp=\"label\"\n        defaultValue={selected || 0}\n        dropdownMatchSelectWidth={false}\n        onChange={_onChange}>\n        <Select.Option value={0} label={window.W_L.alert_one_time}>\n          {window.W_L.alert_one_time_tip}\n        </Select.Option>\n        <Select.Option value={1} label={window.W_L.alert_every_time}>\n          {window.W_L.alert_every_time_tip}\n        </Select.Option>\n        <Select.Option value={2} label={window.W_L.alert_most_once}>\n\t\t\t{window.W_L.alert_most_once_tip}\n        </Select.Option>\n      </Select>\n      {selected === 2 && value && <RearmByDuration value={value} onChange={onChange} editMode />}\n    </div>\n  );\n}\n\nRearmEditor.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nfunction RearmViewer({ value }) {\n  let phrase = \"\";\n  switch (value) {\n    case 0:\n      phrase = window.W_L.alert_one_time_tip;\n      break;\n    case 1:\n      phrase = window.W_L.alert_every_time_tip;\n      break;\n    default:\n      phrase = (\n        <>\n          {window.W_L.alert_most_once_tip} <RearmByDuration value={value} editMode={false} />\n        </>\n      );\n  }\n\n  return <span>{window.W_L.notice_will_send} {phrase}.</span>;\n}\n\nRearmViewer.propTypes = {\n  value: PropTypes.number.isRequired,\n};\n\nexport default function Rearm({ editMode, ...props }) {\n  return editMode ? <RearmEditor {...props} /> : <RearmViewer {...props} />;\n}\n\nRearm.propTypes = {\n  onChange: PropTypes.func,\n  value: PropTypes.number.isRequired,\n  editMode: PropTypes.bool,\n};\n\nRearm.defaultProps = {\n  onChange: null,\n  editMode: false,\n};\n","import { useState, useEffect, useRef } from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\n\nexport default function useSearchResults(fetch, { initialResults = null, debounceTimeout = 200 } = {}) {\n  const [result, setResult] = useState(initialResults);\n  const [isLoading, setIsLoading] = useState(false);\n  const currentSearchTerm = useRef(null);\n  const isDestroyed = useRef(false);\n\n  const [doSearch] = useDebouncedCallback(searchTerm => {\n    setIsLoading(true);\n    currentSearchTerm.current = searchTerm;\n    fetch(searchTerm)\n      .catch(() => initialResults)\n      .then(data => {\n        if (searchTerm === currentSearchTerm.current && !isDestroyed.current) {\n          setResult(data);\n          setIsLoading(false);\n        }\n      });\n  }, debounceTimeout);\n\n  useEffect(\n    () =>\n      // ignore all requests after component destruction\n      () => {\n        isDestroyed.current = true;\n      },\n    []\n  );\n\n  return [doSearch, result, isLoading];\n}\n","import { find } from \"lodash\";\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport Input from \"antd/lib/input\";\nimport Select from \"antd/lib/select\";\nimport { Query } from \"@/services/query\";\nimport PlainButton from \"@/components/PlainButton\";\nimport notification from \"@/services/notification\";\nimport { QueryTagsControl } from \"@/components/tags-control/TagsControl\";\nimport useSearchResults from \"@/lib/hooks/useSearchResults\";\n\nconst { Option } = Select;\nfunction search(term) {\n  if (term === null) {\n    return Promise.resolve(null);\n  }\n\n  // get recent\n  if (!term) {\n    return Query.recent().then(results => results.filter(item => !item.is_draft)); // filter out draft\n  }\n\n  // search by query\n  return Query.query({ q: term }).then(({ results }) => results);\n}\n\nexport default function QuerySelector(props) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedQuery, setSelectedQuery] = useState();\n  const [doSearch, searchResults, searching] = useSearchResults(search, { initialResults: [] });\n\n  const placeholder = window.W_L.search_by_name;\n  const clearIcon = (\n    <i\n      className=\"fa fa-times hide-in-percy\"\n      role=\"button\"\n      tabIndex={0}\n      aria-label=\"Clear\"\n      onClick={() => selectQuery(null)}\n    />\n  );\n  const spinIcon = (\n    <span role=\"status\" aria-live=\"polite\" aria-relevant=\"additions removals\">\n      <i className={cx(\"fa fa-spinner fa-pulse hide-in-percy\", { hidden: !searching })} aria-hidden=\"true\" />\n      <span className=\"sr-only\">Searching...</span>\n    </span>\n  );\n\n  useEffect(() => {\n    doSearch(searchTerm);\n  }, [doSearch, searchTerm]);\n\n  // set selected from prop\n  useEffect(() => {\n    if (props.selectedQuery) {\n      setSelectedQuery(props.selectedQuery);\n    }\n  }, [props.selectedQuery]);\n\n  function selectQuery(queryId) {\n    let query = null;\n    if (queryId) {\n      query = find(searchResults, { id: queryId });\n      if (!query) {\n        // shouldn't happen\n        notification.error(\"Something went wrong...\", \"Couldn't select query\");\n      }\n    }\n\n    setSearchTerm(query ? null : \"\"); // empty string triggers recent fetch\n    setSelectedQuery(query);\n    props.onChange(query);\n  }\n\n  function renderResults() {\n    if (!searchResults.length) {\n      return <div className=\"text-muted\">{window.W_L.find_nothing}</div>;\n    }\n\n    return (\n      <ul className=\"list-group\">\n        {searchResults.map(q => (\n          <PlainButton\n            className={cx(\"query-selector-result\", \"list-group-item\", { inactive: q.is_draft })}\n            key={q.id}\n            role=\"listitem\"\n            onClick={() => selectQuery(q.id)}\n            data-test={`QueryId${q.id}`}>\n            {q.name} <QueryTagsControl isDraft={q.is_draft} tags={q.tags} className=\"inline-tags-control\" />\n          </PlainButton>\n        ))}\n      </ul>\n    );\n  }\n\n  if (props.disabled) {\n    return (\n      <Input value={selectedQuery && selectedQuery.name} aria-label=\"Tied query\" placeholder={placeholder} disabled />\n    );\n  }\n\n  if (props.type === \"select\") {\n    const suffixIcon = selectedQuery ? clearIcon : null;\n    const value = selectedQuery ? selectedQuery.name : searchTerm;\n\n    return (\n      <Select\n        showSearch\n        dropdownMatchSelectWidth={false}\n        placeholder={placeholder}\n        value={value || undefined} // undefined for the placeholder to show\n        onSearch={setSearchTerm}\n        onChange={selectQuery}\n        suffixIcon={searching ? spinIcon : suffixIcon}\n        notFoundContent={null}\n        filterOption={false}\n        defaultActiveFirstOption={false}\n        className={props.className}\n        data-test=\"QuerySelector\">\n        {searchResults &&\n          searchResults.map(q => {\n            const disabled = q.is_draft;\n            return (\n              <Option\n                value={q.id}\n                key={q.id}\n                disabled={disabled}\n                className=\"query-selector-result\"\n                data-test={`QueryId${q.id}`}>\n                {q.name}{\" \"}\n                <QueryTagsControl\n                  isDraft={q.is_draft}\n                  tags={q.tags}\n                  className={cx(\"inline-tags-control\", { disabled })}\n                />\n              </Option>\n            );\n          })}\n      </Select>\n    );\n  }\n\n  return (\n    <span data-test=\"QuerySelector\">\n      {selectedQuery ? (\n        <Input value={selectedQuery.name} aria-label=\"Tied query\" suffix={clearIcon} readOnly />\n      ) : (\n        <Input\n          placeholder={placeholder}\n          value={searchTerm}\n          aria-label=\"Tied query\"\n          onChange={e => setSearchTerm(e.target.value)}\n          suffix={spinIcon}\n        />\n      )}\n      <div className=\"scrollbox\" style={{ maxHeight: \"50vh\", marginTop: 15 }}>\n        {searchResults && renderResults()}\n      </div>\n    </span>\n  );\n}\n\nQuerySelector.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  selectedQuery: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  type: PropTypes.oneOf([\"select\", \"default\"]),\n  className: PropTypes.string,\n  disabled: PropTypes.bool,\n};\n\nQuerySelector.defaultProps = {\n  selectedQuery: null,\n  type: \"default\",\n  className: null,\n  disabled: false,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Link from \"@/components/Link\";\nimport QuerySelector from \"@/components/QuerySelector\";\nimport SchedulePhrase from \"@/components/queries/SchedulePhrase\";\nimport { Query as QueryType } from \"@/components/proptypes\";\n\nimport Tooltip from \"@/components/Tooltip\";\n\nimport WarningFilledIcon from \"@ant-design/icons/WarningFilled\";\nimport QuestionCircleTwoToneIcon from \"@ant-design/icons/QuestionCircleTwoTone\";\nimport LoadingOutlinedIcon from \"@ant-design/icons/LoadingOutlined\";\n\nimport \"./Query.less\";\n\nexport default function QueryFormItem({ query, queryResult, onChange, editMode }) {\n  const queryHint =\n    query && query.schedule ? (\n      <small>\n        Scheduled to refresh{\" \"}\n        <i className=\"alert-query-schedule\">\n          <SchedulePhrase schedule={query.schedule} isNew={false} />\n        </i>\n      </small>\n    ) : (\n      <small>\n        <WarningFilledIcon className=\"warning-icon-danger\" /> {window.W_L.query_not_setting} <i>{window.W_L.auto_flush}</i>.{\" \"}\n        <Tooltip title={window.W_L.query_setting_tip}>\n          <a role=\"presentation\">\n            {window.W_L.recommend} <QuestionCircleTwoToneIcon />\n          </a>\n        </Tooltip>\n      </small>\n    );\n\n  return (\n    <>\n      {editMode ? (\n        <QuerySelector onChange={onChange} selectedQuery={query} className=\"alert-query-selector\" type=\"select\" />\n      ) : (\n        <Tooltip title={window.W_L.open_query_in_new_tab}>\n          <Link href={`queries/${query.id}`} target=\"_blank\" rel=\"noopener noreferrer\" className=\"alert-query-link\">\n            {query.name} <i className=\"fa fa-external-link\" aria-hidden=\"true\" />\n            <span className=\"sr-only\">(opens in a new tab)</span>\n          </Link>\n        </Tooltip>\n      )}\n      <div className=\"ant-form-item-explain\">{query && queryHint}</div>\n      {query && !queryResult && (\n        <div className=\"m-t-30\">\n          <LoadingOutlinedIcon className=\"m-r-5\" /> {window.W_L.load_query_result}\n        </div>\n      )}\n    </>\n  );\n}\n\nQueryFormItem.propTypes = {\n  query: QueryType,\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  onChange: PropTypes.func,\n  editMode: PropTypes.bool,\n};\n\nQueryFormItem.defaultProps = {\n  query: null,\n  queryResult: null,\n  onChange: () => {},\n  editMode: false,\n};\n","import { filter, find, isEmpty, size } from \"lodash\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport List from \"antd/lib/list\";\nimport Button from \"antd/lib/button\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport BigMessage from \"@/components/BigMessage\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport notification from \"@/services/notification\";\nimport useSearchResults from \"@/lib/hooks/useSearchResults\";\n\nimport \"./SelectItemsDialog.less\";\n\nfunction ItemsList({ items, renderItem, onItemClick }) {\n  const renderListItem = useCallback(\n    item => {\n      const { content, className, isDisabled } = renderItem(item);\n\n      return (\n        <List.Item\n          className={classNames(\"select-items-list\", \"w-100\", \"p-l-10\", \"p-r-10\", { disabled: isDisabled }, className)}\n          onClick={isDisabled ? null : () => onItemClick(item)}>\n          {content}\n        </List.Item>\n      );\n    },\n    [renderItem, onItemClick]\n  );\n\n  return <List size=\"small\" dataSource={items} renderItem={renderListItem} />;\n}\n\nItemsList.propTypes = {\n  items: PropTypes.array,\n  renderItem: PropTypes.func,\n  onItemClick: PropTypes.func,\n};\n\nItemsList.defaultProps = {\n  items: [],\n  renderItem: () => {},\n  onItemClick: () => {},\n};\n\nfunction SelectItemsDialog({\n  dialog,\n  dialogTitle,\n  inputPlaceholder,\n  itemKey,\n  renderItem,\n  renderStagedItem,\n  searchItems,\n  selectedItemsTitle,\n  width,\n  showCount,\n  extraFooterContent,\n}) {\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [search, items, isLoading] = useSearchResults(searchItems, { initialResults: [] });\n  const hasResults = items.length > 0;\n\n  useEffect(() => {\n    search();\n  }, [search]);\n\n  const isItemSelected = useCallback(\n    item => {\n      const key = itemKey(item);\n      return !!find(selectedItems, i => itemKey(i) === key);\n    },\n    [selectedItems, itemKey]\n  );\n\n  const toggleItem = useCallback(\n    item => {\n      if (isItemSelected(item)) {\n        const key = itemKey(item);\n        setSelectedItems(filter(selectedItems, i => itemKey(i) !== key));\n      } else {\n        setSelectedItems([...selectedItems, item]);\n      }\n    },\n    [selectedItems, itemKey, isItemSelected]\n  );\n\n  const save = useCallback(() => {\n    dialog.close(selectedItems).catch(error => {\n      if (error) {\n        notification.error(window.W_L.save_failed);\n      }\n    });\n  }, [dialog, selectedItems]);\n\n  return (\n    <Modal\n      {...dialog.props}\n      className=\"select-items-dialog\"\n      width={width}\n      title={dialogTitle}\n      footer={\n        <div className=\"d-flex align-items-center\">\n          <span className=\"flex-fill m-r-5\" style={{ textAlign: \"left\", color: \"rgba(0, 0, 0, 0.5)\" }}>\n            {extraFooterContent}\n          </span>\n          <Button {...dialog.props.cancelButtonProps} onClick={dialog.dismiss}>\n            {window.W_L.cancel}\n          </Button>\n          <Button\n            {...dialog.props.okButtonProps}\n            onClick={save}\n            disabled={selectedItems.length === 0 || dialog.props.okButtonProps.disabled}\n            type=\"primary\">\n            {window.W_L.save}\n            {showCount && !isEmpty(selectedItems) ? ` (${size(selectedItems)})` : null}\n          </Button>\n        </div>\n      }>\n      <div className=\"d-flex align-items-center m-b-10\">\n        <div className=\"flex-fill\">\n          <Input.Search\n            onChange={event => search(event.target.value)}\n            placeholder={inputPlaceholder}\n            aria-label={inputPlaceholder}\n            autoFocus\n          />\n        </div>\n        {renderStagedItem && (\n          <div className=\"w-50 m-l-20\">\n            <h5 className=\"m-0\">{selectedItemsTitle}</h5>\n          </div>\n        )}\n      </div>\n\n      <div className=\"d-flex align-items-stretch\" style={{ minHeight: \"30vh\", maxHeight: \"50vh\" }}>\n        <div className=\"flex-fill scrollbox\">\n          {isLoading && <LoadingState className=\"\" />}\n          {!isLoading && !hasResults && (\n            <BigMessage icon=\"fa-search\" message={window.W_L.find_nothing} className=\"\" />\n          )}\n          {!isLoading && hasResults && (\n            <ItemsList\n              items={items}\n              renderItem={item => renderItem(item, { isSelected: isItemSelected(item) })}\n              onItemClick={toggleItem}\n            />\n          )}\n        </div>\n        {renderStagedItem && (\n          <div className=\"w-50 m-l-20 scrollbox\">\n            {selectedItems.length > 0 && (\n              <ItemsList\n                items={selectedItems}\n                renderItem={item => renderStagedItem(item, { isSelected: true })}\n                onItemClick={toggleItem}\n              />\n            )}\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nSelectItemsDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  dialogTitle: PropTypes.string,\n  inputPlaceholder: PropTypes.string,\n  selectedItemsTitle: PropTypes.string,\n  searchItems: PropTypes.func.isRequired, // (searchTerm: string): Promise<Items[]> if `searchTerm === ''` load all\n  itemKey: PropTypes.func, // (item) => string|number - return key of item (by default `id`)\n  // left list\n  // (item, { isSelected }) => {\n  //   content: node, // item contents\n  //   className: string = '', // additional class for item wrapper\n  //   isDisabled: bool = false, // is item clickable or disabled\n  // }\n  renderItem: PropTypes.func,\n  // right list; args/results save as for `renderItem`. if not specified - `renderItem` will be used\n  renderStagedItem: PropTypes.func,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  extraFooterContent: PropTypes.node,\n  showCount: PropTypes.bool,\n};\n\nSelectItemsDialog.defaultProps = {\n  dialogTitle: window.W_L.add,\n  inputPlaceholder: window.W_L.search,\n  selectedItemsTitle: window.W_L.selected,\n  itemKey: item => item.id,\n  renderItem: () => \"\",\n  renderStagedItem: null, // hidden by default\n  width: \"80%\",\n  extraFooterContent: null,\n  showCount: false,\n};\n\nexport default wrapDialog(SelectItemsDialog);\n","import { axios } from \"@/services/axios\";\n\nexport const IMG_ROOT = \"static/images/destinations\";\n\nconst Destination = {\n  query: () => axios.get(\"api/destinations\"),\n  get: ({ id }) => axios.get(`api/destinations/${id}`),\n  types: () => axios.get(\"api/destinations/types\"),\n  create: data => axios.post(`api/destinations`, data),\n  save: data => axios.post(`api/destinations/${data.id}`, data),\n  delete: ({ id }) => axios.delete(`api/destinations/${id}`),\n};\n\nexport default Destination;\n","import { axios } from \"@/services/axios\";\n\nconst AlertSubscription = {\n  query: ({ alertId }) => axios.get(`api/alerts/${alertId}/subscriptions`),\n  create: data => axios.post(`api/alerts/${data.alert_id}/subscriptions`, data),\n  delete: data => axios.delete(`api/alerts/${data.alert_id}/subscriptions/${data.id}`),\n};\n\nexport default AlertSubscription;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Tooltip from \"@/components/Tooltip\";\n\nexport default function ListItemAddon({ isSelected, isStaged, alreadyInGroup, deselectedIcon }) {\n  if (isStaged) {\n    return (\n      <>\n        <i className=\"fa fa-remove\" aria-hidden=\"true\" />\n        <span className=\"sr-only\">Remove</span>\n      </>\n    );\n  }\n  if (alreadyInGroup) {\n    return (\n      <Tooltip title={window.W_L.selected_ready}>\n        {/* eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex */}\n        <span tabIndex={0}>\n          <i className=\"fa fa-check\" aria-hidden=\"true\" />\n          <span className=\"sr-only\">{window.W_L.selected_ready}</span>\n        </span>\n      </Tooltip>\n    );\n  }\n  return isSelected ? (\n    <>\n      <i className=\"fa fa-check\" aria-hidden=\"true\" />\n      <span className=\"sr-only\">Selected</span>\n    </>\n  ) : (\n    <>\n      <i className={`fa ${deselectedIcon}`} aria-hidden=\"true\" />\n      <span className=\"sr-only\">Select</span>\n    </>\n  );\n}\n\nListItemAddon.propTypes = {\n  isSelected: PropTypes.bool,\n  isStaged: PropTypes.bool,\n  alreadyInGroup: PropTypes.bool,\n  deselectedIcon: PropTypes.string,\n};\n\nListItemAddon.defaultProps = {\n  isSelected: false,\n  isStaged: false,\n  alreadyInGroup: false,\n  deselectedIcon: \"fa-angle-double-right\",\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { clientConfig, currentUser } from \"@/services/auth\";\nimport Tooltip from \"@/components/Tooltip\";\nimport Alert from \"antd/lib/alert\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport { useUniqueId } from \"@/lib/hooks/useUniqueId\";\n\nexport default function EmailSettingsWarning({ featureName, className, mode, adminOnly }) {\n  const messageDescriptionId = useUniqueId(\"sr-mail-description\");\n\n  if (!clientConfig.mailSettingsMissing) {\n    return null;\n  }\n\n  if (adminOnly && !currentUser.isAdmin) {\n    return null;\n  }\n\n  const message = (\n    <span id={messageDescriptionId}>\n      {window.W_L.email_need_set}，“{featureName} ” {window.W_L.email_will_work}{\" \"}\n      <HelpTrigger type=\"MAIL_CONFIG\" className=\"f-inherit\" />\n    </span>\n  );\n\n  if (mode === \"icon\") {\n    return (\n      <Tooltip title={message} placement=\"topRight\" arrowPointAtCenter>\n        {/* eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex */}\n        <span className={className} aria-label=\"Mail alert\" aria-describedby={messageDescriptionId} tabIndex={0}>\n          <i className={\"fa fa-exclamation-triangle\"} aria-hidden=\"true\" />\n        </span>\n      </Tooltip>\n    );\n  }\n\n  return <Alert message={message} type=\"error\" className={className} />;\n}\n\nEmailSettingsWarning.propTypes = {\n  featureName: PropTypes.string.isRequired,\n  className: PropTypes.string,\n  mode: PropTypes.oneOf([\"alert\", \"icon\"]),\n  adminOnly: PropTypes.bool,\n};\n\nEmailSettingsWarning.defaultProps = {\n  className: null,\n  mode: \"alert\",\n  adminOnly: false,\n};\n","import { without, find, includes, map, toLower } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Link from \"@/components/Link\";\nimport Button from \"antd/lib/button\";\nimport SelectItemsDialog from \"@/components/SelectItemsDialog\";\nimport { Destination as DestinationType, UserProfile as UserType } from \"@/components/proptypes\";\n\nimport DestinationService, { IMG_ROOT } from \"@/services/destination\";\nimport AlertSubscription from \"@/services/alert-subscription\";\nimport { clientConfig, currentUser } from \"@/services/auth\";\nimport notification from \"@/services/notification\";\nimport ListItemAddon from \"@/components/groups/ListItemAddon\";\nimport EmailSettingsWarning from \"@/components/EmailSettingsWarning\";\nimport PlainButton from \"@/components/PlainButton\";\nimport Tooltip from \"@/components/Tooltip\";\n\nimport CloseOutlinedIcon from \"@ant-design/icons/CloseOutlined\";\nimport Switch from \"antd/lib/switch\";\n\nimport \"./AlertDestinations.less\";\n\nconst USER_EMAIL_DEST_ID = -1;\n\nfunction normalizeSub(sub) {\n  if (!sub.destination) {\n    sub.destination = {\n      id: USER_EMAIL_DEST_ID,\n      name: sub.user.email,\n      icon: \"DEPRECATED\",\n      type: \"email\",\n    };\n  }\n  return sub;\n}\n\nfunction ListItem({ destination: { name, type }, user, unsubscribe }) {\n  const canUnsubscribe = currentUser.isAdmin || currentUser.id === user.id;\n\n  return (\n    <li className=\"destination-wrapper\">\n      <img src={`${IMG_ROOT}/${type}.png`} className=\"destination-icon\" alt={name} />\n      <span className=\"flex-fill\">{name}</span>\n      {type === \"email\" && (\n        <EmailSettingsWarning className=\"destination-warning\" featureName=\"alert emails\" mode=\"icon\" />\n      )}\n      {canUnsubscribe && (\n        <Tooltip title={window.W_L.delete} mouseEnterDelay={0.5}>\n          <PlainButton className=\"remove-button\" onClick={unsubscribe}>\n            {/* TODO: lacks visual feedback */}\n            <CloseOutlinedIcon />\n          </PlainButton>\n        </Tooltip>\n      )}\n    </li>\n  );\n}\n\nListItem.propTypes = {\n  destination: DestinationType.isRequired,\n  user: UserType.isRequired,\n  unsubscribe: PropTypes.func.isRequired,\n};\n\nexport default class AlertDestinations extends React.Component {\n  static propTypes = {\n    alertId: PropTypes.any.isRequired,\n  };\n\n  state = {\n    dests: [],\n    subs: null,\n  };\n\n  componentDidMount() {\n    const { alertId } = this.props;\n    Promise.all([\n      DestinationService.query(), // get all destinations\n      AlertSubscription.query({ alertId }), // get subcriptions per alert\n    ]).then(([dests, subs]) => {\n      subs = subs.map(normalizeSub);\n      this.setState({ dests, subs });\n    });\n  }\n\n  showAddAlertSubDialog = () => {\n    const { dests, subs } = this.state;\n\n    SelectItemsDialog.showModal({\n      width: 570,\n      showCount: true,\n      extraFooterContent: (\n        <>\n          <i className=\"fa fa-info-circle\" aria-hidden=\"true\" /> Create new destinations in{\" \"}\n          <Tooltip title={window.W_L.open_new_window}>\n            <Link href=\"destinations/new\" target=\"_blank\">\n              {window.W_L.alert_setting}\n            </Link>\n          </Tooltip>\n        </>\n      ),\n      dialogTitle: window.W_L.add_alert_setting,\n      inputPlaceholder: window.W_L.search,\n      searchItems: searchTerm => {\n        searchTerm = toLower(searchTerm);\n        return Promise.resolve(dests.filter(d => includes(toLower(d.name), searchTerm)));\n      },\n      renderItem: (item, { isSelected }) => {\n        const alreadyInGroup = !!find(subs, s => s.destination.id === item.id);\n\n        return {\n          content: (\n            <div className=\"destination-wrapper\">\n              <img src={`${IMG_ROOT}/${item.type}.png`} className=\"destination-icon\" alt={item.name} />\n              <span className=\"flex-fill\">{item.name}</span>\n              <ListItemAddon isSelected={isSelected} alreadyInGroup={alreadyInGroup} deselectedIcon=\"fa-plus\" />\n            </div>\n          ),\n          isDisabled: alreadyInGroup,\n          className: isSelected || alreadyInGroup ? \"selected\" : \"\",\n        };\n      },\n    }).onClose(items => {\n      const promises = map(items, item => this.subscribe(item));\n      return Promise.all(promises)\n        .then(() => {\n          notification.success(window.W_L.subscribed);\n        })\n        .catch(() => {\n          notification.error(window.W_L.subscribe_failed);\n          return Promise.reject(null); // keep dialog visible but suppress its default error message\n        });\n    });\n  };\n\n  onUserEmailToggle = sub => {\n    if (sub) {\n      this.unsubscribe(sub);\n    } else {\n      this.subscribe();\n    }\n  };\n\n  subscribe = dest => {\n    const { alertId } = this.props;\n\n    const sub = { alert_id: alertId };\n    if (dest) {\n      sub.destination_id = dest.id;\n    }\n\n    return AlertSubscription.create(sub).then(sub => {\n      const { subs } = this.state;\n      this.setState({\n        subs: [...subs, normalizeSub(sub)],\n      });\n    });\n  };\n\n  unsubscribe = sub => {\n    AlertSubscription.delete(sub)\n      .then(() => {\n        // not showing subscribe notification cause it's redundant here\n        const { subs } = this.state;\n        this.setState({\n          subs: without(subs, sub),\n        });\n      })\n      .catch(() => {\n        notification.error(window.W_L.subscribe_failed);\n      });\n  };\n\n  render() {\n    if (!this.props.alertId) {\n      return null;\n    }\n\n    const { subs } = this.state;\n    const currentUserEmailSub = find(subs, {\n      destination: { id: USER_EMAIL_DEST_ID },\n      user: { id: currentUser.id },\n    });\n    const filteredSubs = without(subs, currentUserEmailSub);\n    const { mailSettingsMissing } = clientConfig;\n\n    return (\n      <div className=\"alert-destinations\" data-test=\"AlertDestinations\">\n        <Tooltip title={window.W_L.add_alert_setting} mouseEnterDelay={0.5}>\n          <Button\n            data-test=\"ShowAddAlertSubDialog\"\n            type=\"primary\"\n            size=\"small\"\n            className=\"add-button\"\n            onClick={this.showAddAlertSubDialog}>\n            <i className=\"fa fa-plus f-12 m-r-5\" aria-hidden=\"true\" /> {window.W_L.add}\n          </Button>\n        </Tooltip>\n        <ul>\n          <li className=\"destination-wrapper\">\n            <i className=\"destination-icon fa fa-envelope\" aria-hidden=\"true\" />\n            <span className=\"flex-fill\">{currentUser.email}</span>\n            <EmailSettingsWarning className=\"destination-warning\" featureName=\"alert emails\" mode=\"icon\" />\n            {!mailSettingsMissing && (\n              <Switch\n                size=\"small\"\n                className=\"toggle-button\"\n                checked={!!currentUserEmailSub}\n                loading={!subs}\n                onChange={() => this.onUserEmailToggle(currentUserEmailSub)}\n                data-test=\"UserEmailToggle\"\n              />\n            )}\n          </li>\n          {filteredSubs.map(s => (\n            <ListItem key={s.id} unsubscribe={() => this.unsubscribe(s)} {...s} />\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport Form from \"antd/lib/form\";\n\nexport default function HorizontalFormItem({ children, label, className, ...props }) {\n  const labelCol = { span: 4 };\n  const wrapperCol = { span: 16 };\n  if (!label) {\n    wrapperCol.offset = 4;\n  }\n\n  className = cx(\"alert-form-item\", className);\n\n  return (\n    <Form.Item labelCol={labelCol} wrapperCol={wrapperCol} label={label} className={className} {...props}>\n      {children}\n    </Form.Item>\n  );\n}\n\nHorizontalFormItem.propTypes = {\n  children: PropTypes.node,\n  label: PropTypes.string,\n  className: PropTypes.string,\n};\n\nHorizontalFormItem.defaultProps = {\n  children: null,\n  label: null,\n  className: null,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\n\nimport Link from \"@/components/Link\";\nimport TimeAgo from \"@/components/TimeAgo\";\nimport { Alert as AlertType } from \"@/components/proptypes\";\n\nimport Form from \"antd/lib/form\";\nimport Button from \"antd/lib/button\";\nimport Tooltip from \"@/components/Tooltip\";\nimport AntAlert from \"antd/lib/alert\";\nimport * as Grid from \"antd/lib/grid\";\n\nimport Title from \"./components/Title\";\nimport Criteria from \"./components/Criteria\";\nimport Rearm from \"./components/Rearm\";\nimport Query from \"./components/Query\";\nimport AlertDestinations from \"./components/AlertDestinations\";\nimport HorizontalFormItem from \"./components/HorizontalFormItem\";\nimport { STATE_CLASS } from \"../alerts/AlertsList\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\n\nfunction AlertState({ state, lastTriggered }) {\n  return (\n    <div className=\"alert-state\">\n      <span className={`alert-state-indicator label ${STATE_CLASS[state]}`}>{window.W_L.status}: {state}</span>\n      {state === \"unknown\" && <div className=\"ant-form-item-explain\">{window.W_L.alert_setting_sure}</div>}\n      {lastTriggered && (\n        <div className=\"ant-form-item-explain\">\n          {window.W_L.last_trigger_time} {\" \"}\n          <span className=\"alert-last-triggered\">\n            <TimeAgo date={lastTriggered} />\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n\nAlertState.propTypes = {\n  state: PropTypes.string.isRequired,\n  lastTriggered: PropTypes.string,\n};\n\nAlertState.defaultProps = {\n  lastTriggered: null,\n};\n\n// eslint-disable-next-line react/prefer-stateless-function\nexport default class AlertView extends React.Component {\n  state = {\n    unmuting: false,\n  };\n\n  unmute = () => {\n    this.setState({ unmuting: true });\n    this.props.unmute().finally(() => {\n      this.setState({ unmuting: false });\n    });\n  };\n\n  render() {\n    const { alert, queryResult, canEdit, onEdit, menuButton } = this.props;\n    const { query, name, options, rearm } = alert;\n\n    return (\n      <>\n        <Title name={name} alert={alert}>\n          <DynamicComponent name=\"AlertView.HeaderExtra\" alert={alert} />\n          <Tooltip title={canEdit ? \"\" :window.W_L.no_permission_edit_alert}>\n            <Button type=\"default\" onClick={canEdit ? onEdit : null} className={cx({ disabled: !canEdit })}>\n              <i className=\"fa fa-edit m-r-5\" aria-hidden=\"true\" />\n              {window.W_L.edit}\n            </Button>\n            {menuButton}\n          </Tooltip>\n        </Title>\n        <div className=\"bg-white tiled p-20\">\n          <Grid.Row type=\"flex\" gutter={16}>\n            <Grid.Col xs={24} md={16} className=\"d-flex\">\n              <Form className=\"flex-fill\">\n                <HorizontalFormItem>\n                  <AlertState state={alert.state} lastTriggered={alert.last_triggered_at} />\n                </HorizontalFormItem>\n                <HorizontalFormItem label={window.W_L.query}>\n                  <Query query={query} queryResult={queryResult} />\n                </HorizontalFormItem>\n                {queryResult && options && (\n                  <>\n                    <HorizontalFormItem label={window.W_L.trigger_condition} className=\"alert-criteria\">\n                      <Criteria\n                        columnNames={queryResult.getColumnNames()}\n                        resultValues={queryResult.getData()}\n                        alertOptions={options}\n                      />\n                    </HorizontalFormItem>\n                    <HorizontalFormItem label={window.W_L.notice} className=\"form-item-line-height-normal\">\n                      <Rearm value={rearm || 0} />\n                      <br />\n                      {window.W_L.set} {options.custom_subject || options.custom_body ? window.W_L.custom : window.W_L.default} {window.W_L.notice_template}\n                    </HorizontalFormItem>\n                  </>\n                )}\n              </Form>\n            </Grid.Col>\n            <Grid.Col xs={24} md={8}>\n              {options.muted && (\n                <AntAlert\n                  className=\"m-b-20\"\n                  message={\n                    <>\n                      <i className=\"fa fa-bell-slash-o\" aria-hidden=\"true\" /> {window.W_L.set_mute}\n                    </>\n                  }\n                  description={\n                    <>\n                      {window.W_L.alert_not_sent_info}\n                      <br />\n                      {canEdit && (\n                        <>\n                          {window.W_L.reset_alert_sent_info}\n                          <Button\n                            size=\"small\"\n                            type=\"primary\"\n                            onClick={this.unmute}\n                            loading={this.state.unmuting}\n                            className=\"m-t-5 m-l-5\">\n                            {window.W_L.set_unmute}\n                          </Button>\n                        </>\n                      )}\n                    </>\n                  }\n                  type=\"warning\"\n                />\n              )}\n              <h4>\n                {window.W_L.destination}{\" \"}\n                <Tooltip title={window.W_L.set_alert_open_tab}>\n                  <Link href=\"destinations\" target=\"_blank\">\n                    <i className=\"fa fa-external-link f-13\" aria-hidden=\"true\" />\n                    <span className=\"sr-only\">(opens in a new tab)</span>\n                  </Link>\n                </Tooltip>\n              </h4>\n              <AlertDestinations alertId={alert.id} />\n            </Grid.Col>\n          </Grid.Row>\n        </div>\n      </>\n    );\n  }\n}\n\nAlertView.propTypes = {\n  alert: AlertType.isRequired,\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types,\n  canEdit: PropTypes.bool.isRequired,\n  onEdit: PropTypes.func.isRequired,\n  menuButton: PropTypes.node.isRequired,\n  unmute: PropTypes.func,\n};\n\nAlertView.defaultProps = {\n  queryResult: null,\n  unmute: null,\n};\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { head, isEmpty, isNull, isUndefined } from \"lodash\";\nimport Mustache from \"mustache\";\n\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport { Alert as AlertType, Query as QueryType } from \"@/components/proptypes\";\n\nimport Input from \"antd/lib/input\";\nimport Select from \"antd/lib/select\";\nimport Modal from \"antd/lib/modal\";\nimport Switch from \"antd/lib/switch\";\n\nimport \"./NotificationTemplate.less\";\n\nfunction normalizeCustomTemplateData(alert, query, columnNames, resultValues) {\n  const topValue = !isEmpty(resultValues) ? head(resultValues)[alert.options.column] : null;\n\n  return {\n    ALERT_STATUS: \"TRIGGERED\",\n    ALERT_CONDITION: alert.options.op,\n    ALERT_THRESHOLD: alert.options.value,\n    ALERT_NAME: alert.name,\n    ALERT_URL: `${window.location.origin}/alerts/${alert.id}`,\n    QUERY_NAME: query.name,\n    QUERY_URL: `${window.location.origin}/queries/${query.id}`,\n    QUERY_RESULT_VALUE: isNull(topValue) || isUndefined(topValue) ? \"UNKNOWN\" : topValue,\n    QUERY_RESULT_ROWS: resultValues,\n    QUERY_RESULT_COLS: columnNames,\n  };\n}\n\nfunction NotificationTemplate({ alert, query, columnNames, resultValues, subject, setSubject, body, setBody }) {\n  const hasContent = !!(subject || body);\n  const [enabled, setEnabled] = useState(hasContent ? 1 : 0);\n  const [showPreview, setShowPreview] = useState(false);\n\n  const renderData = normalizeCustomTemplateData(alert, query, columnNames, resultValues);\n\n  const render = tmpl => Mustache.render(tmpl || \"\", renderData);\n  const onEnabledChange = value => {\n    if (value || !hasContent) {\n      setEnabled(value);\n      setShowPreview(false);\n    } else {\n      Modal.confirm({\n        title: window.W_L.are_you_sure,\n        content: window.W_L.switch_warning,\n        okText: window.W_L.ok_text,\n        cancelText: window.W_L.cancel,\n        onOk: () => {\n          setSubject(null);\n          setBody(null);\n          setEnabled(value);\n          setShowPreview(false);\n        },\n        maskClosable: true,\n        autoFocusButton: null,\n      });\n    }\n  };\n\n  return (\n    <div className=\"alert-template\">\n      <Select\n        value={enabled}\n        onChange={onEnabledChange}\n        optionLabelProp=\"label\"\n        dropdownMatchSelectWidth={false}\n        style={{ width: \"fit-content\" }}>\n        <Select.Option value={0} label={window.W_L.use_default_template}>\n          {window.W_L.default_template}\n        </Select.Option>\n        <Select.Option value={1} label={window.W_L.use_custom_template}>\n          {window.W_L.custom_template}\n        </Select.Option>\n      </Select>\n      {!!enabled && (\n        <div className=\"alert-custom-template\" data-test=\"AlertCustomTemplate\">\n          <div className=\"d-flex align-items-center\">\n            <h5 className=\"flex-fill\">{window.W_L.subject} / {window.W_L.content}</h5>\n            {window.W_L.preview}{\" \"}\n            <Switch size=\"small\" className=\"alert-template-preview\" value={showPreview} onChange={setShowPreview} />\n          </div>\n          {/* TODO: consider adding real labels (not clear for sighted users as well) */}\n          <Input\n            value={showPreview ? render(subject) : subject}\n            aria-label=\"Subject\"\n            onChange={e => setSubject(e.target.value)}\n            disabled={showPreview}\n            data-test=\"CustomSubject\"\n          />\n          <Input.TextArea\n            value={showPreview ? render(body) : body}\n            aria-label=\"Body\"\n            autoSize={{ minRows: 9 }}\n            onChange={e => setBody(e.target.value)}\n            disabled={showPreview}\n            data-test=\"CustomBody\"\n          />\n          <HelpTrigger type=\"ALERT_NOTIF_TEMPLATE_GUIDE\" className=\"f-13\">\n            <i className=\"fa fa-question-circle\" aria-hidden=\"true\" /> {window.W_L.guide_format}{\" \"}\n            <span className=\"sr-only\">({window.W_L.help})</span>\n          </HelpTrigger>\n        </div>\n      )}\n    </div>\n  );\n}\n\nNotificationTemplate.propTypes = {\n  alert: AlertType.isRequired,\n  query: QueryType.isRequired,\n  columnNames: PropTypes.arrayOf(PropTypes.string).isRequired,\n  resultValues: PropTypes.arrayOf(PropTypes.any).isRequired,\n  subject: PropTypes.string,\n  setSubject: PropTypes.func.isRequired,\n  body: PropTypes.string,\n  setBody: PropTypes.func.isRequired,\n};\n\nNotificationTemplate.defaultProps = {\n  subject: \"\",\n  body: \"\",\n};\n\nexport default NotificationTemplate;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { Alert as AlertType } from \"@/components/proptypes\";\n\nimport Form from \"antd/lib/form\";\nimport Button from \"antd/lib/button\";\n\nimport Title from \"./components/Title\";\nimport Criteria from \"./components/Criteria\";\nimport NotificationTemplate from \"./components/NotificationTemplate\";\nimport Rearm from \"./components/Rearm\";\nimport Query from \"./components/Query\";\n\nimport HorizontalFormItem from \"./components/HorizontalFormItem\";\n\nexport default class AlertEdit extends React.Component {\n  _isMounted = false;\n\n  state = {\n    saving: false,\n  };\n\n  componentDidMount() {\n    this._isMounted = true;\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  save = () => {\n    this.setState({ saving: true });\n    this.props.save().catch(() => {\n      if (this._isMounted) {\n        this.setState({ saving: false });\n      }\n    });\n  };\n\n  cancel = () => {\n    this.props.cancel();\n  };\n\n  render() {\n    const { alert, queryResult, pendingRearm, onNotificationTemplateChange, menuButton } = this.props;\n    const { onQuerySelected, onNameChange, onRearmChange, onCriteriaChange } = this.props;\n    const { query, name, options } = alert;\n    const { saving } = this.state;\n\n    return (\n      <>\n        <Title name={name} alert={alert} onChange={onNameChange} editMode>\n          <DynamicComponent name=\"AlertEdit.HeaderExtra\" alert={alert} />\n          <Button className=\"m-r-5\" onClick={() => this.cancel()}>\n            <i className=\"fa fa-times m-r-5\" aria-hidden=\"true\" />\n            {window.W_L.cancel}\n          </Button>\n          <Button type=\"primary\" onClick={() => this.save()}>\n            {saving ? (\n              <span role=\"status\" aria-live=\"polite\" aria-relevant=\"additions removals\">\n                <i className=\"fa fa-spinner fa-pulse m-r-5\" aria-hidden=\"true\" />\n                <span className=\"sr-only\">{window.W_L.saving}</span>\n              </span>\n            ) : (\n              <>\n                <i className=\"fa fa-check m-r-5\" aria-hidden=\"true\" />\n              </>\n            )}\n            {window.W_L.save}\n          </Button>\n          {menuButton}\n        </Title>\n        <div className=\"bg-white tiled p-20\">\n          <div className=\"d-flex\">\n            <Form className=\"flex-fill\">\n              <HorizontalFormItem label=\"{window.W_L.query}\">\n                <Query query={query} queryResult={queryResult} onChange={onQuerySelected} editMode />\n              </HorizontalFormItem>\n              {queryResult && options && (\n                <>\n                  <HorizontalFormItem label={window.W_L.trigger_condition} className=\"alert-criteria\">\n                    <Criteria\n                      columnNames={queryResult.getColumnNames()}\n                      resultValues={queryResult.getData()}\n                      alertOptions={options}\n                      onChange={onCriteriaChange}\n                      editMode\n                    />\n                  </HorizontalFormItem>\n                  <HorizontalFormItem label={window.W_L.trigger_send_notice}>\n                    <Rearm value={pendingRearm || 0} onChange={onRearmChange} editMode />\n                  </HorizontalFormItem>\n                  <HorizontalFormItem label={window.W_L.template}>\n                    <NotificationTemplate\n                      alert={alert}\n                      query={query}\n                      columnNames={queryResult.getColumnNames()}\n                      resultValues={queryResult.getData()}\n                      subject={options.custom_subject}\n                      setSubject={subject => onNotificationTemplateChange({ custom_subject: subject })}\n                      body={options.custom_body}\n                      setBody={body => onNotificationTemplateChange({ custom_body: body })}\n                    />\n                  </HorizontalFormItem>\n                </>\n              )}\n            </Form>\n            <div>\n              <HelpTrigger className=\"f-13\" type=\"ALERT_SETUP\">\n                {window.W_L.setup_tip} <i className=\"fa fa-question-circle\" aria-hidden=\"true\" />\n                <span className=\"sr-only\">( {window.W_L.help} )</span>\n              </HelpTrigger>\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nAlertEdit.propTypes = {\n  alert: AlertType.isRequired,\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types,\n  pendingRearm: PropTypes.number,\n  menuButton: PropTypes.node.isRequired,\n  save: PropTypes.func.isRequired,\n  cancel: PropTypes.func.isRequired,\n  onQuerySelected: PropTypes.func.isRequired,\n  onNameChange: PropTypes.func.isRequired,\n  onCriteriaChange: PropTypes.func.isRequired,\n  onRearmChange: PropTypes.func.isRequired,\n  onNotificationTemplateChange: PropTypes.func.isRequired,\n};\n\nAlertEdit.defaultProps = {\n  queryResult: null,\n  pendingRearm: null,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport { Alert as AlertType } from \"@/components/proptypes\";\n\nimport Form from \"antd/lib/form\";\nimport Button from \"antd/lib/button\";\n\nimport Title from \"./components/Title\";\nimport Criteria from \"./components/Criteria\";\nimport NotificationTemplate from \"./components/NotificationTemplate\";\nimport Rearm from \"./components/Rearm\";\nimport Query from \"./components/Query\";\nimport HorizontalFormItem from \"./components/HorizontalFormItem\";\n\nexport default class AlertNew extends React.Component {\n  state = {\n    saving: false,\n  };\n\n  save = () => {\n    this.setState({ saving: true });\n    this.props.save().catch(() => {\n      this.setState({ saving: false });\n    });\n  };\n\n  render() {\n    const { alert, queryResult, pendingRearm, onNotificationTemplateChange } = this.props;\n    const { onQuerySelected, onNameChange, onRearmChange, onCriteriaChange } = this.props;\n    const { query, name, options } = alert;\n    const { saving } = this.state;\n\n    return (\n      <>\n        <Title alert={alert} name={name} onChange={onNameChange} editMode />\n        <div className=\"bg-white tiled p-20\">\n          <div className=\"d-flex\">\n            <Form className=\"flex-fill\">\n              <div className=\"m-b-30\">\n                {window.W_L.selector_query_tip}\n              </div>\n              <HorizontalFormItem label={window.W_L.query}>\n                <Query query={query} queryResult={queryResult} onChange={onQuerySelected} editMode />\n              </HorizontalFormItem>\n              {queryResult && options && (\n                <>\n                  <HorizontalFormItem label={window.W_L.trigger_condition} className=\"alert-criteria\">\n                    <Criteria\n                      columnNames={queryResult.getColumnNames()}\n                      resultValues={queryResult.getData()}\n                      alertOptions={options}\n                      onChange={onCriteriaChange}\n                      editMode\n                    />\n                  </HorizontalFormItem>\n                  <HorizontalFormItem label={window.W_L.trigger_send_notice}>\n                    <Rearm value={pendingRearm || 0} onChange={onRearmChange} editMode />\n                  </HorizontalFormItem>\n                  <HorizontalFormItem label={window.W_L.template} >\n                    <NotificationTemplate\n                      alert={alert}\n                      query={query}\n                      columnNames={queryResult.getColumnNames()}\n                      resultValues={queryResult.getData()}\n                      subject={options.custom_subject}\n                      setSubject={subject => onNotificationTemplateChange({ custom_subject: subject })}\n                      body={options.custom_body}\n                      setBody={body => onNotificationTemplateChange({ custom_body: body })}\n                    />\n                  </HorizontalFormItem>\n                </>\n              )}\n              <HorizontalFormItem>\n                <Button type=\"primary\" onClick={this.save} disabled={!query} className=\"btn-create-alert\">\n                  {saving && (\n                    <span role=\"status\" aria-live=\"polite\" aria-relevant=\"additions removals\">\n                      <i className=\"fa fa-spinner fa-pulse m-r-5\" aria-hidden=\"true\" />\n                      <span className=\"sr-only\"> {window.W_L.saving} </span>\n                    </span>\n                  )}\n                   {window.W_L.create_alert} \n                </Button>\n              </HorizontalFormItem>\n            </Form>\n            <HelpTrigger className=\"f-13\" type=\"ALERT_SETUP\">\n               {window.W_L.setup_tip}  <i className=\"fa fa-question-circle\" aria-hidden=\"true\" />\n              <span className=\"sr-only\">( {window.W_L.help} )</span>\n            </HelpTrigger>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nAlertNew.propTypes = {\n  alert: AlertType.isRequired,\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types,\n  pendingRearm: PropTypes.number,\n  onQuerySelected: PropTypes.func.isRequired,\n  save: PropTypes.func.isRequired,\n  onNameChange: PropTypes.func.isRequired,\n  onRearmChange: PropTypes.func.isRequired,\n  onCriteriaChange: PropTypes.func.isRequired,\n  onNotificationTemplateChange: PropTypes.func.isRequired,\n};\n\nAlertNew.defaultProps = {\n  queryResult: null,\n  pendingRearm: null,\n};\n","import { head, includes, trim, template, values } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\n\nimport { currentUser } from \"@/services/auth\";\nimport notification from \"@/services/notification\";\nimport AlertService from \"@/services/alert\";\nimport { Query as QueryService } from \"@/services/query\";\nimport routes from \"@/services/routes\";\n\nimport MenuButton from \"./components/MenuButton\";\nimport AlertView from \"./AlertView\";\nimport AlertEdit from \"./AlertEdit\";\nimport AlertNew from \"./AlertNew\";\n\nconst MODES = {\n  NEW: 0,\n  VIEW: 1,\n  EDIT: 2,\n};\n\nconst defaultNameBuilder = template(\"<%= query.name %>: <%= options.column %> <%= options.op %> <%= options.value %>\");\n\nexport function getDefaultName(alert) {\n  if (!alert.query) {\n    return window.W_L.new_alert_tip;\n  }\n  return defaultNameBuilder(alert);\n}\n\nclass Alert extends React.Component {\n  static propTypes = {\n    mode: PropTypes.oneOf(values(MODES)),\n    alertId: PropTypes.string,\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    mode: null,\n    alertId: null,\n    onError: () => {},\n  };\n\n  _isMounted = false;\n\n  state = {\n    alert: null,\n    queryResult: null,\n    pendingRearm: null,\n    canEdit: false,\n    mode: null,\n  };\n\n  componentDidMount() {\n    this._isMounted = true;\n    const { mode } = this.props;\n    this.setState({ mode });\n\n    if (mode === MODES.NEW) {\n      this.setState({\n        alert: {\n          options: {\n            op: \">\",\n            value: 1,\n            muted: false,\n          },\n        },\n        pendingRearm: 0,\n        canEdit: true,\n      });\n    } else {\n      const { alertId } = this.props;\n      AlertService.get({ id: alertId })\n        .then(alert => {\n          if (this._isMounted) {\n            const canEdit = currentUser.canEdit(alert);\n\n            // force view mode if can't edit\n            if (!canEdit) {\n              this.setState({ mode: MODES.VIEW });\n              notification.warn(\n                window.W_L.can_not_edit_alert,\n                window.W_L.no_permission_readonly,\n                { duration: 0 }\n              );\n            }\n\n            this.setState({ alert, canEdit, pendingRearm: alert.rearm });\n            this.onQuerySelected(alert.query);\n          }\n        })\n        .catch(error => {\n          if (this._isMounted) {\n            this.props.onError(error);\n          }\n        });\n    }\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  save = () => {\n    const { alert, pendingRearm } = this.state;\n\n    alert.name = trim(alert.name) || getDefaultName(alert);\n    alert.rearm = pendingRearm || null;\n\n    return AlertService.save(alert)\n      .then(alert => {\n        notification.success(window.W_L.save_success);\n        navigateTo(`alerts/${alert.id}`, true);\n        this.setState({ alert, mode: MODES.VIEW });\n      })\n      .catch(() => {\n        notification.error(window.W_L.save_failed);\n      });\n  };\n\n  onQuerySelected = query => {\n    this.setState(({ alert }) => ({\n      alert: Object.assign(alert, { query }),\n      queryResult: null,\n    }));\n\n    if (query) {\n      // get cached result for column names and values\n      new QueryService(query).getQueryResultPromise().then(queryResult => {\n        if (this._isMounted) {\n          this.setState({ queryResult });\n          let { column } = this.state.alert.options;\n          const columns = queryResult.getColumnNames();\n\n          // default to first column name if none chosen, or irrelevant in current query\n          if (!column || !includes(columns, column)) {\n            column = head(queryResult.getColumnNames());\n          }\n          this.setAlertOptions({ column });\n        }\n      });\n    }\n  };\n\n  onNameChange = name => {\n    const { alert } = this.state;\n    this.setState({\n      alert: Object.assign(alert, { name }),\n    });\n  };\n\n  onRearmChange = pendingRearm => {\n    this.setState({ pendingRearm });\n  };\n\n  setAlertOptions = obj => {\n    const { alert } = this.state;\n    const options = { ...alert.options, ...obj };\n    this.setState({\n      alert: Object.assign(alert, { options }),\n    });\n  };\n\n  delete = () => {\n    const { alert } = this.state;\n    return AlertService.delete(alert)\n      .then(() => {\n        notification.success(window.W_L.alert_delete_success);\n        navigateTo(\"alerts\");\n      })\n      .catch(() => {\n        notification.error(window.W_L.alert_delete_failed);\n      });\n  };\n\n  mute = () => {\n    const { alert } = this.state;\n    return AlertService.mute(alert)\n      .then(() => {\n        this.setAlertOptions({ muted: true });\n        notification.warn(window.W_L.set_mute_success);\n      })\n      .catch(() => {\n        notification.error(window.W_L.set_mute_failed);\n      });\n  };\n\n  unmute = () => {\n    const { alert } = this.state;\n    return AlertService.unmute(alert)\n      .then(() => {\n        this.setAlertOptions({ muted: false });\n        notification.success(window.W_L.set_unmute_success);\n      })\n      .catch(() => {\n        notification.error(window.W_L.set_unmute_failed);\n      });\n  };\n\n  edit = () => {\n    const { id } = this.state.alert;\n    navigateTo(`alerts/${id}/edit`, true);\n    this.setState({ mode: MODES.EDIT });\n  };\n\n  cancel = () => {\n    const { id } = this.state.alert;\n    navigateTo(`alerts/${id}`, true);\n    this.setState({ mode: MODES.VIEW });\n  };\n\n  render() {\n    const { alert } = this.state;\n    if (!alert) {\n      return <LoadingState className=\"m-t-30\" />;\n    }\n\n    const muted = !!alert.options.muted;\n    const { queryResult, mode, canEdit, pendingRearm } = this.state;\n\n    const menuButton = (\n      <MenuButton doDelete={this.delete} muted={muted} mute={this.mute} unmute={this.unmute} canEdit={canEdit} />\n    );\n\n    const commonProps = {\n      alert,\n      queryResult,\n      pendingRearm,\n      save: this.save,\n      menuButton,\n      onQuerySelected: this.onQuerySelected,\n      onRearmChange: this.onRearmChange,\n      onNameChange: this.onNameChange,\n      onCriteriaChange: this.setAlertOptions,\n      onNotificationTemplateChange: this.setAlertOptions,\n    };\n\n    return (\n      <div className=\"alert-page\">\n        <div className=\"container\">\n          {mode === MODES.NEW && <AlertNew {...commonProps} />}\n          {mode === MODES.VIEW && (\n            <AlertView canEdit={canEdit} onEdit={this.edit} muted={muted} unmute={this.unmute} {...commonProps} />\n          )}\n          {mode === MODES.EDIT && <AlertEdit cancel={this.cancel} {...commonProps} />}\n        </div>\n      </div>\n    );\n  }\n}\n\nroutes.register(\n  \"Alerts.New\",\n  routeWithUserSession({\n    path: \"/alerts/new\",\n    title: window.W_L.new_alert,\n    render: pageProps => <Alert {...pageProps} mode={MODES.NEW} />,\n  })\n);\nroutes.register(\n  \"Alerts.View\",\n  routeWithUserSession({\n    path: \"/alerts/:alertId\",\n    title: window.W_L.alert,\n    render: pageProps => <Alert {...pageProps} mode={MODES.VIEW} />,\n  })\n);\nroutes.register(\n  \"Alerts.Edit\",\n  routeWithUserSession({\n    path: \"/alerts/:alertId/edit\",\n    title: window.W_L.alert,\n    render: pageProps => <Alert {...pageProps} mode={MODES.EDIT} />,\n  })\n);\n","import { each, filter, map, toLower, toString, trim, upperFirst, without } from \"lodash\";\nimport Mousetrap from \"mousetrap\";\nimport \"mousetrap/plugins/global-bind/mousetrap-global-bind\";\n\nconst modKey = /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? \"Cmd\" : \"Ctrl\";\nconst altKey = /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? \"Option\" : \"Alt\";\n\nexport function humanReadableShortcut(shortcut, limit = Infinity) {\n  const modifiers = {\n    mod: upperFirst(modKey),\n    alt: upperFirst(altKey),\n  };\n\n  shortcut = toLower(toString(shortcut));\n  shortcut = filter(map(shortcut.split(\",\"), trim), s => s !== \"\").slice(0, limit);\n  shortcut = map(shortcut, sc => {\n    sc = filter(map(sc.split(\"+\")), s => s !== \"\");\n    return map(sc, s => modifiers[s] || upperFirst(s)).join(\" + \");\n  }).join(\", \");\n\n  return shortcut !== \"\" ? shortcut : null;\n}\n\nconst handlers = {};\n\nfunction onShortcut(event, shortcut) {\n  event.preventDefault();\n  event.retunValue = false;\n  each(handlers[shortcut], fn => fn());\n}\n\nconst KeyboardShortcuts = {\n  modKey,\n  altKey,\n\n  bind: keymap => {\n    each(keymap, (fn, key) => {\n      const keys = key\n        .toLowerCase()\n        .split(\",\")\n        .map(trim);\n      each(keys, k => {\n        handlers[k] = [...without(handlers[k], fn), fn];\n        Mousetrap.bindGlobal(k, onShortcut);\n      });\n    });\n  },\n\n  unbind: keymap => {\n    each(keymap, (fn, key) => {\n      const keys = key\n        .toLowerCase()\n        .split(\",\")\n        .map(trim);\n      each(keys, k => {\n        handlers[k] = without(handlers[k], fn);\n        if (handlers[k].length === 0) {\n          handlers[k] = undefined;\n          Mousetrap.unbind(k);\n        }\n      });\n    });\n  },\n};\n\nexport default KeyboardShortcuts;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Badge from \"antd/lib/badge\";\nimport Tooltip from \"@/components/Tooltip\";\nimport KeyboardShortcuts from \"@/services/KeyboardShortcuts\";\n\nfunction ParameterApplyButton({ paramCount, onClick }) {\n  // show spinner when count is empty so the fade out is consistent\n  const icon = !paramCount ? (\n    <span role=\"status\" aria-live=\"polite\" aria-relevant=\"additions removals\">\n      <i className=\"fa fa-spinner fa-pulse\" aria-hidden=\"true\" />\n      <span className=\"sr-only\">Loading...</span>\n    </span>\n  ) : (\n    <i className=\"fa fa-check\" aria-hidden=\"true\" />\n  );\n\n  return (\n    <div className=\"parameter-apply-button\" data-show={!!paramCount} data-test=\"ParameterApplyButton\">\n      <Badge count={paramCount}>\n        <Tooltip title={paramCount ? `${KeyboardShortcuts.modKey} + Enter` : null}>\n          <span>\n            <Button onClick={onClick}>{icon} {window.W_L.apply_change}</Button>\n          </span>\n        </Tooltip>\n      </Badge>\n    </div>\n  );\n}\n\nParameterApplyButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  paramCount: PropTypes.number.isRequired,\n};\n\nexport default ParameterApplyButton;\n","const canvas = document.createElement(\"canvas\");\ncanvas.style.display = \"none\";\ndocument.body.appendChild(canvas);\n\nexport function calculateTextWidth(text: string, container = document.body) {\n  const ctx = canvas.getContext(\"2d\");\n  if (ctx) {\n    const containerStyle = window.getComputedStyle(container);\n    ctx.font = `${containerStyle.fontSize} ${containerStyle.fontFamily}`;\n    const textMetrics = ctx.measureText(text);\n    let actualWidth = textMetrics.width;\n    if (\"actualBoundingBoxLeft\" in textMetrics) {\n      // only available on evergreen browsers\n      actualWidth = Math.abs(textMetrics.actualBoundingBoxLeft) + Math.abs(textMetrics.actualBoundingBoxRight);\n    }\n    return actualWidth;\n  }\n\n  return null;\n}\n","import React, { useMemo } from \"react\";\nimport { maxBy } from \"lodash\";\nimport AntdSelect, { SelectProps, LabeledValue } from \"antd/lib/select\";\nimport { calculateTextWidth } from \"@/lib/calculateTextWidth\";\n\nconst MIN_LEN_FOR_VIRTUAL_SCROLL = 400;\n\ninterface VirtualScrollLabeledValue extends LabeledValue {\n  label: string;\n}\n\ninterface VirtualScrollSelectProps extends Omit<SelectProps<string>, \"optionFilterProp\" | \"children\"> {\n  options: Array<VirtualScrollLabeledValue>;\n}\nfunction SelectWithVirtualScroll({ options, ...props }: VirtualScrollSelectProps): JSX.Element {\n  const dropdownMatchSelectWidth = useMemo<number | boolean>(() => {\n    if (options && options.length > MIN_LEN_FOR_VIRTUAL_SCROLL) {\n      const largestOpt = maxBy(options, \"label.length\");\n\n      if (largestOpt) {\n        const offset = 40;\n        const optionText = largestOpt.label;\n        const width = calculateTextWidth(optionText);\n        if (width) {\n          return width + offset;\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  }, [options]);\n\n  return (\n    <AntdSelect<string>\n      dropdownMatchSelectWidth={dropdownMatchSelectWidth}\n      options={options}\n      allowClear={true}\n      optionFilterProp=\"label\" // as this component expects \"options\" prop\n      {...props}\n    />\n  );\n}\n\nexport default SelectWithVirtualScroll;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport DatePicker from \"antd/lib/date-picker\";\nimport { clientConfig } from \"@/services/auth\";\nimport { Moment } from \"@/components/proptypes\";\n\nconst DateInput = React.forwardRef(({ defaultValue, value, onSelect, className, ...props }, ref) => {\n  const format = clientConfig.dateFormat || \"YYYY-MM-DD\";\n  const additionalAttributes = {};\n  if (defaultValue && defaultValue.isValid()) {\n    additionalAttributes.defaultValue = defaultValue;\n  }\n  if (value === null || (value && value.isValid())) {\n    additionalAttributes.value = value;\n  }\n  return (\n    <DatePicker\n      ref={ref}\n      className={className}\n      {...additionalAttributes}\n      format={format}\n      placeholder={window.W_L.date_select}\n      onChange={onSelect}\n      {...props}\n    />\n  );\n});\n\nDateInput.propTypes = {\n  defaultValue: Moment,\n  value: Moment,\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateInput.defaultProps = {\n  defaultValue: null,\n  value: undefined,\n  onSelect: () => {},\n  className: \"\",\n};\n\nexport default DateInput;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport DatePicker from \"antd/lib/date-picker\";\nimport { clientConfig } from \"@/services/auth\";\nimport { Moment } from \"@/components/proptypes\";\n\nconst DateTimeInput = React.forwardRef(({ defaultValue, value, withSeconds, onSelect, className, ...props }, ref) => {\n  const format = (clientConfig.dateFormat || \"YYYY-MM-DD\") + (withSeconds ? \" HH:mm:ss\" : \" HH:mm\");\n  const additionalAttributes = {};\n  if (defaultValue && defaultValue.isValid()) {\n    additionalAttributes.defaultValue = defaultValue;\n  }\n  if (value === null || (value && value.isValid())) {\n    additionalAttributes.value = value;\n  }\n  return (\n    <DatePicker\n      ref={ref}\n      className={className}\n      showTime\n      {...additionalAttributes}\n      format={format}\n      placeholder={window.W_L.datetime_select}\n      onChange={onSelect}\n      {...props}\n    />\n  );\n});\n\nDateTimeInput.propTypes = {\n  defaultValue: Moment,\n  value: Moment,\n  withSeconds: PropTypes.bool,\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateTimeInput.defaultProps = {\n  defaultValue: null,\n  value: undefined,\n  withSeconds: false,\n  onSelect: () => {},\n  className: \"\",\n};\n\nexport default DateTimeInput;\n","import React, { useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { isFunction, get, findIndex } from \"lodash\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Menu from \"antd/lib/menu\";\nimport Typography from \"antd/lib/typography\";\nimport { DynamicDateType } from \"@/services/parameters/DateParameter\";\nimport { DynamicDateRangeType } from \"@/services/parameters/DateRangeParameter\";\n\nimport ArrowLeftOutlinedIcon from \"@ant-design/icons/ArrowLeftOutlined\";\nimport ThunderboltTwoToneIcon from \"@ant-design/icons/ThunderboltTwoTone\";\nimport ThunderboltOutlinedIcon from \"@ant-design/icons/ThunderboltOutlined\";\n\nimport \"./DynamicButton.less\";\n\nconst { Text } = Typography;\n\nfunction DynamicButton({ options, selectedDynamicValue, onSelect, enabled, staticValueLabel }) {\n  const menu = (\n    <Menu\n      className=\"dynamic-menu\"\n      onClick={({ key }) => onSelect(get(options, key, \"static\"))}\n      selectedKeys={[`${findIndex(options, { value: selectedDynamicValue })}`]}\n      data-test=\"DynamicButtonMenu\">\n      {options.map((option, index) => (\n        // eslint-disable-next-line react/no-array-index-key\n        <Menu.Item key={index}>\n          {option.name} {option.label && <em>{isFunction(option.label) ? option.label() : option.label}</em>}\n        </Menu.Item>\n      ))}\n      {enabled && <Menu.Divider />}\n      {enabled && (\n        <Menu.Item>\n          <ArrowLeftOutlinedIcon />\n          <Text type=\"secondary\">{staticValueLabel}</Text>\n        </Menu.Item>\n      )}\n    </Menu>\n  );\n\n  const containerRef = useRef(null);\n\n  return (\n    <div ref={containerRef}>\n      <div role=\"presentation\" onClick={e => e.stopPropagation()}>\n        <Dropdown.Button\n          overlay={menu}\n          className=\"dynamic-button\"\n          placement=\"bottomRight\"\n          trigger={[\"click\"]}\n          icon={\n            enabled ? (\n              <ThunderboltTwoToneIcon className=\"dynamic-icon\" />\n            ) : (\n              <ThunderboltOutlinedIcon className=\"dynamic-icon\" />\n            )\n          }\n          getPopupContainer={() => containerRef.current}\n          data-test=\"DynamicButton\"\n        />\n      </div>\n    </div>\n  );\n}\n\nDynamicButton.propTypes = {\n  options: PropTypes.arrayOf(PropTypes.object), // eslint-disable-line react/forbid-prop-types\n  selectedDynamicValue: PropTypes.oneOfType([DynamicDateType, DynamicDateRangeType]),\n  onSelect: PropTypes.func,\n  enabled: PropTypes.bool,\n  staticValueLabel: PropTypes.string,\n};\n\nDynamicButton.defaultProps = {\n  options: [],\n  selectedDynamicValue: null,\n  onSelect: () => {},\n  enabled: false,\n  staticValueLabel: \"Back to Static Value\",\n};\n\nexport default DynamicButton;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport moment from \"moment\";\nimport { includes } from \"lodash\";\nimport { isDynamicDate } from \"@/services/parameters/DateParameter\";\nimport DateInput from \"@/components/DateInput\";\nimport DateTimeInput from \"@/components/DateTimeInput\";\nimport DynamicButton from \"@/components/dynamic-parameters/DynamicButton\";\n\nimport \"./DynamicParameters.less\";\n\nclass DynamicDatePicker extends React.Component {\n  static propTypes = {\n    type: PropTypes.string,\n    className: PropTypes.string,\n    value: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    parameter: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    onSelect: PropTypes.func,\n    dynamicButtonOptions: PropTypes.shape({\n      staticValueLabel: PropTypes.string,\n      options: PropTypes.arrayOf(\n        PropTypes.shape({\n          name: PropTypes.string,\n          value: PropTypes.object,\n          label: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n        })\n      ),\n    }),\n    dateOptions: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n  };\n\n  static defaultProps = {\n    type: \"\",\n    className: \"\",\n    value: null,\n    parameter: null,\n    dynamicButtonOptions: {\n      options: [],\n    },\n    onSelect: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n    this.dateComponentRef = React.createRef();\n  }\n\n  onDynamicValueSelect = dynamicValue => {\n    const { onSelect, parameter } = this.props;\n    if (dynamicValue === \"static\") {\n      const parameterValue = parameter.getExecutionValue();\n      if (parameterValue) {\n        onSelect(moment(parameterValue));\n      } else {\n        onSelect(null);\n      }\n    } else {\n      onSelect(dynamicValue.value);\n    }\n    // give focus to the DatePicker to get keyboard shortcuts to work\n    this.dateComponentRef.current.focus();\n  };\n\n  render() {\n    const { type, value, className, dateOptions, dynamicButtonOptions, onSelect } = this.props;\n    const hasDynamicValue = isDynamicDate(value);\n    const isDateTime = includes(type, \"datetime\");\n\n    const additionalAttributes = {};\n\n    let DateComponent = DateInput;\n    if (isDateTime) {\n      DateComponent = DateTimeInput;\n      if (includes(type, \"with-seconds\")) {\n        additionalAttributes.withSeconds = true;\n      }\n    }\n\n    if (moment.isMoment(value) || value === null) {\n      additionalAttributes.value = value;\n    }\n\n    if (hasDynamicValue) {\n      const dynamicDate = value;\n      additionalAttributes.placeholder = dynamicDate && dynamicDate.name;\n      additionalAttributes.value = null;\n    }\n\n    return (\n      <div className={classNames(\"date-parameter\", className)}>\n        <DateComponent\n          {...dateOptions}\n          ref={this.dateComponentRef}\n          className={classNames(\"redash-datepicker\", type, { \"dynamic-value\": hasDynamicValue })}\n          onSelect={onSelect}\n          suffixIcon={null}\n          {...additionalAttributes}\n        />\n        <DynamicButton\n          options={dynamicButtonOptions.options}\n          staticValueLabel={dynamicButtonOptions.staticValueLabel}\n          selectedDynamicValue={hasDynamicValue ? value : null}\n          enabled={hasDynamicValue}\n          onSelect={this.onDynamicValueSelect}\n        />\n      </div>\n    );\n  }\n}\n\nexport default DynamicDatePicker;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { getDynamicDateFromString } from \"@/services/parameters/DateParameter\";\nimport DynamicDatePicker from \"@/components/dynamic-parameters/DynamicDatePicker\";\n\nconst DYNAMIC_DATE_OPTIONS = [\n  {\n    name: \"Today/Now\",\n    value: getDynamicDateFromString(\"d_now\"),\n    label: () =>\n      getDynamicDateFromString(\"d_now\")\n        .value()\n        .format(\"MMM D\"),\n  },\n  {\n    name: \"Yesterday\",\n    value: getDynamicDateFromString(\"d_yesterday\"),\n    label: () =>\n      getDynamicDateFromString(\"d_yesterday\")\n        .value()\n        .format(\"MMM D\"),\n  },\n];\n\nfunction DateParameter(props) {\n  return (\n    <DynamicDatePicker\n      dynamicButtonOptions={{ options: DYNAMIC_DATE_OPTIONS }}\n      {...props}\n      dateOptions={{ \"aria-label\": \"Parameter date value\" }}\n    />\n  );\n}\n\nDateParameter.propTypes = {\n  type: PropTypes.string,\n  className: PropTypes.string,\n  value: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n  parameter: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n  onSelect: PropTypes.func,\n};\n\nDateParameter.defaultProps = {\n  type: \"\",\n  className: \"\",\n  value: null,\n  parameter: null,\n  onSelect: () => {},\n};\n\nexport default DateParameter;\n","import { isArray } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport DatePicker from \"antd/lib/date-picker\";\nimport { clientConfig } from \"@/services/auth\";\nimport { Moment } from \"@/components/proptypes\";\n\nconst { RangePicker } = DatePicker;\n\nconst DateRangeInput = React.forwardRef(({ defaultValue, value, onSelect, className, ...props }, ref) => {\n  const format = clientConfig.dateFormat || \"YYYY-MM-DD\";\n  const additionalAttributes = {};\n  if (isArray(defaultValue) && defaultValue[0].isValid() && defaultValue[1].isValid()) {\n    additionalAttributes.defaultValue = defaultValue;\n  }\n  if (value === null || (isArray(value) && value[0].isValid() && value[1].isValid())) {\n    additionalAttributes.value = value;\n  }\n  return (\n    <RangePicker\n      ref={ref}\n      className={className}\n      {...additionalAttributes}\n      format={format}\n      onChange={onSelect}\n      {...props}\n    />\n  );\n});\n\nDateRangeInput.propTypes = {\n  defaultValue: PropTypes.arrayOf(Moment),\n  value: PropTypes.arrayOf(Moment),\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateRangeInput.defaultProps = {\n  defaultValue: null,\n  value: undefined,\n  onSelect: () => {},\n  className: \"\",\n};\n\nexport default DateRangeInput;\n","import { isArray } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport DatePicker from \"antd/lib/date-picker\";\nimport { clientConfig } from \"@/services/auth\";\nimport { Moment } from \"@/components/proptypes\";\n\nconst { RangePicker } = DatePicker;\n\nconst DateTimeRangeInput = React.forwardRef(\n  ({ defaultValue, value, withSeconds, onSelect, className, ...props }, ref) => {\n    const format = (clientConfig.dateFormat || \"YYYY-MM-DD\") + (withSeconds ? \" HH:mm:ss\" : \" HH:mm\");\n    const additionalAttributes = {};\n    if (isArray(defaultValue) && defaultValue[0].isValid() && defaultValue[1].isValid()) {\n      additionalAttributes.defaultValue = defaultValue;\n    }\n    if (value === null || (isArray(value) && value[0].isValid() && value[1].isValid())) {\n      additionalAttributes.value = value;\n    }\n    return (\n      <RangePicker\n        ref={ref}\n        className={className}\n        showTime\n        {...additionalAttributes}\n        format={format}\n        onChange={onSelect}\n        {...props}\n      />\n    );\n  }\n);\n\nDateTimeRangeInput.propTypes = {\n  defaultValue: PropTypes.arrayOf(Moment),\n  value: PropTypes.arrayOf(Moment),\n  withSeconds: PropTypes.bool,\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateTimeRangeInput.defaultProps = {\n  defaultValue: null,\n  value: undefined,\n  withSeconds: false,\n  onSelect: () => {},\n  className: \"\",\n};\n\nexport default DateTimeRangeInput;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport moment from \"moment\";\nimport { includes, isArray, isObject } from \"lodash\";\nimport { isDynamicDateRange } from \"@/services/parameters/DateRangeParameter\";\nimport DateRangeInput from \"@/components/DateRangeInput\";\nimport DateTimeRangeInput from \"@/components/DateTimeRangeInput\";\nimport DynamicButton from \"@/components/dynamic-parameters/DynamicButton\";\n\nimport \"./DynamicParameters.less\";\n\nfunction isValidDateRangeValue(value) {\n  return isArray(value) && value.length === 2 && moment.isMoment(value[0]) && moment.isMoment(value[1]);\n}\n\nclass DynamicDateRangePicker extends React.Component {\n  static propTypes = {\n    type: PropTypes.oneOf([\"date-range\", \"datetime-range\", \"datetime-range-with-seconds\"]).isRequired,\n    className: PropTypes.string,\n    value: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    parameter: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    onSelect: PropTypes.func,\n    dynamicButtonOptions: PropTypes.shape({\n      staticValueLabel: PropTypes.string,\n      options: PropTypes.arrayOf(\n        PropTypes.shape({\n          name: PropTypes.string,\n          value: PropTypes.object,\n          label: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n        })\n      ),\n    }),\n    dateRangeOptions: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n  };\n\n  static defaultProps = {\n    type: \"date-range\",\n    className: \"\",\n    value: null,\n    parameter: null,\n    dynamicButtonOptions: {\n      options: [],\n    },\n    onSelect: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n    this.dateRangeComponentRef = React.createRef();\n  }\n\n  onDynamicValueSelect = dynamicValue => {\n    const { onSelect, parameter } = this.props;\n    if (dynamicValue === \"static\") {\n      const parameterValue = parameter.getExecutionValue();\n      if (isObject(parameterValue) && parameterValue.start && parameterValue.end) {\n        onSelect([moment(parameterValue.start), moment(parameterValue.end)]);\n      } else {\n        onSelect(null);\n      }\n    } else {\n      onSelect(dynamicValue.value);\n    }\n    // give focus to the DatePicker to get keyboard shortcuts to work\n    this.dateRangeComponentRef.current.focus();\n  };\n\n  render() {\n    const { type, value, onSelect, className, dynamicButtonOptions, dateRangeOptions, parameter, ...rest } = this.props;\n    const isDateTimeRange = includes(type, \"datetime-range\");\n    const hasDynamicValue = isDynamicDateRange(value);\n\n    const additionalAttributes = {};\n\n    let DateRangeComponent = DateRangeInput;\n    if (isDateTimeRange) {\n      DateRangeComponent = DateTimeRangeInput;\n      if (includes(type, \"with-seconds\")) {\n        additionalAttributes.withSeconds = true;\n      }\n    }\n\n    if (isValidDateRangeValue(value) || value === null) {\n      additionalAttributes.value = value;\n    }\n\n    if (hasDynamicValue) {\n      additionalAttributes.placeholder = [value && value.name];\n      additionalAttributes.value = null;\n    }\n\n    return (\n      <div {...rest} className={classNames(\"date-range-parameter\", className)}>\n        <DateRangeComponent\n          {...dateRangeOptions}\n          ref={this.dateRangeComponentRef}\n          className={classNames(\"redash-datepicker date-range-input\", type, { \"dynamic-value\": hasDynamicValue })}\n          onSelect={onSelect}\n          suffixIcon={null}\n          {...additionalAttributes}\n        />\n        <DynamicButton\n          options={dynamicButtonOptions.options}\n          staticValueLabel={dynamicButtonOptions.staticValueLabel}\n          selectedDynamicValue={hasDynamicValue ? value : null}\n          enabled={hasDynamicValue}\n          onSelect={this.onDynamicValueSelect}\n        />\n      </div>\n    );\n  }\n}\n\nexport default DynamicDateRangePicker;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { includes } from \"lodash\";\nimport { getDynamicDateRangeFromString } from \"@/services/parameters/DateRangeParameter\";\nimport DynamicDateRangePicker from \"@/components/dynamic-parameters/DynamicDateRangePicker\";\n\nconst DYNAMIC_DATE_OPTIONS = [\n  {\n    name: \"This week\",\n    title: window.W_L.this_week,\n    value: getDynamicDateRangeFromString(\"d_this_week\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_this_week\")\n        .value()[0]\n        .format(\"MMM D\") +\n      \" - \" +\n      getDynamicDateRangeFromString(\"d_this_week\")\n        .value()[1]\n        .format(\"MMM D\"),\n  },\n  {\n    name: \"This month\",\n    title: window.W_L.this_month,\n    value: getDynamicDateRangeFromString(\"d_this_month\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_this_month\")\n        .value()[0]\n        .format(\"MMMM\"),\n  },\n  {\n    name: \"This year\",\n    title: window.W_L.this_year,\n    value: getDynamicDateRangeFromString(\"d_this_year\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_this_year\")\n        .value()[0]\n        .format(\"YYYY\"),\n  },\n  {\n    name: \"Last week\",\n    title: window.W_L.last_week,\n    value: getDynamicDateRangeFromString(\"d_last_week\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_week\")\n        .value()[0]\n        .format(\"MMM D\") +\n      \" - \" +\n      getDynamicDateRangeFromString(\"d_last_week\")\n        .value()[1]\n        .format(\"MMM D\"),\n  },\n  {\n    name: \"Last month\",\n    title: window.W_L.last_month,\n    value: getDynamicDateRangeFromString(\"d_last_month\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_month\")\n        .value()[0]\n        .format(\"MMMM\"),\n  },\n  {\n    name: \"Last year\",\n    title: window.W_L.last_year,\n    value: getDynamicDateRangeFromString(\"d_last_year\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_year\")\n        .value()[0]\n        .format(\"YYYY\"),\n  },\n  {\n    name: \"Last 7 days\",\n    title: window.W_L.last_7_days,\n    value: getDynamicDateRangeFromString(\"d_last_7_days\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_7_days\")\n        .value()[0]\n        .format(\"MMM D\") + \" - Today\",\n  },\n  {\n    name: \"Last 14 days\",\n    title: \"window.W_L.last_14_days\",\n    value: getDynamicDateRangeFromString(\"d_last_14_days\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_14_days\")\n        .value()[0]\n        .format(\"MMM D\") + \" - Today\",\n  },\n  {\n    name: \"Last 30 days\",\n    title: window.W_L.last_30_days,\n    value: getDynamicDateRangeFromString(\"d_last_30_days\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_30_days\")\n        .value()[0]\n        .format(\"MMM D\") + \" - Today\",\n  },\n  {\n    name: \"Last 60 days\",\n    title: window.W_L.last_60_days,\n    value: getDynamicDateRangeFromString(\"d_last_60_days\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_60_days\")\n        .value()[0]\n        .format(\"MMM D\") + \" - Today\",\n  },\n  {\n    name: \"Last 90 days\",\n    title: window.W_L.last_90_days,\n    value: getDynamicDateRangeFromString(\"d_last_90_days\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_last_90_days\")\n        .value()[0]\n        .format(\"MMM D\") + \" - Today\",\n  },\n  {\n    name: \"Last 12 months\",\n    title: window.W_L.last_12_months,\n    value: getDynamicDateRangeFromString(\"d_last_12_months\"),\n    label: null,\n  },\n];\n\nconst DYNAMIC_DATETIME_OPTIONS = [\n  {\n    name: \"Today\",\n    value: getDynamicDateRangeFromString(\"d_today\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_today\")\n        .value()[0]\n        .format(\"MMM D\"),\n  },\n  {\n    name: \"Yesterday\",\n    value: getDynamicDateRangeFromString(\"d_yesterday\"),\n    label: () =>\n      getDynamicDateRangeFromString(\"d_yesterday\")\n        .value()[0]\n        .format(\"MMM D\"),\n  },\n  ...DYNAMIC_DATE_OPTIONS,\n];\n\nfunction DateRangeParameter(props) {\n  const options = includes(props.type, \"datetime-range\") ? DYNAMIC_DATETIME_OPTIONS : DYNAMIC_DATE_OPTIONS;\n  return <DynamicDateRangePicker {...props} dynamicButtonOptions={{ options }} />;\n}\n\nDateRangeParameter.propTypes = {\n  type: PropTypes.string,\n  className: PropTypes.string,\n  value: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n  parameter: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n  onSelect: PropTypes.func,\n};\n\nDateRangeParameter.defaultProps = {\n  type: \"\",\n  className: \"\",\n  value: null,\n  parameter: null,\n  onSelect: () => {},\n};\n\nexport default DateRangeParameter;\n","import { find, isArray, get, first, map, intersection, isEqual, isEmpty } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport SelectWithVirtualScroll from \"@/components/SelectWithVirtualScroll\";\n\nexport default class QueryBasedParameterInput extends React.Component {\n  static propTypes = {\n    parameter: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    value: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    mode: PropTypes.oneOf([\"default\", \"multiple\"]),\n    queryId: PropTypes.number,\n    onSelect: PropTypes.func,\n    className: PropTypes.string,\n  };\n\n  static defaultProps = {\n    value: null,\n    mode: \"default\",\n    parameter: null,\n    queryId: null,\n    onSelect: () => {},\n    className: \"\",\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      options: [],\n      value: null,\n      loading: false,\n    };\n  }\n\n  componentDidMount() {\n    this._loadOptions(this.props.queryId);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.queryId !== prevProps.queryId) {\n      this._loadOptions(this.props.queryId);\n    }\n    if (this.props.value !== prevProps.value) {\n      this.setValue(this.props.value);\n    }\n  }\n\n  setValue(value) {\n    const { options } = this.state;\n    if (this.props.mode === \"multiple\") {\n      value = isArray(value) ? value : [value];\n      const optionValues = map(options, option => option.value);\n      const validValues = intersection(value, optionValues);\n      this.setState({ value: validValues });\n      return validValues;\n    }\n    const found = find(options, option => option.value === this.props.value) !== undefined;\n    value = found ? value : get(first(options), \"value\");\n    this.setState({ value });\n    return value;\n  }\n\n  async _loadOptions(queryId) {\n    if (queryId && queryId !== this.state.queryId) {\n      this.setState({ loading: true });\n      const options = await this.props.parameter.loadDropdownValues();\n\n      // stale queryId check\n      if (this.props.queryId === queryId) {\n        this.setState({ options, loading: false }, () => {\n          const updatedValue = this.setValue(this.props.value);\n          if (!isEqual(updatedValue, this.props.value)) {\n            this.props.onSelect(updatedValue);\n          }\n        });\n      }\n    }\n  }\n\n  render() {\n    const { className, mode, onSelect, queryId, value, ...otherProps } = this.props;\n    const { loading, options } = this.state;\n    return (\n      <span>\n        <SelectWithVirtualScroll\n          className={className}\n          disabled={loading}\n          loading={loading}\n          mode={mode}\n          value={this.state.value}\n          onChange={onSelect}\n          options={map(options, ({ value, name }) => ({ label: String(name), value }))}\n          showSearch\n          showArrow\n          notFoundContent={isEmpty(options) ? window.W_L.no_option : null}\n          {...otherProps}\n        />\n      </span>\n    );\n  }\n}\n","import { isEqual, isEmpty, map } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport SelectWithVirtualScroll from \"@/components/SelectWithVirtualScroll\";\nimport Input from \"antd/lib/input\";\nimport InputNumber from \"antd/lib/input-number\";\nimport DateParameter from \"@/components/dynamic-parameters/DateParameter\";\nimport DateRangeParameter from \"@/components/dynamic-parameters/DateRangeParameter\";\nimport QueryBasedParameterInput from \"./QueryBasedParameterInput\";\n\nimport \"./ParameterValueInput.less\";\n\nconst multipleValuesProps = {\n  maxTagCount: 3,\n  maxTagTextLength: 10,\n  maxTagPlaceholder: num => `+${num.length} more`,\n};\n\nclass ParameterValueInput extends React.Component {\n  static propTypes = {\n    type: PropTypes.string,\n    value: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    enumOptions: PropTypes.string,\n    queryId: PropTypes.number,\n    parameter: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    onSelect: PropTypes.func,\n    className: PropTypes.string,\n  };\n\n  static defaultProps = {\n    type: \"text\",\n    value: null,\n    enumOptions: \"\",\n    queryId: null,\n    parameter: null,\n    onSelect: () => {},\n    className: \"\",\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.parameter.hasPendingValue ? props.parameter.pendingValue : props.value,\n      isDirty: props.parameter.hasPendingValue,\n    };\n  }\n\n  componentDidUpdate = prevProps => {\n    const { value, parameter } = this.props;\n    // if value prop updated, reset dirty state\n    if (prevProps.value !== value || prevProps.parameter !== parameter) {\n      this.setState({\n        value: parameter.hasPendingValue ? parameter.pendingValue : value,\n        isDirty: parameter.hasPendingValue,\n      });\n    }\n  };\n\n  onSelect = value => {\n    const isDirty = !isEqual(value, this.props.value);\n    this.setState({ value, isDirty });\n    this.props.onSelect(value, isDirty);\n  };\n\n  renderDateParameter() {\n    const { type, parameter } = this.props;\n    const { value } = this.state;\n    return (\n      <DateParameter\n        type={type}\n        className={this.props.className}\n        value={value}\n        parameter={parameter}\n        onSelect={this.onSelect}\n      />\n    );\n  }\n\n  renderDateRangeParameter() {\n    const { type, parameter } = this.props;\n    const { value } = this.state;\n    return (\n      <DateRangeParameter\n        type={type}\n        className={this.props.className}\n        value={value}\n        parameter={parameter}\n        onSelect={this.onSelect}\n      />\n    );\n  }\n\n  renderEnumInput() {\n    const { enumOptions, parameter } = this.props;\n    const { value } = this.state;\n    const enumOptionsArray = enumOptions.split(\"\\n\").filter(v => v !== \"\");\n    // Antd Select doesn't handle null in multiple mode\n    const normalize = val => (parameter.multiValuesOptions && val === null ? [] : val);\n\n    return (\n      <SelectWithVirtualScroll\n        className={this.props.className}\n        mode={parameter.multiValuesOptions ? \"multiple\" : \"default\"}\n        value={normalize(value)}\n        onChange={this.onSelect}\n        options={map(enumOptionsArray, opt => ({ label: String(opt), value: opt }))}\n        showSearch\n        showArrow\n        notFoundContent={isEmpty(enumOptionsArray) ? window.W_L.no_option : null}\n        {...multipleValuesProps}\n      />\n    );\n  }\n\n  renderQueryBasedInput() {\n    const { queryId, parameter } = this.props;\n    const { value } = this.state;\n    return (\n      <QueryBasedParameterInput\n        className={this.props.className}\n        mode={parameter.multiValuesOptions ? \"multiple\" : \"default\"}\n        parameter={parameter}\n        value={value}\n        queryId={queryId}\n        onSelect={this.onSelect}\n        style={{ minWidth: 60 }}\n        {...multipleValuesProps}\n      />\n    );\n  }\n\n  renderNumberInput() {\n    const { className } = this.props;\n    const { value } = this.state;\n\n    const normalize = val => (isNaN(val) ? undefined : val);\n\n    return (\n      <InputNumber\n        className={className}\n        value={normalize(value)}\n        aria-label=\"Parameter number value\"\n        onChange={val => this.onSelect(normalize(val))}\n      />\n    );\n  }\n\n  renderTextInput() {\n    const { className } = this.props;\n    const { value } = this.state;\n\n    return (\n      <Input\n        className={className}\n        value={value}\n        aria-label=\"Parameter text value\"\n        data-test=\"TextParamInput\"\n        onChange={e => this.onSelect(e.target.value)}\n      />\n    );\n  }\n\n  renderInput() {\n    const { type } = this.props;\n    switch (type) {\n      case \"datetime-with-seconds\":\n      case \"datetime-local\":\n      case \"date\":\n        return this.renderDateParameter();\n      case \"datetime-range-with-seconds\":\n      case \"datetime-range\":\n      case \"date-range\":\n        return this.renderDateRangeParameter();\n      case \"enum\":\n        return this.renderEnumInput();\n      case \"query\":\n        return this.renderQueryBasedInput();\n      case \"number\":\n        return this.renderNumberInput();\n      default:\n        return this.renderTextInput();\n    }\n  }\n\n  render() {\n    const { isDirty } = this.state;\n\n    return (\n      <div className=\"parameter-input\" data-dirty={isDirty || null} data-test=\"ParameterValueInput\">\n        {this.renderInput()}\n      </div>\n    );\n  }\n}\n\nexport default ParameterValueInput;\n","import { includes, words, capitalize, clone, isNull } from \"lodash\";\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport Modal from \"antd/lib/modal\";\nimport Form from \"antd/lib/form\";\nimport Button from \"antd/lib/button\";\nimport Select from \"antd/lib/select\";\nimport Input from \"antd/lib/input\";\nimport Divider from \"antd/lib/divider\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport QuerySelector from \"@/components/QuerySelector\";\nimport { Query } from \"@/services/query\";\nimport { useUniqueId } from \"@/lib/hooks/useUniqueId\";\n\nconst { Option } = Select;\nconst formItemProps = { labelCol: { span: 6 }, wrapperCol: { span: 16 } };\n\nfunction getDefaultTitle(text) {\n  return capitalize(words(text).join(\" \")); // humanize\n}\n\nfunction isTypeDateRange(type) {\n  return /-range/.test(type);\n}\n\nfunction joinExampleList(multiValuesOptions) {\n  const { prefix, suffix } = multiValuesOptions;\n  return [window.W_L.value+\"1\", window.W_L.value+\"2\", window.W_L.value+\"3\"].map(value => `${prefix}${value}${suffix}`).join(\",\");\n}\n\nfunction NameInput({ name, type, onChange, existingNames, setValidation }) {\n  let helpText = \"\";\n  let validateStatus = \"\";\n\n  if (!name) {\n    helpText = window.W_L.params_name;\n    setValidation(false);\n  } else if (includes(existingNames, name)) {\n    helpText = window.W_L.params_ready_exist;\n    setValidation(false);\n    validateStatus = \"error\";\n  } else {\n    if (isTypeDateRange(type)) {\n      helpText = (\n        <React.Fragment>\n          {window.W_L.query_show_as}{\" \"}\n          <code style={{ display: \"inline-block\", color: \"inherit\" }}>{`{{${name}.start}} {{${name}.end}}`}</code>\n        </React.Fragment>\n      );\n    }\n    setValidation(true);\n  }\n\n  return (\n    <Form.Item required label={window.W_L.name} help={helpText} validateStatus={validateStatus} {...formItemProps}>\n      <Input onChange={e => onChange(e.target.value)} autoFocus />\n    </Form.Item>\n  );\n}\n\nNameInput.propTypes = {\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  existingNames: PropTypes.arrayOf(PropTypes.string).isRequired,\n  setValidation: PropTypes.func.isRequired,\n  type: PropTypes.string.isRequired,\n};\n\nfunction EditParameterSettingsDialog(props) {\n  const [param, setParam] = useState(clone(props.parameter));\n  const [isNameValid, setIsNameValid] = useState(true);\n  const [initialQuery, setInitialQuery] = useState();\n\n  const isNew = !props.parameter.name;\n\n  // fetch query by id\n  useEffect(() => {\n    const queryId = props.parameter.queryId;\n    if (queryId) {\n      Query.get({ id: queryId }).then(setInitialQuery);\n    }\n  }, [props.parameter.queryId]);\n\n  function isFulfilled() {\n    // name\n    if (!isNameValid) {\n      return false;\n    }\n\n    // title\n    if (param.title === \"\") {\n      return false;\n    }\n\n    // query\n    if (param.type === \"query\" && !param.queryId) {\n      return false;\n    }\n\n    return true;\n  }\n\n  function onConfirm() {\n    // update title to default\n    if (!param.title) {\n      // forced to do this cause param won't update in time for save\n      param.title = getDefaultTitle(param.name);\n      setParam(param);\n    }\n\n    props.dialog.close(param);\n  }\n\n  const paramFormId = useUniqueId(\"paramForm\");\n\n  return (\n    <Modal\n      {...props.dialog.props}\n      title={isNew ? window.W_L.new_params : param.name}\n      width={600}\n      footer={[\n        <Button key=\"cancel\" onClick={props.dialog.dismiss}>\n          {window.W_L.cancel}\n        </Button>,\n        <Button\n          key=\"submit\"\n          htmlType=\"submit\"\n          disabled={!isFulfilled()}\n          type=\"primary\"\n          form={paramFormId}\n          data-test=\"SaveParameterSettings\">\n          {isNew ? window.W_L.new_params : window.W_L.ok_text}\n        </Button>,\n      ]}>\n      <Form layout=\"horizontal\" onFinish={onConfirm} id={paramFormId}>\n        {isNew && (\n          <NameInput\n            name={param.name}\n            onChange={name => setParam({ ...param, name })}\n            setValidation={setIsNameValid}\n            existingNames={props.existingParams}\n            type={param.type}\n          />\n        )}\n        <Form.Item required label={window.W_L.title} {...formItemProps}>\n          <Input\n            value={isNull(param.title) ? getDefaultTitle(param.name) : param.title}\n            onChange={e => setParam({ ...param, title: e.target.value })}\n            data-test=\"ParameterTitleInput\"\n          />\n        </Form.Item>\n        <Form.Item label={window.W_L.type} {...formItemProps}>\n          <Select value={param.type} onChange={type => setParam({ ...param, type })} data-test=\"ParameterTypeSelect\">\n            <Option value=\"text\" data-test=\"TextParameterTypeOption\">\n              {window.W_L.text}\n            </Option>\n            <Option value=\"number\" data-test=\"NumberParameterTypeOption\">\n               {window.W_L.number}\n            </Option>\n            <Option value=\"enum\">{window.W_L.select}</Option>\n            <Option value=\"query\">{window.W_L.query_result}</Option>\n            <Option disabled key=\"dv1\">\n              <Divider className=\"select-option-divider\" />\n            </Option>\n            <Option value=\"date\" data-test=\"DateParameterTypeOption\">\n\t\t\t\t{window.W_L.date_day}\n            </Option>\n            <Option value=\"datetime-local\" data-test=\"DateTimeParameterTypeOption\">\n              {window.W_L.date_datetime}\n            </Option>\n            <Option value=\"datetime-with-seconds\">{window.W_L.date_time_second}</Option>\n            <Option disabled key=\"dv2\">\n              <Divider className=\"select-option-divider\" />\n            </Option>\n            <Option value=\"date-range\" data-test=\"DateRangeParameterTypeOption\">\n              {window.W_L.date_range_day}\n            </Option>\n            <Option value=\"datetime-range\"> {window.W_L.date_range_datetime}</Option>\n            <Option value=\"datetime-range-with-seconds\">{window.W_L.date_range_time_second}</Option>\n          </Select>\n        </Form.Item>\n        {param.type === \"enum\" && (\n          <Form.Item label={window.W_L.value} help={window.W_L.list_select_help} {...formItemProps}>\n            <Input.TextArea\n              rows={3}\n              value={param.enumOptions}\n              onChange={e => setParam({ ...param, enumOptions: e.target.value })}\n            />\n          </Form.Item>\n        )}\n        {param.type === \"query\" && (\n          <Form.Item label={window.W_L.query_result} help={window.W_L.wait_query} {...formItemProps}>\n            <QuerySelector\n              selectedQuery={initialQuery}\n              onChange={q => setParam({ ...param, queryId: q && q.id })}\n              type=\"select\"\n            />\n          </Form.Item>\n        )}\n        {(param.type === \"enum\" || param.type === \"query\") && (\n          <Form.Item className=\"m-b-0\" label=\" \" colon={false} {...formItemProps}>\n            <Checkbox\n              defaultChecked={!!param.multiValuesOptions}\n              onChange={e =>\n                setParam({\n                  ...param,\n                  multiValuesOptions: e.target.checked\n                    ? {\n                        prefix: \"\",\n                        suffix: \"\",\n                        separator: \",\",\n                      }\n                    : null,\n                })\n              }\n              data-test=\"AllowMultipleValuesCheckbox\">\n              {window.W_L.allow_multi}\n            </Checkbox>\n          </Form.Item>\n        )}\n        {(param.type === \"enum\" || param.type === \"query\") && param.multiValuesOptions && (\n          <Form.Item\n            label={window.W_L.quotation}\n            help={\n              <React.Fragment>\n               {window.W_L.replace_query_info}: <code>{joinExampleList(param.multiValuesOptions)}</code>\n              </React.Fragment>\n            }\n            {...formItemProps}>\n            <Select\n              value={param.multiValuesOptions.prefix}\n              onChange={quoteOption =>\n                setParam({\n                  ...param,\n                  multiValuesOptions: {\n                    ...param.multiValuesOptions,\n                    prefix: quoteOption,\n                    suffix: quoteOption,\n                  },\n                })\n              }\n              data-test=\"QuotationSelect\">\n              <Option value=\"\">{window.W_L.no_quotation}({window.W_L.default})</Option>\n              <Option value=\"'\">{window.W_L.single_quotation}</Option>\n              <Option value={'\"'} data-test=\"DoubleQuotationMarkOption\">\n                {window.W_L.double_quotation}\n              </Option>\n            </Select>\n          </Form.Item>\n        )}\n      </Form>\n    </Modal>\n  );\n}\n\nEditParameterSettingsDialog.propTypes = {\n  parameter: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  dialog: DialogPropType.isRequired,\n  existingParams: PropTypes.arrayOf(PropTypes.string),\n};\n\nEditParameterSettingsDialog.defaultProps = {\n  existingParams: [],\n};\n\nexport default wrapDialog(EditParameterSettingsDialog);\n","import { size, filter, forEach, extend } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { SortableContainer, SortableElement, DragHandle } from \"@/components/chart/components/sortable\";\nimport location from \"@/services/location\";\nimport { Parameter, createParameter } from \"@/services/parameters\";\nimport ParameterApplyButton from \"@/components/ParameterApplyButton\";\nimport ParameterValueInput from \"@/components/ParameterValueInput\";\nimport PlainButton from \"@/components/PlainButton\";\nimport EditParameterSettingsDialog from \"./EditParameterSettingsDialog\";\nimport { toHuman } from \"@/lib/utils\";\n \nimport \"./Parameters.less\";\n\nfunction updateUrl(parameters) {\n  const params = extend({}, location.search);\n  parameters.forEach(param => {\n    extend(params, param.toUrlParams());\n  });\n  location.setSearch(params, true);\n}\n\nexport default class Parameters extends React.Component {\n  static propTypes = {\n    parameters: PropTypes.arrayOf(PropTypes.instanceOf(Parameter)),\n    editable: PropTypes.bool,\n    sortable: PropTypes.bool,\n    disableUrlUpdate: PropTypes.bool,\n    onValuesChange: PropTypes.func,\n    onPendingValuesChange: PropTypes.func,\n    onParametersEdit: PropTypes.func,\n    appendSortableToParent: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    parameters: [],\n    editable: false,\n    sortable: false,\n    disableUrlUpdate: false,\n    onValuesChange: () => {},\n    onPendingValuesChange: () => {},\n    onParametersEdit: () => {},\n    appendSortableToParent: true,\n  };\n\n  constructor(props) {\n    super(props);\n    const { parameters } = props;\n    this.state = { parameters };\n    if (!props.disableUrlUpdate) {\n      updateUrl(parameters);\n    }\n  }\n\n  componentDidUpdate = prevProps => {\n    const { parameters, disableUrlUpdate } = this.props;\n    const parametersChanged = prevProps.parameters !== parameters;\n    const disableUrlUpdateChanged = prevProps.disableUrlUpdate !== disableUrlUpdate;\n    if (parametersChanged) {\n      this.setState({ parameters });\n    }\n    if ((parametersChanged || disableUrlUpdateChanged) && !disableUrlUpdate) {\n      updateUrl(parameters);\n    }\n  };\n\n  handleKeyDown = e => {\n    // Cmd/Ctrl/Alt + Enter\n    if (e.keyCode === 13 && (e.ctrlKey || e.metaKey || e.altKey)) {\n      e.stopPropagation();\n      this.applyChanges();\n    }\n  };\n\n  setPendingValue = (param, value, isDirty) => {\n    const { onPendingValuesChange } = this.props;\n    this.setState(({ parameters }) => {\n      if (isDirty) {\n        param.setPendingValue(value);\n      } else {\n        param.clearPendingValue();\n      }\n      onPendingValuesChange();\n      return { parameters };\n    });\n  };\n\n  moveParameter = ({ oldIndex, newIndex }) => {\n    const { onParametersEdit } = this.props;\n    if (oldIndex !== newIndex) {\n      this.setState(({ parameters }) => {\n        parameters.splice(newIndex, 0, parameters.splice(oldIndex, 1)[0]);\n        onParametersEdit(parameters);\n        return { parameters };\n      });\n    }\n  };\n\n  applyChanges = () => {\n    const { onValuesChange, disableUrlUpdate } = this.props;\n    this.setState(({ parameters }) => {\n      const parametersWithPendingValues = parameters.filter(p => p.hasPendingValue);\n      forEach(parameters, p => p.applyPendingValue());\n      if (!disableUrlUpdate) {\n        updateUrl(parameters);\n      }\n      onValuesChange(parametersWithPendingValues);\n      return { parameters };\n    });\n  };\n\n  showParameterSettings = (parameter, index) => {\n    const { onParametersEdit } = this.props;\n    EditParameterSettingsDialog.showModal({ parameter }).onClose(updated => {\n      this.setState(({ parameters }) => {\n        const updatedParameter = extend(parameter, updated);\n        parameters[index] = createParameter(updatedParameter, updatedParameter.parentQueryId);\n        onParametersEdit(parameters);\n        return { parameters };\n      });\n    });\n  };\n\n  renderParameter(param, index) {\n    const { editable } = this.props;\n    return (\n      <div key={param.name} className=\"di-block\" data-test={`ParameterName-${param.name}`}>\n        <div className=\"parameter-heading\">\n          <label>{param.title || toHuman(param.name)}</label>\n          {editable && (\n            <PlainButton\n              className=\"btn btn-default btn-xs m-l-5\"\n              aria-label=\"Edit\"\n              onClick={() => this.showParameterSettings(param, index)}\n              data-test={`ParameterSettings-${param.name}`}\n              type=\"button\">\n              <i className=\"fa fa-cog\" aria-hidden=\"true\" />\n            </PlainButton>\n          )}\n        </div>\n        <ParameterValueInput\n          type={param.type}\n          value={param.normalizedValue}\n          parameter={param}\n          enumOptions={param.enumOptions}\n          queryId={param.queryId}\n          onSelect={(value, isDirty) => this.setPendingValue(param, value, isDirty)}\n        />\n      </div>\n    );\n  }\n\n  render() {\n    const { parameters } = this.state;\n    const { sortable, appendSortableToParent } = this.props;\n    const dirtyParamCount = size(filter(parameters, \"hasPendingValue\"));\n\n    return (\n      <SortableContainer\n        disabled={!sortable}\n        axis=\"xy\"\n        useDragHandle\n        lockToContainerEdges\n        helperClass=\"parameter-dragged\"\n        helperContainer={containerEl => (appendSortableToParent ? containerEl : document.body)}\n        updateBeforeSortStart={this.onBeforeSortStart}\n        onSortEnd={this.moveParameter}\n        containerProps={{\n          className: \"parameter-container\",\n          onKeyDown: dirtyParamCount ? this.handleKeyDown : null,\n        }}>\n        {parameters.map((param, index) => (\n          <SortableElement key={param.name} index={index}>\n            <div\n              className=\"parameter-block\"\n              data-editable={sortable || null}\n              data-test={`ParameterBlock-${param.name}`}>\n              {sortable && <DragHandle data-test={`DragHandle-${param.name}`} />}\n              {this.renderParameter(param, index)}\n            </div>\n          </SortableElement>\n        ))}\n        <ParameterApplyButton onClick={this.applyChanges} paramCount={dirtyParamCount} />\n      </SortableContainer>\n    );\n  }\n}\n","import React, { useMemo, useState, useEffect } from \"react\";\nimport moment from \"moment\";\nimport PropTypes from \"prop-types\";\nimport { Moment } from \"@/components/proptypes\";\n\nexport default function Timer({ from }) {\n  const startTime = useMemo(() => moment(from).valueOf(), [from]);\n  const [value, setValue] = useState(null);\n\n  useEffect(() => {\n    function update() {\n      const diff = moment.now() - startTime;\n      const format = diff > 1000 * 60 * 60 ? \"HH:mm:ss\" : \"mm:ss\"; // no HH under an hour\n      setValue(moment.utc(diff).format(format));\n    }\n    update();\n\n    const timer = setInterval(update, 1000);\n    return () => clearInterval(timer);\n  }, [startTime]);\n\n  return <span className=\"rd-timer\">{value}</span>;\n}\n\nTimer.propTypes = {\n  from: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.instanceOf(Date), Moment]),\n};\n\nTimer.defaultProps = {\n  from: null,\n};\n","import React from \"react\";\nimport { VisualizationType, registeredVisualizations } from \"@/components/chart/index\";\n\nimport \"./VisualizationName.less\";\n\nfunction VisualizationName({ visualization }) {\n  const config = registeredVisualizations[visualization.type];\n  return (\n    <span className=\"visualization-name\">\n      {config && visualization.name !== config.name ? visualization.name : null}\n    </span>\n  );\n}\n\nVisualizationName.propTypes = {\n  visualization: VisualizationType.isRequired,\n};\n\nexport default VisualizationName;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { VisualizationType } from \"@/components/chart/visualizations/prop-types\"; \nimport Link from \"@/components/Link\";\nimport VisualizationName from \"@/components/visualizations/VisualizationName\";\n\nimport \"./QueryLink.less\";\n\nfunction QueryLink({ query, visualization, readOnly }) {\n  const getUrl = () => {\n    let hash = null;\n    if (visualization) {\n      if (visualization.type === \"TABLE\") {\n        // link to hard-coded table tab instead of the (hidden) visualization tab\n        hash = \"table\";\n      } else {\n        hash = visualization.id;\n      }\n    }\n\n    return query.getUrl(false, hash);\n  };\n\n  const QueryLinkWrapper = props => (readOnly ? <span {...props} /> : <Link href={getUrl()} {...props} />);\n\n  return (\n    <QueryLinkWrapper className=\"query-link\">\n      <VisualizationName visualization={visualization} /> <span>{query.name}</span>\n    </QueryLinkWrapper>\n  );\n}\n\nQueryLink.propTypes = {\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  visualization: VisualizationType,\n  readOnly: PropTypes.bool,\n};\n\nQueryLink.defaultProps = {\n  visualization: null,\n  readOnly: false,\n};\n\nexport default QueryLink;\n","import { isArray, indexOf, get, map, includes, every, some, toNumber } from \"lodash\";\nimport moment from \"moment\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Select from \"antd/lib/select\";\nimport { formatColumnValue } from \"@/lib/utils\";\n\nconst ALL_VALUES = \"###Redash::Filters::SelectAll###\";\nconst NONE_VALUES = \"###Redash::Filters::Clear###\";\n\nexport const FilterType = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  friendlyName: PropTypes.string.isRequired,\n  multiple: PropTypes.bool,\n  current: PropTypes.oneOfType([PropTypes.any, PropTypes.arrayOf(PropTypes.any)]),\n  values: PropTypes.arrayOf(PropTypes.any).isRequired,\n});\n\nexport const FiltersType = PropTypes.arrayOf(FilterType);\n\nfunction createFilterChangeHandler(filters, onChange) {\n  return (filter, values) => {\n    if (isArray(values)) {\n      values = map(values, value => filter.values[toNumber(value.key)] || value.key);\n    } else {\n      const _values = filter.values[toNumber(values.key)];\n      values = _values !== undefined ? _values : values.key;\n    }\n\n    if (filter.multiple && includes(values, ALL_VALUES)) {\n      values = [...filter.values];\n    }\n    if (filter.multiple && includes(values, NONE_VALUES)) {\n      values = [];\n    }\n    filters = map(filters, f => (f.name === filter.name ? { ...filter, current: values } : f));\n    onChange(filters);\n  };\n}\n\nexport function filterData(rows, filters = []) {\n  if (!isArray(rows)) {\n    return [];\n  }\n\n  let result = rows;\n\n  if (isArray(filters) && filters.length > 0) {\n    // \"every\" field's value should match \"some\" of corresponding filter's values\n    result = result.filter(row =>\n      every(filters, filter => {\n        const rowValue = row[filter.name];\n        const filterValues = isArray(filter.current) ? filter.current : [filter.current];\n        return some(filterValues, filterValue => {\n          if (moment.isMoment(rowValue)) {\n            return rowValue.isSame(filterValue);\n          }\n          // We compare with either the value or the String representation of the value,\n          // because Select2 casts true/false to \"true\"/\"false\".\n          return filterValue === rowValue || String(rowValue) === filterValue;\n        });\n      })\n    );\n  }\n\n  return result;\n}\n\nfunction Filters({ filters, onChange }) {\n  if (filters.length === 0) {\n    return null;\n  }\n\n  onChange = createFilterChangeHandler(filters, onChange);\n\n  return (\n    <div className=\"filters-wrapper\" data-test=\"Filters\">\n      <div className=\"container bg-white\">\n        <div className=\"row\">\n          {map(filters, filter => {\n            const options = map(filter.values, (value, index) => (\n              <Select.Option key={index}>{formatColumnValue(value, get(filter, \"column.type\"))}</Select.Option>\n            ));\n\n            return (\n              <div\n                key={filter.name}\n                className=\"col-sm-6 p-l-0 filter-container\"\n                data-test={`FilterName-${filter.name}`}>\n                <label>{filter.friendlyName}</label>\n                {options.length === 0 && <Select className=\"w-100\" disabled value=\"No values\" />}\n                {options.length > 0 && (\n                  <Select\n                    labelInValue\n                    className=\"w-100\"\n                    mode={filter.multiple ? \"multiple\" : \"default\"}\n                    value={\n                      isArray(filter.current)\n                        ? map(filter.current, value => ({\n                            key: `${indexOf(filter.values, value)}`,\n                            label: formatColumnValue(value),\n                          }))\n                        : { key: `${indexOf(filter.values, filter.current)}`, label: formatColumnValue(filter.current) }\n                    }\n                    allowClear={filter.multiple}\n                    optionFilterProp=\"children\"\n                    showSearch\n                    maxTagCount={3}\n                    maxTagTextLength={10}\n                    maxTagPlaceholder={num => `+${num.length} more`}\n                    onChange={values => onChange(filter, values)}>\n                    {!filter.multiple && options}\n                    {filter.multiple && [\n                      <Select.Option key={NONE_VALUES} data-test=\"ClearOption\">\n                        <i className=\"fa fa-square-o m-r-5\" aria-hidden=\"true\" />\n                        {window.W_L.clear}\n                      </Select.Option>,\n                      <Select.Option key={ALL_VALUES} data-test=\"SelectAllOption\">\n                        <i className=\"fa fa-check-square-o m-r-5\" aria-hidden=\"true\" />\n                        {window.W_L.select_all}\n                      </Select.Option>,\n                      <Select.OptGroup key=\"Values\" label={window.W_L.value}>\n                        {options}\n                      </Select.OptGroup>,\n                    ]}\n                  </Select>\n                )}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nFilters.propTypes = {\n  filters: FiltersType.isRequired,\n  onChange: PropTypes.func, // (name, value) => void\n};\n\nFilters.defaultProps = {\n  onChange: () => {},\n};\n\nexport default Filters;\n","import { useMemo } from \"react\";\nimport { get, invoke } from \"lodash\";\n\nfunction getQueryResultData(queryResult, queryResultStatus = null) {\n  return {\n    status: queryResultStatus || invoke(queryResult, \"getStatus\") || null,\n    columns: invoke(queryResult, \"getColumns\") || [],\n    rows: invoke(queryResult, \"getData\") || [],\n    filters: invoke(queryResult, \"getFilters\") || [],\n    updatedAt: invoke(queryResult, \"getUpdatedAt\") || null,\n    retrievedAt: get(queryResult, \"query_result.retrieved_at\", null),\n    truncated: invoke(queryResult, \"getTruncated\") || null,\n    log: invoke(queryResult, \"getLog\") || [],\n    error: invoke(queryResult, \"getError\") || null,\n    runtime: invoke(queryResult, \"getRuntime\") || null,\n    metadata: get(queryResult, \"query_result.data.metadata\", {}),\n  };\n}\n\nexport default function useQueryResultData(queryResult) {\n  // make sure it re-executes when queryResult status changes\n  const queryResultStatus = invoke(queryResult, \"getStatus\");\n  return useMemo(() => getQueryResultData(queryResult, queryResultStatus), [queryResult, queryResultStatus]);\n}\n","import { isFunction, noop } from \"lodash\";\nimport { useRef, useCallback } from \"react\";\n\n// This hook wraps a potentially changeable function object and always returns the same\n// function so it's safe to use it with other hooks: wrapper function stays the same,\n// but will always call a latest wrapped function.\n// A quick note regarding `react-hooks/exhaustive-deps`: since wrapper function doesn't\n// change, it's safe to use it as a dependency, it will never trigger other hooks.\nexport default function useImmutableCallback(callback) {\n  const callbackRef = useRef();\n  callbackRef.current = isFunction(callback) ? callback : noop;\n\n  return useCallback((...args) => callbackRef.current(...args), []);\n}\n","import React from \"react\";\nimport { pick } from \"lodash\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport Link from \"@/components/Link\";\nimport { Renderer as VisRenderer, Editor as VisEditor } from \"@/components/chart/visualizations\";\nimport {updateVisualizationsSettings} from \"@/components/chart/visualizations/visualizationsSettings\"\nimport { clientConfig } from \"@/services/auth\";\n\nimport countriesDataUrl from \"./countries.geo.json\";\nimport usaDataUrl from \"./usa-albers.geo.json\";\nimport subdivJapanDataUrl from \"./japan.prefectures.geo.json\";\nimport chinaDataUrl from \"./china/china.geo.json\";\nimport BeiJing from \"./china/110000.geo.json\";\nimport TianJing from \"./china/120000.geo.json\";\nimport HeBei from \"./china/130000.geo.json\";\nimport ShanX from \"./china/140000.geo.json\";\nimport NeiMengGu from \"./china/150000.geo.json\";\nimport LiaoNing from \"./china/210000.geo.json\";\nimport JiLin from \"./china/220000.geo.json\";\nimport HeiLongJiang from \"./china/230000.geo.json\";\nimport ShangHi from \"./china/310000.geo.json\";\nimport JiangSu from \"./china/320000.geo.json\";\nimport ZheJiang from \"./china/330000.geo.json\";\nimport AnHui from \"./china/340000.geo.json\";\nimport FuJian from \"./china/350000.geo.json\";\nimport JiangXi from \"./china/360000.geo.json\";\nimport ShanDong from \"./china/370000.geo.json\";\nimport HeNan from \"./china/410000.geo.json\";\nimport HuBei from \"./china/420000.geo.json\";\nimport HuNan from \"./china/430000.geo.json\";\nimport GuangDong from \"./china/440000.geo.json\";\nimport GuangXi from \"./china/450000.geo.json\";\nimport HaiNan from \"./china/460000.geo.json\";\nimport ChongQing from \"./china/500000.geo.json\";\nimport SiChuan from \"./china/510000.geo.json\";\nimport GuiZhou from \"./china/520000.geo.json\";\nimport YunNan from \"./china/530000.geo.json\";\nimport XiZang from \"./china/540000.geo.json\";\nimport ShanXi from \"./china/610000.geo.json\";\nimport GanSu from \"./china/620000.geo.json\";\nimport QingHai from \"./china/630000.geo.json\";\nimport NingXia from \"./china/640000.geo.json\";\nimport XinJiang from \"./china/650000.geo.json\";\nimport TaiWan from \"./china/710000.geo.json\";\nimport HongKong from \"./china/810000.geo.json\";\nimport AoMen from \"./china/820000.geo.json\";\nfunction wrapComponentWithSettings(WrappedComponent) {\n  return function VisualizationComponent(props) {\n    updateVisualizationsSettings({\n      HelpTriggerComponent: HelpTrigger,\n      LinkComponent: Link,\n      choroplethAvailableMaps: {\n        countries: {\n          name: window.W_L.country,\n          url: countriesDataUrl,\n          fieldNames: {\n            name: window.W_L.short_name,\n            name_long: window.W_L.full_name,\n            abbrev: window.W_L.abbreviated_name,\n            iso_a2: \"ISO code(2 letters)\",\n            iso_a3: \"ISO code(3 letters)\",\n            iso_n3: \"ISO code(3 digits)\",\n          },\n        },\n        china: {\n          name: \"中国行政区划图\",\n          url: chinaDataUrl,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      // china_all_adcode: {\n      //     name: \"(100000)中国省级地图(动态选择)\",\n      //     url: YZ,\n      //     fieldNames: {\n      //         name: \"简称\",\n      //         adcode: \"行政区划编码(6字母)\"\n      //     }\n      // },\n      china_110000: {\n          name: \"(110000)北京市行政区划图\",\n          url: BeiJing,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_120000: {\n          name: \"(120000)天津市行政区划图\",\n          url: TianJing,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_130000: {\n          name: \"(130000)河北省行政区划图\",\n          url: HeBei,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_140000: {\n          name: \"(140000)山西省行政区划图\",\n          url: ShanX,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_150000: {\n          name: \"(150000)内蒙古行政区划图\",\n          url: NeiMengGu,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_210000: {\n          name: \"(210000)辽宁省行政区划图\",\n          url: LiaoNing,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_220000: {\n          name: \"(220000)吉林省行政区划图\",\n          url: JiLin,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_230000: {\n          name: \"(230000)黑龙江省行政区划图\",\n          url: HeiLongJiang,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_310000: {\n          name: \"(310000)上海市行政区划图\",\n          url: ShangHi,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_320000: {\n          name: \"(320000)江苏省行政区划图\",\n          url: JiangSu,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_330000: {\n          name: \"(330000)浙江省行政区划图\",\n          url: ZheJiang,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_340000: {\n          name: \"(340000)安徽省行政区划图\",\n          url: AnHui,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_350000: {\n          name: \"(350000)福建省行政区划图\",\n          url: FuJian,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_360000: {\n          name: \"(360000)江西省行政区划图\",\n          url: JiangXi,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_370000: {\n          name: \"(370000)山东省行政区划图\",\n          url: ShanDong,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_410000: {\n          name: \"(410000)河南省行政区划图\",\n          url: HeNan,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_420000: {\n          name: \"(420000)湖北省行政区划图\",\n          url: HuBei,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_430000: {\n          name: \"(430000)湖南省行政区划图\",\n          url: HuNan,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_440000: {\n          name: \"(440000)广东省行政区划图\",\n          url: GuangDong,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_450000: {\n          name: \"(450000)广西行政区划图\",\n          url: GuangXi,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_460000: {\n          name: \"(460000)海南省行政区划图\",\n          url: HaiNan,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_500000: {\n          name: \"(500000)重庆市行政区划图\",\n          url: ChongQing,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_510000: {\n          name: \"(510000)四川省行政区划图\",\n          url: SiChuan,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_520000: {\n          name: \"(520000)贵州省行政区划图\",\n          url: GuiZhou,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_530000: {\n          name: \"(530000)云南省行政区划图\",\n          url: YunNan,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_540000: {\n          name: \"(540000)西藏行政区划图\",\n          url: XiZang,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_610000: {\n          name: \"(610000)陕西省行政区划图\",\n          url: ShanXi,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_620000: {\n          name: \"(620000)甘肃省行政区划图\",\n          url: GanSu,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_630000: {\n          name: \"(630000)青海省行政区划图\",\n          url: QingHai,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_640000: {\n          name: \"(640000)宁夏行政区划图\",\n          url: NingXia,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_650000: {\n          name: \"(650000)新疆行政区划图\",\n          url: XinJiang,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_710000: {\n          name: \"(710000)台湾行政区划图\",\n          url: TaiWan,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_810000: {\n          name: \"(810000)香港行政区划图\",\n          url: HongKong,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n      china_820000: {\n          name: \"(820000)澳门行政区划图\",\n          url: AoMen,\n          fieldNames: {\n              name: \"简称\",\n              adcode: \"行政区划编码(6字母)\"\n          }\n      },\n        usa: {\n          name: \"USA\",\n          url: usaDataUrl,\n          fieldNames: {\n            name: \"Name\",\n            ns_code: \"USA ANSI Code(8 character)\",\n            geoid: \"Geographic ID\",\n            usps_abbrev: \"USPS Abbreviation\",\n            fips_code: \"FIPS Code (2-character)\",\n          },\n        },\n        subdiv_japan: {\n          name: \"Japan/Prefectures\", \n          url: subdivJapanDataUrl,\n          fieldNames: {\n            name: \"Name\",\n            name_alt: \"Name (alternative)\",\n            name_local: \"Name (local)\",\n            iso_3166_2: \"ISO-3166-2\",\n            postal: \"Postal Code\",\n            type: \"Type\",\n            type_en: \"Type (EN)\",\n            region: \"Region\",\n            region_code: \"Region Code\",\n          },\n        },\n      },\n      ...pick(clientConfig, [\n        \"dateFormat\",\n        \"dateTimeFormat\",\n        \"integerFormat\",\n        \"floatFormat\",\n        \"booleanValues\",\n        \"tableCellMaxJSONSize\",\n        \"allowCustomJSVisualizations\",\n        \"hidePlotlyModeBar\",\n      ]),\n    });\n\n    return <WrappedComponent {...props} />;\n  };\n}\n\nexport const Renderer = wrapComponentWithSettings(VisRenderer);\nexport const Editor = wrapComponentWithSettings(VisEditor);\n","import { isEqual } from \"lodash\";\nimport React, { useEffect, useRef } from \"react\";\nimport ErrorBoundary, { ErrorMessage } from \"@/components/chart/components/ErrorBoundary\";\nimport { RendererPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport registeredVisualizations from \"@/components/chart/visualizations/registeredVisualizations\";\n\n/*\n(ts-migrate) TODO: Migrate the remaining prop types\n...RendererPropTypes\n*/\ntype Props = {\n  type: string;\n  addonBefore?: React.ReactNode;\n  addonAfter?: React.ReactNode;\n} & typeof RendererPropTypes;\n\nexport default function Renderer({\n  type,\n  data,\n  options: optionsProp,\n  visualizationName,\n  addonBefore,\n  addonAfter,\n  ...otherProps\n}: Props) {\n  const lastOptions = useRef();\n  const errorHandlerRef = useRef();\n\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  const { Renderer, getOptions } = registeredVisualizations[type];\n\n  // Avoid unnecessary updates (which may be expensive or cause issues with\n  // internal state of some visualizations like Table) - compare options deeply\n  // and use saved reference if nothing changed\n  // More details: https://github.com/getredash/redash/pull/3963#discussion_r306935810\n  let options = getOptions(optionsProp, data);\n  if (isEqual(lastOptions.current, options)) {\n    options = lastOptions.current;\n  }\n  lastOptions.current = options;\n\n  useEffect(() => {\n    if (errorHandlerRef.current) {\n      // @ts-expect-error ts-migrate(2532) FIXME: Object is possibly 'undefined'.\n      errorHandlerRef.current.reset();\n    }\n  }, [optionsProp, data]);\n\n  return (\n    <div className=\"visualization-renderer\">\n      {addonBefore}\n      {/* @ts-expect-error ts-migrate(2769) FIXME: No overload matches this call. */}\n      <ErrorBoundary\n        ref={errorHandlerRef}\n        renderError={() => <ErrorMessage>{window.W_L.Error_while_rendering_visualization}</ErrorMessage>}>\n        <div className=\"visualization-renderer-wrapper\">\n          <Renderer options={options} data={data} visualizationName={visualizationName} {...otherProps} />\n        </div>\n      </ErrorBoundary>\n      {addonAfter}\n    </div>\n  );\n}\n","import React, { useMemo } from \"react\";\nimport { EditorPropTypes } from \"@/components/chart/visualizations/prop-types\";\nimport registeredVisualizations from \"@/components/chart/visualizations/registeredVisualizations\";\n\n/*\n(ts-migrate) TODO: Migrate the remaining prop types\n...EditorPropTypes\n*/\ntype Props = {\n  type: string;\n} & typeof EditorPropTypes;\n\nexport default function Editor({ type, options: optionsProp, data, ...otherProps }: Props) {\n  // @ts-expect-error ts-migrate(7053) FIXME: Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n  const { Editor, getOptions } = registeredVisualizations[type];\n  const options = useMemo(() => getOptions(optionsProp, data), [optionsProp, data]);\n\n  return <Editor options={options} data={data} {...otherProps} />;\n}\n","import { isEqual, map, find, fromPairs } from \"lodash\";\nimport React, { useState, useMemo, useEffect, useRef } from \"react\";\nimport PropTypes from \"prop-types\";\nimport useQueryResultData from \"@/lib/useQueryResultData\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\nimport Filters, { FiltersType, filterData } from \"@/components/Filters\";\nimport { VisualizationType } from \"@/components/chart/visualizations/prop-types\";\nimport { Renderer } from \"@/components/visualizations/visualizationComponents\";\n\nfunction combineFilters(localFilters, globalFilters) {\n  // tiny optimization - to avoid unnecessary updates\n  if (localFilters.length === 0 || globalFilters.length === 0) {\n    return localFilters;\n  }\n\n  return map(localFilters, localFilter => {\n    const globalFilter = find(globalFilters, f => f.name === localFilter.name);\n    if (globalFilter) {\n      return {\n        ...localFilter,\n        current: globalFilter.current,\n      };\n    }\n    return localFilter;\n  });\n}\n\nfunction areFiltersEqual(a, b) {\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  a = fromPairs(map(a, item => [item.name, item]));\n  b = fromPairs(map(b, item => [item.name, item]));\n\n  return isEqual(a, b);\n}\n\nexport default function VisualizationRenderer(props) {\n  const data = useQueryResultData(props.queryResult);\n  const [filters, setFilters] = useState(() => combineFilters(data.filters, props.filters)); // lazy initialization\n  const filtersRef = useRef();\n  filtersRef.current = filters;\n\n  const handleFiltersChange = useImmutableCallback(newFilters => {\n    if (!areFiltersEqual(newFilters, filters)) {\n      setFilters(newFilters);\n      props.onFiltersChange(newFilters);\n    }\n  });\n\n  // Reset local filters when query results updated\n  useEffect(() => {\n    handleFiltersChange(combineFilters(data.filters, props.filters));\n  }, [data.filters, props.filters, handleFiltersChange]);\n\n  // Update local filters when global filters changed.\n  // For correct behavior need to watch only `props.filters` here,\n  // therefore using ref to access current local filters\n  useEffect(() => {\n    handleFiltersChange(combineFilters(filtersRef.current, props.filters));\n  }, [props.filters, handleFiltersChange]);\n\n  const filteredData = useMemo(\n    () => ({\n      columns: data.columns,\n      rows: filterData(data.rows, filters),\n    }),\n    [data, filters]\n  );\n\n  const { showFilters, visualization } = props;\n\n  let options = { ...visualization.options };\n\n  // define pagination size based on context for Table visualization\n  if (visualization.type === \"TABLE\") {\n    options.paginationSize = props.context === \"widget\" ? \"small\" : \"default\";\n  }\n\n  return (\n    <Renderer\n      key={`visualization${visualization.id}`}\n      type={visualization.type}\n      options={options}\n      data={filteredData}\n      visualizationName={visualization.name}\n      addonBefore={showFilters && <Filters filters={filters} onChange={handleFiltersChange} />}\n    />\n  );\n}\n\nVisualizationRenderer.propTypes = {\n  visualization: VisualizationType.isRequired,\n  queryResult: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  showFilters: PropTypes.bool,\n  filters: FiltersType,\n  onFiltersChange: PropTypes.func,\n  context: PropTypes.oneOf([\"query\", \"widget\"]).isRequired,\n};\n\nVisualizationRenderer.defaultProps = {\n  showFilters: true,\n  filters: [],\n  onFiltersChange: () => {},\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Modal from \"antd/lib/modal\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport { FiltersType } from \"@/components/Filters\";\nimport VisualizationRenderer from \"@/components/visualizations/VisualizationRenderer\";\nimport VisualizationName from \"@/components/visualizations/VisualizationName\";\n\nfunction ExpandedWidgetDialog({ dialog, widget, filters }) {\n  return (\n    <Modal\n      {...dialog.props}\n      title={\n        <>\n          <VisualizationName visualization={widget.visualization} /> <span>{widget.getQuery().name}</span>\n        </>\n      }\n      width=\"95%\"\n      footer={<Button onClick={dialog.dismiss}>{window.W_L.close}</Button>}>\n      <VisualizationRenderer\n        visualization={widget.visualization}\n        queryResult={widget.getQueryResult()}\n        filters={filters}\n        context=\"widget\"\n      />\n    </Modal>\n  );\n}\n\nExpandedWidgetDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  filters: FiltersType,\n};\n\nExpandedWidgetDialog.defaultProps = {\n  filters: [],\n};\n\nexport default wrapDialog(ExpandedWidgetDialog);\n","/* eslint-disable react/no-multi-comp */\n\nimport { isString, extend, each, has, map, includes, findIndex, find, fromPairs, clone, isEmpty } from \"lodash\";\nimport React, { Fragment } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport Select from \"antd/lib/select\";\nimport Table from \"antd/lib/table\";\nimport Popover from \"antd/lib/popover\";\nimport Button from \"antd/lib/button\";\nimport Tag from \"antd/lib/tag\";\nimport Input from \"antd/lib/input\";\nimport Radio from \"antd/lib/radio\";\nimport Form from \"antd/lib/form\";\nimport Tooltip from \"@/components/Tooltip\";\nimport ParameterValueInput from \"@/components/ParameterValueInput\";\nimport { ParameterMappingType } from \"@/services/widget\";\nimport { Parameter, cloneParameter } from \"@/services/parameters\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\n\nimport QuestionCircleFilledIcon from \"@ant-design/icons/QuestionCircleFilled\";\nimport EditOutlinedIcon from \"@ant-design/icons/EditOutlined\";\nimport CloseOutlinedIcon from \"@ant-design/icons/CloseOutlined\";\nimport CheckOutlinedIcon from \"@ant-design/icons/CheckOutlined\";\n\nimport \"./ParameterMappingInput.less\";\n\nexport const MappingType = {\n  DashboardAddNew: \"dashboard-add-new\",\n  DashboardMapToExisting: \"dashboard-map-to-existing\",\n  WidgetLevel: \"widget-level\",\n  StaticValue: \"static-value\",\n};\n\nexport function parameterMappingsToEditableMappings(mappings, parameters, existingParameterNames = []) {\n  return map(mappings, mapping => {\n    const result = extend({}, mapping);\n    const alreadyExists = includes(existingParameterNames, mapping.mapTo);\n    result.param = find(parameters, p => p.name === mapping.name);\n    switch (mapping.type) {\n      case ParameterMappingType.DashboardLevel:\n        result.type = alreadyExists ? MappingType.DashboardMapToExisting : MappingType.DashboardAddNew;\n        result.value = null;\n        break;\n      case ParameterMappingType.StaticValue:\n        result.type = MappingType.StaticValue;\n        result.param = cloneParameter(result.param);\n        result.param.setValue(result.value);\n        break;\n      case ParameterMappingType.WidgetLevel:\n        result.type = MappingType.WidgetLevel;\n        result.value = null;\n        break;\n      // no default\n    }\n    return result;\n  });\n}\n\nexport function editableMappingsToParameterMappings(mappings) {\n  return fromPairs(\n    map(\n      // convert to map\n      mappings,\n      mapping => {\n        const result = extend({}, mapping);\n        switch (mapping.type) {\n          case MappingType.DashboardAddNew:\n            result.type = ParameterMappingType.DashboardLevel;\n            result.value = null;\n            break;\n          case MappingType.DashboardMapToExisting:\n            result.type = ParameterMappingType.DashboardLevel;\n            result.value = null;\n            break;\n          case MappingType.StaticValue:\n            result.type = ParameterMappingType.StaticValue;\n            result.param = cloneParameter(mapping.param);\n            result.param.setValue(result.value);\n            result.value = result.param.value;\n            break;\n          case MappingType.WidgetLevel:\n            result.type = ParameterMappingType.WidgetLevel;\n            result.value = null;\n            break;\n          // no default\n        }\n        delete result.param;\n        return [result.name, result];\n      }\n    )\n  );\n}\n\nexport function synchronizeWidgetTitles(sourceMappings, widgets) {\n  const affectedWidgets = [];\n\n  each(sourceMappings, sourceMapping => {\n    if (sourceMapping.type === ParameterMappingType.DashboardLevel) {\n      each(widgets, widget => {\n        const widgetMappings = widget.options.parameterMappings;\n        each(widgetMappings, widgetMapping => {\n          // check if mapped to the same dashboard-level parameter\n          if (\n            widgetMapping.type === ParameterMappingType.DashboardLevel &&\n            widgetMapping.mapTo === sourceMapping.mapTo\n          ) {\n            // dirty check - update only when needed\n            if (widgetMapping.title !== sourceMapping.title) {\n              widgetMapping.title = sourceMapping.title;\n              affectedWidgets.push(widget);\n            }\n          }\n        });\n      });\n    }\n  });\n\n  return affectedWidgets;\n}\n\nexport class ParameterMappingInput extends React.Component {\n  static propTypes = {\n    mapping: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n    existingParamNames: PropTypes.arrayOf(PropTypes.string),\n    onChange: PropTypes.func,\n    inputError: PropTypes.string,\n  };\n\n  static defaultProps = {\n    mapping: {},\n    existingParamNames: [],\n    onChange: () => {},\n    inputError: null,\n  };\n\n  formItemProps = {\n    labelCol: { span: 5 },\n    wrapperCol: { span: 16 },\n    className: \"form-item\",\n  };\n\n  updateSourceType = type => {\n    let {\n      mapping: { mapTo },\n    } = this.props;\n    const { existingParamNames } = this.props;\n\n    // if mapped name doesn't already exists\n    // default to first select option\n    if (type === MappingType.DashboardMapToExisting && !includes(existingParamNames, mapTo)) {\n      mapTo = existingParamNames[0];\n    }\n\n    this.updateParamMapping({ type, mapTo });\n  };\n\n  updateParamMapping = update => {\n    const { onChange, mapping } = this.props;\n    const newMapping = extend({}, mapping, update);\n    if (newMapping.value !== mapping.value) {\n      newMapping.param = cloneParameter(newMapping.param);\n      newMapping.param.setValue(newMapping.value);\n    }\n    if (has(update, \"type\")) {\n      if (update.type === MappingType.StaticValue) {\n        newMapping.value = newMapping.param.value;\n      } else {\n        newMapping.value = null;\n      }\n    }\n    onChange(newMapping);\n  };\n\n  renderMappingTypeSelector() {\n    const noExisting = isEmpty(this.props.existingParamNames);\n    return (\n      <Radio.Group value={this.props.mapping.type} onChange={e => this.updateSourceType(e.target.value)}>\n        <Radio className=\"radio\" value={MappingType.DashboardAddNew} data-test=\"NewDashboardParameterOption\">\n          {window.W_L.new_dashboard_parm}\n        </Radio>\n        <Radio className=\"radio\" value={MappingType.DashboardMapToExisting} disabled={noExisting}>\n          {window.W_L.exist_dashboard_parm}{\" \"}\n          {noExisting ? (\n            <Tooltip title={window.W_L.dashboard_param_error}>\n              <QuestionCircleFilledIcon />\n            </Tooltip>\n          ) : null}\n        </Radio>\n        <Radio className=\"radio\" value={MappingType.WidgetLevel} data-test=\"WidgetParameterOption\">\n          {window.W_L.widget_parm}\n        </Radio>\n        <Radio className=\"radio\" value={MappingType.StaticValue} data-test=\"StaticValueOption\">\n          {window.W_L.static_value}\n        </Radio>\n      </Radio.Group>\n    );\n  }\n\n  renderDashboardAddNew() {\n    const {\n      mapping: { mapTo },\n    } = this.props;\n    return (\n      <Input\n        value={mapTo}\n        aria-label=\"Parameter name (key)\"\n        onChange={e => this.updateParamMapping({ mapTo: e.target.value })}\n      />\n    );\n  }\n\n  renderDashboardMapToExisting() {\n    const { mapping, existingParamNames } = this.props;\n    const options = map(existingParamNames, paramName => ({ label: paramName, value: paramName }));\n\n    return <Select value={mapping.mapTo} onChange={mapTo => this.updateParamMapping({ mapTo })} options={options} />;\n  }\n\n  renderStaticValue() {\n    const { mapping } = this.props;\n    return (\n      <ParameterValueInput\n        type={mapping.param.type}\n        value={mapping.param.normalizedValue}\n        enumOptions={mapping.param.enumOptions}\n        queryId={mapping.param.queryId}\n        parameter={mapping.param}\n        onSelect={value => this.updateParamMapping({ value })}\n      />\n    );\n  }\n\n  renderInputBlock() {\n    const { mapping } = this.props;\n    switch (mapping.type) {\n      case MappingType.DashboardAddNew:\n        return [\"Key\", window.W_L.enter_parm_name, this.renderDashboardAddNew()];\n      case MappingType.DashboardMapToExisting:\n        return [\"Key\", window.W_L.select_parm, this.renderDashboardMapToExisting()];\n      case MappingType.StaticValue:\n        return [\"Value\", null, this.renderStaticValue()];\n      default:\n        return [];\n    }\n  }\n\n  render() {\n    const { inputError } = this.props;\n    const [label, help, input] = this.renderInputBlock();\n\n    return (\n      <Form layout=\"horizontal\">\n        <Form.Item label={window.W_L.source} {...this.formItemProps}>\n          {this.renderMappingTypeSelector()}\n        </Form.Item>\n        <Form.Item\n          style={{ height: 60, visibility: input ? \"visible\" : \"hidden\" }}\n          label={label}\n          {...this.formItemProps}\n          validateStatus={inputError ? \"error\" : \"\"}\n          help={inputError || help} // empty space so line doesn't collapse\n        >\n          {input}\n        </Form.Item>\n      </Form>\n    );\n  }\n}\n\nclass MappingEditor extends React.Component {\n  static propTypes = {\n    mapping: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    existingParamNames: PropTypes.arrayOf(PropTypes.string).isRequired,\n    onChange: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: false,\n      mapping: clone(this.props.mapping),\n      inputError: null,\n    };\n  }\n\n  onVisibleChange = visible => {\n    if (visible) this.show();\n    else this.hide();\n  };\n\n  onChange = mapping => {\n    let inputError = null;\n\n    if (mapping.type === MappingType.DashboardAddNew) {\n      if (isEmpty(mapping.mapTo)) {\n        inputError = window.W_L.code_mast_have_value;\n      } else if (includes(this.props.existingParamNames, mapping.mapTo)) {\n        inputError = window.W_L.exist_save_parm;\n      }\n    }\n\n    this.setState({ mapping, inputError });\n  };\n\n  save = () => {\n    this.props.onChange(this.props.mapping, this.state.mapping);\n    this.hide();\n  };\n\n  show = () => {\n    this.setState({\n      visible: true,\n      mapping: clone(this.props.mapping), // restore original state\n    });\n  };\n\n  hide = () => {\n    this.setState({ visible: false });\n  };\n\n  renderContent() {\n    const { mapping, inputError } = this.state;\n\n    return (\n      <div className=\"parameter-mapping-editor\" data-test=\"EditParamMappingPopover\">\n        <header>\n          {window.W_L.edit_source_value} <HelpTrigger type=\"VALUE_SOURCE_OPTIONS\" />\n        </header>\n        <ParameterMappingInput\n          mapping={mapping}\n          existingParamNames={this.props.existingParamNames}\n          onChange={this.onChange}\n          inputError={inputError}\n        />\n        <footer>\n          <Button onClick={this.hide}>{window.W_L.cancel}</Button>\n          <Button onClick={this.save} disabled={!!inputError} type=\"primary\">\n            {window.W_L.ok_text}\n          </Button>\n        </footer>\n      </div>\n    );\n  }\n\n  render() {\n    const { visible, mapping } = this.state;\n    return (\n      <Popover\n        placement=\"left\"\n        trigger=\"click\"\n        content={this.renderContent()}\n        visible={visible}\n        onVisibleChange={this.onVisibleChange}>\n        <Button size=\"small\" type=\"dashed\" data-test={`EditParamMappingButton-${mapping.param.name}`}>\n          <EditOutlinedIcon />\n        </Button>\n      </Popover>\n    );\n  }\n}\n\nclass TitleEditor extends React.Component {\n  static propTypes = {\n    existingParams: PropTypes.arrayOf(PropTypes.object),\n    mapping: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    onChange: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    existingParams: [],\n  };\n\n  state = {\n    showPopup: false,\n    title: \"\", // will be set on editing\n  };\n\n  onPopupVisibleChange = showPopup => {\n    this.setState({\n      showPopup,\n      title: showPopup ? this.getMappingTitle() : \"\",\n    });\n  };\n\n  onEditingTitleChange = event => {\n    this.setState({ title: event.target.value });\n  };\n\n  getMappingTitle() {\n    let { mapping } = this.props;\n\n    if (isString(mapping.title) && mapping.title !== \"\") {\n      return mapping.title;\n    }\n\n    // if mapped to dashboard, find source param and return it's title\n    if (mapping.type === MappingType.DashboardMapToExisting) {\n      const source = find(this.props.existingParams, { name: mapping.mapTo });\n      if (source) {\n        mapping = source;\n      }\n    }\n\n    return mapping.title || mapping.param.title;\n  }\n\n  save = () => {\n    const newMapping = extend({}, this.props.mapping, { title: this.state.title });\n    this.props.onChange(newMapping);\n    this.hide();\n  };\n\n  hide = () => {\n    this.setState({ showPopup: false });\n  };\n\n  renderPopover() {\n    const {\n      param: { title: paramTitle },\n    } = this.props.mapping;\n\n    return (\n      <div className=\"parameter-mapping-title-editor\">\n        <Input\n          size=\"small\"\n          value={this.state.title}\n          placeholder={paramTitle}\n          aria-label=\"Edit parameter title\"\n          onChange={this.onEditingTitleChange}\n          onPressEnter={this.save}\n          maxLength={100}\n          autoFocus\n        />\n        <Button size=\"small\" type=\"dashed\" onClick={this.hide}>\n          <CloseOutlinedIcon />\n        </Button>\n        <Button size=\"small\" type=\"dashed\" onClick={this.save}>\n          <CheckOutlinedIcon />\n        </Button>\n      </div>\n    );\n  }\n\n  renderEditButton() {\n    const { mapping } = this.props;\n    if (mapping.type === MappingType.StaticValue) {\n      return (\n        <Tooltip placement=\"right\" title={window.W_L.title_set_hidden_in_widget}>\n          {/* eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex */}\n          <span tabIndex={0}>\n            <i className=\"fa fa-eye-slash\" aria-hidden=\"true\" />\n          </span>\n        </Tooltip>\n      );\n    }\n    return (\n      <Popover\n        placement=\"right\"\n        trigger=\"click\"\n        content={this.renderPopover()}\n        visible={this.state.showPopup}\n        onVisibleChange={this.onPopupVisibleChange}>\n        <Button size=\"small\" type=\"dashed\">\n          <EditOutlinedIcon />\n        </Button>\n      </Popover>\n    );\n  }\n\n  render() {\n    const { mapping } = this.props;\n    // static value are non-editable hence disabled\n    const disabled = mapping.type === MappingType.StaticValue;\n\n    return (\n      <div className={classNames(\"parameter-mapping-title\", { disabled })}>\n        <span className=\"text\">{this.getMappingTitle()}</span>\n        {this.renderEditButton()}\n      </div>\n    );\n  }\n}\n\nexport class ParameterMappingListInput extends React.Component {\n  static propTypes = {\n    mappings: PropTypes.arrayOf(PropTypes.object),\n    existingParams: PropTypes.arrayOf(PropTypes.object),\n    onChange: PropTypes.func,\n  };\n\n  static defaultProps = {\n    mappings: [],\n    existingParams: [],\n    onChange: () => {},\n  };\n\n  static getStringValue(value) {\n    // null\n    if (!value) {\n      return \"\";\n    }\n\n    // range\n    if (value instanceof Object && \"start\" in value && \"end\" in value) {\n      return `${value.start} ~ ${value.end}`;\n    }\n\n    // just to be safe, array or object\n    if (typeof value === \"object\") {\n      return map(value, v => this.getStringValue(v)).join(\", \");\n    }\n\n    // rest\n    return value.toString();\n  }\n\n  static getDefaultValue(mapping, existingParams) {\n    const { type, mapTo, name } = mapping;\n    let { param } = mapping;\n\n    // if mapped to another param, swap 'em\n    if (type === MappingType.DashboardMapToExisting && mapTo !== name) {\n      const mappedTo = find(existingParams, { name: mapTo });\n      if (mappedTo) {\n        // just being safe\n        param = mappedTo;\n      }\n\n      // static type is different since it's fed param.normalizedValue\n    } else if (type === MappingType.StaticValue) {\n      param = cloneParameter(param).setValue(mapping.value);\n    }\n\n    let value = Parameter.getExecutionValue(param);\n\n    // in case of dynamic value display the name instead of value\n    if (param.hasDynamicValue) {\n      value = param.normalizedValue.name;\n    }\n\n    return this.getStringValue(value);\n  }\n\n  static getSourceTypeLabel({ type, mapTo }) {\n    switch (type) {\n      case MappingType.DashboardAddNew:\n      case MappingType.DashboardMapToExisting:\n        return (\n          <Fragment>\n            {window.W_L.dashboard_parm} <Tag className=\"tag\">{mapTo}</Tag>\n          </Fragment>\n        );\n      case MappingType.WidgetLevel:\n        return window.W_L.widget_parm;\n      case MappingType.StaticValue:\n        return window.W_L.static_value;\n      default:\n        return \"\"; // won't happen (typescript-ftw)\n    }\n  }\n\n  updateParamMapping(oldMapping, newMapping) {\n    const mappings = [...this.props.mappings];\n    const index = findIndex(mappings, oldMapping);\n    if (index >= 0) {\n      // This should be the only possible case, but need to handle `else` too\n      mappings[index] = newMapping;\n    } else {\n      mappings.push(newMapping);\n    }\n    this.props.onChange(mappings);\n  }\n\n  render() {\n    const { existingParams } = this.props; // eslint-disable-line react/prop-types\n    const dataSource = this.props.mappings.map(mapping => ({ mapping }));\n\n    return (\n      <div className=\"parameters-mapping-list\">\n        <Table dataSource={dataSource} size=\"middle\" pagination={false} rowKey={(record, idx) => `row${idx}`}>\n          <Table.Column\n            title={window.W_L.name}\n            dataIndex=\"mapping\"\n            key=\"title\"\n            render={mapping => (\n              <TitleEditor\n                existingParams={existingParams}\n                mapping={mapping}\n                onChange={newMapping => this.updateParamMapping(mapping, newMapping)}\n              />\n            )}\n          />\n          <Table.Column\n            title={window.W_L.code}\n            dataIndex=\"mapping\"\n            key=\"keyword\"\n            className=\"keyword\"\n            render={mapping => <code>{`{{ ${mapping.name} }}`}</code>}\n          />\n          <Table.Column\n            title={window.W_L.default_value}\n            dataIndex=\"mapping\"\n            key=\"value\"\n            render={mapping => this.constructor.getDefaultValue(mapping, this.props.existingParams)}\n          />\n          <Table.Column\n            title={window.W_L.source}\n            dataIndex=\"mapping\"\n            key=\"source\"\n            render={mapping => {\n              const existingParamsNames = existingParams\n                .filter(({ type }) => type === mapping.param.type) // exclude mismatching param types\n                .map(({ name }) => name); // keep names only\n\n              return (\n                <Fragment>\n                  {this.constructor.getSourceTypeLabel(mapping)}{\" \"}\n                  <MappingEditor\n                    mapping={mapping}\n                    existingParamNames={existingParamsNames}\n                    onChange={(oldMapping, newMapping) => this.updateParamMapping(oldMapping, newMapping)}\n                  />\n                </Fragment>\n              );\n            }}\n          />\n        </Table>\n      </div>\n    );\n  }\n}\n","import { isMatch, map, find, sortBy } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Modal from \"antd/lib/modal\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport {\n  MappingType,\n  ParameterMappingListInput,\n  parameterMappingsToEditableMappings,\n  editableMappingsToParameterMappings,\n  synchronizeWidgetTitles,\n} from \"@/components/ParameterMappingInput\";\nimport notification from \"@/services/notification\";\n\nexport function getParamValuesSnapshot(mappings, dashboardParameters) {\n  return map(\n    sortBy(mappings, m => m.name),\n    m => {\n      let param;\n      switch (m.type) {\n        case MappingType.StaticValue:\n          return [m.name, m.value];\n        case MappingType.WidgetLevel:\n          return [m.name, m.param.value];\n        case MappingType.DashboardAddNew:\n        case MappingType.DashboardMapToExisting:\n          param = find(dashboardParameters, p => p.name === m.mapTo);\n          return [m.name, param ? param.value : null];\n        // no default\n      }\n    }\n  );\n}\n\nclass EditParameterMappingsDialog extends React.Component {\n  static propTypes = {\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    dialog: DialogPropType.isRequired,\n  };\n\n  originalParamValuesSnapshot = null;\n\n  constructor(props) {\n    super(props);\n\n    const parameterMappings = parameterMappingsToEditableMappings(\n      props.widget.options.parameterMappings,\n      props.widget.query.getParametersDefs(),\n      map(this.props.dashboard.getParametersDefs(), p => p.name)\n    );\n\n    this.originalParamValuesSnapshot = getParamValuesSnapshot(\n      parameterMappings,\n      this.props.dashboard.getParametersDefs()\n    );\n\n    this.state = {\n      saveInProgress: false,\n      parameterMappings,\n    };\n  }\n\n  saveWidget() {\n    const widget = this.props.widget;\n\n    this.setState({ saveInProgress: true });\n\n    const newMappings = editableMappingsToParameterMappings(this.state.parameterMappings);\n    widget.options.parameterMappings = newMappings;\n\n    const valuesChanged = !isMatch(\n      this.originalParamValuesSnapshot,\n      getParamValuesSnapshot(this.state.parameterMappings, this.props.dashboard.getParametersDefs())\n    );\n\n    const widgetsToSave = [\n      widget,\n      ...synchronizeWidgetTitles(widget.options.parameterMappings, this.props.dashboard.widgets),\n    ];\n\n    Promise.all(map(widgetsToSave, w => w.save()))\n      .then(() => {\n        this.props.dialog.close(valuesChanged);\n      })\n      .catch(() => {\n        notification.error(\"Widget cannot be updated\");\n      })\n      .finally(() => {\n        this.setState({ saveInProgress: false });\n      });\n  }\n\n  updateParamMappings(parameterMappings) {\n    this.setState({ parameterMappings });\n  }\n\n  render() {\n    const { dialog } = this.props;\n    return (\n      <Modal\n        {...dialog.props}\n        title={window.W_L.params}\n        okText = {window.W_L.ok_text}\n        cancelText ={window.W_L.cancel}\n        onOk={() => this.saveWidget()}\n        okButtonProps={{ loading: this.state.saveInProgress }}\n        width={700}>\n        {this.state.parameterMappings.length > 0 && (\n          <ParameterMappingListInput\n            mappings={this.state.parameterMappings}\n            existingParams={this.props.dashboard.getParametersDefs()}\n            onChange={mappings => this.updateParamMappings(mappings)}\n          />\n        )}\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(EditParameterMappingsDialog);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { isEmpty } from \"lodash\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Modal from \"antd/lib/modal\";\nimport Menu from \"antd/lib/menu\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { Moment } from \"@/components/proptypes\";\nimport PlainButton from \"@/components/PlainButton\";\n\nimport \"./Widget.less\";\n\nfunction WidgetDropdownButton({ extraOptions, showDeleteOption, onDelete }) {\n  const WidgetMenu = (\n    <Menu data-test=\"WidgetDropdownButtonMenu\">\n      {extraOptions}\n      {showDeleteOption && extraOptions && <Menu.Divider />}\n      {showDeleteOption && <Menu.Item onClick={onDelete}>{window.W_L.delete}</Menu.Item>}\n    </Menu>\n  );\n\n  return (\n    <div className=\"widget-menu-regular\">\n      <Dropdown overlay={WidgetMenu} placement=\"bottomRight\" trigger={[\"click\"]}>\n        <PlainButton className=\"action p-l-15 p-r-15\" data-test=\"WidgetDropdownButton\" aria-label=\"More options\">\n          <i className=\"zmdi zmdi-more-vert\" aria-hidden=\"true\" />\n        </PlainButton>\n      </Dropdown>\n    </div>\n  );\n}\n\nWidgetDropdownButton.propTypes = {\n  extraOptions: PropTypes.node,\n  showDeleteOption: PropTypes.bool,\n  onDelete: PropTypes.func,\n};\n\nWidgetDropdownButton.defaultProps = {\n  extraOptions: null,\n  showDeleteOption: false,\n  onDelete: () => {},\n};\n\nfunction WidgetDeleteButton({ onClick }) {\n  return (\n    <div className=\"widget-menu-remove\">\n      <PlainButton\n        className=\"action\"\n        title=\"{window.W_L.delete}\"\n        onClick={onClick}\n        data-test=\"WidgetDeleteButton\"\n        aria-label=\"Close\">\n        <i className=\"zmdi zmdi-close\" aria-hidden=\"true\" />\n      </PlainButton>\n    </div>\n  );\n}\n\nWidgetDeleteButton.propTypes = { onClick: PropTypes.func };\nWidgetDeleteButton.defaultProps = { onClick: () => {} };\n\nclass Widget extends React.Component {\n  static propTypes = {\n    widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    className: PropTypes.string,\n    children: PropTypes.node,\n    header: PropTypes.node,\n    footer: PropTypes.node,\n    canEdit: PropTypes.bool,\n    isPublic: PropTypes.bool,\n    refreshStartedAt: Moment,\n    menuOptions: PropTypes.node,\n    tileProps: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n    onDelete: PropTypes.func,\n  };\n\n  static defaultProps = {\n    className: \"\",\n    children: null,\n    header: null,\n    footer: null,\n    canEdit: false,\n    isPublic: false,\n    refreshStartedAt: null,\n    menuOptions: null,\n    tileProps: {},\n    onDelete: () => {},\n  };\n\n  componentDidMount() {\n    const { widget } = this.props;\n    recordEvent(\"view\", \"widget\", widget.id);\n  }\n\n  deleteWidget = () => {\n    const { widget, onDelete } = this.props;\n\n    Modal.confirm({\n      title: window.W_L.delete_widget,\n      content: window.W_L.delete_widget_confirm,\n      cancelText: window.W_L.cancel,\n      okText: window.W_L.ok_text,\n      okType: \"danger\",\n      onOk: () => widget.delete().then(onDelete),\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  };\n\n  render() {\n    const { className, children, header, footer, canEdit, isPublic, menuOptions, tileProps } = this.props;\n    const showDropdownButton = !isPublic && (canEdit || !isEmpty(menuOptions));\n    return (\n      <div className=\"widget-wrapper\">\n        <div className={cx(\"tile body-container\", className)} {...tileProps}>\n          <div className=\"widget-actions\">\n            {showDropdownButton && (\n              <WidgetDropdownButton\n                extraOptions={menuOptions}\n                showDeleteOption={canEdit}\n                onDelete={this.deleteWidget}\n              />\n            )}\n            {canEdit && <WidgetDeleteButton onClick={this.deleteWidget} />}\n          </div>\n          <div className=\"body-row widget-header\">{header}</div>\n          {children}\n          {footer && <div className=\"body-row tile__bottom-control\">{footer}</div>}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Widget;\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { compact, isEmpty, invoke, map } from \"lodash\";\nimport { markdown } from \"markdown\";\nimport cx from \"classnames\";\nimport Menu from \"antd/lib/menu\";\nimport HtmlContent from \"@/components/chart/components/HtmlContent\";\nimport { currentUser } from \"@/services/auth\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { formatDateTime } from \"@/lib/utils\";\nimport Link from \"@/components/Link\";\nimport Parameters from \"@/components/Parameters\";\nimport TimeAgo from \"@/components/TimeAgo\";\n// import Modal from \"antd/lib/modal\";\nimport Timer from \"@/components/Timer\";\nimport { Moment } from \"@/components/proptypes\";\nimport QueryLink from \"@/components/QueryLink\";\nimport { FiltersType } from \"@/components/Filters\";\nimport PlainButton from \"@/components/PlainButton\";\nimport ExpandedWidgetDialog from \"@/components/dashboards/ExpandedWidgetDialog\";\nimport EditParameterMappingsDialog from \"@/components/dashboards/EditParameterMappingsDialog\";\nimport VisualizationRenderer from \"@/components/visualizations/VisualizationRenderer\";\n\nimport Widget from \"./Widget\";\n\nfunction visualizationWidgetMenuOptions({ widget, canEditDashboard, onParametersEdit,isShowReport }) {\n  const canViewQuery = currentUser.hasPermission(\"view_query\");\n  const canEditParameters = canEditDashboard && !isEmpty(invoke(widget, \"query.getParametersDefs\"));\n  const widgetQueryResult = widget.getQueryResult();\n  const isQueryResultEmpty = !widgetQueryResult || !widgetQueryResult.isEmpty || widgetQueryResult.isEmpty();\n\n  const downloadLink = fileType => widgetQueryResult.getLink(widget.getQuery().id, fileType);\n  const downloadName = fileType => widgetQueryResult.getName(widget.getQuery().name, fileType);\n  return compact([\n    <Menu.Item key=\"download_csv\" disabled={isQueryResultEmpty}>\n      {!isQueryResultEmpty ? (\n        <Link href={downloadLink(\"csv\")} download={downloadName(\"csv\")} target=\"_self\">\n          {window.W_L.save_as_csv}\n        </Link>\n      ) : (\n        window.W_L.save_as_csv\n      )}\n    </Menu.Item>,\n    <Menu.Item key=\"download_tsv\" disabled={isQueryResultEmpty}>\n      {!isQueryResultEmpty ? (\n        <Link href={downloadLink(\"tsv\")} download={downloadName(\"tsv\")} target=\"_self\">\n          {window.W_L.save_as_tsv}\n        </Link>\n      ) : (\n          window.W_L.save_as_tsv\n      )}\n    </Menu.Item>,\n    <Menu.Item key=\"download_excel\" disabled={isQueryResultEmpty}>\n      {!isQueryResultEmpty ? (\n        <Link href={downloadLink(\"xlsx\")} download={downloadName(\"xlsx\")} target=\"_self\">\n          {window.W_L.save_as_excel}\n        </Link>\n      ) : (\n        window.W_L.save_as_excel\n      )}\n    </Menu.Item>,\n    (canViewQuery || canEditParameters) && <Menu.Divider key=\"divider\" />,\n    canViewQuery && (\n      <Menu.Item key=\"view_query\">  \n      {/* {\n        isShowReport? */}\n        <Link href={widget.getQuery().getUrl(true, widget.visualization.id)}>{window.W_L.edit_query}</Link>\n      {/* //   :\n      //   <HandleFullScreen href={widget.getQuery().getUrl(true, widget.visualization.id)}/>\n      // } */}\n        \n      </Menu.Item>\n    ),\n    canEditParameters && (\n      <Menu.Item key=\"edit_parameters\" onClick={onParametersEdit}>\n        {window.W_L.edit_param}\n      </Menu.Item>\n    ),\n  ]);\n}\n\n// function HandleFullScreen({href}){\n//   const [visible, setVisible] = useState(false);\n//   const handleOk = () => {\n  \n//     setVisible(true);\n//   };\n//   return(\n//     <>\n//      <span onClick={handleOk}>{window.W_L.edit_query}</span>\n//     <Modal\n//       wrapClassName=\"ant-modal-fullscreen\"\n//       title=\"\"\n//       footer={\n//         []\n//       }\n//       onClose={()=>setVisible(false)}\n//       visible={visible}\n//     >\n//         <iframe style={{width:\"100%\",height:\"100%\"}} title=\"Report Display\" src={href} frameborder=\"0\"></iframe>\n//     </Modal>\n//     </>\n//   )\n// }\nfunction RefreshIndicator({ refreshStartedAt }) {\n  return (\n    <div className=\"refresh-indicator\">\n      <div className=\"refresh-icon\">\n        <i className=\"zmdi zmdi-refresh zmdi-hc-spin\" aria-hidden=\"true\" />\n        <span className=\"sr-only\">Refreshing...</span>\n      </div>\n      <Timer from={refreshStartedAt} />\n    </div>\n  );\n}\n\nRefreshIndicator.propTypes = { refreshStartedAt: Moment };\nRefreshIndicator.defaultProps = { refreshStartedAt: null };\n\nfunction VisualizationWidgetHeader({\n  widget,\n  refreshStartedAt,\n  parameters,\n  isEditing,\n  onParametersUpdate,\n  onParametersEdit,\n}) {\n  const canViewQuery = currentUser.hasPermission(\"view_query\");\n\n  return (\n    <>\n      <RefreshIndicator refreshStartedAt={refreshStartedAt} />\n      <div className=\"t-header widget clearfix\">\n        <div className=\"th-title\">\n          <p>\n            <QueryLink query={widget.getQuery()} visualization={widget.visualization} readOnly={!canViewQuery} />\n          </p>\n          {!isEmpty(widget.getQuery().description) && (\n            <HtmlContent className=\"text-muted markdown query--description\">\n              {markdown.toHTML(widget.getQuery().description || \"\")}\n            </HtmlContent>\n          )}\n        </div>\n      </div>\n      {!isEmpty(parameters) && (\n        <div className=\"m-b-10\">\n          <Parameters\n            parameters={parameters}\n            sortable={isEditing}\n            appendSortableToParent={false}\n            onValuesChange={onParametersUpdate}\n            onParametersEdit={onParametersEdit}\n          />\n        </div>\n      )}\n    </>\n  );\n}\n\nVisualizationWidgetHeader.propTypes = {\n  widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  refreshStartedAt: Moment,\n  parameters: PropTypes.arrayOf(PropTypes.object),\n  isEditing: PropTypes.bool,\n  onParametersUpdate: PropTypes.func,\n  onParametersEdit: PropTypes.func,\n};\n\nVisualizationWidgetHeader.defaultProps = {\n  refreshStartedAt: null,\n  onParametersUpdate: () => {},\n  onParametersEdit: () => {},\n  isEditing: false,\n  parameters: [],\n};\n\nfunction VisualizationWidgetFooter({ widget, isPublic, onRefresh, onExpand }) {\n  const widgetQueryResult = widget.getQueryResult();\n  const updatedAt = invoke(widgetQueryResult, \"getUpdatedAt\");\n  const [refreshClickButtonId, setRefreshClickButtonId] = useState();\n\n  const refreshWidget = buttonId => {\n    if (!refreshClickButtonId) {\n      setRefreshClickButtonId(buttonId);\n      onRefresh().finally(() => setRefreshClickButtonId(null));\n    }\n  };\n\n  return widgetQueryResult ? (\n    <>\n      <span>\n        {!isPublic && !!widgetQueryResult && (\n          <PlainButton\n            className=\"refresh-button hidden-print btn btn-sm btn-default btn-transparent\"\n            onClick={() => refreshWidget(1)}\n            data-test=\"RefreshButton\">\n            <i className={cx(\"zmdi zmdi-refresh\", { \"zmdi-hc-spin\": refreshClickButtonId === 1 })} aria-hidden=\"true\" />\n            <span className=\"sr-only\">\n              {refreshClickButtonId === 1 ? \"Refreshing, please wait. \" : \"Press to refresh. \"}\n            </span>{\" \"}\n            <TimeAgo date={updatedAt} />\n          </PlainButton>\n        )}\n        <span className=\"visible-print\">\n          <i className=\"zmdi zmdi-time-restore\" aria-hidden=\"true\" /> {formatDateTime(updatedAt)}\n        </span>\n        {isPublic && (\n          <span className=\"small hidden-print\">\n            <i className=\"zmdi zmdi-time-restore\" aria-hidden=\"true\" /> <TimeAgo date={updatedAt} />\n          </span>\n        )}\n      </span>\n      <span>\n        {!isPublic && (\n          <PlainButton\n            className=\"btn btn-sm btn-default hidden-print btn-transparent btn__refresh\"\n            onClick={() => refreshWidget(2)}>\n            <i className={cx(\"zmdi zmdi-refresh\", { \"zmdi-hc-spin\": refreshClickButtonId === 2 })} aria-hidden=\"true\" />\n            <span className=\"sr-only\">\n              {refreshClickButtonId === 2 ? \"Refreshing, please wait.\" : \"Press to refresh.\"}\n            </span>\n          </PlainButton>\n        )}\n        <PlainButton className=\"btn btn-sm btn-default hidden-print btn-transparent btn__refresh\" onClick={onExpand}>\n          <i className=\"zmdi zmdi-fullscreen\" aria-hidden=\"true\" />\n        </PlainButton>\n      </span>\n    </>\n  ) : null;\n}\n\nVisualizationWidgetFooter.propTypes = {\n  widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  isPublic: PropTypes.bool,\n  onRefresh: PropTypes.func.isRequired,\n  onExpand: PropTypes.func.isRequired,\n};\n\nVisualizationWidgetFooter.defaultProps = { isPublic: false };\n\nclass VisualizationWidget extends React.Component {\n  static propTypes = {\n    widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    filters: FiltersType,\n    isPublic: PropTypes.bool,\n    isLoading: PropTypes.bool,\n    canEdit: PropTypes.bool,\n    isEditing: PropTypes.bool,\n    onLoad: PropTypes.func,\n    onRefresh: PropTypes.func,\n    onDelete: PropTypes.func,\n    onParameterMappingsChange: PropTypes.func,\n    isShowReport: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    filters: [],\n    isPublic: false,\n    isLoading: false,\n    canEdit: false,\n    isEditing: false,\n    onLoad: () => {},\n    onRefresh: () => {},\n    onDelete: () => {},\n    onParameterMappingsChange: () => {},\n    isShowReport: true,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      localParameters: props.widget.getLocalParameters(),\n      localFilters: props.filters,\n    };\n  }\n\n  componentDidMount() {\n    const { widget, onLoad } = this.props;\n    recordEvent(\"view\", \"query\", widget.visualization.query.id, { dashboard: true });\n    recordEvent(\"view\", \"visualization\", widget.visualization.id, { dashboard: true });\n    onLoad();\n  }\n\n  onLocalFiltersChange = localFilters => {\n    this.setState({ localFilters });\n  };\n\n  expandWidget = () => {\n    ExpandedWidgetDialog.showModal({ widget: this.props.widget, filters: this.state.localFilters });\n  };\n\n  editParameterMappings = () => {\n    const { widget, dashboard, onRefresh, onParameterMappingsChange } = this.props;\n    EditParameterMappingsDialog.showModal({\n      dashboard,\n      widget,\n    }).onClose(valuesChanged => {\n      // refresh widget if any parameter value has been updated\n      if (valuesChanged) {\n        onRefresh();\n      }\n      onParameterMappingsChange();\n      this.setState({ localParameters: widget.getLocalParameters() });\n    });\n  };\n\n  renderVisualization() {\n    const { widget, filters } = this.props;\n    const widgetQueryResult = widget.getQueryResult();\n    const widgetStatus = widgetQueryResult && widgetQueryResult.getStatus();\n    switch (widgetStatus) {\n      case \"failed\":\n        return (\n          <div className=\"body-row-auto scrollbox\">\n            {widgetQueryResult.getError() && (\n              <div className=\"alert alert-danger m-5\">\n                {window.W_L.query_error}： <strong>{widgetQueryResult.getError()}</strong>\n              </div>\n            )}\n          </div>\n        );\n      case \"done\":\n        return (\n          <div className=\"body-row-auto scrollbox\">\n            <VisualizationRenderer\n              visualization={widget.visualization}\n              queryResult={widgetQueryResult}\n              filters={filters}\n              onFiltersChange={this.onLocalFiltersChange}\n              context=\"widget\"\n            />\n          </div>\n        );\n      default:\n        return (\n          <div\n            className=\"body-row-auto spinner-container\"\n            role=\"status\"\n            aria-live=\"polite\"\n            aria-relevant=\"additions removals\">\n            <div className=\"spinner\">\n              <i className=\"zmdi zmdi-refresh zmdi-hc-spin zmdi-hc-5x\" aria-hidden=\"true\" />\n              <span className=\"sr-only\">Loading...</span>\n            </div>\n          </div>\n        );\n    }\n  }\n\n  render() {\n    const { widget, isLoading, isPublic, canEdit, isEditing, onRefresh,isShowReport } = this.props;\n    const { localParameters } = this.state;\n    const widgetQueryResult = widget.getQueryResult();\n    const isRefreshing = isLoading && !!(widgetQueryResult && widgetQueryResult.getStatus());\n    const onParametersEdit = parameters => {\n      const paramOrder = map(parameters, \"name\");\n      widget.options.paramOrder = paramOrder;\n      widget.save(\"options\", { paramOrder });\n    };\n\n    return (\n      <Widget\n        {...this.props}\n        className=\"widget-visualization\"\n        menuOptions={visualizationWidgetMenuOptions({\n          widget,\n          canEditDashboard: canEdit,\n          onParametersEdit: this.editParameterMappings,\n          isShowReport,\n        })}\n        header={\n          <VisualizationWidgetHeader\n            widget={widget}\n            refreshStartedAt={isRefreshing ? widget.refreshStartedAt : null}\n            parameters={localParameters}\n            isEditing={isEditing}\n            onParametersUpdate={onRefresh}\n            onParametersEdit={onParametersEdit}\n          />\n        }\n        footer={\n          <VisualizationWidgetFooter\n            widget={widget}\n            isPublic={isPublic}\n            onRefresh={onRefresh}\n            onExpand={this.expandWidget}\n          />\n        }\n        tileProps={{ \"data-refreshing\": isRefreshing }}>\n        {this.renderVisualization()}\n      </Widget>\n    );\n  }\n}\n\nexport default VisualizationWidget;\n","import { toString } from \"lodash\";\nimport { markdown } from \"markdown\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport Tooltip from \"@/components/Tooltip\";\nimport Divider from \"antd/lib/divider\";\nimport Link from \"@/components/Link\";\nimport HtmlContent from \"@/components/chart/components/HtmlContent\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport notification from \"@/services/notification\";\n\nimport \"./TextboxDialog.less\";\n\nfunction TextboxDialog({ dialog, isNew, ...props }) {\n  const [text, setText] = useState(toString(props.text));\n  const [preview, setPreview] = useState(null);\n\n  useEffect(() => {\n    setText(props.text);\n    setPreview(markdown.toHTML(props.text));\n  }, [props.text]);\n\n  const [updatePreview] = useDebouncedCallback(() => {\n    setPreview(markdown.toHTML(text));\n  }, 200);\n\n  const handleInputChange = useCallback(\n    event => {\n      setText(event.target.value);\n      updatePreview();\n    },\n    [updatePreview]\n  );\n\n  const saveWidget = useCallback(() => {\n    dialog.close(text).catch(() => {\n      notification.error(isNew ? window.W_L.widget_will_not_add : window.W_L.widget_will_not_save);\n    });\n  }, [dialog, isNew, text]);\n\n  const confirmDialogDismiss = useCallback(() => {\n    const originalText = props.text;\n    if (text !== originalText) {\n      Modal.confirm({\n        title: window.W_L.quit_edit,\n        content: window.W_L.quit_edit_confirm,\n        okText: window.W_L.ok_text,\n        cancelText: window.W_L.cancel,\n        okType: \"danger\",\n        onOk: () => dialog.dismiss(),\n        maskClosable: true,\n        autoFocusButton: null,\n        style: { top: 170 },\n      });\n    } else {\n      dialog.dismiss();\n    }\n  }, [dialog, text, props.text]);\n\n  return (\n    <Modal\n      {...dialog.props}\n      title={isNew ? window.W_L.add_text : window.W_L.edit_text}\n      onOk={saveWidget}\n      okText={isNew ? window.W_L.add_to_dashboard : window.W_L.save}\n      cancelText={window.W_L.save}\n      onCancel={confirmDialogDismiss}\n      width={500}\n      wrapProps={{ \"data-test\": \"TextboxDialog\" }}>\n      <div className=\"textbox-dialog\">\n        <Input.TextArea\n          className=\"resize-vertical\"\n          rows=\"5\"\n          value={text}\n          aria-label=\"Textbox widget content\"\n          onChange={handleInputChange}\n          autoFocus\n          placeholder={window.W_L.input_text}\n        />\n        <small>\n          {window.W_L.support_basic}{\" \"}\n          <Link\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            href=\"https://www.markdownguide.org/cheat-sheet/#basic-syntax\">\n            <Tooltip title={window.W_L.open_markdown}>Markdown</Tooltip>\n          </Link>\n          ；\n          <Link target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://www.runoob.com/markdown/md-tutorial.html\">\n            <Tooltip title={window.W_L.open_markdown_teach}>{window.W_L.open_markdown_teach} </Tooltip>\n          </Link>\n          。\n        </small>\n        {text && (\n          <React.Fragment>\n            <Divider dashed />\n            <strong className=\"preview-title\">{window.W_L.preview}：</strong>\n            <HtmlContent className=\"preview markdown\">{preview}</HtmlContent>\n          </React.Fragment>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\nTextboxDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  isNew: PropTypes.bool,\n  text: PropTypes.string,\n};\n\nTextboxDialog.defaultProps = {\n  isNew: false,\n  text: \"\",\n};\n\nexport default wrapDialog(TextboxDialog);\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { markdown } from \"markdown\";\nimport Menu from \"antd/lib/menu\";\nimport HtmlContent from \"@/components/chart/components/HtmlContent\";\nimport TextboxDialog from \"@/components/dashboards/TextboxDialog\";\nimport Widget from \"./Widget\";\n\nfunction TextboxWidget(props) {\n  const { widget, canEdit } = props;\n  const [text, setText] = useState(widget.text);\n\n  const editTextBox = () => {\n    TextboxDialog.showModal({\n      text: widget.text,\n    }).onClose(newText => {\n      widget.text = newText;\n      setText(newText);\n      return widget.save();\n    });\n  };\n\n  const TextboxMenuOptions = [\n    <Menu.Item key=\"edit\" onClick={editTextBox}>\n      {window.W_L.edit}\n    </Menu.Item>,\n  ];\n\n  if (!widget.width) {\n    return null;\n  }\n\n  return (\n    <Widget {...props} menuOptions={canEdit ? TextboxMenuOptions : null} className=\"widget-text\">\n      <HtmlContent className=\"body-row-auto scrollbox t-body p-15 markdown\">{markdown.toHTML(text || \"\")}</HtmlContent>\n    </Widget>\n  );\n}\n\nTextboxWidget.propTypes = {\n  widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  canEdit: PropTypes.bool,\n};\n\nTextboxWidget.defaultProps = {\n  canEdit: false,\n};\n\nexport default TextboxWidget;\n","import React from \"react\";\nimport Widget from \"./Widget\";\n\nfunction RestrictedWidget(props) {\n  return (\n    <Widget {...props} className=\"d-flex justify-content-center align-items-center widget-restricted\">\n      <div className=\"t-body scrollbox\">\n        <div className=\"text-center\">\n          <h1>\n            <span className=\"zmdi zmdi-lock\" />\n          </h1>\n          <p className=\"text-muted\">{window.W_L.widget_have_no_access}</p>\n        </div>\n      </div>\n    </Widget>\n  );\n}\n\nexport default RestrictedWidget;\n","import { includes, reduce, some } from \"lodash\";\n\n// TODO: Revisit this implementation when migrating widget component to React\n\nconst WIDGET_SELECTOR = '[data-widgetid=\"{0}\"]';\nconst WIDGET_CONTENT_SELECTOR = [\n  \".widget-header\", // header\n  \".visualization-renderer\", // visualization\n  \".scrollbox .alert\", // error state\n  \".spinner-container\", // loading state\n  \".tile__bottom-control\", // footer\n].join(\",\");\nconst INTERVAL = 200;\n\nexport default class AutoHeightController {\n  widgets = {};\n\n  interval = null;\n\n  onHeightChange = null;\n\n  constructor(handler) {\n    this.onHeightChange = handler;\n  }\n\n  update(widgets) {\n    const newWidgetIds = widgets\n      .filter(widget => widget.options.position.autoHeight)\n      .map(widget => widget.id.toString());\n\n    // added\n    newWidgetIds.filter(id => !includes(Object.keys(this.widgets), id)).forEach(this.add);\n\n    // removed\n    Object.keys(this.widgets)\n      .filter(id => !includes(newWidgetIds, id))\n      .forEach(this.remove);\n  }\n\n  add = id => {\n    if (this.isEmpty()) {\n      this.start();\n    }\n\n    const selector = WIDGET_SELECTOR.replace(\"{0}\", id);\n    this.widgets[id] = [\n      function getHeight() {\n        const widgetEl = document.querySelector(selector);\n        if (!widgetEl) {\n          return undefined; // safety\n        }\n\n        // get all content elements\n        const els = widgetEl.querySelectorAll(WIDGET_CONTENT_SELECTOR);\n\n        // calculate accumulated height\n        return reduce(\n          els,\n          (acc, el) => {\n            const height = el ? el.getBoundingClientRect().height : 0;\n            return acc + height;\n          },\n          0\n        );\n      },\n    ];\n  };\n\n  remove = id => {\n    // ignore if not an active autoHeight widget\n    if (!this.exists(id)) {\n      return;\n    }\n\n    // not actually deleting from this.widgets to prevent case of unwanted re-adding\n    this.widgets[id.toString()] = false;\n\n    if (this.isEmpty()) {\n      this.stop();\n    }\n  };\n\n  exists = id => !!this.widgets[id.toString()];\n\n  isEmpty = () => !some(this.widgets);\n\n  checkHeightChanges = () => {\n    Object.keys(this.widgets)\n      .filter(this.exists) // reject already removed items\n      .forEach(id => {\n        const [getHeight, prevHeight] = this.widgets[id];\n        const height = getHeight();\n        if (height && height !== prevHeight) {\n          this.widgets[id][1] = height; // save\n          this.onHeightChange(id, height); // dispatch\n        }\n      });\n  };\n\n  start = () => {\n    this.stop();\n    this.interval = setInterval(this.checkHeightChanges, INTERVAL);\n  };\n\n  stop = () => {\n    clearInterval(this.interval);\n  };\n\n  resume = () => {\n    if (!this.isEmpty()) {\n      this.start();\n    }\n  };\n\n  destroy = () => {\n    this.stop();\n    this.widgets = null;\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { chain, cloneDeep, find } from \"lodash\";\nimport cx from \"classnames\";\nimport { Responsive, WidthProvider } from \"react-grid-layout\";\nimport { VisualizationWidget, TextboxWidget, RestrictedWidget } from \"@/components/dashboards/dashboard-widget\";\nimport { FiltersType } from \"@/components/Filters\";\nimport cfg from \"@/config/dashboard-grid-options\";\nimport AutoHeightController from \"./AutoHeightController\";\nimport { WidgetTypeEnum } from \"@/services/widget\";\n\nimport \"react-grid-layout/css/styles.css\";\nimport \"./dashboard-grid.less\";\n\nconst ResponsiveGridLayout = WidthProvider(Responsive);\n\nconst WidgetType = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  options: PropTypes.shape({\n    position: PropTypes.shape({\n      col: PropTypes.number.isRequired,\n      row: PropTypes.number.isRequired,\n      sizeY: PropTypes.number.isRequired,\n      minSizeY: PropTypes.number.isRequired,\n      maxSizeY: PropTypes.number.isRequired,\n      sizeX: PropTypes.number.isRequired,\n      minSizeX: PropTypes.number.isRequired,\n      maxSizeX: PropTypes.number.isRequired,\n    }).isRequired,\n  }).isRequired,\n});\n\nconst SINGLE = \"single-column\";\nconst MULTI = \"multi-column\";\n\nconst DashboardWidget = React.memo(\n  function DashboardWidget({\n    widget,\n    dashboard,\n    onLoadWidget,\n    onRefreshWidget,\n    onRemoveWidget,\n    onParameterMappingsChange,\n    isEditing,\n    canEdit,\n    isPublic,\n    isLoading,\n    filters,\n    isShowReport,\n  }) {\n    const { type } = widget;\n    const onLoad = () => onLoadWidget(widget);\n    const onRefresh = () => onRefreshWidget(widget);\n    const onDelete = () => onRemoveWidget(widget.id);\n\n    if (type === WidgetTypeEnum.VISUALIZATION) {\n      return (\n        <VisualizationWidget\n          isShowReport={isShowReport}\n          widget={widget}\n          dashboard={dashboard}\n          filters={filters}\n          isEditing={isEditing}\n          canEdit={canEdit}\n          isPublic={isPublic}\n          isLoading={isLoading}\n          onLoad={onLoad}\n          onRefresh={onRefresh}\n          onDelete={onDelete}\n          onParameterMappingsChange={onParameterMappingsChange}\n        />\n      );\n    }\n    if (type === WidgetTypeEnum.TEXTBOX) {\n      return <TextboxWidget widget={widget} canEdit={canEdit} isPublic={isPublic} onDelete={onDelete} />;\n    }\n    return <RestrictedWidget widget={widget} />;\n  },\n  (prevProps, nextProps) =>\n    prevProps.widget === nextProps.widget &&\n    prevProps.canEdit === nextProps.canEdit &&\n    prevProps.isPublic === nextProps.isPublic &&\n    prevProps.isLoading === nextProps.isLoading &&\n    prevProps.filters === nextProps.filters &&\n    prevProps.isEditing === nextProps.isEditing\n);\n\nclass DashboardGrid extends React.Component {\n  static propTypes = {\n    isEditing: PropTypes.bool.isRequired,\n    isPublic: PropTypes.bool,\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    widgets: PropTypes.arrayOf(WidgetType).isRequired,\n    filters: FiltersType,\n    onBreakpointChange: PropTypes.func,\n    onLoadWidget: PropTypes.func,\n    onRefreshWidget: PropTypes.func,\n    onRemoveWidget: PropTypes.func,\n    onLayoutChange: PropTypes.func,\n    onParameterMappingsChange: PropTypes.func,\n    isShowReport: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    isPublic: false,\n    filters: [],\n    onLoadWidget: () => {},\n    onRefreshWidget: () => {},\n    onRemoveWidget: () => {},\n    onLayoutChange: () => {},\n    onBreakpointChange: () => {},\n    onParameterMappingsChange: () => {},\n    isShowReport:true,\n  };\n\n  static normalizeFrom(widget) {\n    const {\n      id,\n      options: { position: pos },\n    } = widget;\n\n    return {\n      i: id.toString(),\n      x: pos.col,\n      y: pos.row,\n      w: pos.sizeX,\n      h: pos.sizeY,\n      minW: pos.minSizeX,\n      maxW: pos.maxSizeX,\n      minH: pos.minSizeY,\n      maxH: pos.maxSizeY,\n    };\n  }\n\n  mode = null;\n\n  autoHeightCtrl = null;\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      layouts: {},\n      disableAnimations: true,\n    };\n\n    // init AutoHeightController\n    this.autoHeightCtrl = new AutoHeightController(this.onWidgetHeightUpdated);\n    this.autoHeightCtrl.update(this.props.widgets);\n  }\n\n  componentDidMount() {\n    this.onBreakpointChange(document.body.offsetWidth <= cfg.mobileBreakPoint ? SINGLE : MULTI);\n    // Work-around to disable initial animation on widgets; `measureBeforeMount` doesn't work properly:\n    // it disables animation, but it cannot detect scrollbars.\n    setTimeout(() => {\n      this.setState({ disableAnimations: false });\n    }, 50);\n  }\n\n  componentDidUpdate() {\n    // update, in case widgets added or removed\n    this.autoHeightCtrl.update(this.props.widgets);\n  }\n\n  componentWillUnmount() {\n    this.autoHeightCtrl.destroy();\n  }\n\n  onLayoutChange = (_, layouts) => {\n    // workaround for when dashboard starts at single mode and then multi is empty or carries single col data\n    // fixes test dashboard_spec['shows widgets with full width']\n    // TODO: open react-grid-layout issue\n    if (layouts[MULTI]) {\n      this.setState({ layouts });\n    }\n\n    // workaround for https://github.com/STRML/react-grid-layout/issues/889\n    // remove next line when fix lands\n    this.mode = document.body.offsetWidth <= cfg.mobileBreakPoint ? SINGLE : MULTI;\n    // end workaround\n\n    // don't save single column mode layout\n    if (this.mode === SINGLE) {\n      return;\n    }\n\n    const normalized = chain(layouts[MULTI])\n      .keyBy(\"i\")\n      .mapValues(this.normalizeTo)\n      .value();\n\n    this.props.onLayoutChange(normalized);\n  };\n\n  onBreakpointChange = mode => {\n    this.mode = mode;\n    this.props.onBreakpointChange(mode === SINGLE);\n  };\n\n  // height updated by auto-height\n  onWidgetHeightUpdated = (widgetId, newHeight) => {\n    this.setState(({ layouts }) => {\n      const layout = cloneDeep(layouts[MULTI]); // must clone to allow react-grid-layout to compare prev/next state\n      const item = find(layout, { i: widgetId.toString() });\n      if (item) {\n        // update widget height\n        item.h = Math.ceil((newHeight + cfg.margins) / cfg.rowHeight);\n      }\n\n      return { layouts: { [MULTI]: layout } };\n    });\n  };\n\n  // height updated by manual resize\n  onWidgetResize = (layout, oldItem, newItem) => {\n    if (oldItem.h !== newItem.h) {\n      this.autoHeightCtrl.remove(Number(newItem.i));\n    }\n\n    this.autoHeightCtrl.resume();\n  };\n\n  normalizeTo = layout => ({\n    col: layout.x,\n    row: layout.y,\n    sizeX: layout.w,\n    sizeY: layout.h,\n    autoHeight: this.autoHeightCtrl.exists(layout.i),\n  });\n\n  render() {\n    const {\n      onLoadWidget,\n      onRefreshWidget,\n      onRemoveWidget,\n      onParameterMappingsChange,\n      filters,\n      dashboard,\n      isPublic,\n      isEditing,\n      widgets,\n      isShowReport\n    } = this.props;\n    const className = cx(\"dashboard-wrapper\", isEditing ? \"editing-mode\" : \"preview-mode\");\n\n    return (\n      <div className={className}>\n        <ResponsiveGridLayout\n          draggableCancel=\"input,.sortable-container\"\n          className={cx(\"layout\", { \"disable-animations\": this.state.disableAnimations })}\n          cols={{ [MULTI]: cfg.columns, [SINGLE]: 1 }}\n          rowHeight={cfg.rowHeight - cfg.margins}\n          margin={[cfg.margins, cfg.margins]}\n          isDraggable={isEditing}\n          isResizable={isEditing}\n          onResizeStart={this.autoHeightCtrl.stop}\n          onResizeStop={this.onWidgetResize}\n          layouts={this.state.layouts}\n          onLayoutChange={this.onLayoutChange}\n          onBreakpointChange={this.onBreakpointChange}\n          breakpoints={{ [MULTI]: cfg.mobileBreakPoint, [SINGLE]: 0 }}>\n          {widgets.map(widget => (\n            <div\n              key={widget.id}\n              data-grid={DashboardGrid.normalizeFrom(widget)}\n              data-widgetid={widget.id}\n              data-test={`WidgetId${widget.id}`}\n              className={cx(\"dashboard-widget-wrapper\", {\n                \"widget-auto-height-enabled\": this.autoHeightCtrl.exists(widget.id),\n              })}>\n              <DashboardWidget\n                dashboard={dashboard}\n                widget={widget}\n                filters={filters}\n                isPublic={isPublic}\n                isLoading={widget.loading}\n                isEditing={isEditing}\n                canEdit={dashboard.canEdit()}\n                onLoadWidget={onLoadWidget}\n                onRefreshWidget={onRefreshWidget}\n                isShowReport={isShowReport}\n                onRemoveWidget={onRemoveWidget}\n                onParameterMappingsChange={onParameterMappingsChange}\n              />\n            </div>\n          ))}\n        </ResponsiveGridLayout>\n      </div>\n    );\n  }\n}\n\nexport default DashboardGrid;\n","import { map, includes, groupBy, first, find } from \"lodash\";\nimport React, { useState, useMemo, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Select from \"antd/lib/select\";\nimport Modal from \"antd/lib/modal\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport { MappingType, ParameterMappingListInput } from \"@/components/ParameterMappingInput\";\nimport QuerySelector from \"@/components/QuerySelector\";\nimport notification from \"@/services/notification\";\nimport { Query } from \"@/services/query\";\nimport { useUniqueId } from \"@/lib/hooks/useUniqueId\";\n\nfunction VisualizationSelect({ query, visualization, onChange }) {\n  const visualizationGroups = useMemo(() => {\n    return query ? groupBy(query.visualizations, \"type\") : {};\n  }, [query]);\n\n  const vizSelectId = useUniqueId(\"visualization-select\");\n\n  const handleChange = useCallback(\n    visualizationId => {\n      const selectedVisualization = query ? find(query.visualizations, { id: visualizationId }) : null;\n      onChange(selectedVisualization || null);\n    },\n    [query, onChange]\n  );\n\n  if (!query) {\n    return null;\n  }\n\n  const groups = {\"BOXPLOT\":window.W_L.BOXPLOT,\n\t\t\t\t  \"CHART\":window.W_L.CHART,\n\t\t\t\t  \"CHOROPLETH\":window.W_L.CHOROPLETH,\n\t\t\t\t  \"COHORT\":window.W_L.COHORT,\n\t\t\t\t  \"COUNTER\":window.W_L.COUNTER,\n\t\t\t\t  \"DETAILS\":window.W_L.DETAILS,\n\t\t\t\t  \"FUNNEL\":window.W_L.FUNNEL,\n\t\t\t\t  \"MAP\":window.W_L.MAP,\n\t\t\t\t  \"PIVOT\":window.W_L.PIVOT,\n\t\t\t\t  \"SANKEY\":window.W_L.SANKEY,\n\t\t\t\t  \"SUNBURST_SEQUENCE\":window.W_L.SUNBURST_SEQUENCE,\n\t\t\t\t  \"TABLE\":window.W_L.TABLE,\n\t\t\t\t  \"WORD_CLOUD\":window.W_L.WORD_CLOUD\n\t};\n\n  return (\n    <div>\n      <div className=\"form-group\">\n        <label htmlFor={vizSelectId}>{window.W_L.select_view}</label>\n        <Select\n          id={vizSelectId}\n          className=\"w-100\"\n          value={visualization ? visualization.id : undefined}\n          onChange={handleChange}>\n          {map(visualizationGroups, (visualizations, groupKey) => (\n            <Select.OptGroup key={groupKey} label={groups[groupKey]}>\n              {map(visualizations, visualization => (\n                <Select.Option key={`${visualization.id}`} value={visualization.id}>\n                  {visualization.name}\n                </Select.Option>\n              ))}\n            </Select.OptGroup>\n          ))}\n        </Select>\n      </div>\n    </div>\n  );\n}\n\nVisualizationSelect.propTypes = {\n  query: PropTypes.object,\n  visualization: PropTypes.object,\n  onChange: PropTypes.func,\n};\n\nVisualizationSelect.defaultProps = {\n  query: null,\n  visualization: null,\n  onChange: () => {},\n};\n\nfunction AddWidgetDialog({ dialog, dashboard }) {\n  const [selectedQuery, setSelectedQuery] = useState(null);\n  const [selectedVisualization, setSelectedVisualization] = useState(null);\n  const [parameterMappings, setParameterMappings] = useState([]);\n\n  const selectQuery = useCallback(\n    queryId => {\n      // Clear previously selected query (if any)\n      setSelectedQuery(null);\n      setSelectedVisualization(null);\n      setParameterMappings([]);\n\n      if (queryId) {\n        Query.get({ id: queryId }).then(query => {\n          if (query) {\n            const existingParamNames = map(dashboard.getParametersDefs(), param => param.name);\n            setSelectedQuery(query);\n            setParameterMappings(\n              map(query.getParametersDefs(), param => ({\n                name: param.name,\n                type: includes(existingParamNames, param.name)\n                  ? MappingType.DashboardMapToExisting\n                  : MappingType.DashboardAddNew,\n                mapTo: param.name,\n                value: param.normalizedValue,\n                title: \"\",\n                param,\n              }))\n            );\n            if (query.visualizations.length > 0) {\n              setSelectedVisualization(first(query.visualizations));\n            }\n          }\n        });\n      }\n    },\n    [dashboard]\n  );\n\n  const saveWidget = useCallback(() => {\n    dialog.close({ visualization: selectedVisualization, parameterMappings }).catch(() => {\n      notification.error(window.W_L.widget_not_add);\n    });\n  }, [dialog, selectedVisualization, parameterMappings]);\n\n  const existingParams = dashboard.getParametersDefs();\n  const parameterMappingsId = useUniqueId(\"parameter-mappings\");\n\n  return (\n    <Modal\n      {...dialog.props}\n      title={window.W_L.add_widget}\n      onOk={saveWidget}\n      okButtonProps={{\n        ...dialog.props.okButtonProps,\n        disabled: !selectedQuery || dialog.props.okButtonProps.disabled,\n      }}\n      okText={window.W_L.add_widget_to_dashboard}\n      cancelText={window.W_L.cancel}\n      width={700}>\n      <div data-test=\"AddWidgetDialog\">\n        <QuerySelector onChange={query => selectQuery(query ? query.id : null)} />\n\n        {selectedQuery && (\n          <VisualizationSelect\n            query={selectedQuery}\n            visualization={selectedVisualization}\n            onChange={setSelectedVisualization}\n          />\n        )}\n\n        {parameterMappings.length > 0 && [\n          <label key=\"parameters-title\" htmlFor={parameterMappingsId}>\n           {window.W_L.params}\n          </label>,\n          <ParameterMappingListInput\n            key=\"parameters-list\"\n            id={parameterMappingsId}\n            mappings={parameterMappings}\n            existingParams={existingParams}\n            onChange={setParameterMappings}\n          />,\n        ]}\n      </div>\n    </Modal>\n  );\n}\n\nAddWidgetDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  dashboard: PropTypes.object.isRequired,\n};\n\nexport default wrapDialog(AddWidgetDialog);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport Link from \"@/components/Link\";\n\n// PreviewCard\n\nexport function PreviewCard({ imageUrl, roundedImage, title, body, children, className, ...props }) {\n  return (\n    <div {...props} className={className + \" w-100 d-flex align-items-center\"}>\n      <img\n        src={process.env.CDN_DOMAIN + imageUrl}\n        data-pr={process.env.CDN_DOMAIN}\n        width=\"32\"\n        data={imageUrl}\n        height=\"32\"\n        className={classNames({ \"profile__image--settings\": roundedImage }, \"m-r-5\")}\n        alt={window.W_L.icon}\n      />\n      <div className=\"flex-fill\">\n        <div>{title}</div>\n        {body && <div className=\"text-muted\">{body}</div>}\n      </div>\n      {children}\n    </div>\n  );\n}\n\nPreviewCard.propTypes = {\n  imageUrl: PropTypes.string.isRequired,\n  title: PropTypes.node.isRequired,\n  body: PropTypes.node,\n  roundedImage: PropTypes.bool,\n  className: PropTypes.string,\n  children: PropTypes.node,\n};\n\nPreviewCard.defaultProps = {\n  body: null,\n  roundedImage: true,\n  className: \"\",\n  children: null,\n};\n\n// UserPreviewCard\n\nexport function UserPreviewCard({ user, withLink, children, ...props }) {\n  const title = withLink ? <Link href={\"users/\" + user.id}>{user.name}</Link> : user.name;\n  return (\n    <PreviewCard {...props} imageUrl={user.profile_image_url} title={title} body={user.email}>\n      {children}\n    </PreviewCard>\n  );\n}\n\nUserPreviewCard.propTypes = {\n  user: PropTypes.shape({\n    profile_image_url: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    email: PropTypes.string.isRequired,\n  }).isRequired,\n  withLink: PropTypes.bool,\n  children: PropTypes.node,\n};\n\nUserPreviewCard.defaultProps = {\n  withLink: false,\n  children: null,\n};\n\n// DataSourcePreviewCard\n\nexport function DataSourcePreviewCard({ dataSource, withLink, children, ...props }) {\n  const imageUrl = `/static/images/db-logos/${dataSource.type}.png`;\n  const title = withLink ? <Link href={\"data_sources/\" + dataSource.id}>{dataSource.name}</Link> : dataSource.name;\n  return (\n    <PreviewCard {...props} imageUrl={imageUrl} title={title}>\n      {children}\n    </PreviewCard>\n  );\n}\n\nDataSourcePreviewCard.propTypes = {\n  dataSource: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    type: PropTypes.string.isRequired,\n  }).isRequired,\n  withLink: PropTypes.bool,\n  children: PropTypes.node,\n};\n\nDataSourcePreviewCard.defaultProps = {\n  withLink: false,\n  children: null,\n};\n","import { isString, get, find } from \"lodash\";\nimport sanitize from \"@/services/sanitize\";\nimport { axios } from \"@/services/axios\";\nimport notification from \"@/services/notification\";\nimport { clientConfig } from \"@/services/auth\";\n\nfunction getErrorMessage(error) {\n  return find([get(error, \"response.data.message\"), get(error, \"response.statusText\"), \"Unknown error\"], isString);\n}\n\nfunction disableResource(user) {\n  return `api/users/${user.id}/disable`;\n}\n\nfunction enableUser(user) {\n  const userName = sanitize(user.name);\n\n  return axios\n    .delete(disableResource(user))\n    .then(data => {\n      notification.success(window.W_L.account +userName + window.W_L.activated + '！');\n      user.is_disabled = false;\n      user.profile_image_url = data.profile_image_url;\n      return data;\n    }) \n    .catch(error => {\n      notification.error(window.W_L.Cannot_enable_user, getErrorMessage(error));\n    });\n}\n\nfunction disableUser(user) {\n  const userName = sanitize(user.name);\n  return axios\n    .post(disableResource(user))\n    .then(data => {\n      notification.warning(window.W_L.account +userName + window.W_L.terminated + '。');\n      user.is_disabled = true;\n      user.profile_image_url = data.profile_image_url;\n      return data;\n    })\n    .catch(error => {\n      notification.error(window.W_L.Cannot_deactivate_user, getErrorMessage(error));\n    });\n}\n\nfunction deleteUser(user) {\n  const userName = sanitize(user.name);\n  return axios\n    .delete(`api/users/${user.id}`)\n    .then(data => {\n      notification.warning(window.W_L.account +userName + window.W_L.has_been_deleted + '!');\n      return data;\n    })\n    .catch(error => {\n      notification.error(window.W_L.Cannot_delete_user, getErrorMessage(error));\n    });\n}\n\nfunction convertUserInfo(user) {\n  return {\n    id: user.id,\n    name: user.name,\n    email: user.email,\n    profileImageUrl: user.profile_image_url,\n    apiKey: user.api_key,\n    groupIds: user.groups,\n    isDisabled: user.is_disabled,\n    isInvitationPending: user.is_invitation_pending,\n  };\n}\n\nfunction regenerateApiKey(user) {\n  return axios\n    .post(`api/users/${user.id}/regenerate_api_key`)\n    .then(data => {\n      notification.success(window.W_L.api_Key_has_been_regenerated);\n      return data.api_key;\n    })\n    .catch(error => {\n      notification.error(window.W_L.failed_to_regenerate_api_key, getErrorMessage(error));\n    });\n}\n\nfunction sendPasswordReset(user) {\n  return axios\n    .post(`api/users/${user.id}/reset_password`)\n    .then(data => {\n      if (clientConfig.mailSettingsMissing) {\n        notification.warning(window.W_L.the_email_server_is_not_configured);\n        return data.reset_link;\n      }\n      notification.success(window.W_L.password_reset_email_has_been_sent);\n    })\n    .catch(error => {\n      notification.error(window.W_L.the_password_reset_email_was_not_sent_successfully, getErrorMessage(error));\n    });\n}\n\nfunction resendInvitation(user) {\n  return axios\n    .post(`api/users/${user.id}/invite`)\n    .then(data => {\n      if (clientConfig.mailSettingsMissing) {\n        notification.warning(window.W_L.the_email_server_is_not_configured);\n        return data.invite_link;\n      }\n      notification.success(window.W_L.user_invitation_email_has_been_sent);\n    })\n    .catch(error => {\n      notification.error(window.W_L.the_user_invitation_email_failed_to_be_sent, getErrorMessage(error));\n    });\n}\n\nconst User = {\n  query: params => axios.get(\"api/users\", { params }),\n  get: ({ id }) => axios.get(`api/users/${id}`),\n  create: data => axios.post(`api/users`, data),\n  save: data => axios.post(`api/users/${data.id}`, data),\n  enableUser,\n  disableUser,\n  deleteUser,\n  convertUserInfo,\n  regenerateApiKey,\n  sendPasswordReset,\n  resendInvitation,\n};\n\nexport default User;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { axios } from \"@/services/axios\";\nimport PropTypes from \"prop-types\";\nimport { each, debounce, get, find } from \"lodash\";\nimport Button from \"antd/lib/button\";\nimport List from \"antd/lib/list\";\nimport Modal from \"antd/lib/modal\";\nimport Select from \"antd/lib/select\";\nimport Tag from \"antd/lib/tag\";\nimport Tooltip from \"@/components/Tooltip\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport { toHuman } from \"@/lib/utils\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport { UserPreviewCard } from \"@/components/PreviewCard\";\nimport PlainButton from \"@/components/PlainButton\";\nimport notification from \"@/services/notification\";\nimport User from \"@/services/user\";\n\nimport \"./index.less\";\n\nconst { Option } = Select;\nconst DEBOUNCE_SEARCH_DURATION = 200;\n\nfunction useGrantees(url) {\n  const loadGrantees = useCallback(\n    () =>\n      axios.get(url).then(data => {\n        const resultGrantees = [];\n        each(data, (grantees, accessType) => {\n          grantees.forEach(grantee => {\n            grantee.accessType = toHuman(accessType);\n            resultGrantees.push(grantee);\n          });\n        });\n        return resultGrantees;\n      }),\n    [url]\n  );\n\n  const addPermission = useCallback(\n    (userId, accessType = \"modify\") =>\n      axios\n        .post(url, { access_type: accessType, user_id: userId })\n        .catch(() => notification.error(window.W_L.unauthorized)),\n    [url]\n  );\n\n  const removePermission = useCallback(\n    (userId, accessType = \"modify\") =>\n      axios\n        .delete(url, { data: { access_type: accessType, user_id: userId } })\n        .catch(() => notification.error(window.W_L.can_not_delete_user)),\n    [url]\n  );\n\n  return { loadGrantees, addPermission, removePermission };\n}\n\nconst searchUsers = searchTerm =>\n  User.query({ q: searchTerm })\n    .then(({ results }) => results)\n    .catch(() => []);\n\nfunction PermissionsEditorDialogHeader({ context }) {\n  return (\n    <>\n      {window.W_L.mange_permissions}\n      <div className=\"modal-header-desc\">\n        {window.W_L.can_not_manage_permissions}\n        <HelpTrigger type=\"MANAGE_PERMISSIONS\" />\n      </div>\n    </>\n  );\n}\n\nPermissionsEditorDialogHeader.propTypes = { context: PropTypes.oneOf([window.W_L.queries, window.W_L.dashboards]) };\nPermissionsEditorDialogHeader.defaultProps = { context: window.W_L.queries };\n\nfunction UserSelect({ onSelect, shouldShowUser }) {\n  const [loadingUsers, setLoadingUsers] = useState(true);\n  const [users, setUsers] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  const debouncedSearchUsers = useCallback(\n    debounce(\n      search =>\n        searchUsers(search)\n          .then(setUsers)\n          .finally(() => setLoadingUsers(false)),\n      DEBOUNCE_SEARCH_DURATION\n    ),\n    []\n  );\n\n  useEffect(() => {\n    setLoadingUsers(true);\n    debouncedSearchUsers(searchTerm);\n  }, [debouncedSearchUsers, searchTerm]);\n\n  return (\n    <Select\n      className=\"w-100 m-b-10\"\n      placeholder={window.W_L.add_user}\n      showSearch\n      onSearch={setSearchTerm}\n      suffixIcon={\n        loadingUsers ? (\n          <span role=\"status\" aria-live=\"polite\" aria-relevant=\"additions removals\">\n            <i className=\"fa fa-spinner fa-pulse\" aria-hidden=\"true\" />\n            <span className=\"sr-only\">Loading...</span>\n          </span>\n        ) : (\n          <i className=\"fa fa-search\" aria-hidden=\"true\" />\n        )\n      }\n      filterOption={false}\n      notFoundContent={null}\n      value={undefined}\n      getPopupContainer={trigger => trigger.parentNode}\n      onSelect={onSelect}>\n      {users.filter(shouldShowUser).map(user => (\n        <Option key={user.id} value={user.id}>\n          <UserPreviewCard user={user} />\n        </Option>\n      ))}\n    </Select>\n  );\n}\n\nUserSelect.propTypes = {\n  onSelect: PropTypes.func,\n  shouldShowUser: PropTypes.func,\n};\nUserSelect.defaultProps = { onSelect: () => {}, shouldShowUser: () => true };\n\nfunction PermissionsEditorDialog({ dialog, author, context, aclUrl }) {\n  const [loadingGrantees, setLoadingGrantees] = useState(true);\n  const [grantees, setGrantees] = useState([]);\n  const { loadGrantees, addPermission, removePermission } = useGrantees(aclUrl);\n  const loadUsersWithPermissions = useCallback(() => {\n    setLoadingGrantees(true);\n    loadGrantees()\n      .then(setGrantees)\n      .catch(() => notification.error(window.W_L.fail_load_list))\n      .finally(() => setLoadingGrantees(false));\n  }, [loadGrantees]);\n\n  const userHasPermission = useCallback(\n    user => user.id === author.id || !!get(find(grantees, { id: user.id }), \"accessType\"),\n    [author.id, grantees]\n  );\n\n  useEffect(() => {\n    loadUsersWithPermissions();\n  }, [aclUrl, loadUsersWithPermissions]);\n\n  return (\n    <Modal\n      {...dialog.props}\n      className=\"permissions-editor-dialog\"\n      title={<PermissionsEditorDialogHeader context={context} />}\n      footer={<Button onClick={dialog.dismiss}>{window.W_L.close}</Button>}>\n      <UserSelect\n        onSelect={userId => addPermission(userId).then(loadUsersWithPermissions)}\n        shouldShowUser={user => !userHasPermission(user)}\n      />\n      <div className=\"d-flex align-items-center m-t-5\">\n        <h5 className=\"flex-fill\">{window.W_L.user_permissions}</h5>\n        {loadingGrantees && (\n          <span role=\"status\" aria-live=\"polite\" aria-relevant=\"additions removals\">\n            <i className=\"fa fa-spinner fa-pulse\" aria-hidden=\"true\" />\n            <span className=\"sr-only\">{window.W_L.loading}</span>\n          </span>\n        )}\n      </div>\n      <div className=\"scrollbox p-5\" style={{ maxHeight: \"40vh\" }}>\n        <List\n          size=\"small\"\n          dataSource={[author, ...grantees]}\n          renderItem={user => (\n            <List.Item>\n              <UserPreviewCard key={user.id} user={user}>\n                {user.id === author.id ? (\n                  <Tag className=\"m-0\">{window.W_L.author}</Tag>\n                ) : (\n                  <Tooltip title=\"{window.W_L.remove_user_permission}\">\n                    <PlainButton\n                      aria-label=\"{window.W_L.remove_user_permission}\"\n                      onClick={() => removePermission(user.id).then(loadUsersWithPermissions)}>\n                      <i className=\"fa fa-remove clickable\" aria-hidden=\"true\" />\n                    </PlainButton>\n                  </Tooltip>\n                )}\n              </UserPreviewCard>\n            </List.Item>\n          )}\n        />\n      </div>\n    </Modal>\n  );\n}\n\nPermissionsEditorDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  author: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  context: PropTypes.oneOf([window.W_L.query, window.W_L.dashboards]),\n  aclUrl: PropTypes.string.isRequired,\n};\n\nPermissionsEditorDialog.defaultProps = { context: window.W_L.query };\n\nexport default wrapDialog(PermissionsEditorDialog);\n","import React from \"react\";\nimport Input from \"antd/lib/input\";\nimport CopyOutlinedIcon from \"@ant-design/icons/CopyOutlined\";\nimport Tooltip from \"@/components/Tooltip\";\nimport PlainButton from \"./PlainButton\";\n\nexport default class InputWithCopy extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { copied: null };\n    this.ref = React.createRef();\n    this.copyFeatureSupported = document.queryCommandSupported(\"copy\");\n    this.resetCopyState = null;\n  }\n\n  componentWillUnmount() {\n    if (this.resetCopyState) {\n      clearTimeout(this.resetCopyState);\n    }\n  }\n\n  copy = () => {\n    // select text\n    this.ref.current.select();\n\n    // copy\n    try {\n      const success = document.execCommand(\"copy\");\n      if (!success) {\n        throw new Error();\n      }\n      this.setState({ copied: window.W_L.copy_success });\n    } catch (err) {\n      this.setState({\n        copied: window.W_L.copy_failed,\n      });\n    }\n\n    // reset tooltip\n    this.resetCopyState = setTimeout(() => this.setState({ copied: null }), 2000);\n  };\n\n  render() {\n    const copyButton = (\n      <Tooltip title={this.state.copied || window.W_L.copy}>\n        <PlainButton onClick={this.copy}>\n          {/* TODO: lacks visual feedback */}\n          <CopyOutlinedIcon />\n        </PlainButton>\n      </Tooltip>\n    );\n\n    return <Input {...this.props} ref={this.ref} addonAfter={this.copyFeatureSupported && copyButton} />;\n  }\n}\n","import { replace } from \"lodash\";\nimport React from \"react\";\nimport { axios } from \"@/services/axios\";\nimport PropTypes from \"prop-types\";\nimport Switch from \"antd/lib/switch\";\nimport Modal from \"antd/lib/modal\";\nimport Form from \"antd/lib/form\";\nimport Alert from \"antd/lib/alert\";\nimport notification from \"@/services/notification\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport InputWithCopy from \"@/components/InputWithCopy\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\n\nconst API_SHARE_URL = \"api/dashboards/{id}/share\";\n\nclass ShareDashboardDialog extends React.Component {\n  static propTypes = {\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    hasOnlySafeQueries: PropTypes.bool.isRequired,\n    dialog: DialogPropType.isRequired,\n  };\n\n  formItemProps = {\n    labelCol: { span: 8 },\n    wrapperCol: { span: 16 },\n    style: { marginBottom: 7 },\n  };\n\n  constructor(props) {\n    super(props);\n    const { dashboard } = this.props;\n\n    this.state = {\n      saving: false,\n    };\n\n    this.apiUrl = replace(API_SHARE_URL, \"{id}\", dashboard.id);\n    this.enabled = this.props.hasOnlySafeQueries || dashboard.publicAccessEnabled;\n  }\n\n  static get headerContent() {\n    return (\n      <React.Fragment>\n        {window.W_L.share_dashboard}\n        <div className=\"modal-header-desc\">\n          {window.W_L.share_dashboard_tip}<HelpTrigger type=\"SHARE_DASHBOARD\" />\n        </div>\n      </React.Fragment>\n    );\n  }\n\n  enableAccess = () => {\n    const { dashboard } = this.props;\n    this.setState({ saving: true });\n\n    axios\n      .post(this.apiUrl)\n      .then(data => {\n        dashboard.publicAccessEnabled = true;\n        dashboard.public_url = data.public_url;\n      })\n      .catch(() => {\n        notification.error(window.W_L.open_share_dashboard_failed);\n      })\n      .finally(() => {\n        this.setState({ saving: false });\n      });\n  };\n\n  disableAccess = () => {\n    const { dashboard } = this.props;\n    this.setState({ saving: true });\n\n    axios\n      .delete(this.apiUrl)\n      .then(() => {\n        dashboard.publicAccessEnabled = false;\n        delete dashboard.public_url;\n      })\n      .catch(() => {\n        notification.error(window.W_L.close_share_dashboard_failed);\n      })\n      .finally(() => {\n        this.setState({ saving: false });\n      });\n  };\n\n  onChange = checked => {\n    if (checked) {\n      this.enableAccess();\n    } else {\n      this.disableAccess();\n    }\n  };\n\n  render() {\n    const { dialog, dashboard } = this.props;\n\n    return (\n      <Modal {...dialog.props} title={this.constructor.headerContent} footer={null}>\n        <Form layout=\"horizontal\">\n          {!this.props.hasOnlySafeQueries && (\n            <Form.Item>\n              <Alert\n                message={window.W_L.secret_address_tip}\n                type=\"error\"\n              />\n            </Form.Item>\n          )}\n          <Form.Item label={window.W_L.allow_public} {...this.formItemProps}>\n            <Switch\n              checked={dashboard.publicAccessEnabled}\n              onChange={this.onChange}\n              loading={this.state.saving}\n              disabled={!this.enabled}\n              data-test=\"PublicAccessEnabled\"\n            />\n          </Form.Item>\n          {dashboard.public_url && (\n            <Form.Item label={window.W_L.secret_address} {...this.formItemProps}>\n              <InputWithCopy value={dashboard.public_url} data-test=\"SecretAddress\" />\n            </Form.Item>\n          )}\n        </Form>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(ShareDashboardDialog);\n","import { has } from \"lodash\";\nimport { useEffect, useState } from \"react\";\nimport location from \"@/services/location\";\n\nexport default function useFullscreenHandler() {\n  const [fullscreen, setFullscreen] = useState(has(location.search, \"fullscreen\"));\n  useEffect(() => {\n    document.body.classList.toggle(\"headless\", fullscreen);\n    location.setSearch({ fullscreen: fullscreen ? true : null }, true);\n  }, [fullscreen]);\n\n  const toggleFullscreen = () => setFullscreen(!fullscreen);\n  return [fullscreen, toggleFullscreen];\n}\n","import { isNaN, max, min } from \"lodash\";\nimport { useEffect, useState, useMemo } from \"react\";\nimport location from \"@/services/location\";\nimport { policy } from \"@/services/policy\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\n\nfunction getLimitedRefreshRate(refreshRate) {\n  const allowedIntervals = policy.getDashboardRefreshIntervals();\n  return max([30, min(allowedIntervals), refreshRate]);\n}\n\nfunction getRefreshRateFromUrl() {\n  const refreshRate = parseFloat(location.search.refresh);\n  return isNaN(refreshRate) ? null : getLimitedRefreshRate(refreshRate);\n}\n\nexport default function useRefreshRateHandler(refreshDashboard) {\n  const [refreshRate, setRefreshRate] = useState(getRefreshRateFromUrl());\n\n  // `refreshDashboard` may change quite frequently (on every update of `dashboard` instance), but we\n  // have to keep the same timer running, because timer will restart when re-creating, and instead of\n  // running refresh every N seconds - it will run refresh every N seconds after last dashboard update\n  // (which is not right obviously)\n  const doRefreshDashboard = useImmutableCallback(refreshDashboard);\n\n  // URL and timer should be updated only when `refreshRate` changes\n  useEffect(() => {\n    location.setSearch({ refresh: refreshRate || null }, true);\n    if (refreshRate) {\n      const refreshTimer = setInterval(doRefreshDashboard, refreshRate * 1000);\n      return () => clearInterval(refreshTimer);\n    }\n  }, [refreshRate, doRefreshDashboard]);\n\n  return useMemo(() => [refreshRate, rate => setRefreshRate(getLimitedRefreshRate(rate)), () => setRefreshRate(null)], [\n    refreshRate,\n  ]);\n}\n","import { debounce, find, has, isMatch, map, pickBy } from \"lodash\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport location from \"@/services/location\";\nimport notification from \"@/services/notification\";\n\nexport const DashboardStatusEnum = {\n  SAVED: \"saved\",\n  SAVING: \"saving\",\n  SAVING_FAILED: \"saving_failed\",\n};\n\nfunction getChangedPositions(widgets, nextPositions = {}) {\n  return pickBy(nextPositions, (nextPos, widgetId) => {\n    const widget = find(widgets, { id: Number(widgetId) });\n    const prevPos = widget.options.position;\n    return !isMatch(prevPos, nextPos);\n  });\n}\n\nexport default function useEditModeHandler(canEditDashboard, widgets) {\n  const [editingLayout, setEditingLayout] = useState(canEditDashboard && has(location.search, \"edit\"));\n  const [dashboardStatus, setDashboardStatus] = useState(DashboardStatusEnum.SAVED);\n  const [recentPositions, setRecentPositions] = useState([]);\n  const [doneBtnClickedWhileSaving, setDoneBtnClickedWhileSaving] = useState(false);\n\n  useEffect(() => {\n    location.setSearch({ edit: editingLayout ? true : null }, true);\n  }, [editingLayout]);\n\n  useEffect(() => {\n    if (doneBtnClickedWhileSaving && dashboardStatus === DashboardStatusEnum.SAVED) {\n      setDoneBtnClickedWhileSaving(false);\n      setEditingLayout(false);\n    }\n  }, [doneBtnClickedWhileSaving, dashboardStatus]);\n\n  const saveDashboardLayout = useCallback(\n    positions => {\n      if (!canEditDashboard) {\n        setDashboardStatus(DashboardStatusEnum.SAVED);\n        return;\n      }\n\n      const changedPositions = getChangedPositions(widgets, positions);\n\n      setDashboardStatus(DashboardStatusEnum.SAVING);\n      setRecentPositions(positions);\n      const saveChangedWidgets = map(changedPositions, (position, id) => {\n        // find widget\n        const widget = find(widgets, { id: Number(id) });\n\n        // skip already deleted widget\n        if (!widget) {\n          return Promise.resolve();\n        }\n\n        return widget.save(\"options\", { position });\n      });\n\n      return Promise.all(saveChangedWidgets)\n        .then(() => setDashboardStatus(DashboardStatusEnum.SAVED))\n        .catch(() => {\n          setDashboardStatus(DashboardStatusEnum.SAVING_FAILED);\n          notification.error(\"Error saving changes.\");\n        });\n    },\n    [canEditDashboard, widgets]\n  );\n\n  const saveDashboardLayoutDebounced = useCallback(\n    (...args) => {\n      setDashboardStatus(DashboardStatusEnum.SAVING);\n      return debounce(() => saveDashboardLayout(...args), 2000)();\n    },\n    [saveDashboardLayout]\n  );\n\n  const retrySaveDashboardLayout = useCallback(() => saveDashboardLayout(recentPositions), [\n    recentPositions,\n    saveDashboardLayout,\n  ]);\n\n  const setEditing = useCallback(\n    editing => {\n      if (!editing && dashboardStatus !== DashboardStatusEnum.SAVED) {\n        setDoneBtnClickedWhileSaving(true);\n        return;\n      }\n      setEditingLayout(canEditDashboard && editing);\n    },\n    [dashboardStatus, canEditDashboard]\n  );\n\n  return {\n    editingLayout: canEditDashboard && editingLayout,\n    setEditingLayout: setEditing,\n    saveDashboardLayout: editingLayout ? saveDashboardLayoutDebounced : saveDashboardLayout,\n    retrySaveDashboardLayout,\n    doneBtnClickedWhileSaving,\n    dashboardStatus,\n  };\n}\n","import { useState, useEffect, useMemo, useCallback, useRef } from \"react\";\nimport { isEmpty, includes, compact, map, has, pick, keys, extend, every, get } from \"lodash\";\nimport notification from \"@/services/notification\";\nimport location from \"@/services/location\";\nimport url from \"@/services/url\";\nimport { Dashboard, collectDashboardFilters } from \"@/services/dashboard\";\nimport { currentUser } from \"@/services/auth\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { QueryResultError } from \"@/services/query\";\nimport AddWidgetDialog from \"@/components/dashboards/AddWidgetDialog\";\nimport TextboxDialog from \"@/components/dashboards/TextboxDialog\";\nimport PermissionsEditorDialog from \"@/components/PermissionsEditorDialog\";\nimport { editableMappingsToParameterMappings, synchronizeWidgetTitles } from \"@/components/ParameterMappingInput\";\nimport ShareDashboardDialog from \"../components/ShareDashboardDialog\";\nimport useFullscreenHandler from \"../../../lib/hooks/useFullscreenHandler\";\nimport useRefreshRateHandler from \"./useRefreshRateHandler\";\nimport useEditModeHandler from \"./useEditModeHandler\";\nimport { policy } from \"@/services/policy\";\n\nexport { DashboardStatusEnum } from \"./useEditModeHandler\";\n\nfunction getAffectedWidgets(widgets, updatedParameters = []) {\n  return !isEmpty(updatedParameters)\n    ? widgets.filter(widget =>\n        Object.values(widget.getParameterMappings())\n          .filter(({ type }) => type === \"dashboard-level\")\n          .some(({ mapTo }) =>\n            includes(\n              updatedParameters.map(p => p.name),\n              mapTo\n            )\n          )\n      )\n    : widgets;\n}\n\nfunction useDashboard(dashboardData) {\n  const [dashboard, setDashboard] = useState(dashboardData);\n  const [filters, setFilters] = useState([]);\n  const [refreshing, setRefreshing] = useState(false);\n  const [gridDisabled, setGridDisabled] = useState(false);\n  const globalParameters = useMemo(() => dashboard.getParametersDefs(), [dashboard]);\n  const canEditDashboard = !dashboard.is_archived && policy.canEdit(dashboard);\n  const isDashboardOwnerOrAdmin = useMemo(\n    () =>\n      !dashboard.is_archived &&\n      has(dashboard, \"user.id\") &&\n      (currentUser.id === dashboard.user.id || currentUser.isAdmin),\n    [dashboard]\n  );\n  const hasOnlySafeQueries = useMemo(\n    () => every(dashboard.widgets, w => (w.getQuery() ? w.getQuery().is_safe : true)),\n    [dashboard]\n  );\n\n  const managePermissions = useCallback(() => {\n    const aclUrl = `api/dashboards/${dashboard.id}/acl`;\n    PermissionsEditorDialog.showModal({\n      aclUrl,\n      context: \"dashboard\",\n      author: dashboard.user,\n    });\n  }, [dashboard]);\n\n  const updateDashboard = useCallback(\n    (data, includeVersion = true) => {\n      setDashboard(currentDashboard => extend({}, currentDashboard, data));\n      data = { ...data, id: dashboard.id };\n      if (includeVersion) {\n        data = { ...data, version: dashboard.version };\n      }\n      return Dashboard.save(data)\n        .then(updatedDashboard => {\n          setDashboard(currentDashboard => extend({}, currentDashboard, pick(updatedDashboard, keys(data))));\n          if (has(data, \"name\")) {\n            location.setPath(url.parse(updatedDashboard.url).pathname, true);\n          }\n        })\n        .catch(error => {\n          const status = get(error, \"response.status\");\n          if (status === 403) {\n            notification.error(\"Dashboard update failed\", \"Permission Denied.\");\n          } else if (status === 409) {\n            notification.error(\n\t\t\t\twindow.W_F.dashboard_has_changed,\n\t\t\t\twindow.W_F.dashboard_has_changed_tip,\n              { duration: null }\n            );\n          }\n        });\n    },\n    [dashboard]\n  );\n\n  const togglePublished = useCallback(() => {\n    recordEvent(\"toggle_published\", \"dashboard\", dashboard.id);\n    updateDashboard({ is_draft: !dashboard.is_draft }, false);\n  }, [dashboard, updateDashboard]);\n\n  const loadWidget = useCallback((widget, forceRefresh = false) => {\n    widget.getParametersDefs(); // Force widget to read parameters values from URL\n    setDashboard(currentDashboard => extend({}, currentDashboard));\n    return widget\n      .load(forceRefresh)\n      .catch(error => {\n        // QueryResultErrors are expected\n        if (error instanceof QueryResultError) {\n          return;\n        }\n        return Promise.reject(error);\n      })\n      .finally(() => setDashboard(currentDashboard => extend({}, currentDashboard)));\n  }, []);\n\n  const refreshWidget = useCallback(widget => loadWidget(widget, true), [loadWidget]);\n\n  const removeWidget = useCallback(widgetId => {\n    setDashboard(currentDashboard =>\n      extend({}, currentDashboard, {\n        widgets: currentDashboard.widgets.filter(widget => widget.id !== undefined && widget.id !== widgetId),\n      })\n    );\n  }, []);\n\n  const dashboardRef = useRef();\n  dashboardRef.current = dashboard;\n\n  const loadDashboard = useCallback(\n    (forceRefresh = false, updatedParameters = []) => {\n      const affectedWidgets = getAffectedWidgets(dashboardRef.current.widgets, updatedParameters);\n      const loadWidgetPromises = compact(\n        affectedWidgets.map(widget => loadWidget(widget, forceRefresh).catch(error => error))\n      );\n\n      return Promise.all(loadWidgetPromises).then(() => {\n        const queryResults = compact(map(dashboardRef.current.widgets, widget => widget.getQueryResult()));\n        const updatedFilters = collectDashboardFilters(dashboardRef.current, queryResults, location.search);\n        setFilters(updatedFilters);\n      });\n    },\n    [loadWidget]\n  );\n\n  const refreshDashboard = useCallback(\n    updatedParameters => {\n      if (!refreshing) {\n        setRefreshing(true);\n        loadDashboard(true, updatedParameters).finally(() => setRefreshing(false));\n      }\n    },\n    [refreshing, loadDashboard]\n  );\n\n  const archiveDashboard = useCallback(() => {\n    recordEvent(\"archive\", \"dashboard\", dashboard.id);\n    Dashboard.delete(dashboard).then(updatedDashboard =>\n      setDashboard(currentDashboard => extend({}, currentDashboard, pick(updatedDashboard, [\"is_archived\"])))\n    );\n  }, [dashboard]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const showShareDashboardDialog = useCallback(() => {\n    const handleDialogClose = () => setDashboard(currentDashboard => extend({}, currentDashboard));\n\n    ShareDashboardDialog.showModal({\n      dashboard,\n      hasOnlySafeQueries,\n    })\n      .onClose(handleDialogClose)\n      .onDismiss(handleDialogClose);\n  }, [dashboard, hasOnlySafeQueries]);\n\n  const showAddTextboxDialog = useCallback(() => {\n    TextboxDialog.showModal({\n      isNew: true,\n    }).onClose(text =>\n      dashboard.addWidget(text).then(() => setDashboard(currentDashboard => extend({}, currentDashboard)))\n    );\n  }, [dashboard]);\n\n  const showAddWidgetDialog = useCallback(() => {\n    AddWidgetDialog.showModal({\n      dashboard,\n    }).onClose(({ visualization, parameterMappings }) =>\n      dashboard\n        .addWidget(visualization, {\n          parameterMappings: editableMappingsToParameterMappings(parameterMappings),\n        })\n        .then(widget => {\n          const widgetsToSave = [\n            widget,\n            ...synchronizeWidgetTitles(widget.options.parameterMappings, dashboard.widgets),\n          ];\n          return Promise.all(widgetsToSave.map(w => w.save())).then(() =>\n            setDashboard(currentDashboard => extend({}, currentDashboard))\n          );\n        })\n    );\n  }, [dashboard]);\n\n  const [refreshRate, setRefreshRate, disableRefreshRate] = useRefreshRateHandler(refreshDashboard);\n  const [fullscreen, toggleFullscreen] = useFullscreenHandler();\n  const editModeHandler = useEditModeHandler(!gridDisabled && canEditDashboard, dashboard.widgets);\n\n  useEffect(() => {\n    setDashboard(dashboardData);\n    loadDashboard();\n  }, [dashboardData]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    document.title = dashboard.name;\n  }, [dashboard.name]);\n\n  // reload dashboard when filter option changes\n  useEffect(() => {\n    loadDashboard();\n  }, [dashboard.dashboard_filters_enabled]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return {\n    dashboard,\n    globalParameters,\n    refreshing,\n    filters,\n    setFilters,\n    loadDashboard,\n    refreshDashboard,\n    updateDashboard,\n    togglePublished,\n    archiveDashboard,\n    loadWidget,\n    refreshWidget,\n    removeWidget,\n    canEditDashboard,\n    isDashboardOwnerOrAdmin,\n    refreshRate,\n    setRefreshRate,\n    disableRefreshRate,\n    ...editModeHandler,\n    gridDisabled,\n    setGridDisabled,\n    fullscreen,\n    toggleFullscreen,\n    showShareDashboardDialog,\n    showAddTextboxDialog,\n    showAddWidgetDialog,\n    managePermissions,\n  };\n}\n\nexport default useDashboard;\n","import { trim } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport Input from \"antd/lib/input\";\n\nexport default class EditInPlace extends React.Component {\n  static propTypes = {\n    ignoreBlanks: PropTypes.bool,\n    isEditable: PropTypes.bool,\n    placeholder: PropTypes.string,\n    value: PropTypes.string,\n    onDone: PropTypes.func.isRequired,\n    onStopEditing: PropTypes.func,\n    multiline: PropTypes.bool,\n    editorProps: PropTypes.object,\n    defaultEditing: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    ignoreBlanks: false,\n    isEditable: true,\n    placeholder: \"\",\n    value: \"\",\n    onStopEditing: () => {},\n    multiline: false,\n    editorProps: {},\n    defaultEditing: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      editing: props.defaultEditing,\n    };\n  }\n\n  componentDidUpdate(_, prevState) {\n    if (!this.state.editing && prevState.editing) {\n      this.props.onStopEditing();\n    }\n  }\n\n  startEditing = () => {\n    if (this.props.isEditable) {\n      this.setState({ editing: true });\n    }\n  };\n\n  stopEditing = currentValue => {\n    const newValue = trim(currentValue);\n    const ignorableBlank = this.props.ignoreBlanks && newValue === \"\";\n    if (!ignorableBlank && newValue !== this.props.value) {\n      this.props.onDone(newValue);\n    }\n    this.setState({ editing: false });\n  };\n\n  handleKeyDown = event => {\n    if (event.keyCode === 13 && !event.shiftKey) {\n      event.preventDefault();\n      this.stopEditing(event.target.value);\n    } else if (event.keyCode === 27) {\n      this.setState({ editing: false });\n    }\n  };\n\n  renderNormal = () =>\n    this.props.value ? (\n      <span\n        role=\"presentation\"\n        onFocus={this.startEditing}\n        onClick={this.startEditing}\n        className={this.props.isEditable ? \"editable\" : \"\"}>\n        {this.props.value}\n      </span>\n    ) : (\n      <a className=\"clickable\" onClick={this.startEditing}>\n        {this.props.placeholder}\n      </a>\n    );\n\n  renderEdit = () => {\n    const { multiline, value, editorProps } = this.props;\n    const InputComponent = multiline ? Input.TextArea : Input;\n    return (\n      <InputComponent\n        defaultValue={value}\n        aria-label=\"Editing\"\n        onBlur={e => this.stopEditing(e.target.value)}\n        onKeyDown={this.handleKeyDown}\n        autoFocus\n        {...editorProps}\n      />\n    );\n  };\n\n  render() {\n    return (\n      <span className={cx(\"edit-in-place\", { active: this.state.editing }, this.props.className)}>\n        {this.state.editing ? this.renderEdit() : this.renderNormal()}\n      </span>\n    );\n  }\n}\n","import { axios } from \"@/services/axios\";\n\nfunction processTags(data) {\n  return data.tags || [];\n}\n\nexport default function getTags(url) {\n  return axios.get(url).then(processTags);\n}\n","import React, { useState, useEffect } from \"react\";\nimport Drawer from \"antd/lib/drawer\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport Modal from \"antd/lib/modal\";\nimport Button from \"antd/lib/button\";\nimport { axios } from \"@/services/axios\";\nimport toast from \"react-hot-toast\";\nimport dashboards_prettify_1 from \"../../../../assets/images/dashboard-example/dashboards_prettify_1.jpg\";\nimport dashboards_prettify_2 from \"../../../../assets/images/dashboard-example/dashboards_prettify_2.jpg\";\nimport dashboards_prettify_3 from \"../../../../assets/images/dashboard-example/dashboards_prettify_3.jpg\";\nimport \"./StepModal.css\";\nconst StepModal = React.forwardRef((props, ref) => {\n  const {dashboardId} = props;\n  const [visible, setVisible] = useState(false);\n  const [selectedTemplate, setSelectedTemplate] = useState(1);\n  const templates = [\n    { id: 1, title: window.W_L.example1, image: dashboards_prettify_1 },\n    { id: 2, title: window.W_L.example2, image: dashboards_prettify_2 },\n    { id: 3, title: window.W_L.example3, image: dashboards_prettify_3 },\n    { id: 999, title: window.W_L.more, image: dashboards_prettify_1 },\n  ];\n  const [loading, setLoading] = useState(false);\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [previewImage, setPreviewImage] = useState(null);\n  const openModal = () => {\n    setVisible(true);\n  };\n  const getDashboardsPrettifyList = async () => {\n    await axios.get(\"/api/pretty_dashboard\");\n};\n  React.useImperativeHandle(ref, () => ({\n    openModal,\n  }));\n  const globalSeriesType = widget => {\n    if (widget.visualization.type === \"TABLE\") {\n      return \"table\";\n    }\n    const type = widget.visualization.options.globalSeriesType;\n    if ([\"column\", \"line\", \"pie\", \"area\"].includes(type)) {\n      return type === \"column\" ? \"bar\" : type;\n    }\n    return false\n  };\n  const getQueryResult = async widgets => {\n    const promises = widgets.map(async widget => {\n      const chartType = globalSeriesType(widget);\n      if (chartType) {\n        const res = await axios.get(\n          `/api/queries/${widget.visualization.query.id}/results/${widget.visualization.query.latest_query_data_id}.json`\n        );\n        return {\n          id: widget.visualization.query.id,\n          latest_query_data_id: widget.visualization.query.latest_query_data_id,\n          chart_name: widget.visualization.query.name,\n          chart_type: chartType,\n          data: res.query_result.data,\n          columnMapping: widget.visualization.options.columnMapping,\n        };\n      }\n    });\n    // return Promise.all(promises.filter(Boolean));\n    const results = await Promise.all(promises);\n    return results.filter(Boolean);\n  };\n\n  const getDashboardDetail = () => {\n    return axios\n      .get(`/api/dashboards/${dashboardId}`)\n      .then(async res => {\n        if (res.widgets && res.widgets.length > 0) {\n          const queryResult = await getQueryResult(res.widgets);\n          return {\n            dashboard_name: res.name,\n            dashboard_id : res.id,\n            query_result: queryResult,\n          };\n        } else {\n          throw new Error(window.W_L.no_dashboard_data);\n        }\n      })\n      .catch(error => {\n        console.error(error);\n        throw error;\n      });\n  };\n\n  const handlePreview = template => {\n    if(template.id === 999) return;\n    setPreviewImage(template.image);\n    setIsModalVisible(true);\n  };\n\n  const postDashboardDetail =async detail => {\n    const data={\n      ...detail,\n      template_id: selectedTemplate,\n    }\n    const res = await axios.post(\"/api/pretty_dashboard\", data);\n    return res;\n  };\n\n  const handleOk = async () => {\n    setLoading(true);\n    try {\n      const detail = await getDashboardDetail();\n      const res = await postDashboardDetail(detail);\n      if(res && res.code === 200){\n        toast.success(window.W_L.submit_success);\n        getDashboardsPrettifyList();\n      }else{\n        toast.error(res.data || window.W_L.submit_fail);\n      }\n      setLoading(false);\n      \n    } catch (err) {\n      setLoading(false);\n      console.error(err);\n      toast.error(window.W_L.submit_fail);\n    }\n  };\n  const handleCancel = () => {\n    if (loading) {\n      return;\n    }\n    setVisible(false);\n  };\n\n  const handleTemplateSelect = id => {\n    setSelectedTemplate(id);\n  };\n  return (\n    <>\n      <Drawer\n        title={window.W_L.prettify_dashboard}\n        visible={visible}\n        onClose={handleCancel}\n        closable={false}\n        mask={false}\n        footer={\n          <div className=\"drawer-footer\">\n            <Button loading={loading} className=\"finish-button\" type=\"primary\" onClick={handleOk}>\n            {window.W_L.apply}\n            </Button>\n            <Button className=\"cancel-button\" onClick={handleCancel}>\n            {window.W_L.close}\n            </Button>\n          </div>\n        }>\n        <div className=\"template-container\">\n          {templates.map(template => (\n            <div key={template.id} className={`template-item`} onClick={() => handleTemplateSelect(template.id)}>\n              <p>{template.title}</p>\n              <div className=\"template-div\">\n              <img\n                alt=\"example\"\n                src={template.image}\n                className={`template-img ${selectedTemplate === template.id ? \"template-item-selected\" : \"\"}`}>\n              </img>\n              <div className={`template-overlay ${template.id === 999 ? \"always-show\" : \"\"}`}>\n                  <button\n                    className={`preview-button ${template.id === 999 ? \"coming-soon-button\" : \"\"}`}\n                    onClick={e => {\n                      e.stopPropagation();\n                      handlePreview(template);\n                    }}>\n                    {template.id === 999 ? window.W_L.coming_soon : window.W_L.preview}\n                  </button>\n                </div>\n                </div>\n              {template.id !== 999 && (\n                <Checkbox checked={selectedTemplate === template.id} className=\"template-checkbox\" />\n              )}\n            </div>\n          ))}\n        </div>\n      </Drawer>\n      <Modal\n        className=\"preview-modal\"\n        visible={isModalVisible}\n        onCancel={() => setIsModalVisible(false)}\n        footer={null}\n        closable={false}\n        width=\"80%\">\n        <img alt=\"example\" style={{ width: \"100%\" }} src={previewImage} />\n      </Modal>\n    </>\n  );\n});\n\nexport default StepModal;\n","import React from \"react\";\nimport cx from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport { map, includes } from \"lodash\";\nimport Button from \"antd/lib/button\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Menu from \"antd/lib/menu\";\nimport EllipsisOutlinedIcon from \"@ant-design/icons/EllipsisOutlined\";\nimport Modal from \"antd/lib/modal\";\nimport Tooltip from \"@/components/Tooltip\";\nimport FavoritesControl from \"@/components/FavoritesControl\";\nimport EditInPlace from \"@/components/EditInPlace\";\nimport PlainButton from \"@/components/PlainButton\";\nimport { DashboardTagsControl } from \"@/components/tags-control/TagsControl\";\nimport getTags from \"@/services/getTags\";\nimport { clientConfig } from \"@/services/auth\";\nimport { policy } from \"@/services/policy\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { durationHumanize } from \"@/lib/utils\";\nimport { DashboardStatusEnum } from \"../hooks/useDashboard\";\nimport StepModal from \"@/pages/testdialogue/components/StepModal/StepModal\";\nimport \"./DashboardHeader.less\";\n\nfunction getDashboardTags() {\n  return getTags(\"api/dashboards/tags\").then(tags => map(tags, t => t.name));\n}\n\nfunction buttonType(value) {\n  return value ? \"primary\" : \"default\";\n}\n\nfunction DashboardPageTitle({ dashboardConfiguration }) {\n  const { dashboard, canEditDashboard, updateDashboard, editingLayout } = dashboardConfiguration;\n  return (\n    <div className=\"title-with-tags\">\n      <div className=\"page-title\">\n        <FavoritesControl item={dashboard} />\n        <h3>\n          <EditInPlace\n            isEditable={editingLayout}\n            onDone={name => updateDashboard({ name })}\n            value={dashboard.name}\n            ignoreBlanks\n          />\n        </h3>\n        <Tooltip title={dashboard.user.name} placement=\"bottom\">\n          <img src={dashboard.user.profile_image_url} className=\"profile-image\" alt={dashboard.user.name} />\n        </Tooltip>\n      </div>\n      <DashboardTagsControl\n        tags={dashboard.tags}\n        isDraft={dashboard.is_draft}\n        isArchived={dashboard.is_archived}\n        canEdit={canEditDashboard}\n        getAvailableTags={getDashboardTags}\n        onEdit={tags => updateDashboard({ tags })}\n      />\n    </div>\n  );\n}\n\nDashboardPageTitle.propTypes = {\n  dashboardConfiguration: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nfunction RefreshButton({ dashboardConfiguration }) {\n  const { refreshRate, setRefreshRate, disableRefreshRate, refreshing, refreshDashboard } = dashboardConfiguration;\n  const allowedIntervals = policy.getDashboardRefreshIntervals();\n  const refreshRateOptions = clientConfig.dashboardRefreshIntervals;\n  const onRefreshRateSelected = ({ key }) => {\n    const parsedRefreshRate = parseFloat(key);\n    if (parsedRefreshRate) {\n      setRefreshRate(parsedRefreshRate);\n      refreshDashboard();\n    } else {\n      disableRefreshRate();\n    }\n  };\n  return (\n    <Button.Group>\n      <Tooltip title={refreshRate ? window.W_L.auto_flush_hz + ` ${durationHumanize(refreshRate)}` : null}>\n        <Button type={buttonType(refreshRate)} onClick={() => refreshDashboard()}>\n          <i className={cx(\"zmdi zmdi-refresh m-r-5\", { \"zmdi-hc-spin\": refreshing })} aria-hidden=\"true\" />\n          {refreshRate ? durationHumanize(refreshRate) : window.W_L.flush}\n        </Button>\n      </Tooltip>\n      <Dropdown\n        trigger={[\"click\"]}\n        placement=\"bottomRight\"\n        overlay={\n          <Menu onClick={onRefreshRateSelected} selectedKeys={[`${refreshRate}`]}>\n            {refreshRateOptions.map(option => (\n              <Menu.Item key={`${option}`} disabled={!includes(allowedIntervals, option)}>\n                {durationHumanize(option)}\n              </Menu.Item>\n            ))}\n            {refreshRate && <Menu.Item key={null}>{window.W_L.stop_auto_flush}</Menu.Item>}\n          </Menu>\n        }>\n        <Button className=\"icon-button hidden-xs\" type={buttonType(refreshRate)}>\n          <i className=\"fa fa-angle-down\" aria-hidden=\"true\" />\n          <span className=\"sr-only\">Split button!</span>\n        </Button>\n      </Dropdown>\n    </Button.Group>\n  );\n}\n\nRefreshButton.propTypes = {\n  dashboardConfiguration: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nfunction DashboardMoreOptionsButton({ dashboardConfiguration }) {\n  const {\n    dashboard,\n    setEditingLayout,\n    togglePublished,\n    archiveDashboard,\n    managePermissions,\n    gridDisabled,\n    isDashboardOwnerOrAdmin,\n  } = dashboardConfiguration;\n\n  const archive = () => {\n    Modal.confirm({\n      title: window.W_L.dashboard_archived,\n      content: window.W_L.are_you_sure + ` \"${dashboard.name}\" ` + window.W_L.dashboard_archived,\n      okText: window.W_L.ok_text,\n      cancelText: window.W_L.cancel,\n      okType: \"danger\",\n      onOk: archiveDashboard,\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  };\n\n  return (\n    <Dropdown\n      trigger={[\"click\"]}\n      placement=\"bottomRight\"\n      overlay={\n        <Menu data-test=\"DashboardMoreButtonMenu\">\n          <Menu.Item className={cx({ hidden: gridDisabled })}>\n            <PlainButton onClick={() => setEditingLayout(true)}>{window.W_L.edit}</PlainButton>\n          </Menu.Item>\n          {clientConfig.showPermissionsControl && isDashboardOwnerOrAdmin && (\n            <Menu.Item>\n              <PlainButton onClick={managePermissions}>{window.W_L.mange_permissions}</PlainButton>\n            </Menu.Item>\n          )}\n          {!clientConfig.disablePublish && !dashboard.is_draft && (\n            <Menu.Item>\n              <PlainButton onClick={togglePublished}>{window.W_L.draft}</PlainButton>\n            </Menu.Item>\n          )}\n          <Menu.Item>\n            <PlainButton onClick={archive}>{window.W_L.archived}</PlainButton>\n          </Menu.Item>\n        </Menu>\n      }>\n      <Button className=\"icon-button m-l-5\" data-test=\"DashboardMoreButton\" aria-label=\"More actions\">\n        <EllipsisOutlinedIcon rotate={90} aria-hidden=\"true\" />\n      </Button>\n    </Dropdown>\n  );\n}\n\nDashboardMoreOptionsButton.propTypes = {\n  dashboardConfiguration: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nfunction DashboardControl({ dashboardConfiguration, headerExtra }) {\n  const {\n    dashboard,\n    togglePublished,\n    canEditDashboard,\n    fullscreen,\n    toggleFullscreen,\n    showShareDashboardDialog,\n    updateDashboard,\n  } = dashboardConfiguration;\n  const showPublishButton = dashboard.is_draft;\n  const showRefreshButton = true;\n  const showFullscreenButton = !dashboard.is_draft;\n  const canShareDashboard = canEditDashboard && !dashboard.is_draft;\n  const showShareButton = !clientConfig.disablePublicUrls && (dashboard.publicAccessEnabled || canShareDashboard);\n  const showMoreOptionsButton = canEditDashboard;\n  const stepModalRef = React.useRef();\n  const openStepModal = () => {\n    if (stepModalRef.current) {\n      stepModalRef.current.openModal();\n    }\n  };\n  const unarchiveDashboard = () => {\n    recordEvent(\"unarchive\", \"dashboard\", dashboard.id);\n    updateDashboard({ is_archived: false }, false);\n  };\n  return (\n    <div className=\"dashboard-control\">\n      <StepModal ref={stepModalRef} dashboardId={dashboard.id} />\n      {dashboard.can_edit && dashboard.is_archived && <Button onClick={unarchiveDashboard}>Unarchive</Button>}\n      {!dashboard.is_archived && (\n        <span className=\"hidden-print\">\n          <Button className=\"m-r-5\" onClick={openStepModal}>\n              <span className=\"fa fa-magic m-r-5\" /> {window.W_L.prettify_dashboard}\n          </Button>\n          {showPublishButton && (\n            <Button className=\"m-r-5 hidden-xs\" onClick={togglePublished}>\n              <span className=\"fa fa-paper-plane m-r-5\" /> {window.W_L.publish}\n            </Button>\n          )}\n          {showRefreshButton && <RefreshButton dashboardConfiguration={dashboardConfiguration} />}\n          {showFullscreenButton && (\n            <Tooltip className=\"hidden-xs\" title={window.W_L.dis_en_able_fullscreen}>\n              <Button\n                type={buttonType(fullscreen)}\n                className=\"icon-button m-l-5\"\n                onClick={toggleFullscreen}\n                aria-label=\"Toggle fullscreen display\">\n                <i className=\"zmdi zmdi-fullscreen\" aria-hidden=\"true\" />\n              </Button>\n            </Tooltip>\n          )}\n          {headerExtra}\n          {showShareButton && (\n            <Tooltip title={window.W_L.share_dashboard_setting}>\n              <Button\n                className=\"icon-button m-l-5\"\n                type={buttonType(dashboard.publicAccessEnabled)}\n                onClick={showShareDashboardDialog}\n                data-test=\"OpenShareForm\"\n                aria-label=\"Share\">\n                <i className=\"zmdi zmdi-share\" aria-hidden=\"true\" />\n              </Button>\n            </Tooltip>\n          )}\n          {showMoreOptionsButton && <DashboardMoreOptionsButton dashboardConfiguration={dashboardConfiguration} />}\n        </span>\n      )}\n    </div>\n  );\n}\n\nDashboardControl.propTypes = {\n  dashboardConfiguration: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  headerExtra: PropTypes.node,\n};\n\nfunction DashboardEditControl({ dashboardConfiguration, headerExtra }) {\n  const {\n    setEditingLayout,\n    doneBtnClickedWhileSaving,\n    dashboardStatus,\n    retrySaveDashboardLayout,\n  } = dashboardConfiguration;\n  let status;\n  if (dashboardStatus === DashboardStatusEnum.SAVED) {\n    status = <span className=\"save-status\">{window.W_L.saved}</span>;\n  } else if (dashboardStatus === DashboardStatusEnum.SAVING) {\n    status = (\n      <span className=\"save-status\" data-saving>\n        {window.W_L.saving}\n      </span>\n    );\n  } else {\n    status = (\n      <span className=\"save-status\" data-error>\n        {window.W_L.save_failed}\n      </span>\n    );\n  }\n  return (\n    <div className=\"dashboard-control\">\n      {status}\n      {dashboardStatus === DashboardStatusEnum.SAVING_FAILED ? (\n        <Button type=\"primary\" onClick={retrySaveDashboardLayout}>\n          {window.W_L.retry}\n        </Button>\n      ) : (\n        <Button loading={doneBtnClickedWhileSaving} type=\"primary\" onClick={() => setEditingLayout(false)}>\n          {!doneBtnClickedWhileSaving && <i className=\"fa fa-check m-r-5\" aria-hidden=\"true\" />} {window.W_L.save}\n        </Button>\n      )}\n      {headerExtra}\n    </div>\n  );\n}\n\nDashboardEditControl.propTypes = {\n  dashboardConfiguration: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  headerExtra: PropTypes.node,\n};\n\nexport default function DashboardHeader({ dashboardConfiguration, headerExtra }) {\n  const { editingLayout } = dashboardConfiguration;\n  const DashboardControlComponent = editingLayout ? DashboardEditControl : DashboardControl;\n\n  return (\n    <div className=\"dashboard-header\">\n      <DashboardPageTitle dashboardConfiguration={dashboardConfiguration} />\n      <DashboardControlComponent dashboardConfiguration={dashboardConfiguration} headerExtra={headerExtra} />\n    </div>\n  );\n}\n\nDashboardHeader.propTypes = {\n  dashboardConfiguration: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  headerExtra: PropTypes.node,\n};\n","import { isEmpty, map } from \"lodash\";\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\n\nimport Button from \"antd/lib/button\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport DashboardGrid from \"@/components/dashboards/DashboardGrid\";\nimport Parameters from \"@/components/Parameters\";\nimport Filters from \"@/components/Filters\";\n\nimport { Dashboard } from \"@/services/dashboard\";\nimport recordEvent from \"@/services/recordEvent\";\nimport resizeObserver from \"@/services/resizeObserver\";\nimport routes from \"@/services/routes\";\nimport location from \"@/services/location\";\nimport url from \"@/services/url\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\n\nimport useDashboard from \"./hooks/useDashboard\";\nimport DashboardHeader from \"./components/DashboardHeader\";\n\nimport \"./DashboardPage.less\";\n\nfunction DashboardSettings({ dashboardConfiguration }) {\n  const { dashboard, updateDashboard } = dashboardConfiguration;\n  return (\n    <div className=\"m-b-10 p-15 bg-white tiled\">\n      <Checkbox\n        checked={!!dashboard.dashboard_filters_enabled}\n        onChange={({ target }) => updateDashboard({ dashboard_filters_enabled: target.checked })}\n        data-test=\"DashboardFiltersCheckbox\">\n        {window.W_L.dashboard_filter}\n      </Checkbox>\n    </div>\n  );\n}\n\nDashboardSettings.propTypes = {\n  dashboardConfiguration: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nfunction AddWidgetContainer({ dashboardConfiguration, className, ...props }) {\n  const { showAddTextboxDialog, showAddWidgetDialog } = dashboardConfiguration;\n  return (\n    <div className={cx(\"add-widget-container\", className)} {...props}>\n      <h2>\n        <i className=\"zmdi zmdi-widgets\" aria-hidden=\"true\" />\n        <span className=\"hidden-xs hidden-sm\">\n          {window.W_L.dashboard_widget_info}\n        </span>\n      </h2>\n      <div>\n        <Button className=\"m-r-15\" onClick={showAddTextboxDialog} data-test=\"AddTextboxButton\">\n          {window.W_L.add_text}\n        </Button>\n        <Button type=\"primary\" onClick={showAddWidgetDialog} data-test=\"AddWidgetButton\">\n          {window.W_L.add_widget}\n        </Button>\n      </div>\n    </div>\n  );\n}\n\nAddWidgetContainer.propTypes = {\n  dashboardConfiguration: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  className: PropTypes.string,\n};\n\nfunction DashboardComponent(props) {\n  const dashboardConfiguration = useDashboard(props.dashboard);\n  const {\n    dashboard,\n    filters,\n    setFilters,\n    loadDashboard,\n    loadWidget,\n    removeWidget,\n    saveDashboardLayout,\n    globalParameters,\n    updateDashboard,\n    refreshDashboard,\n    refreshWidget,\n    editingLayout,\n    setGridDisabled,\n  } = dashboardConfiguration;\n  const {isShowReport} = props;\n  const [pageContainer, setPageContainer] = useState(null);\n  const [bottomPanelStyles, setBottomPanelStyles] = useState({});\n  const onParametersEdit = parameters => {\n    const paramOrder = map(parameters, \"name\");\n    updateDashboard({ options: { globalParamOrder: paramOrder } });\n  };\n\n  useEffect(() => {\n    if (pageContainer) {\n      const unobserve = resizeObserver(pageContainer, () => {\n        if (editingLayout) {\n          const style = window.getComputedStyle(pageContainer, null);\n          const bounds = pageContainer.getBoundingClientRect();\n          const paddingLeft = parseFloat(style.paddingLeft) || 0;\n          const paddingRight = parseFloat(style.paddingRight) || 0;\n          setBottomPanelStyles({\n            left: Math.round(bounds.left) + paddingRight,\n            width: pageContainer.clientWidth - paddingLeft - paddingRight,\n          });\n        }\n\n        // reflow grid when container changes its size\n        window.dispatchEvent(new Event(\"resize\"));\n      });\n      return unobserve;\n    }\n  }, [pageContainer, editingLayout]);\n\n  return (\n    <div className=\"container\" ref={setPageContainer} data-test={`DashboardId${dashboard.id}Container`}>\n      {\n        isShowReport&&(<DashboardHeader\n        dashboardConfiguration={dashboardConfiguration}\n        headerExtra={\n          <DynamicComponent\n            name=\"Dashboard.HeaderExtra\"\n            dashboard={dashboard}\n            dashboardConfiguration={dashboardConfiguration}\n          />\n        }\n      />)\n      }\n      {isShowReport&&!isEmpty(globalParameters) && (\n        <div className=\"dashboard-parameters m-b-10 p-15 bg-white tiled\" data-test=\"DashboardParameters\">\n          <Parameters\n            parameters={globalParameters}\n            onValuesChange={refreshDashboard}\n            sortable={editingLayout}\n            onParametersEdit={onParametersEdit}\n          />\n        </div>\n      )}\n      {isShowReport&&!isEmpty(filters) && (\n        <div className=\"m-b-10 p-15 bg-white tiled\" data-test=\"DashboardFilters\">\n          <Filters filters={filters} onChange={setFilters} />\n        </div>\n      )}\n      {isShowReport&&editingLayout && <DashboardSettings dashboardConfiguration={dashboardConfiguration} />}\n      <div id=\"dashboard-container\">\n        <DashboardGrid\n          isShowReport={isShowReport}\n          dashboard={dashboard}\n          widgets={dashboard.widgets}\n          filters={filters}\n          isEditing={editingLayout}\n          onLayoutChange={editingLayout ? saveDashboardLayout : () => {}}\n          onBreakpointChange={setGridDisabled}\n          onLoadWidget={loadWidget}\n          onRefreshWidget={refreshWidget}\n          onRemoveWidget={removeWidget}\n          onParameterMappingsChange={loadDashboard}\n        />\n      </div>\n      {isShowReport&&editingLayout && (\n        <AddWidgetContainer dashboardConfiguration={dashboardConfiguration} style={bottomPanelStyles} />\n      )}\n    </div>\n  );\n}\n\nDashboardComponent.propTypes = {\n  dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nfunction DashboardPage({ dashboardSlug, dashboardId, onError,isShowReport }) {\n  const [dashboard, setDashboard] = useState(null);\n  const handleError = useImmutableCallback(onError);\n  \n  useEffect(() => {\n    Dashboard.get({ id: dashboardId, slug: dashboardSlug })\n      .then(dashboardData => {\n        recordEvent(\"view\", \"dashboard\", dashboardData.id);\n        setDashboard(dashboardData);\n\n        // if loaded by slug, update location url to use the id\n        if (!dashboardId) {\n          location.setPath(url.parse(dashboardData.url).pathname, true);\n        }\n        let timeoutId = null;\n  const scrollToBottom = () => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(() => {\n    const messageContainer = document.querySelector('.dashbord_page');\n    if (messageContainer) {\n        const scrollHeight = messageContainer.scrollHeight;\n      const clientHeight = messageContainer.clientHeight;\n      messageContainer.scrollTo({\n        top: scrollHeight - clientHeight,\n        behavior: 'smooth',\n      });\n    }\n  }, 80);\n  };\n  scrollToBottom();\n      })\n      .catch(handleError);\n  }, [dashboardId, dashboardSlug, handleError]);\n\n  return <div className=\"dashboard-page\">{dashboard && <DashboardComponent isShowReport={isShowReport} dashboard={dashboard} />}</div>;\n}\n\nDashboardPage.propTypes = {\n  dashboardSlug: PropTypes.string,\n  dashboardId: PropTypes.string,\n  onError: PropTypes.func,\n  isShowReport: PropTypes.bool,\n};\n\nDashboardPage.defaultProps = {\n  dashboardSlug: null,\n  dashboardId: null,\n  onError: PropTypes.func,\n  isShowReport: true,\n};\n\nexport default DashboardPage;\n// route kept for backward compatibility\nroutes.register(\n  \"Dashboards.LegacyViewOrEdit\",\n  routeWithUserSession({\n    path: \"/dashboard/:dashboardSlug\",\n    render: pageProps => <DashboardPage {...pageProps} />,\n  })\n);\n\nroutes.register(\n  \"Dashboards.ViewOrEdit\",\n  routeWithUserSession({\n    path: \"/dashboards/:dashboardId([^-]+)(-.*)?\",\n    render: pageProps => <DashboardPage {...pageProps} />,\n  })\n);\n","// import notification from \"@/services/notification\";\nimport { currentUser } from \"@/services/auth\";\nimport { EventEmitter } from 'events';\n\nlet websocket,\n  lockReconnect = false,\n  wsType =0,\n  stopGeneration=true;\nconst lockReconnectEvent = new EventEmitter();\nlet wsProtocol = 'ws';\nif (window.location.protocol === 'https:') {\n  wsProtocol = 'wss';\n}\nlet createWebSocket = () => {\n  if (websocket && websocket.readyState === 1) return;\n  const url = `${wsProtocol}://${process.env.SOCKET}${currentUser.id}_${currentUser.name}`\n  websocket = new WebSocket(url);\n  websocket.onopen = function () {\n    heartCheck.reset().start();\n    // notification.success(window.W_L.connection_success_tip)\n    lockReconnect = true;\n    stopGeneration=false;\n    wsType=1;\n    lockReconnectEvent.emit('change',wsType );\n  };\n  websocket.onerror = function (e) {\n    reconnect(url);\n  };\n  websocket.onclose = function (e) {\n    lockReconnect = false;\n    wsType=0;\n    lockReconnectEvent.emit('change', wsType);\n  };\n  websocket.onmessage = function (event) {\n    lockReconnect = true; \n    wsType=1;\n    lockReconnectEvent.emit('change', wsType);\n  };\n};\nlet reconnect = (url) => {\n  if (lockReconnect) return;\n  setTimeout(function () {\n    createWebSocket(url);\n    lockReconnect = false;\n    wsType=2;\n    lockReconnectEvent.emit('change', wsType);\n  }, 4000);\n};\nlet heartCheck = {\n  timeout: 60000, \n  timeoutObj: null,\n  reset: function () {\n    clearInterval(this.timeoutObj);\n    return this;\n  },\n  start: function () {\n    this.timeoutObj = setInterval(function () {\n      const messgaeInfo = {\n        state:200,\n        sender:\"heartCheck\",\n        data: {\n          content:\"HeartBeat\",\n        },\n      }\n      sendMessage(messgaeInfo)\n    }, this.timeout);\n  },\n};\nlet sendMessage = (message) => {\n  if (websocket && websocket.readyState === 1) {\n    websocket.send(JSON.stringify(message));\n  }\n};\nlet closeWebSocket = () => {\n  websocket && websocket.close();\n};\nlet setLockReconnect = (flag) => {\n  lockReconnect = flag;\n};\nlet setStopGeneration = (flag) => {\n  stopGeneration = flag;\n};\nexport { websocket, createWebSocket, closeWebSocket,lockReconnect,setLockReconnect,stopGeneration,setStopGeneration,lockReconnectEvent };\n","import { useState, useCallback,useEffect,useRef } from 'react';\nimport { axios } from \"@/services/axios\";\n\nexport const useChartCode = (sendSocketMessage,saveDashboardId, props, successSetting,CharttableDate,new_sql,DashboardId,sendDashId) => {\n  const [state, setState] = useState({ dashboard_id: null });\n  const DashId = useRef(null);\n  useEffect(() => {\n    if(DashboardId){\n      DashId.current = DashboardId;\n    }\n}, [DashboardId])\n\n  const saveChart = useCallback(async (options, type = null,task_id) => {\n    // console.log(options[0].globalSeriesType, 'globalSeriesType')\n    // console.log(options[0].columnMapping, 'columnMapping')\n    const sqlId = new_sql.current;\n    // console.log(\"savasqlId\",sqlId)\n    const data = {\n      description: \"\",\n      name: window.W_L.CHART,\n      query_id: sqlId,\n      type: \"CHART\",\n      options: {\n        alignYAxesAtZero: false,\n        globalSeriesType: options[0].globalSeriesType,\n        coefficient: 1,\n        columnMapping: options[0].columnMapping,\n        dateTimeFormat: \"DD/MM/YY HH:mm\",\n        direction: {\n          type: \"counterclockwise\"\n        },\n        error_y: {\n          type: \"data\",\n          visible: true\n        },\n        legend: {\n          enabled: true,\n          placement: \"auto\",\n          traceorder: \"normal\"\n        },\n        missingValuesAsZero: true,\n        numberFormat: \"0,0[.]00000\",\n        percentFormat: \"0[.]00%\",\n        series: {\n          stacking: null,\n          error_y: {\n            type: \"data\",\n            visible: true\n          },\n        },\n        seriesOptions: {},\n        showDataLabels: true,\n        sizemode: \"diameter\",\n        sortX: false,\n        textFormat: \"\",\n        valuesOptions: {},\n        xAxis: {\n          type: \"category\",\n          labels: {\n            enabled: true,\n          }\n        },\n        yAxis: [\n          { type: \"linear\" },\n          { type: \"linear\", opposite: true }\n        ],\n      }\n    }\n    try {\n      const res = await axios.post(`/api/visualizations`, data);\n      // console.log(res, 'save_success');\n      if (type === \"edit\") {\n        // console.log(\"second saveChart\")\n        await dashboardsId(res, type,task_id);\n      } else {\n        await publishQuery(null,task_id);\n        // await newReport(type,task_id);\n      }\n\n    } catch (err) {\n      // console.log(err, 'save_error');\n      await sendSocketMessage(500,'bi','chart_code',err,task_id)\n    }\n  }, [state, dashboardsId, publishQuery]);\n\n  // publishQuery\nconst publishQuery = useCallback(async (type = null,task_id) => {\n  console.log(task_id,\"publishQuery\")\n  console.log(\"new_sql.current===\", new_sql.current)\n  const sqlId = new_sql.current;\n    const CharttableDate = CharttableDate;\n    const data = {\n      id: sqlId,\n      is_draft: true,\n      version: 1\n    }\n    try {\n      const res = await axios.post(`/api/queries/${sqlId}`, data);\n      console.log(res, 'publishQuery_success');\n      if (CharttableDate && CharttableDate.dashboard_id) {\n        await dashboardsId(res,type,task_id);\n      } else {\n        await newReport(type,task_id);\n      }\n    } catch (err) {\n      console.log(err, 'publishQuery_error');\n      await sendSocketMessage(500, 'bi', 'chart_code', err,task_id)\n    }\n}, [state, CharttableDate, dashboardsId, newReport, sendSocketMessage]);\n// deleteReports\nconst deleteReports = (async (report_name) => {\n  const res = await axios.get(`/api/dashboards?order&page=1&page_size=20&q=${report_name}`);\n  if(res.results.length>0){\n    res.results.forEach(async (item,index)=>{\n      if(item.name===report_name){\n        const resdel = await axios.delete(`/api/dashboards/${item.id}`);\n      }\n    })\n  }\n});\n// newReport\nconst newReport = useCallback(async (type = null,task_id) => {\n    const data = {\n      name: window.W_L.temporary_dashboard\n    }\n    try {\n      await deleteReports(window.W_L.temporary_dashboard);\n      const res = await axios.post('/api/dashboards', data);\n      // console.log(res, 'newReport_success');\n      // setState(prevState => ({ ...prevState, dashboard_id: res.id }));\n      saveDashboardId(\"dashboard_id\", res.id);\n      await dashboardsId(res, type,task_id);\n    } catch (err) {\n      // console.log(err, 'newReport_error');\n    }\n  }, [setState, saveDashboardId, dashboardsId]);\n\n// DashboardsId\nconst dashboardsId = useCallback(async (response, type = null,task_id) => {\n  let dashboard_id;\n  // console.log(\"dashboardId.current:\", DashId.current);\n// console.log(\"response.id:\", response.id);\n    if (DashId.current) {\n      dashboard_id = DashId.current;\n    }else{\n      dashboard_id = response.id;\n    }\n    // if (!CharttableDate.publicUrl && type === \"ask_data\") {\n    //   await sendSocketMessage(500, 'bi', 'ask_data', [],task_id)\n    //   return\n    // }\n\n    try {\n      const res = await axios.get(`/api/dashboards/${dashboard_id}`);\n      // console.log(res, 'get_dashboard_id_success');\n      if (type === \"delete\") {\n        deleteReport(response, res,task_id);\n        return\n      }\n      if (type === \"ask_data\") {\n        widgetsJson(res, type,task_id);\n        return\n      }\n      if (type === \"getPath\" || type === \"delGetPath\") {\n        await sendSocketMessage(200, 'bi', type===\"getPath\"?'chart_code':'delete_chart', res,task_id)\n        sendDashId(dashboard_id)\n        successSetting()\n        return\n      }\n      await queriesId(res, type,task_id);\n    } catch (err) {\n      // console.log(err, 'get_dashboard_id_error');\n    }\n  }, [state, setState, sendSocketMessage, deleteReport, widgetsJson, props, successSetting, queriesId,saveDashboardId,sendDashId,DashId]);\n\n  const queriesId = useCallback(async (response, type,task_id) => {\n    const sqlId = new_sql.current;\n    try {\n      const res = await axios.get(`/api/queries/${sqlId}`);\n      // console.log(res, 'get_sql_id_success');\n      await editReport(res, response, type,task_id);\n    } catch (error) {\n      // console.log(error, 'get_sql_id_error');\n    }\n  }, [state, editReport]);\n\n  // editReport\n  const editReport = useCallback(async (response, response_dashboards, type,task_id) => {\n    const dashboard_id = DashId.current;\n    const data = {\n      created_at: new Date(),\n      dashboard_id,\n      options: {\n        isHidden: false,\n        parameterMappings: {},\n        position: {\n          autoHeight: false,\n          col: 0,\n          maxSizeX: 6,\n          maxSizeY: 1000,\n          minSizeX: 1,\n          minSizeY: 5,\n          row: 0,\n          sizeX: 6,\n          sizeY: 12\n        }\n      },\n      text: \"\",\n      visualization_id: response.visualizations[response.visualizations.length - 1].id,\n      width: 1\n    }\n    try {\n      const res = await axios.post(`/api/widgets`, data);\n      // console.log(res, 'add_success');\n      await saveReport(res, response_dashboards, type,task_id);\n    } catch (err) {\n      // console.log(err, 'add_error')\n    }\n  }, [state, saveReport]);\n\n  // saveReport\n  const saveReport = useCallback(async (response, response_dashboards, type,task_id) => {\n    let options=response.options\n    options.position.row=response_dashboards.widgets.length*12\n    let data = {\n      dashboard_id: response.dashboard_id,\n      id: response.id,\n      options,\n      text: \"\",\n      visualization_id: response.visualization.id,\n      width: 1\n    }\n    try {\n      const res = await axios.post(`/api/widgets/${response.id}`, data);\n      await widgetsJson(res, type,task_id);\n    } catch (error) {\n      console.log(error, 'saveReport_error')\n    }\n  }, [widgetsJson]);\n\n  // widgetsJson\n  const widgetsJson = useCallback(async (response, type,task_id) => {\n    const dashboard_id = DashId.current;\n    const sqlId = new_sql.current;\n    try {\n      if (type === \"ask_data\") {\n        let content = []\n        const arr = response.widgets.map(async (item, index) => {\n          const res = await axios.get(`/api/queries/${item.visualization.query.id}/results/${item.visualization.query.latest_query_data_id}.json`)\n          // console.log(res, 'jsonget_success')\n          content.push({ data: res.query_result.data, table_name: item.visualization.query.name })\n        })\n        Promise.all(arr).then(async res => {\n          // console.log(content, '')\n          await sendSocketMessage(200, 'bi', 'ask_data', content,task_id)\n        })\n        return\n      }\n      const res = await axios.get(`/api/queries/${sqlId}/results/${response.visualization.query.latest_query_data_id}.json`)\n      if (type !== \"edit\") {\n        // await publishReport(task_id)\n        sendDashId(dashboard_id)\n      await sendSocketMessage(200, 'bi', 'chart_code', res,task_id)\n      successSetting()\n      } else {\n        dashboardsId(res, \"getPath\",task_id)\n      }\n    } catch (error) {\n      // console.log(error, 'jsonget_error')\n    }\n  }, [state, sendSocketMessage,new_sql, dashboardsId]);\n\n\n\n  // publishReport\n  // const publishReport = useCallback(async (task_id) => {\n  //    const dashboard_id = DashId.current;\n  //   const data = {\n  //     id: dashboard_id,\n  //     is_draft: false,\n  //   }\n\n  //   try {\n  //     const res = await axios.post(`/api/dashboards/${dashboard_id}`, data)\n  //     // await shareQuery(task_id);\n  //     sendDashId(dashboard_id)\n  //     await sendSocketMessage(200, 'bi', 'chart_code', res,task_id)\n  //     successSetting()\n  //   } catch (error) {\n  //   }\n  // }, [state,successSetting,sendSocketMessage]);\n\n  // shareQuery\n  // const shareQuery = useCallback(async (task_id) => {\n  //    const dashboard_id = DashId.current;\n  //   try {\n  //     const res = await axios.post(`/api/dashboards/${dashboard_id}/share`)\n  //     console.log(res.public_url, 'send_public_url')\n  //     // props.sendDashId(res.public_url)\n  //     successSetting()\n  //     await sendSocketMessage(200, 'bi', 'chart_code', res,task_id)\n  //   } catch (error) {\n  //     console.log(error, 'share_error')\n  //   }\n  // }, [state, props, successSetting, sendSocketMessage]);\n\n  // deleteReport\n  const deleteReport = useCallback(async (nameList, response,task_id) => {\n    try {\n      const arr = response.widgets.map(async (item, index) => {\n        if (nameList.includes(item.visualization.query.name)) {\n          await axios.delete(`/api/widgets/${item.id}`)\n        }\n      })\n      Promise.all(arr).then(res => {\n        dashboardsId(res, \"delGetPath\",task_id)\n      })\n\n    } catch (error) {\n    }\n  }, [dashboardsId]);\n\n  return { DashId,saveChart,dashboardsId, publishQuery };\n};\n","\nexport const dialogueStorage=()=> {\n    const addAutopilotStorage = (dialogue) => {\n        sessionStorage.setItem(\"Chart_Dialogue_Autopilot\", JSON.stringify(dialogue));\n    };\n    const getAutopilotStorage = () => {\n        return JSON.parse(sessionStorage.getItem(\"Chart_Dialogue_Autopilot\"));\n    };\n    const addDialogueStorage = (dialogue) => {\n        sessionStorage.setItem(\"Chart_Dialogue\", JSON.stringify(dialogue));\n    };\n    const getDialogueStorage = () => {\n        return JSON.parse(sessionStorage.getItem(\"Chart_Dialogue\"));\n    };\n    const addChatList = (dialogue,type) => {\n        if(dialogue.length<=0){\n            return\n        }\n        let Chart_Dialogue=[]\n        if(type===\"chat\"){\n            Chart_Dialogue=getDialogueStorage()\n        }else{\n            Chart_Dialogue=getDashboard()\n        }\n        if(Chart_Dialogue && Chart_Dialogue.length>0){\n            Chart_Dialogue[Chart_Dialogue.length-1].messages=dialogue\n        }\n        type===\"chat\"?addDialogueStorage(Chart_Dialogue):addDashboard(Chart_Dialogue)\n        if(type===\"chat\"&&Chart_Dialogue && Chart_Dialogue.length>0 && Chart_Dialogue[Chart_Dialogue.length-1].messages.length>=2){\n            addAllStorage(Chart_Dialogue)\n        }\n    }\n    const addDashboard = (dialogue) => {\n        sessionStorage.setItem(\"Chart_Dashboard\", JSON.stringify(dialogue));\n    };\n    const setDialogueStorageDashboardId = (id) => {\n        let dialogueStorage=getDashboard()\n        if(dialogueStorage && dialogueStorage.length>0){\n            dialogueStorage[0].dashboardId=id\n        }\n        addDashboard(dialogueStorage)\n    };\n    const getDashboard = () => {\n        return JSON.parse(sessionStorage.getItem(\"Chart_Dashboard\"));\n    };\n\n    const addAllStorage = (dialogue) => {\n        let allStorage=getAllStorage()\n        if(allStorage.length>=10){\n            allStorage.splice(0,1)\n        }\n        let index=allStorage.findIndex((item)=>{\n            return item.uuid===dialogue[0].uuid\n        })\n        if(index>=0){\n            allStorage[index].messages=dialogue[0].messages\n        }else{\n            allStorage.push(dialogue[0])\n        }\n        localStorage.setItem(\"Chart_All\", JSON.stringify(allStorage));\n    }\n    const getAllStorage = () => {\n        return JSON.parse(localStorage.getItem(\"Chart_All\")) || [];\n    }\n    return {getAutopilotStorage,addAutopilotStorage,addDashboard, getDashboard,addDialogueStorage,getDialogueStorage,addChatList,getAllStorage,setDialogueStorageDashboardId};\n}","import React from \"react\";\nimport Button from \"antd/lib/button\";\nimport Modal from \"antd/lib/modal\";\nimport \"./index.css\";\n\nconst DialogueTop = (props) => {\n    const {CharttableItem,chat_type,Charttable,loadingMask} = props;\n    const close = () => {\n        const doDelete = () => {\n            props.closeDialogue()\n          };\n          if(chat_type===\"autopilot\"){\n            doDelete();\n            return\n          }\n        Modal.confirm({\n            title: window.W_L.reset_dialogue,\n            content: window.W_L.reset_dialogue_confirm,\n            okText: window.W_L.ok_text,\n            cancelText: window.W_L.cancel,\n            okType: \"danger\",\n            onOk: doDelete,\n            onCancel: null,\n            maskClosable: true,\n            autoFocusButton: null,\n          });\n    }\n\n  return (\n   <>\n   {\n    Charttable&&CharttableItem&& CharttableItem.label&&\n    <div className={chat_type===\"report\"?\"dialogue-top report-top\":\"dialogue-top\"}>\n    <div className=\"dialogue-top-flex\">\n         <div>{chat_type===\"chat\"?window.W_L.data_analysis:chat_type===\"report\"?window.W_L.query_builder:chat_type===\"autopilot\"?window.W_L.auto_pilot:\"\"}</div>\n     </div>\n     <div className=\"dialogue-top-flex\">\n         <div>{window.W_L.data_source}:</div>\n         <span>{CharttableItem.label}</span>\n     </div>\n     {\n        chat_type!==\"viewConversation\"&&\n        (\n            <Button disabled={loadingMask} type=\"primary\" size=\"small\" onClick={() => close()} style={{borderRadius: \"20px\",fontSize: \"13px\",paddingLeft: \"15px\",paddingRight: \"15px\"}} ghost>\n             <i className=\"fa fa-plus m-r-5\" aria-hidden=\"true\" />\n            {chat_type===\"autopilot\"?window.W_L.auto_pilot:window.W_L.new_dialogue}\n          </Button>\n        )\n     }\n </div>\n   }\n   </>\n  );\n};\n\nexport default DialogueTop;","import React from 'react';\nimport Button from \"antd/lib/button\";\nimport './index.css';\n\nconst Overlay = (props) => {\n  const {loadingMask } = props;\n  const onUse = () => {\n    props.onUse();\n  };\n  return (\n    <div className=\"overlay\">\n     <Button className=\"overlay-btn\" onClick={onUse} loading={loadingMask}>{loadingMask?window.W_L.init_config:window.W_L.start_use}</Button>\n    </div>\n  );\n};\n\nexport default Overlay;\n","import React, { useEffect, useState,forwardRef} from 'react';\nimport Input from \"antd/lib/input\";\nimport Table from \"antd/lib/table\";\nimport ArrowLeftOutlinedIcon from \"@ant-design/icons/ArrowLeftOutlined\";\nimport ExclamationCircleOutlinedIcon from \"@ant-design/icons/ExclamationCircleOutlined\";\nimport Tooltip from \"@/components/Tooltip\";\nimport './index.less';\nconst SecondChoice = forwardRef(({SelectLoading,editData,closeEditData,submit,source_item},ref) => {\n  const [SchemaList, setSchemaList] = useState([]);\n  const [SchemaListDataItem, setSchemaListDataItem] = useState({});\n  const [SecondChoiceLoading, setSecondChoiceLoading] = useState(false);\n  const columns = [\n    {\n      title: window.W_L.field_name,\n      dataIndex: 'name',\n      key: 'name',\n      render: (text, record) => (\n        <Tooltip title={text}>\n          <span style={{ display: \"inline-block\", maxWidth: \"100px\", overflow: \"hidden\", textOverflow: \"ellipsis\", whiteSpace: \"nowrap\" }}>{text}</span>\n        </Tooltip>\n      ),\n    },\n    {\n      title: window.W_L.description,\n      dataIndex: 'comment',\n      key: 'comment',\n      render: (text, record) => (\n          <Input\n            type=\"text\"\n            placeholder={window.W_L.field_description}\n            value={text}\n            style={{border: \"none !important\"}}\n            onChange={(e) => handleFieldDescriptionChange(e, record)}\n          />\n      ),\n    },\n    {\n      title: window.W_L.detection,\n      dataIndex: 'is_pass',\n      key: 'is_pass',\n      render: (text, record) => (\n        <div>\n          {text === 1 ? (\n            <span style={{ color: \"#52c41a\" }}>{window.W_L.pass}</span>\n          ) : (\n            <span style={{ color: \"#f5222d\" }}>{window.W_L.fail}</span>\n          )}\n        </div>\n      ),\n    }\n  ];\n  useEffect(() => {\n    setSecondChoiceLoading(SelectLoading);\n  }, [SelectLoading]);\n  useEffect(() => {\n    if(editData && editData.length>0){\n      setSchemaList(editData);\n      clickSchemaItem(editData[0]); \n    }\n  }, [editData]);\n\n\n \n\n\n  const handleFieldDescriptionChange = (e, record) => {\n    const value = e.target.value;\n    const newSchemaListDataItem = { ...SchemaListDataItem };\n    const newFieldDesc = newSchemaListDataItem.field_desc.map((item) => {\n      if (item.name === record.name) {\n        item.comment = value;\n      }\n      return item;\n    }\n    );\n    const newSchemaList = SchemaList.map((item) => {\n      if (item.table_name === SchemaListDataItem.table_name) {\n        item.field_desc = newFieldDesc;\n      }\n      return item;\n    }\n    );\n    setSchemaList(newSchemaList);\n  }\n  const handleTableDescriptionChange = (e) => {\n    const value = e.target.value;\n    const newSchemaList = SchemaList.map((item) => {\n      if (item.table_name === SchemaListDataItem.table_name) {\n        item.table_comment = value;\n      }\n      return item;\n    }\n    );\n    setSchemaList(newSchemaList);\n  }\n  const clickSchemaItem = (item) => {\n    let newFieldDesc =item\n    newFieldDesc.field_desc = item.field_desc.filter((item) => item.is_pass === 0);\n    setSchemaListDataItem(newFieldDesc);\n  }\n  const editSubmit = () => {\n    submit(SchemaList);\n  }\n  const goBack = () => {\n    closeEditData();\n  }\n  const tableIsShow = SchemaListDataItem.field_desc && SchemaListDataItem.field_desc.length > 0;\n  const SchemaListIsShow = SchemaList && SchemaList.length > 0;\n  return (\n   \n        <div>\n          <p className=\"edit-back\" onClick={goBack}>\n          <ArrowLeftOutlinedIcon style={{fontSize:\"18px\"}} />\n          </p>\n          <div className=\"select-content-item\">\n          <div style={{position: \"absolute\",bottom: \"-30px\",fontSize:\"12px\"}}>\n            <Tooltip title={window.W_L.source_tooltip}>\n              <ExclamationCircleOutlinedIcon style={{marginRight:\"5px\"}} />\n            </Tooltip>\n              {window.W_L.source_second_tooltip}\n            </div>\n            <div style={{ display: \"flex\", alignItems: \"baseline\" }}>\n                <div className=\"select-main\" style={{margin:\"0\"}}>\n                  <ul className={!SchemaListIsShow ? \"flex-center\" : \"\"} style={{height:\"288px\"}}>\n                    {SchemaListIsShow&& SchemaList.map((item, index) => (\n                      <li key={index}>\n                        <span onClick={() => clickSchemaItem(item)} style={{ color: item.table_name === SchemaListDataItem.table_name ? \"#2196F3\" : \"#333\",textAlign: \"center\",display:\"block\" }}>{source_item.type===\"csv\"?item.table_comment:item.table_name}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n            </div>\n            <div className=\"table-columns\">\n              {tableIsShow && (\n                <div className=\"table-columns-item\">\n                  <span>{source_item.type===\"csv\"?SchemaListDataItem.table_comment:SchemaListDataItem.table_name}</span>\n                  <Input\n                     placeholder={window.W_L.sheet_description}\n                    style={{ padding: \"2px\", maxWidth: \"60%\" }}\n                    type=\"text\"\n                    disabled={source_item.type===\"csv\"?true:false}\n                    value={source_item.type===\"csv\"?SchemaListDataItem.table_name:SchemaListDataItem.table_comment}\n                    onChange={handleTableDescriptionChange}\n                  />\n                </div>\n              )}\n              <div className={!tableIsShow ? \"flex-center\" : \"\"} style={{ width: \"400px\", overflowY: \"scroll\", height: tableIsShow ? \"235px\" : \"276px\"  }}>\n              {tableIsShow && (\n                  <Table\n                    dataSource={SchemaListDataItem.field_desc}\n                    columns={columns}\n                    size=\"small\"\n                    rowKey={(record) => record.name}\n                    pagination={false}>\n                  </Table>\n                )\n                }\n              </div>\n            </div>\n              <button onClick={editSubmit} disabled={SecondChoiceLoading} className=\"submit-btn\">{window.W_L.submit}</button>\n          </div>\n      </div>\n  );\n});\n\nexport default SecondChoice;","import { has, map, isObject } from \"lodash\";\nimport { axios } from \"@/services/axios\";\nimport { fetchDataFromJob } from \"@/services/query-result\";\n\nexport const SCHEMA_NOT_SUPPORTED = 1;\nexport const SCHEMA_LOAD_ERROR = 2;\nexport const IMG_ROOT = \"static/images/db-logos\";\n\nfunction mapSchemaColumnsToObject(columns) {\n  return map(columns, column => (isObject(column) ? column : { name: column }));\n}\n\nconst DataSource = {\n  query: () => axios.get(\"api/data_sources\"),\n  get: ({ id }) => axios.get(`api/data_sources/${id}`),\n  types: () => axios.get(\"api/data_sources/types\"),\n  create: data => axios.post(`api/data_sources`, data),\n  save: data => axios.post(`api/data_sources/${data.id}`, data),\n  test: data => axios.post(`api/data_sources/${data.id}/test`),\n  delete: ({ id }) => axios.delete(`api/data_sources/${id}`),\n  fetchSchema: (data, refresh = false) => {\n    const params = {};\n\n    if (refresh) {\n      params.refresh = true;\n    }\n\n    return axios\n      .get(`api/data_sources/${data.id}/schema`, { params })\n      .then(data => {\n        if (has(data, \"job\")) {\n          return fetchDataFromJob(data.job.id).catch(error =>\n            error.code === SCHEMA_NOT_SUPPORTED ? [] : Promise.reject(new Error(data.job.error))\n          );\n        }\n        return has(data, \"schema\") ? data.schema : Promise.reject();\n      })\n      .then(tables => map(tables, table => ({ ...table, columns: mapSchemaColumnsToObject(table.columns) })));\n  },\n};\n\nexport default DataSource;\n","import React, { useEffect, useState, forwardRef, useImperativeHandle } from \"react\";\nimport Select from \"antd/lib/select\";\nimport Input from \"antd/lib/input\";\nimport Table from \"antd/lib/table\";\nimport { axios } from \"@/services/axios\";\nimport Spin from \"antd/lib/spin\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport Space from \"antd/lib/space\";\nimport Progress from \"antd/lib/progress\";\n// import pg from \"@/assets/images/db-logos/pg.png\";\n// import mysql from \"@/assets/images/db-logos/mysql.png\";\n// import excel from \"@/assets/images/db-logos/excel.png\";\n// import starrocks from \"@/assets/images/db-logos/starrocks.png\";\nimport InboxOutlinedIcon from \"@ant-design/icons/InboxOutlined\";\nimport QuestionCircleOutlinedIcon from \"@ant-design/icons/QuestionCircleOutlined\";\nimport InfoCircleOutlinedIcon from \"@ant-design/icons/InfoCircleOutlined\";\nimport Link from \"@/components/Link\";\nimport Tooltip from \"@/components/Tooltip\";\nimport SecondChoice from \"./SecondChoice\";\nimport { IMG_ROOT } from \"@/services/data-source\";\nimport \"./index.less\";\nimport { T } from \"antd/lib/upload/utils\";\nconst SelectSource = forwardRef(({ confirmLoading, Charttable, chat_type, onChange, onSuccess, percent }, ref) => {\n  const [options, setOptions] = useState([]);\n  const [source_item, setSourceItem] = useState({ type: \"mysql\" });\n  const [source_id, setSource_id] = useState();\n  const [SchemaList, setSchemaList] = useState([]);\n  const [SchemaListData, setSchemaListData] = useState([]);\n  const [SchemaListDataItem, setSchemaListDataItem] = useState({});\n  const [selectSchema, setSelectSchema] = useState([]);\n  const [selectedRowKeys, setSelectedRowKeys] = useState([]);\n  const [tableSelectedRowKeys, setTableSelectedRowKeys] = useState([]);\n  const [loadingTableColumns, setLoadingTableColumns] = useState(false);\n  const [indeterminate, setIndeterminate] = useState(false); // all checkbox\n  const [checkAll, setCheckAll] = useState(false); // all checkbox\n  const [SelectLoading, setSelectLoading] = useState(true);\n  const [editData, setEditData] = useState([]); //editData\n  const [submitting, setSubmitting] = useState(false);\n  const columns = [\n    {\n      title: window.W_L.field_name,\n      dataIndex: \"name\",\n      key: \"name\",\n      render: (text, record) => (\n        <Tooltip title={record.name}>\n          <span className=\"field-name\">{record.name}</span>\n        </Tooltip>\n      ),\n    },\n    {\n      title: window.W_L.description,\n      dataIndex: \"comment\",\n      key: \"comment\",\n      render: (text, record) => (\n        <Input\n          type=\"text\"\n          value={text}\n          style={{ border: \"none !important\" }}\n          placeholder={window.W_L.field_description}\n          onChange={e => handleFieldDescriptionChange(e, record)}\n        />\n      ),\n    },\n  ];\n\n  useEffect(() => {\n    const getMySql = async () => {\n      try {\n        const res = await axios.get(\"/api/data_sources\");\n        const options = res.map(d => ({\n          ...d,\n          value: d.id,\n          label: d.name,\n          type: d.type,\n        }));\n        if (chat_type !== \"report\") {\n          options.unshift({ label: window.W_L.excel_upload, value: 0, type: \"csv\", id: 0 });\n        }\n\n        setOptions(options);\n      } catch (err) {\n        console.error(\"error\", err);\n      }\n    };\n    getMySql();\n  }, [chat_type]);\n  useEffect(() => {\n    setSelectLoading(confirmLoading);\n    if (!confirmLoading) {\n      setSubmitting(false);\n    }\n  }, [confirmLoading]);\n  const filterOption = (input, option) => (option?.label ?? \"\").toLowerCase().includes(input.toLowerCase());\n\n  const editTableData = data => {\n    setEditData(data);\n  };\n\n  const handleChange = value => {\n    resetStates();\n    const selectedItem = options.find(item => item.value === value);\n    const type = selectedItem ? selectedItem.type : null;\n    onChange(type, value, selectedItem);\n    setSourceItem(selectedItem);\n    setSource_id(value);\n    schemaList(value, type);\n  };\n\n  const resetStates = () => {\n    setSourceItem({ type: \"\" });\n    setSource_id(\"\");\n    setSchemaList([]);\n    setSchemaListData([]);\n    setSchemaListDataItem({});\n    setSelectSchema([]);\n    setSelectedRowKeys([]);\n    setTableSelectedRowKeys([]);\n    setIndeterminate(false);\n    setCheckAll(false);\n  };\n  const getSchemaList = async (val, max = 50) => {\n    setSelectLoading(true);\n    return new Promise(async (resolve, reject) => {\n      try {\n        const res = await axios.get(`/api/data_sources/${val}/schema?refresh=true`);\n        if (res.job && res.job.status !== 3) {\n          // 如果作业未立即完成，开始轮询作业状态\n          let num = 0;\n          const job_id = res.job.id;\n          const timer = setInterval(async () => {\n            num++;\n            if (num > max) {\n              clearInterval(timer);\n              setSelectLoading(false); \n              reject(new Error(\"Timeout waiting for job completion\"));\n            }\n            try {\n              const job_res = await axios.get(`/api/jobs/${job_id}`);\n              if (job_res.job.status === 3) {\n                clearInterval(timer);\n                setSelectLoading(false); \n                resolve(job_res.job.result);\n              }\n            } catch (err) {\n              clearInterval(timer);\n              setSelectLoading(false); \n              reject(err);\n            }\n          }, 1000);\n        } else {\n          // 如果作业已完成，直接返回结果\n          setSelectLoading(false); \n          resolve(res.job ? res.job.result : []);\n        }\n      } catch (err) {\n        setSelectLoading(false); \n        reject(err);\n      }\n    });\n  };\n  const schemaList = async (val, type) => {\n    try {\n      let optionsList;\n      const getOptionsList = (data, type) => {\n        return data.map((item, index) => ({\n          ...item,\n          label: type === \"csv\" ? item.source_name : item.name,\n          value: index,\n          name: type === \"csv\" ? item.file_name : item.name,\n          checked: false,\n        }));\n      };\n\n      if (type === \"csv\") {\n        const { data } = await axios.get(`api/upload`);\n        optionsList = getOptionsList(data, type);\n      } else {\n        const schemaList = await getSchemaList(val);\n        optionsList = getOptionsList(schemaList, type);\n      }\n\n      setSchemaList(optionsList);\n    } catch (error) {\n      console.error(\"error\", error);\n    }\n  };\n\n  const getTableColumns = async (item, type = null) => {\n    setLoadingTableColumns(true);\n    const table_desc_obj = {\n      table_name: \"\",\n      table_comment: \"\",\n      field_desc: [],\n    };\n    const res = await axios.get(\n      `/api/data_table/columns/${source_id}/${source_item.type === \"csv\" ? item.file_name : item.name}`\n    );\n    if (Object.keys(res).length !== 0) {\n      table_desc_obj.table_name = res.table_name;\n      table_desc_obj.table_comment = res.table_desc || \"\";\n      table_desc_obj.field_desc = res.table_columns_info.field_desc;\n    } else {\n      table_desc_obj.table_name = source_item.type === \"csv\" ? item.file_name : item.name;\n      table_desc_obj.table_comment = source_item.type === \"csv\" ? item.source_name : \"\";\n      if (source_item.type !== \"csv\") {\n        item.columns.forEach((i, index) => {\n          const field_desc_obj = {\n            name: source_item.type === \"pg\" ? i.name : i,\n            comment: item.comment[index] || \"\",\n            in_use: 1,\n          };\n          table_desc_obj.field_desc.push(field_desc_obj);\n        });\n      }\n    }\n\n    const existingTable = SchemaListData.find(table => table.table_name === table_desc_obj.table_name);\n    if (!existingTable) {\n      setSchemaListData(prevData => [...prevData, table_desc_obj]);\n    }\n    if (!type) {\n      setSchemaListDataItem(existingTable || table_desc_obj);\n    }\n\n    const existingTableSelectedRowKeys = tableSelectedRowKeys.find(\n      table => table.table_name === table_desc_obj.table_name\n    );\n    if (existingTableSelectedRowKeys) {\n      setSelectedRowKeys(existingTableSelectedRowKeys.selectedRowKeys);\n    } else {\n      const newSelectedRowKeys = table_desc_obj.field_desc.map(field => field.name);\n      if (!type) {\n        setSelectedRowKeys(newSelectedRowKeys);\n      }\n      setTableSelectedRowKeys(prevData => [\n        ...prevData,\n        { table_name: table_desc_obj.table_name, selectedRowKeys: newSelectedRowKeys },\n      ]);\n    }\n    setLoadingTableColumns(false);\n  };\n\n  const handleFieldDescriptionChange = (e, record) => {\n    const value = e.target.value;\n    const newSchemaListData = { ...SchemaListDataItem };\n    newSchemaListData.field_desc = newSchemaListData.field_desc.map(item => {\n      if (item.name === record.name) {\n        item.comment = value;\n      }\n      return item;\n    });\n    setSchemaListDataItem(newSchemaListData);\n    const newSchemaListDataList = SchemaListData.map(item => {\n      if (item.table_name === newSchemaListData.table_name) {\n        item.field_desc = newSchemaListData.field_desc;\n      }\n      return item;\n    });\n    setSchemaListData(newSchemaListDataList);\n  };\n  const handleTableDescriptionChange = e => {\n    const value = e.target.value;\n    setSchemaListDataItem(prevData => ({ ...prevData, table_comment: value }));\n    const newSchemaListData = { ...SchemaListDataItem };\n    newSchemaListData.table_comment = value;\n    const newSchemaListDataList = SchemaListData.map(item => {\n      if (item.table_name === newSchemaListData.table_name) {\n        item.table_comment = newSchemaListData.table_comment;\n      }\n      return item;\n    });\n    setSchemaListData(newSchemaListDataList);\n  };\n  const changeSource = (e, item) => {\n    setSchemaList([...SchemaList.map(i => (i.name === item.name ? { ...i, checked: e.target.checked } : i))]);\n    if (e.target.checked) {\n      setSelectSchema([...selectSchema, { ...item, checked: true }]);\n      getTableColumns(item);\n    } else {\n      setSelectSchema(selectSchema.filter(i => i.name !== item.name));\n      setSchemaListData(SchemaListData.filter(i => i.table_name !== item.name));\n      setTableSelectedRowKeys(tableSelectedRowKeys.filter(i => i.table_name !== item.name));\n      if (selectSchema.length < 1) {\n        setSchemaListDataItem({});\n      }\n    }\n    setSelectSchema(newSelectSchema => {\n      if (newSelectSchema.length === SchemaList.length) {\n        setIndeterminate(false);\n        setCheckAll(true);\n      } else if (newSelectSchema.length > 0) {\n        setIndeterminate(true);\n        setCheckAll(false);\n      } else {\n        setIndeterminate(false);\n        setCheckAll(false);\n      }\n      return newSelectSchema;\n    });\n  };\n  const changeSourceAll = (e, type = null) => {\n    if (!type) return;\n    setSelectLoading(true);\n    setIndeterminate(false);\n    setCheckAll(e.target.checked);\n    const newSchemaList = [];\n    const newSchemaListData = [];\n    SchemaList.forEach(item => {\n      newSchemaList.push({ ...item, checked: e.target.checked });\n      // Only get table columns for items that were not already checked\n      if (!item.checked && e.target.checked) {\n        newSchemaListData.push(getTableColumns(item, \"all\"));\n      }\n    });\n    setSchemaList(newSchemaList);\n    setSelectSchema(e.target.checked ? newSchemaList : []);\n    if (e.target.checked) {\n      Promise.all(newSchemaListData).then(res => {\n        setSelectLoading(false);\n      });\n    } else {\n      setSelectSchema([]);\n      setSchemaListDataItem({});\n      setSchemaListData([]);\n      setSelectedRowKeys([]);\n      setTableSelectedRowKeys([]);\n      setSelectLoading(false);\n    }\n  };\n  const clickSchemaItem = item => {\n    if (loadingTableColumns) {\n      return;\n    }\n    const existingTable = SchemaListData.find(table => table.table_name === item.name);\n    if (existingTable) {\n      setSchemaListDataItem(existingTable);\n      setSelectedRowKeys(existingTable.field_desc.filter(field => field.in_use === 1).map(field => field.name));\n    } else {\n      getTableColumns(item);\n    }\n  };\n\n  const rowSelection = {\n    selectedRowKeys,\n    onChange: (selectedRowKeys, selectedRows) => {\n      setSelectedRowKeys(selectedRowKeys);\n      const newSchemaListData = { ...SchemaListDataItem };\n      newSchemaListData.field_desc = newSchemaListData.field_desc.map(item => {\n        item.in_use = selectedRowKeys.includes(item.name) ? 1 : 0;\n        return item;\n      });\n      setSchemaListDataItem(newSchemaListData);\n      const newSchemaListDataList = SchemaListData.map(item => {\n        if (item.table_name === newSchemaListData.table_name) {\n          item.field_desc = newSchemaListData.field_desc;\n        }\n        return item;\n      });\n      setSchemaListData(newSchemaListDataList);\n      const existingTableSelectedRowKeys = tableSelectedRowKeys.find(\n        table => table.table_name === newSchemaListData.table_name\n      );\n      if (existingTableSelectedRowKeys) {\n        setTableSelectedRowKeys(\n          tableSelectedRowKeys.map(table => {\n            if (table.table_name === newSchemaListData.table_name) {\n              table.selectedRowKeys = selectedRowKeys;\n            }\n            return table;\n          })\n        );\n      } else {\n        setTableSelectedRowKeys(prevData => [\n          ...prevData,\n          { table_name: newSchemaListData.table_name, selectedRowKeys: selectedRowKeys },\n        ]);\n      }\n    },\n  };\n\n  const submit = async (data = []) => {\n    setSubmitting(true);\n    let tableNameList = [];\n    let sourceData = [];\n    let result = {};\n    if (data.length > 0) {\n      tableNameList = data.map(item => ({ name: item.table_name }));\n\n      const promises = tableNameList.map(async item => {\n        let res = await axios.get(`/api/data_table/columns/${source_id}/${item.name}`);\n        if (res) {\n          let obj = {\n            table_name: res.table_name,\n            table_comment: res.table_desc || \"\",\n            field_desc: res.table_columns_info.field_desc,\n          };\n          data.forEach(item => {\n            if (item.table_name === res.table_name) {\n              obj.table_comment = item.table_comment;\n              obj.field_desc.forEach((field, index) => {\n                item.field_desc.forEach(i => {\n                  if (field.name === i.name) {\n                    obj.field_desc[index].comment = i.comment;\n                  }\n                });\n              });\n            }\n          });\n          sourceData.push(obj);\n        }\n      });\n\n      await Promise.all(promises);\n      result = { tableName: tableNameList };\n      onSuccess(200, sourceData, source_item, result, \"\");\n    } else {\n      const checkedSchema = selectSchema.filter(item => item.checked);\n      tableNameList = checkedSchema.map(item => ({ name: item.name }));\n      result = { tableName: tableNameList };\n\n      sourceData = SchemaListData.filter(item => checkedSchema.some(schema => schema.name === item.table_name));\n      onSuccess(200, sourceData, source_item, result, \"firstTableData\");\n    }\n  };\n  const dataSourceOptions = options.map(option => {\n    const { type, value, label } = option;\n    const imageFolder = IMG_ROOT;\n    return (\n      <Select.Option key={value} value={value}>\n        <Space>\n          <div aria-label={label} style={{ display: \"flex\", alignItems: \"center\" }}>\n            <span role=\"img\" style={{ marginRight: \"5px\"}}>\n              <img src={`${imageFolder}/${type}.png`} alt={type} style={{ width: \"30px\", height: \"30px\" }} />\n            </span>\n            {label}\n          </div>\n        </Space>\n      </Select.Option>\n    );\n  });\n  const NoDataHtml = () => {\n    return (\n      <div style={{ textAlign: \"center\", display: \"flex\", flexDirection: \"column\", color: \"#8f8f8f\" }}>\n        <InboxOutlinedIcon style={{ fontSize: \"30px\" }} />\n        {window.W_L.no_data}\n      </div>\n    );\n  };\n  const closeEditData = () => {\n    setEditData([]);\n  };\n  useImperativeHandle(ref, () => ({\n    editTableData,\n  }));\n  const SchemaListIsShow = SchemaList && SchemaList.length > 0;\n  const tableIsShow = SchemaListDataItem && SchemaListDataItem.table_name && SchemaListDataItem.field_desc.length > 0;\n\n  return (\n    !Charttable && (\n      <div className=\"flex-column\">\n        <div className=\"dislogue-caption\">\n          <h1>Hi !</h1>\n          <span>\n            {chat_type === \"chat\"\n              ? window.W_L.chat_start\n              : chat_type === \"autopilot\"\n              ? window.W_L.AutoPilot_start\n              : window.W_L.report_start}\n            <Link href=\"/data_sources\">{window.W_L.add_datasource}</Link>\n          </span>\n        </div>\n        <div className=\"select-content\">\n          <Spin spinning={SelectLoading} className={!submitting ? \"\" : \"dislogue-spin\"}>\n            {editData && editData.length > 0 ? (\n              <SecondChoice\n                SelectLoading={SelectLoading}\n                editData={editData}\n                closeEditData={closeEditData}\n                submit={submit}\n                source_item={source_item}></SecondChoice>\n            ) : (\n              <div className=\"select-content-item\">\n                <div style={{ position: \"absolute\", bottom: \"-30px\", fontSize: \"12px\" }}>\n                  <Tooltip title={window.W_L.source_tooltip}>\n                    <InfoCircleOutlinedIcon style={{ marginRight: \"3px\" }} />\n                  </Tooltip>\n                  {window.W_L.source_first_tooltip}\n                </div>\n                <div style={{ display: \"flex\", alignItems: \"baseline\" }}>\n                  <span className=\"select-content-item-span\">\n                    {window.W_L.data_source}\n                    <Tooltip title={window.W_L.source_tooltip} placement=\"bottom\">\n                      <QuestionCircleOutlinedIcon style={{ marginLeft: \"5px\" }} />\n                    </Tooltip>\n                  </span>\n                  <div>\n                    <Select\n                      style={{ width: 240 }}\n                      showSearch\n                      defaultValue={source_id}\n                      className=\"dialogue-content-select\"\n                      placeholder={window.W_L.select_data_source}\n                      optionFilterProp=\"children\"\n                      onChange={handleChange}\n                      optionSelectedBg=\"#eff0f4\"\n                      disabled={SelectLoading}\n                      filterOption={filterOption}>\n                      {dataSourceOptions}\n                    </Select>\n                    <div className=\"select-main\">\n                      <ul className={!SchemaListIsShow ? \"flex-center\" : \"\"}>\n                        {SchemaListIsShow && (\n                          <div className=\"flex-end\">\n                            <span>{window.W_L.select_all}</span>\n                            <Checkbox\n                              indeterminate={indeterminate}\n                              checked={checkAll}\n                              onChange={e => changeSourceAll(e, \"all\")}\n                            />\n                          </div>\n                        )}\n                        {SchemaListIsShow ? (\n                          SchemaList.map((item, index) => (\n                            <li key={index}>\n                              <Tooltip title={item.label}>\n                                <span\n                                  onClick={() => clickSchemaItem(item)}\n                                  style={{ color: item.label === SchemaListDataItem.table_name ? \"#2196F3\" : \"#333\" }}>\n                                  {item.label}\n                                </span>\n                              </Tooltip>\n                              <Checkbox checked={item.checked} onChange={e => changeSource(e, item)} />\n                            </li>\n                          ))\n                        ) : (\n                          <NoDataHtml />\n                        )}\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"table-columns\">\n                  {tableIsShow && (\n                    <div className=\"table-columns-item\">\n                      <span>\n                        {source_item.type === \"csv\" ? SchemaListDataItem.table_comment : SchemaListDataItem.table_name}\n                      </span>\n                      <Input\n                        placeholder={window.W_L.sheet_description}\n                        style={{ padding: \"2px\", maxWidth: \"60%\" }}\n                        type=\"text\"\n                        disabled={source_item.type === \"csv\" ? true : false}\n                        value={\n                          source_item.type === \"csv\" ? SchemaListDataItem.table_name : SchemaListDataItem.table_comment\n                        }\n                        onChange={handleTableDescriptionChange}\n                      />\n                    </div>\n                  )}\n                  <div\n                    className={!tableIsShow ? \"flex-center\" : \"\"}\n                    style={{ width: \"400px\", overflowY: \"scroll\", height: tableIsShow ? \"235px\" : \"276px\" }}>\n                    {tableIsShow ? (\n                      <Table\n                        rowSelection={{\n                          type: \"checkbox\",\n                          ...rowSelection,\n                        }}\n                        dataSource={SchemaListDataItem.field_desc}\n                        columns={columns}\n                        size=\"small\"\n                        rowKey={record => record.name}\n                        pagination={false}></Table>\n                    ) : (\n                      <NoDataHtml />\n                    )}\n                  </div>\n                </div>\n                {selectSchema && selectSchema.length > 0 && (\n                  <button onClick={submit} disabled={SelectLoading} className=\"submit-btn\">\n                    {window.W_L.submit} {selectSchema.length}\n                  </button>\n                )}\n              </div>\n            )}\n          </Spin>\n          {SelectLoading && submitting && (\n            <div className=\"dislogue-progress\">\n              <Progress width={80} type=\"circle\" percent={percent} />\n              <p>{window.W_L.ai_understanding_data}</p>\n            </div>\n          )}\n        </div>\n      </div>\n    )\n  );\n});\n\nexport default SelectSource;\n","import React, { memo, useEffect, useRef, useState } from 'react';\nimport * as echarts from 'echarts';\n\nconst EChartsChart = memo(({ content }) => {\n  const chartRef = useRef(null);\n  const [chartJson, setChartJson] = useState({});\n\n  useEffect(() => {\n    const data = JSON.parse(content);\n    setChartJson(data);\n  }, [content]);\n\n  useEffect(() => {\n    try {\n      let chartInstance = null;\n\n    if (chartRef.current) {\n      chartInstance = echarts.init(chartRef.current); // del 'wonderland'\n      if ('color' in chartJson) delete chartJson['color'];\n      if ('series' in chartJson) {\n        for (let i = 0; i < chartJson['series'].length; ++i) {\n          if ('lineStyle' in chartJson['series'][i]) {\n            delete chartJson['series'][i]['lineStyle'];\n          }\n        }\n      }\n      chartInstance.setOption(chartJson);\n    }\n    window.addEventListener('resize', handleResize);\n    return () => {\n      if (chartInstance) {\n        chartInstance.dispose();\n      }\n      window.removeEventListener('resize', handleResize);\n    };\n    } catch (error) {\n      console.log('Error in EChartsChart: ', error);\n    }\n  }, [chartJson]);\n\n  const handleResize = () => {\n    if (chartRef.current) {\n      const chartInstance = echarts.getInstanceByDom(chartRef.current);\n      if (chartInstance) {\n        chartInstance.resize();\n      }\n    }\n  };\n\n  return <div ref={chartRef} className=\"w-full h-500\" />;\n});\n\nexport default EChartsChart;","import React from \"react\";\nimport \"./index.less\";\n\nconst SettingModal = (props, ref) => {\n\n\n  return (\n    <div className=\"content_loading\">\n    <div className=\"point1\"></div>\n    <div className=\"point2\"></div>\n    <div className=\"point3\"></div>\n</div>\n  );\n};\n\nexport default SettingModal;","import React from \"react\";\nimport Loading from \"../loading\";\nimport Button from \"antd/lib/button\";\nimport CopyOutlinedIcon from \"@ant-design/icons/CopyOutlined\";\nimport CompressOutlinedIcon from \"@ant-design/icons/CompressOutlined\";\nimport Modal from \"antd/lib/modal\";\nimport { markdown } from \"markdown\";\nimport HtmlContent from \"@/components/chart/components/HtmlContent\";\nimport toast from \"react-hot-toast\";\nimport \"./index.css\";\nimport Tooltip from \"@/components/Tooltip\";\n\nconst LogWorkflow = props => {\n  const { logData, Cardloading } = props;\n  const [isModalVisible, setIsModalVisible] = React.useState(false);\n  const [sourceList, setSourceList] = React.useState([]);\n  // workTitle\n  const [workTitle, setWorkTitle] = React.useState(\"Show work\");\n  const logTerminal = React.useRef(null);\n  React.useEffect(() => {\n    if (logData && logData.length > 0) {\n      const newLogData = logData.slice(sourceList.length);\n      const log_terminal = logTerminal.current;\n      const reg = /\\n/g;\n      const isHas = newLogData.some(item => reg.test(item));\n      if (isHas) {\n        const newSource = newLogData.map(item => item.replace(/\\n\\n/g, \"<br />\"));\n        // const newSource = newLogData.map(item => markdown.toHTML(item));\n        setSourceList(prevSourceList => [...prevSourceList, ...newSource]);\n      } else {\n        setSourceList(prevSourceList => [...prevSourceList, ...newLogData]);\n      }\n      setTimeout(() => {\n        log_terminal.scrollTop = log_terminal.scrollHeight;\n      }, 0);\n    }\n  }, [logData, sourceList.length]);\n  const changeWork = () => {\n    if (logData && logData.length === 0) {\n      return;\n    }\n    if (workTitle === \"Show work\") {\n      setWorkTitle(\"Hide work\");\n      logTerminal.current.style.height = \"170px\";\n    } else {\n      setWorkTitle(\"Show work\");\n      logTerminal.current.style.height = \"0px\";\n    }\n  };\n  const copy = () => {\n    try {\n      const log_terminal = logTerminal.current;\n      const range = document.createRange();\n      range.selectNode(log_terminal);\n      const selection = window.getSelection();\n      if (selection.rangeCount > 0) selection.removeAllRanges();\n      selection.addRange(range);\n      document.execCommand(\"copy\");\n      selection.removeAllRanges();\n      toast.success(window.W_L.copy_success);\n    } catch (error) {\n      toast.error(window.W_L.copy_failed);\n    }\n  };\n\n  const compress = () => {\n    setIsModalVisible(true);\n  };\n\n  const showModel = () => {\n    return (\n      <Modal\n        visible={isModalVisible}\n        onCancel={() => setIsModalVisible(false)}\n        footer={null}\n        closable={false}\n        width=\"80%\"\n        className=\"log_terminal_modal\"\n      >\n        <div className=\"log_terminal_content_div\">\n        <Tooltip title={window.W_L.copy}>\n          <Button\n            icon={<CopyOutlinedIcon />}\n            style={{ position: \"absolute\", color: \"#9d9d9d\",zIndex:1 }}\n            type=\"text\"\n            size=\"small\"\n            className=\"copy_btn\"\n            onClick={copy}>\n            {/* {window.W_L.copy} */}\n          </Button>\n        </Tooltip>\n        <div className=\"log_terminal_content\" style={{height:\"auto\",maxHeight:\"75vh\"}}>\n        {sourceList &&\n            sourceList.length > 0 &&\n            sourceList.map((item, index) => {\n              return <div key={index} className=\"log-item\" dangerouslySetInnerHTML={{ __html: item }}></div>;\n            })}\n        </div>\n        </div>\n      </Modal>\n    );\n  };\n\n  return (\n    <div className={`log_terminal`}>\n      <div className=\"log_terminal_header\">\n        {Cardloading ? (\n          <Loading></Loading>\n        ) : (\n          // <LoadingOutlinedIcon />\n          <div></div>\n        )}\n        <div className=\"log_terminal_header_title\" onClick={changeWork}>\n          {workTitle}\n        </div>\n      </div>\n      <div className=\"log_terminal_content_div\">\n        <Tooltip title={window.W_L.copy}>\n          <Button\n            icon={<CopyOutlinedIcon />}\n            style={{ position: \"absolute\", color: \"#9d9d9d\",zIndex:1 }}\n            type=\"text\"\n            size=\"small\"\n            className=\"copy_btn\"\n            onClick={copy}>\n            {/* {window.W_L.copy} */}\n          </Button>\n        </Tooltip>\n        <Tooltip title=\"全屏\">\n          <Button\n            icon={<CompressOutlinedIcon />}\n            style={{ position: \"absolute\", color: \"#9d9d9d\",zIndex:1 }}\n            type=\"text\"\n            size=\"small\"\n            className=\"compress_btn\"\n            onClick={compress}>\n            {/* {window.W_L.copy} */}\n          </Button>\n        </Tooltip>\n        {showModel()}\n        <div className=\"log_terminal_content\" ref={logTerminal}>\n          {sourceList &&\n            sourceList.length > 0 &&\n            sourceList.map((item, index) => {\n              return <div key={index} className=\"log-item\" dangerouslySetInnerHTML={{ __html: item }}></div>;\n            })}\n\n          {/* {sourceList &&\n            sourceList.length > 0 &&\n            sourceList.map((item, index) => {\n              return <HtmlContent key={index} className=\"log-item preview markdown\">{item}</HtmlContent>;\n            })} */}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LogWorkflow;\n","import React from 'react';\nconst DialogueContext = React.createContext();\nexport default DialogueContext;","import React, { useContext } from 'react';\nimport copy from \"@/assets/images/copy.png\";\nimport toast from \"react-hot-toast\";\n// import Retry from \"@/assets/images/retry.png\";\nimport CopyOutlinedIcon from \"@ant-design/icons/CopyOutlined\";\nimport PauseCircleOutlinedIcon from \"@ant-design/icons/PauseCircleOutlined\";\nimport \"./index.less\";\nimport DialogueContext from '../../context/DialogueContext';\nconst Copy = props => {\n  const { cancelRequest, chat_type } = useContext(DialogueContext); // 在C中使用useContext\n\n  const { source, message } = props;\n  const copyCentent = () => {\n    try {\n      const input = document.createElement(\"input\");\n      input.setAttribute(\"readonly\", \"readonly\");\n      input.setAttribute(\"value\", source);\n      document.body.appendChild(input);\n      input.select();\n      input.setSelectionRange(0, 9999);\n      if (document.execCommand(\"copy\")) {\n        document.execCommand(\"copy\");\n      }\n      document.body.removeChild(input);\n      toast.success(window.W_L.copy_success);\n    } catch (error) {\n      toast.error(window.W_L.copy_failed);\n    }\n  };\n  // const cancelRequest = (index) => {\n  //   // retry(index)\n  // }\n  const isBotLoading = message.sender === \"bot\" && message.Cardloading;\n  return (\n    <div className={`copy${message.sender}`}>\n      {\n        <div className=\"copy-item\" onClick={isBotLoading ? () => cancelRequest(message) : copyCentent}>\n          {isBotLoading ? (\n            <>\n              <PauseCircleOutlinedIcon className=\"gpt-btn-item-img\"></PauseCircleOutlinedIcon>\n              <div className=\"copy-text\">{window.W_L.stop_generation}</div>\n            </>\n          ) : (\n            <>\n              <CopyOutlinedIcon className=\"gpt-btn-item-img\"></CopyOutlinedIcon>\n              <div className=\"copy-text\">{window.W_L.copy}</div>\n            </>\n          )}\n        </div>\n      }\n    </div>\n  );\n};\n\nexport default Copy;\n","import React, { useRef, useEffect, useState, useMemo } from \"react\";\nimport Descriptions from \"antd/lib/descriptions\";\nimport Input from \"antd/lib/input\";\nimport Button from \"antd/lib/button\";\nimport Tooltip from \"antd/lib/tooltip\";\nimport { axios } from \"@/services/axios\";\nimport routes from \"@/services/routes\";\nimport { dialogueStorage } from \"../Dialogue/method/dialogueStorage\";\nimport InfoCircleOutlinedIcon from \"@ant-design/icons/InfoCircleOutlined\";\nimport toast from \"react-hot-toast\";\nimport \"./index.css\";\n\nconst { TextArea } = Input;\nconst AutoPilotInfo =({databases_type})=>{\nconst [btn_disabled, setBtn_disabled] = useState(false);\nconst [report_name, setReportName] = useState('');\nconst [report_desc, setReportDesc] = useState('');\nconst [btn_isShow, setBtn_isShow] = useState(true);\n// /api/auto_pilot\nconst autoPilot =async (databases_id,db_comment) => {\n    const data={\n        databases_id,\n        databases_type:databases_type.current,\n        report_name,\n        report_desc,\n        db_comment\n    }\n   await axios.post(\"/api/auto_pilot\",data).then((res)=>{\n        setBtn_disabled(false);\n        if(res.code===200){\n        setBtn_isShow(false);\n        toast.success(window.W_L.submit_success+\" \"+window.W_L.submit_success_tip);\n        routes.navigate(\"Dialogue.List.autopilot_list\");\n        }else{\n        toast.error(res.data);\n        }\n    }).catch((err)=>{\n        setBtn_disabled(false);\n        toast.error(window.W_L.submit_fail);\n    })\n};\nconst CreateAutoPilot = () => {\n    if (!report_name || !report_desc) {\n        return;\n    }\n    const Chart_Dialogue = getAutopilotStorage();\n    if(Chart_Dialogue && Chart_Dialogue.length>0){\n        if (Chart_Dialogue[0].table_name &&Chart_Dialogue[0].table_name.tableName && Chart_Dialogue[0].table_name.tableName.length > 0) {\n            setBtn_disabled(true);\n              let promisesList = [];\n              const promises = Chart_Dialogue[0].table_name.tableName.map(async (item) => {\n                const res = await axios.get(`/api/data_table/columns/${Chart_Dialogue[0].Charttable_id}/${item.name}`);\n                promisesList.push({\n                  table_name: res.table_name,\n                  table_comment: res.table_desc,\n                  field_desc: res.table_columns_info.field_desc\n                });\n              });\n\n              \n              Promise.all(promises).then(() => {\n                autoPilot(Chart_Dialogue[0].Charttable_id,{\n                    databases_desc: \"\",\n                    table_desc: promisesList\n                  });\n              }).catch((err) => {\n                console.log(err, 'first_error');\n                setBtn_disabled(false);\n              });\n        \n          }\n    }\n}\nconst { getAutopilotStorage}=dialogueStorage();\nreturn (\n    <div style={{width:\"100%\"}}>\n        <Descriptions  \n            size=\"small\" \n            column={1} \n            bordered\n            className=\"my-custom-label\"\n        >\n            <Descriptions.Item label={window.W_L.report_name}>\n                <Input bordered={false}  placeholder={window.W_L.report_name_tip}\n                value={report_name}\n                onChange={e => setReportName(e.target.value)}\n                />\n            </Descriptions.Item>\n            <Descriptions.Item label={window.W_L.report_desc}>\n                <TextArea style={{ resize: 'none'}} rows={10} placeholder={window.W_L.report_desc_tip} bordered={false}\n                value={report_desc}\n                onChange={e => setReportDesc(e.target.value)}\n                />\n            </Descriptions.Item>\n        </Descriptions>\n        <div className=\"gpt-descriptions-btn\">\n        <div style={{fontSize:\"14px\"}}>\n            <Tooltip title={window.W_L.report_name_and_report_desc_tip}>\n              <InfoCircleOutlinedIcon style={{marginRight:\"3px\"}} />\n            </Tooltip>\n              {window.W_L.please_complete_report_name_and_report_desc}\n            </div>\n            {\n                btn_isShow&&\n                <Button style={{width: \"100px\"}} block type=\"primary\" disabled={btn_disabled} onClick={() => CreateAutoPilot()}>\n                <i className=\"fa fa-check m-r-5\" aria-hidden=\"true\" />\n                {window.W_L.submit}\n              </Button>\n            }\n        </div>\n    </div>\n)\n};\nexport default AutoPilotInfo;","import React, { useRef, useEffect, useState, useMemo } from \"react\";\nimport { PropTypes } from \"prop-types\";\nimport { currentUser } from \"@/services/auth\";\nimport EChartsChart from \"../Echarts/Echarts\";\nimport LogWorkflow from \"../LogWorkflow\"\nimport Copy from \"../Copy/Copy.jsx\";\nimport AutoPilotInfo from \"../AutoPilotInfo/AutoPilotInfo.jsx\";\nimport \"./index.less\";\nimport icon_small from \"@/assets/images/icon_small.png\";\n\nconst TypingCard = (props) => {\n  const {databases_type, chat_type, index,message,source, ChangeScrollTop } = props;\n  const sourceEl = useRef();\n  const [sourceText, setSourceText] = useState(\"\");\n  const [showComponent, setShowComponent] = useState(false);\n\n\n  useEffect(() => {\n    const reg = /\\n/g;\n    const isHas = reg.test(source);\n    if (isHas) {\n      const newSource = source.replace(/\\n/g, '<br />');\n      setSourceText(newSource);\n    } else {\n      setSourceText(source);\n    }\n    setTimeout(() => {\n      // ChangeScrollTop();\n    }, 0);\n  }, [source ]);\n\n  const renderLogWorkflow = useMemo(() => {\n    return index === 0 ? null : <LogWorkflow Cardloading={message.Cardloading} logData={message.logData} />;\n  }, [index, message]);\n\n  const renderChart = useMemo(() => {\n    return message.chart ? <EChartsChart content={message.chart} /> : null;\n  }, [message]);\n\n  const renderChatContent = useMemo(() => {\n    return (\n      <div\n        style={{ wordBreak: \"break-all\" }}\n        ref={sourceEl}\n        dangerouslySetInnerHTML={{ __html: sourceText }}\n      />\n    );\n  }, [sourceText]);\n  const renderUser = useMemo(() => {\n    return chat_type === \"autopilot\" ? <AutoPilotInfo databases_type={databases_type}/> : <div className={`Chat ${message.sender}`}>{source}</div>;\n  }, [chat_type, message, source]);\n\n  return (\n    <div className={`message ${chat_type}`} onMouseLeave={() => setShowComponent(false)}>\n      <>\n        <div className={`info${message.sender}-time`}>{chat_type===\"autopilot\"?\"\":message.time}</div>\n        <div className={`chat${message.sender}`} onMouseEnter={() => setShowComponent(true)}>\n          {\n            chat_type!==\"autopilot\"&&\n            <img src={message.sender === \"user\" ? currentUser.profile_image_url : icon_small} alt=\"\" />\n          }\n          {message.sender === \"user\" ?  \n          renderUser\n          : \n          (\n            <div className={`Chat ${message.sender}`}>\n              {renderLogWorkflow}\n              {renderChart}\n              {renderChatContent}\n            </div>\n          )}\n        </div>\n\n        {showComponent && !message.Cardloading&&chat_type!==\"autopilot\" && <Copy index={index} source={source} message={message} />}\n        {message.Cardloading && chat_type === \"chat\" && <Copy index={index} source={source} message={message} />}\n      </>\n    </div>\n  );\n};\n\nTypingCard.propTypes = {\n  title: PropTypes.string,\n  source: PropTypes.string,\n};\n\nTypingCard.defaultProps = {\n  title: \"\",\n  source: \"\",\n};\n\nexport default TypingCard;\n","import React ,{useRef,forwardRef, useImperativeHandle}from 'react';\nimport Input from \"antd/lib/input\";\nimport Overlay from \"../Overlay\";\nimport SelectSource from \"../SelectSource\";\nimport TypingCard from \"../TypingCard\";\n\nimport SendOutlinedIcon from \"@ant-design/icons/SendOutlined\";\nimport PauseCircleOutlinedIcon from \"@ant-design/icons/PauseCircleOutlined\";\nconst { TextArea } = Input;\nconst DialogueContent = forwardRef(({\n  Charttable,\n  confirmLoading,\n  onChange,\n  sendTableDate,\n  loadingMask,\n  onUse,\n  messages, \n  ChangeScrollTop, \n  loadingState, \n  stopSend, \n  inputMessage,\n  setInputMessage, \n  handleSendMessage,\n  chat_type,\n  onOpenKeyClick,\n  onSuccess,\n  percent,\n  databases_type,\n},ref) => {\n  const selectSourceRef = useRef(null);\n  const sourceEdit = (data) => {\n    selectSourceRef.current.editTableData(data);\n  }\n  useImperativeHandle(ref, () => ({\n    sourceEdit,\n  }));\n  return (\n    <>\n    <div className=\"dialogue-content-all\">\n      <div className=\"dialogue-content-message\">\n        <div className=\"dialogue-content-message-auto\">\n        <SelectSource ref={selectSourceRef} onSuccess={onSuccess} chat_type={chat_type} Charttable={Charttable} confirmLoading={confirmLoading} onChange={onChange} percent={percent}></SelectSource>\n            {\n          sendTableDate!==1 && messages.length<=0&&Charttable?\n          (<Overlay loadingMask={loadingMask} Charttable={Charttable} onUse={onUse}></Overlay>)\n          :\n          null\n            }\n          {messages.map((message, index) => (\n            <div key={index} className=\"chat-content\" style={{margin:chat_type===\"report\"?'0 30px':'',marginTop:index===0?\"30px\":\"\"}}>\n                  <TypingCard databases_type={databases_type} chat_type={chat_type} \n                  // autopilot={message.autopilot}\n                  // chart={message.chart} \n                  // logData={message.logData} \n                  // sender={message.sender} \n                  // time={message.time} \n                  // Cardloading={message.Cardloading} \n                  source={message.content} \n                  message={message}\n                  index={index} \n                  ChangeScrollTop={ChangeScrollTop} \n                  />\n            </div>\n          ))}\n        </div>\n      </div>\n      </div>\n     \n      {\n      chat_type!==\"viewConversation\" &&\n      (\n        <div className=\"main-all\" style={{width:chat_type===\"report\"?\"90%\":\"80%\"}}>\n           {loadingState && messages.length>0 && chat_type === \"report\" &&\n      <div className=\"gpt-section-btn-list\">\n      <button className=\"gpt-btn-item\" onClick={stopSend}>\n          <PauseCircleOutlinedIcon className=\"gpt-btn-item-img\"></PauseCircleOutlinedIcon>\n          <div className=\"gpt-btn-item-txt\">{window.W_L.stop_generation}</div>\n      </button>\n      </div>\n       }\n       {\n            chat_type===\"autopilot\"?\n            \"\"\n            :\n        <div className=\"dialogue-content-bottom\">\n        <div className=\"open-key\" style={{display:\"none\"}} onClick={onOpenKeyClick}>\n        </div>\n          \n            <TextArea\n            bordered={false}\n            style={{ resize: 'none', maxHeight: '100px !important', fontSize: '15px', border: 'none !important' }}\n            value={inputMessage}\n            className=\"gpt-input\"\n            onChange={(e) => {\n              if (e && e.target) {\n                const newValue = e.target.value;\n                setInputMessage(newValue);\n              }\n            }}\n            placeholder={window.W_L.send_me_instructions}\n            autoSize={{ minRows: 1, maxRows: 4 }}\n            onPressEnter={(e) => {\n              e.preventDefault();\n              handleSendMessage();\n            }}\n          />\n          <div className=\"gpt-input-middle\">\n          <SendOutlinedIcon onClick={handleSendMessage} style={{color:inputMessage ? \"\" : \"#ccc\",fontSize:\"20px\",marginRight:\"15px\"}}></SendOutlinedIcon>\n          </div>\n         \n        </div>\n      }\n      </div>\n      )\n      }\n    </>\n  );\n});\n\nexport default DialogueContent;","import React from 'react';\nimport './index.css';\n\nconst MenuMask = (props) => {\n  return (\n    <div className=\"menumask\">\n    </div>\n  );\n};\n\nexport default MenuMask;\n","\n// export const DEEPBI_API_HOST = process.env.SSE_URL\n\nexport const API_LOCAL = window.location.protocol + '//' + window.location.hostname + ':8341';\n\n// export const API_CLOAL_HOST = `${API_LOCAL}${DEEPBI_API_HOST}` as const;\n\nexport const API_CHAT = `${API_LOCAL}/api/chat` as const;","import toast from \"react-hot-toast\";\nimport { currentUser } from \"@/services/auth\";\n\nexport function generateChart(\n  wsRef,\n  params,\n  onChange,\n  onCancel\n) {\n  let wsProtocol = 'ws';\n  if (window.location.protocol === 'https:') {\n    wsProtocol = 'wss';\n  }\n  const wsUrl = `${wsProtocol}://${process.env.SOCKET}${currentUser.id}_${currentUser.name}`;\n\n  const onError = (error) => {\n    console.error(\"WebSocket error\", error);\n    toast.error(window.W_L.ERROR_MESSAGE);\n  };\n\n  const setupWebSocket = (ws) => {\n    ws.addEventListener(\"message\", async (event) => {\n      const response = JSON.parse(event.data);\n      onChange(response);\n    });\n\n    ws.addEventListener(\"close\", (event) => {\n      console.log(\"Connection closed\", event.code, event.reason);\n      onCancel();\n    });\n\n    ws.addEventListener(\"error\", onError);\n  };\n\n  // 清理旧的WebSocket事件监听器\n  if (wsRef.current) {\n    wsRef.current.removeEventListener(\"message\", onChange);\n    wsRef.current.removeEventListener(\"close\", onCancel);\n    wsRef.current.removeEventListener(\"error\", onError);\n    if (wsRef.current.readyState === 1) {\n      console.log(\"old ws connection is open\");\n      wsRef.current.send(JSON.stringify(params));\n      setupWebSocket(wsRef.current);\n      return;\n    }\n  }\n\n  console.log(\"new ws connection\");\n  const ws = new WebSocket(wsUrl);\n  wsRef.current = ws;\n\n  ws.addEventListener(\"open\", () => {\n    console.log(\"new params\", params);\n    ws.send(JSON.stringify(params));\n    setupWebSocket(ws);\n  });\n}","import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { axios } from \"@/services/axios\";\nimport { websocket, createWebSocket, lockReconnect, setLockReconnect, setStopGeneration, stopGeneration } from './websocket.js';\nimport { useSql } from './method/useSql.js';\nimport { useChartCode } from \"./method/useChartCode.js\";\nimport { dialogueStorage } from \"./method/dialogueStorage.js\";\nimport DialogueTop from \"../DialogueTop\";\n// import OpenKey from \"../OpenKey\"\nimport DialogueContent from \"../DialogueContent\"\nimport toast from \"react-hot-toast\";\nimport MenuMask from \"../MenuMask/index.jsx\";\nimport \"./index.less\";\nimport moment from \"moment\";\nimport { API_CHAT } from './const';\nimport { currentUser } from \"@/services/auth\";\nimport DialogueContext from '../../context/DialogueContext.js';\nimport { generateChart } from './generateChart';\nimport { set } from \"lodash\";\nconst Dialogue = (props) => {\n\n  const { chat_type, sendUrl, uuid } = props\n  const OpenKeyRef = useRef(); // 打开key\n  const DialogueContentRef = useRef(); // 对话内容\n  const new_logData = useRef([]); // 新的logData\n  const messagesRef = useRef(); // 对话记录\n  const Charttable_id = useRef(null); // Charttable_id\n  const Charttable_item = useRef({}); // Charttable_item\n  const Dashboard_id = useRef(null); // Dashboard_id\n  const CharttableD_date = useRef(null); // CharttableD_date\n  const [dashboardId, setDashboardId] = useState(null); // dashboardId\n  const [CharttableDate, setCharttableDate] = useState(null);\n  const [LoadingState, setLoadingState] = useState(false); //z\n  const [startUse, setStartUse] = useState(false); // 初始化状态\n  const [SendTableDate, setSendTableDate] = useState(0); // 发送表格状态\n  const [LoadingMask, setLoadingMask] = useState(false); // 加载状态\n  const [selectTableName, setSelectTableName] = useState([]);\n  const [selectTableDesc, setSelectTableDesc] = useState({}); //\n  const selectTableDescRef = useRef(); // 保存selectTableDesc\n  const selectTableNameRef = useRef(); // 保存selectTableName\n  const [ConfirmLoading, setConfirmLoading] = useState(false); // 确认加载\n  const sourceTypeRef = useRef(\"mysql\"); // 数据库类型\n  const [percent, setPercent] = useState(0); // 进度条\n  const [cachedTableDesc, setCachedTableDesc] = useState(null); // 添加一个状态来缓存数据\n  const MAX_QUESTIONS = chat_type === \"chat\" ? 5 : 1; // 最大问题数\n  const abortControllersRef = useRef([]); // 使用ref来跟踪所有的AbortController实例\n  let timeoutId = null;\n  const [inputMessage, setInputMessage] = useState(\"\");// 输入的消息\n  const wsRef = useRef(null);\n  const [state, setState] = useState({\n    messages: [], // 对话记录\n    lockReconnect: false,\n    data_type: null, // 数据类型\n    logData: [], // logData\n  });\n\n\n  useEffect(() => {\n    if (state.logData) {\n      new_logData.current = state.logData;\n    }\n  }, [state.logData])\n\n  // 取历史对话记录\n  useEffect(() => {\n    getDialogueDashboardStorage();\n  }, []);\n  useEffect(() => {\n    if (uuid) {\n      getDialogueDashboardStorage();\n    }\n\n  }, [uuid])\n\n  useEffect(() => {\n    selectTableDescRef.current = selectTableDesc;\n  }, [selectTableDesc]);\n  useEffect(() => {\n    selectTableNameRef.current = selectTableName;\n  }, [selectTableName]);\n  useEffect(() => {\n    CharttableD_date.current = CharttableDate;\n  }, [CharttableDate]);\n\n\n\n\n  // 获取历史对话记录\n  const getDialogueDashboardStorage = (type = null) => {\n    // || chat_type==\"autopilot\"\n    if (chat_type === \"chat\" || chat_type === \"report\" || chat_type === \"autopilot\") {\n      let res = [];\n      switch (chat_type) {\n        case \"chat\":\n          res = getDialogueStorage();\n          break;\n        case \"report\":\n          res = getDashboard();\n          break;\n        default:\n          break;\n      }\n      if (res && res.length > 0) {\n        // console.log(\"res====\", res)\n        setCharttableDate(res[0].table_name);\n        CharttableD_date.current = res[0].table_name;\n        saveDashboardId(\"\", res[0].Charttable_id);\n        sourceTypeRef.current = res[0].type;\n        Charttable_item.current = {\n          label: res[0].label,\n          id: res[0].id,\n          type: res[0].type,\n        };\n        if (res[0].dashboardId) {\n          sendUrl(res[0].dashboardId);\n          saveDashboardId(\"dashboard_id\", res[0].dashboardId);\n        } else {\n          if (chat_type === \"report\") {\n            sendUrl(\"new_report\");\n          }\n          saveDashboardId(\"dashboard_id\", null);\n        }\n\n        if (res[0].messages && res[0].messages.length > 0) {\n          setState(prevState => ({\n            ...prevState,\n            messages: res[0].messages\n          }));\n          setLoadingMask(false);\n          setStartUse(true);\n          stopSend('edit');\n          setSendTableDate(0);\n        } else {\n          onUse();\n        }\n      } else {\n        if (chat_type === \"report\") {\n          sendUrl(\"\");\n        }\n        setCharttableDate(null);\n        saveDashboardId(null, null);\n        setState(prevState => ({\n          ...prevState,\n          messages: []\n        }));\n        setLoadingMask(false);\n        setSendTableDate(0);\n        setStartUse(false);\n        Charttable_item.current = {};\n      }\n    } else if (chat_type === \"viewConversation\") {\n      const res = getAllStorage();\n      if (res && res.length > 0 && uuid) {\n        const currentList = res.filter(item => item.uuid === uuid);\n        setCharttableDate(currentList[0].table_name);\n        saveDashboardId(\"\", currentList[0].Charttable_id);\n        Charttable_item.current = {\n          label: currentList[0].label,\n          id: currentList[0].id,\n          type: currentList[0].type,\n        };\n        if (currentList[0].messages && currentList[0].messages.length > 0) {\n          setState(prevState => ({\n            ...prevState,\n            messages: currentList[0].messages\n          }));\n          setLoadingMask(false);\n          setSendTableDate(1);\n          setStartUse(true);\n        }\n      }\n    }\n    scrollToBottom();\n  };\n  // setStorage\n  const setDialogueDashboardStorage = () => {\n    let existingDialogueStorage = []\n    let Chart_Dashboard = {\n      table_name: selectTableNameRef.current,\n      Charttable_id: Charttable_id.current,\n      ...Charttable_item.current,\n    }\n    Chart_Dashboard.title = window.W_L.new_dialogue + String(getAllStorage().length + 1);\n    Chart_Dashboard.uuid = Date.now();\n    Chart_Dashboard.messages = [];\n    existingDialogueStorage.push(Chart_Dashboard)\n    if (chat_type === \"report\") {\n      addDashboard(existingDialogueStorage);\n    } else if (chat_type === \"chat\") {\n      addDialogueStorage(existingDialogueStorage);\n    } else if (chat_type === \"autopilot\") {\n      addAutopilotStorage(existingDialogueStorage);\n    }\n  }\n\n  // clearStorage\n  const closeDialogue = () => {\n    closeSetMessage();\n    if (chat_type === \"report\") {\n      addDashboard([])\n    } else if (chat_type === \"chat\") {\n      addDialogueStorage([])\n    } else if (chat_type === \"autopilot\") {\n      addAutopilotStorage([])\n    }\n    DialogueContentRef.current.sourceEdit([]);\n    getDialogueDashboardStorage(\"report\")\n  };\n  const updateCharttableDate = () => {\n    setCharttableDate(selectTableNameRef.current);\n\n    // test\n    setDialogueDashboardStorage()\n  };\n\n  const onSuccess = useCallback(async (code, value, source_item, result, firstTableData) => {\n    // if (!lockReconnect) {\n    //   toast.error(window.W_L.connection_seems_lost);\n    //   setConfirmLoading(false);\n    //   openSocket();\n    //   return\n    // }\n    Charttable_id.current = source_item.id;\n    Charttable_item.current = {\n      label: source_item.label,\n      id: source_item.id,\n      type: source_item.type,\n    };\n    sourceTypeRef.current = source_item.type\n\n    setConfirmLoading(true);\n    setState(prevState => ({\n      ...prevState,\n      data_type: \"mysql_comment\",\n    }));\n\n    if (firstTableData) {\n      setSelectTableName(result)\n    }\n\n    setSelectTableDesc({ table_desc: value })\n    const allIsPass = value.map(item => {\n      const newFieldDesc = item.field_desc.filter(field => field.in_use === 1);\n      return {\n        table_name: item.table_name,\n        table_comment: item.table_comment,\n        field_desc: newFieldDesc\n      };\n    });\n    const content = {\n      databases_desc: \"\",\n      table_desc: allIsPass\n    }\n    const abortController = new window.AbortController();\n    abortControllersRef.current.push(abortController);\n    await sendSocketMessage(code, 'bi', 'mysql_comment', content,0,\"\",1,abortController.signal);\n    abortControllersRef.current = abortControllersRef.current.filter(ac => ac !== abortController);\n  }, [setState, sendSocketMessage]);\n\n  // 表数据合并\n  const mergeObj = (obj1, obj2) => {\n    let obj3 = JSON.parse(JSON.stringify(obj1));\n    obj2.table_desc.forEach((item, index) => {\n      let obj3Index = obj3.table_desc.findIndex((item2, index2) => {\n        return item.table_name === item2.table_name\n      })\n      if (obj3Index !== -1) {\n        obj3.table_desc[obj3Index].table_comment = item.table_comment\n        item.field_desc.forEach((item3, index3) => {\n          let obj3Index2 = obj3.table_desc[obj3Index].field_desc.findIndex((item4, index4) => {\n            return item3.name === item4.name\n          })\n          if (obj3Index2 !== -1) {\n            obj3.table_desc[obj3Index].field_desc[obj3Index2].comment = item3.comment\n            obj3.table_desc[obj3Index].field_desc[obj3Index2].in_use = item3.in_use\n            obj3.table_desc[obj3Index].field_desc[obj3Index2].is_pass = item3.is_pass\n          } else {\n            obj3.table_desc[obj3Index].field_desc.push(item3)\n          }\n        })\n      } else {\n        obj3.table_desc.push(item)\n      }\n    })\n    return obj3\n  }\n\n  // 提交成功处理\n  const handleSuccess = async (tableId, table, isSendTableDateType = null) => {\n    // console.log(\"table\",table);\n    // console.log(\"selectTableDescRef.current\",selectTableDescRef.current);\n    try {\n      const mergeTable = mergeObj(selectTableDescRef.current, table);\n      // console.log(mergeTable,\"mergeTable====\")\n      const promises = mergeTable.table_desc.map(async (item) => {\n        const columns_obj = {\n          table_name: item.table_name,\n          table_inuse: true,\n          table_desc: item.table_comment,\n          table_columns_info: {\n            field_desc: item.field_desc\n          }\n        }\n        // console.log(\"columns_obj\",columns_obj)\n        await axios.post(`/api/data_table/columns/${tableId}/${item.table_name}`, columns_obj);\n      });\n\n      Promise.all(promises).then(() => {\n        if (isSendTableDateType) {\n          onUse();\n        }\n      });\n\n    } catch (error) {\n      setConfirmLoading(false);\n    }\n\n  };\n\n  // 返回结果处理\n  const handleSocketMessage =async (event) => {\n    //   if(chat_type === \"report\"){\n    //   websocket.onclose = (event) => {\n    //     setState(prevState => ({\n    //       ...prevState,\n    //       messages: prevState.messages.map((message, i) =>\n    //         i === prevState.messages.length - 1 && message.sender === \"bot\"&& message.Cardloading\n    //           ? { ...message, content: window.W_L.connection_seems_lost, Cardloading: false }\n    //           : message\n    //       ),\n    //       // messages: prevState.messages.filter((item,index)=>item.content!==window.W_L.stopping_generation),\n    //     }));\n    //     setLoadingMask(false);\n    //     setSendTableDate(0);\n    //     setLockReconnect(false);\n    //     errorSetting();\n    //   }\n\n    //   try {\n    //     websocket.onmessage = (event) => {\n    //       const data = JSON.parse(event.data);\n    //     // const data = event;\n\n    //     // 调用输出消息\n    //     outPutMessage(data);\n    //   }\n\n\n    //   } catch (error) {\n    //     console.log(error, 'socket_error');\n    //     setLoadingMask(false);\n    //     setLoadingState(false);\n    //   }\n\n    // }\n    try {\n      const data = event;\n\n      // 调用输出消息\n      await outPutMessage(data);\n\n\n    } catch (error) {\n      console.log(error, 'socket_error');\n      setLoadingMask(false);\n      setLoadingState(false);\n    }\n\n  };\n\n  // 返回处理\n  const outPutMessage = async (data) => {\n\n    if (data.receiver === 'user') {\n      setState(prevState => ({\n        ...prevState,\n        messages: prevState.messages.map((message, i) =>\n          (chat_type === \"chat\" && message.sender === \"bot\" && message.chat_id === data.chat_id) ||\n            (chat_type !== \"chat\" && i === prevState.messages.length - 1 && message.sender === \"bot\")\n            ? { ...message, content: data.data.content, Cardloading: false, time: moment().format('YYYY-MM-DD HH:mm') }\n            : message\n        ),\n      }));\n      setLoadingState(false);\n      scrollToBottom(true);\n      closeWS();\n    }\n\n    if (data.state === 500) {\n      closeWS();\n      if (data.receiver === 'bi') {\n        if (data.data.data_type === 'mysql_comment_first') {\n          // setState(prevState => ({ ...prevState, sendTableDate: 0 }));\n          setSendTableDate(0)\n          setLoadingMask(false);\n          \n        }\n      }\n\n      setConfirmLoading(false);\n      if (data.receiver === 'log') {\n        toast.error(data.data.content);\n      }\n      setState(prevState => ({\n        messages: prevState.messages.map((message, i) =>\n          message.chat_id === data.chat_id && message.Cardloading\n            ? { ...message, Cardloading: false }\n            : message\n        )\n      }));\n      // errorSetting();\n      setLoadingState(false);\n      return;\n    }\n\n    if (data.receiver === 'bi') {\n      if (data.data.data_type === 'mysql_code') {\n        // console.log(\"开始执行sql\" , data.data.content)\n        setData_type(\"mysql_code\");\n        testAndVerifySql(data.data.content, data.data.name, data.id);\n      } else if (data.data.data_type === 'ask_data') {\n        setData_type(\"ask_data\");\n        dashboardsId(\"\", \"ask_data\", data.id);\n      } else if (data.data.data_type === 'chart_code') {\n        // console.log(\"开始执行chart_code\" , data.data.content)\n        setData_type(\"chart_code\")\n        try {\n          if (Dashboard_id.current) {\n            saveChart(JSON.parse(data.data.content), \"edit\", data.id)\n          } else {\n            saveChart(JSON.parse(data.data.content), null, data.id)\n          }\n\n        } catch (error) {\n          await sendSocketMessage(500, 'bi', 'chart_code', error, data.id)\n        }\n      } else if (data.data.data_type === 'mysql_comment') {\n        setData_type(\"mysql_comment\");\n        try {\n          const table_desc_list = JSON.parse(JSON.stringify(data.data.content.table_desc));\n          const table_desc = await filterTableDesc(table_desc_list);\n          if (table_desc.length > 0) {\n            toast(window.W_L.please_fill_in_the_description);\n            setConfirmLoading(false);\n            DialogueContentRef.current.sourceEdit(table_desc);\n            handleSuccess(Charttable_id.current, data.data.content);\n          } else {\n            updateCharttableDate();\n\n            setConfirmLoading(false);\n            if (chat_type === \"report\") {\n              sendUrl(\"new_report\");\n            }\n            handleSuccess(Charttable_id.current, data.data.content, \"success\");\n          }\n          setPercent(0)\n        } catch (error) {\n          // errorSetting();\n        }\n      } else if (data.data.data_type === 'mysql_comment_first') {\n        if (chat_type === \"autopilot\") {\n          setState({\n            messages: [{ content: data.data.content, sender: \"bot\", Cardloading: false, time: moment().format('YYYY-MM-DD HH:mm') }, { content: \"\", sender: \"user\", time: moment().format('YYYY-MM-DD HH:mm') }],\n          });\n        } else {\n          setState({\n            messages: [{ content: data.data.content, sender: \"bot\", Cardloading: false, chat_id: data.chat_id, time: moment().format('YYYY-MM-DD HH:mm') }],\n            // loadingMask: false,\n            // sendTableDate: 1,\n            data_type: \"mysql_comment_first\"\n          });\n        }\n\n        setLoadingMask(false);\n        setSendTableDate(1);\n        setStartUse(true);\n        setLoadingState(false);\n        toast.success(window.W_L.configuration_completed + \" \" + chat_type === \"autopilot\" ? \"\" : window.W_L.start_the_dialogue, {\n          icon: '👏',\n        });\n\n      } else if (data.data.data_type === 'mysql_comment_second') {\n        setState(prevState => ({\n          ...prevState,\n          loadingMask: false,\n          sendTableDate: 1,\n        }));\n        setLoadingMask(false);\n        setLoadingState(false);\n        setSendTableDate(1);\n        await sendSocketMessage(200, 'user', 'question', inputMessage);\n      } else if (data.data.data_type === 'delete_chart') {\n        setData_type(\"delete_chart\");\n        dashboardsId(data.data.content, \"delete\", data.id);\n      } else if (data.data.data_type === 'table_code') {\n        console.log(\"table_code=====\", data.id)\n        setData_type(\"table_code\");\n        if (Dashboard_id.current) {\n          console.log(\"22222table_code=====\", data.id)\n          publishQuery(\"edit\", data.id);\n        } else {\n          console.log(\"111111table_code=====\", data.id)\n          publishQuery(null, data.id);\n        }\n      }\n    } else if (data.receiver === 'log') {\n      if (!data.data.content) return\n      if (data.data.data_type === 'data_check') {\n        setPercent(data.data.content)\n        return\n      }\n      setState(prevState => ({\n        messages: prevState.messages.map((message, i) =>\n          (chat_type === \"chat\" && message.sender === \"bot\" && message.chat_id === data.chat_id) ||\n            (chat_type !== \"chat\" && i === prevState.messages.length - 1 && message.sender === \"bot\")\n            ? { ...message, logData: [...(message.logData || []), data.data.content] }\n            : message\n        )\n      }));\n    } else if (data.receiver === 'python') {\n      if (data.data.data_type === 'echart_code') {\n        setState(prevState => ({\n          messages: prevState.messages.map((message, i) =>\n            (chat_type === \"chat\" && message.sender === \"bot\" && message.chat_id === data.chat_id) ||\n              (chat_type !== \"chat\" && i === prevState.messages.length - 1 && message.sender === \"bot\")\n              ? { ...message, chart: data.data.content }\n              : message\n          ),\n        }));\n        // scrollToBottom();\n      }\n    }\n    // else if(data.receiver === 'autopilot') {\n    //   if(data.data.data_type === 'autopilot_code'){\n    //     setState(prevState => ({\n    //       messages: prevState.messages.map((message, i) =>\n    //         i === prevState.messages.length - 1 && message.sender === \"bot\"&& message.Cardloading\n    //           ? { ...message, autopilot: data.data.content,Cardloading: false,time:moment().format('YYYY-MM-DD HH:mm') }\n    //           : message\n    //       ),\n    //     }));\n    //     setLoadingState(false);\n    //     scrollToBottom();\n    //   }\n    // }\n  };\n  // 关闭对话框时保存对话记录\n  const closeSetMessage = () => {\n    if (chat_type === \"chat\" || chat_type === \"report\") {\n      let allMessages = messagesRef.current;\n      const lastMessage = messagesRef.current[messagesRef.current.length - 1];\n      if (lastMessage && lastMessage.sender === \"bot\" && lastMessage.Cardloading && !lastMessage.content && !lastMessage.chart) {\n        allMessages.pop();\n      }\n\n      addChatList(allMessages, chat_type);\n    }\n    // LoadingState\n    setLoadingState(false);\n    cancelRequestAll();\n  }\n  // 取消所有请求\n  const cancelRequestAll = () => {\n    // console.log(\"cancelRequestAll=====\",abortControllersRef)\n    closeWS();\n    if (abortControllersRef.current.length === 0) {\n      return;\n    }\n    try {\n      abortControllersRef.current.forEach(abortController => {\n        abortController.abort();\n      }\n      );\n      setState(prevState => ({\n        ...prevState,\n        messages: prevState.messages.map(message =>\n          message.sender === \"bot\" && message.Cardloading\n            ? { ...message, Cardloading: false }\n            : message\n        )\n      }));\n    } catch (error) {\n      console.log(error, 'cancelRequestAll_error');\n    }\n  };\n\n  // 保存对话记录\n  useEffect(() => {\n    messagesRef.current = state.messages;\n  }, [state.messages]);\n\n  // 在组件卸载时保存对话记录\n  useEffect(() => {\n    // 将 closeSetMessage 函数封装以便在 beforeunload 事件中使用\n    const handleBeforeUnload = () => {\n      closeSetMessage();\n    };\n\n    // 添加 beforeunload 事件监听\n    window.addEventListener('beforeunload', handleBeforeUnload);\n\n    // 返回一个清理函数，在组件卸载时执行\n    return () => {\n      // 移除 beforeunload 事件监听\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n      // 同时，当组件卸载时保存对话记录\n      closeSetMessage();\n    };\n  }, []);\n\n\n  const onChange = useCallback((type, value = 0, item) => {\n    // openSocket();\n    // if (!lockReconnect) {\n    //   notification.warning(window.W_L.connection_failed, window.W_L.connection_failed_tip);\n    //   openSocket();\n    //   return\n    // }\n\n    // console.log(`selected ${value}`);\n    // console.log(`selectedtype ${type}`);\n    // Charttable_id.current = value;\n    // Charttable_item.current = {\n    //   label: item.label,\n    //   id: item.id,\n    //   type: item.type,\n    // };\n    // // setSourceType(type);\n    // sourceTypeRef.current = type\n    // schemaList(value,type);\n  }, [setState, handleSocketMessage]);\n\n\n  const saveDashboardId = useCallback((key, value) => {\n    if (key === 'dashboard_id') {\n      Dashboard_id.current = value;\n      setDashboardId(value);\n      return\n    }\n    Charttable_id.current = value;\n  }, []);\n\n\n  // 获取数据库字段信息\n  const isSendTableDate = useCallback(async (data_type) => {\n    // console.log(\"cachedTableDesc==\", cachedTableDesc)\n    // console.log(\"CharttableD_date.current==\", CharttableD_date.current)\n    // console.log(\"CharttableD_date.current.tableName==\", CharttableD_date.current.tableName)\n    // console.log(\"SendTableDate==\", SendTableDate)\n    let baseMessageContent = {}; // 初始化一个空对象来构建base_message内容\n\n    if (data_type === \"mysql_comment_first\") {\n      setState(prevState => ({ ...prevState, data_type }));\n      setLoadingMask(true);\n      setLoadingState(true);\n    }\n    // 检查是否已经缓存了数据，如果已缓存，则直接使用缓存的数据\n    if (cachedTableDesc) {\n      baseMessageContent = {\n        databases_desc: \"\",\n        table_desc: cachedTableDesc\n      };\n    } else if (CharttableD_date.current && CharttableD_date.current.tableName.length > 0 && SendTableDate === 0) {\n      setState(prevState => ({ ...prevState, data_type }));\n      const promises = CharttableD_date.current.tableName.map(async (item) => {\n        const res = await axios.get(`/api/data_table/columns/${Charttable_id.current}/${item.name}`);\n        return {\n          table_name: res.table_name,\n          table_comment: res.table_desc,\n          field_desc: filterColumnsByInUse(res.table_columns_info)\n        };\n      });\n\n      try {\n        const results = await Promise.all(promises);\n        baseMessageContent = {\n          databases_desc: \"\",\n          table_desc: results\n        };\n        setCachedTableDesc(results); // 缓存请求的结果\n      } catch (err) {\n        console.log(err, 'first_error');\n        setLoadingMask(false);\n        setLoadingState(false);\n      }\n    }\n\n    return baseMessageContent;\n  }, [state, setState, handleSocketMessage, sendSocketMessage]);\n\n  // 发送对话消息1\n  const handleSendMessage1 = useCallback(async () => {\n    const { messages } = state;\n    if (inputMessage.trim() === \"\") {\n      return;\n    }\n    // 判断问题数是否超过最大问题数\n    const questionCount = messages.filter(message => message.sender === \"bot\" && message.Cardloading).length;\n    // console.log(\"questionCount==\", questionCount)\n    if (questionCount >= MAX_QUESTIONS) {\n      toast.error(\"为防止过大的Token消耗，每次对话最多只能提问\" + MAX_QUESTIONS + \"个问题\");\n      return;\n    }\n\n    const chat_id = moment().valueOf();\n    // console.log(\"当前对话标识==\", chat_id)\n    // 创建一个新的AbortController实例并保存其引用\n    const abortController = new window.AbortController();\n    abortControllersRef.current.push(abortController);\n    setState(prevState => ({\n      ...prevState,\n      messages: [...messages, { content: inputMessage, sender: \"user\", chat_id, time: moment().format('YYYY-MM-DD HH:mm') }, { content: \"\", sender: \"bot\", Cardloading: true, chat_id, abortController }],\n      data_type: \"question\"\n    }));\n    setInputMessage(\"\");\n    setLoadingState(chat_type === \"report\" ? true : false);\n    scrollToBottom();\n\n    const baseMessageContent = await isSendTableDate(\"mysql_comment_second\");\n    await sendSocketMessage(200, 'user', 'question', inputMessage, 0, baseMessageContent, chat_id, abortController.signal);\n    abortControllersRef.current = abortControllersRef.current.filter(ac => ac !== abortController);\n  }, [state, setState, inputMessage, setInputMessage, scrollToBottom, sendSocketMessage, isSendTableDate]);\n\n  // 发送对话消息0\n  const handleSendMessage = useCallback(() => {\n    if (!startUse) {\n      return\n    }\n    if (CharttableD_date.current && CharttableD_date.current.tableName.length > 0) {\n      handleSendMessage1();\n    }\n  }, [state, setState, handleSendMessage1]);\n\n  // error消息\n  const errorSetting = useCallback(() => {\n    toast.error(window.W_L.connection_failed);\n    setLoadingState(false);\n  }, [setState]);\n\n  // 初始化对话 发送first\n  const onUse = useCallback(async () => {\n    const data_type = \"mysql_comment_first\"\n    const baseMessageContent = await isSendTableDate(data_type);\n    const abortController = new window.AbortController();\n    abortControllersRef.current.push(abortController);\n    // console.log(\"first=====\", baseMessageContent)\n    await sendSocketMessage(200, 'bi', data_type, baseMessageContent, 0, \"\", 1, abortController.signal);\n    abortControllersRef.current = abortControllersRef.current.filter(ac => ac !== abortController);\n  }, [isSendTableDate]);\n\n  // set data_type\n  const setData_type = useCallback((value) => {\n    setState(prevState => ({ ...prevState, data_type: value }));\n  }, [setState]);\n\n\n  // 成功消息\n  const successSetting = useCallback(() => {\n    // if(stopGeneration){\n    //   return\n    // }\n    toast.success(window.W_L.report_generation_completed);\n  }, []);\n\n  // 过滤表中使用字段\n  function filterColumnsByInUse(columnsInfo) {\n    return columnsInfo.field_desc.filter(column => column.in_use === 1);\n  }\n\n  // 过滤表中使用字段\n  const filterTableDesc = useCallback((tableDesc) => {\n    return tableDesc.filter((item) => {\n      return item.field_desc.some((field) => field.is_pass !== 1);\n    });\n  }, []);\n\n  // 滚动到底部\n  const scrollToBottom = useCallback((isHas = false) => {\n    if (chat_type === \"viewConversation\" || isHas) return\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    timeoutId = setTimeout(() => {\n      const messageContainer = document.querySelector('.dialogue-content-all');\n      if (messageContainer) {\n        const scrollHeight = messageContainer.scrollHeight;\n        const clientHeight = messageContainer.clientHeight;\n        messageContainer.scrollTo({\n          top: scrollHeight - clientHeight,\n          behavior: 'smooth',\n        });\n      }\n    }, 50);\n  }, []);\n\n  const ChangeScrollTop = useCallback(() => {\n    setTimeout(() => {\n      scrollToBottom()\n    }, 100);\n  }, []);\n\n  // 停止对话\n  const stopSend = useCallback((type = null) => {\n    // websocket&&websocket.close();\n    setSendTableDate(type === \"edit\" ? 1 : 0);\n    setLoadingState(false);\n    // setStopGeneration(true);\n    closeWS();\n  }, [setState]);\n\n  const closeWS = () => {\n    if (wsRef.current && chat_type === \"report\") {\n      wsRef.current.close();\n      setState(prevState => ({\n        ...prevState,\n        messages: prevState.messages.map((message, i) =>\n          i === prevState.messages.length - 1 && message.sender === \"bot\"\n            ? { ...message, Cardloading: false }\n            : message\n        ),\n      }));\n    }\n  }\n\n  // 添加一个函数来取消特定的对话请求\n  const cancelRequest = useCallback((message) => {\n    // console.log(message, \"message====\")\n    if (chat_type === \"report\") {\n      closeWS();\n      return\n    }\n    // 找到message与chat_id关联的内容的bot\n    if (message && message.abortController) {\n      // console.log(message.abortController, \"message.abortController====\")\n      try {\n        message.abortController.abort();\n        // 从ref中移除已取消的AbortController实例\n        abortControllersRef.current = abortControllersRef.current.filter(ac => ac !== message.abortController);\n        setState(prevState => ({\n          ...prevState,\n          messages: prevState.messages.map((item, index) => {\n            if (item.chat_id === message.chat_id) {\n              return {\n                ...item,\n                Cardloading: false\n              }\n            } else {\n              return item\n            }\n          })\n        }));\n      } catch (error) {\n        console.error(error, 'cancelRequest_error');\n      }\n    }\n  }, []);\n\n\n  // 设置报表\n  const sendDashId = useCallback((id) => {\n    sendUrl(id);\n    setDialogueStorageDashboardId(id)\n  }, []);\n\n  // 重试\n  const retry = useCallback((index) => {\n  }, [setState, sendSocketMessage]);\n\n  // 打开key\n  const onOpenKeyClick = useCallback(() => {\n    // OpenKeyRef.current.showModal();\n  }, [setState, OpenKeyRef]);\n\n\n  // const sendSocketMessage = useCallback((state, sender, data_type, content,id=0) => {\n\n  // }, [state]);\n\n  // const sendSocketMessage =  useCallback( async (state, sender, data_type, content,id=0) => {\n  //   // const messageData = {\n  //   //   \"message\": \"你好\",\n  //   //   \"user_id\": currentUser.id,\n  //   //   \"user_name\": currentUser.name,\n  //   //   \"chat_id\": new Date().getTime()\n  //   // };\n  //   const messageData = {\n  //     user_id: currentUser.id,\n  //     user_name: currentUser.name,\n  //     message:{\n  //       state,\n  //       database:sourceTypeRef.current,\n  //       sender,\n  //       chat_type,\n  //       data: {\n  //         data_type,\n  //         databases_id:Charttable_id.current || 0,\n  //         language_mode:window.W_L.language_mode,\n  //         content,\n  //       },\n  //       id\n  //     }\n  //   }\n  //   try {\n  //     const response = await fetch(API_CHAT, {\n  //       method: 'POST',\n  //       headers: {\n  //         'Access-Control-Allow-Origin': '*',\n  //         'Content-Type': 'application/json',\n  //       },\n  //       body: JSON.stringify(messageData),\n  //     });\n\n  //     // 检查浏览器是否支持ReadableStream\n  //     if (response.body && response.body.getReader) {\n  //       const reader = response.body.getReader();\n  //       const decoder = new TextDecoder();\n\n  //       // 读取数据\n  //       reader.read().then(function processText({ done, value }) {\n  //         if (done) {\n  //           console.log(\"Stream complete\");\n  //           return;\n  //         }\n\n  //         // 解码并处理接收到的数据\n  //         const chunk = decoder.decode(value);\n  //         console.log('Received chunk:', chunk);\n  //         setState(prevState => ({\n  //           ...prevState,\n  //           testFetchMessage: prevState.testFetchMessage + chunk,\n  //         }));\n  //         console.log('new testFetchMessage:', state.testFetchMessage);\n  //         // 假设服务器发送的是JSON字符串，尝试解析并更新状态\n  //         try {\n  //           const data = JSON.parse(chunk);\n  //           console.log('Parsed JSON:', data)\n  //           handleSocketMessage(data);\n  //           // 更新状态或UI\n  //           // setState(prevState => ({\n  //           //   ...prevState,\n  //           //   messages: [...prevState.messages, { content: data.message, sender: \"bot\" }],\n  //           // }));\n  //         } catch (error) {\n  //           console.error('Error parsing JSON:', error);\n  //         }\n\n  //         // 递归调用以读取下一个数据块\n  //         reader.read().then(processText);\n  //       });\n  //     } else {\n  //       console.log('Streaming not supported');\n  //     }\n  //   } catch (error) {\n  //     console.error('Fetch error:', error);\n  //   }\n  // }, [state]);\n\n\n  // fetch请求\n  const sendSocketMessage = useCallback(async (state, sender, data_type, content, id = 0, base_message = null, chat_id = 0, signal = null) => {\n\n    if (chat_type === \"report\" && data_type !== \"mysql_comment_first\" && data_type !== \"mysql_comment\") {\n      const messgaeInfo = {\n        state,\n        database: sourceTypeRef.current,\n        sender,\n        chat_type,\n        base_message,\n        data: {\n          data_type,\n          databases_id: Charttable_id.current || 0,\n          language_mode: window.W_L.language_mode,\n          content,\n        },\n        id\n      }\n      // console.log(\"messgaeInfo\", messgaeInfo)\n      if(wsRef.current && wsRef.current.readyState === 1){\n        // console.log(\"wsRef.current.readyState\", wsRef.current.readyState)\n        wsRef.current.send(JSON.stringify(messgaeInfo));\n        return\n      }\n      generateChart(\n        wsRef,\n        messgaeInfo,\n        // on Change\n        (res) => {\n          console.log(\"res===\",res)\n          handleSocketMessage(res);\n        },\n        // on Cancel\n        () => {\n          setState(prevState => ({\n            ...prevState,\n            messages: prevState.messages.map((message, i) =>\n              i === prevState.messages.length - 1 && message.sender === \"bot\" && message.Cardloading\n                ? { ...message, content: window.W_L.connection_seems_lost, Cardloading: false }\n                : message\n            ),\n            // messages: prevState.messages.filter((item,index)=>item.content!==window.W_L.stopping_generation),\n          }));\n          setLoadingMask(false);\n          setSendTableDate(0);\n          setConfirmLoading(false);\n          // errorSetting();\n        }\n      );\n\n      return\n    }\n\n    //\n    const messageData = {\n      user_id: currentUser.id,\n      user_name: currentUser.name,\n      chat_id,\n      message: {\n        state,\n        database: sourceTypeRef.current,\n        sender,\n        chat_type,\n        base_message,\n        data: {\n          data_type,\n          databases_id: Charttable_id.current || 0,\n          language_mode: window.W_L.language_mode,\n          content,\n        },\n        id\n      }\n    };\n\n    try {\n      const response = await fetch(API_CHAT, {\n        method: 'POST',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(messageData),\n        signal\n      });\n\n      if (response.body && response.body.getReader) {\n        const reader = response.body.getReader();\n        const decoder = new TextDecoder();\n        let buffer = '';\n\n        // 递归函数处理流数据\n        const processText = async ({ done, value }) => {\n          if (done) {\n            // console.log(\"Stream complete\");\n            return;\n          }\n\n          // 累积数据块\n          buffer += decoder.decode(value, { stream: true });\n          // 分割完整消息\n          let parts = buffer.split('---ENDOFMESSAGE---');\n          console.log('Received buffer:', buffer);\n          // console.log('Received parts:', parts);\n          buffer = parts.pop(); // 保留未完成的部分\n\n          parts.forEach(part => {\n            try {\n\n              const data = JSON.parse(part);\n              console.log('Parsed JSON:', data)\n              handleSocketMessage(data); // 处理解析后的消息\n            } catch (error) {\n              console.error('Error parsing JSON:', error);\n            }\n          });\n\n          // 继续读取下一个数据块\n          reader.read().then(processText);\n        };\n\n        // 开始读取数据\n        reader.read().then(processText);\n      } else {\n        console.log('Streaming not supported');\n      }\n    } catch (error) {\n      console.error('Fetch error:', error);\n      setLoadingMask(false);\n      setLoadingState(false);\n      setConfirmLoading(false);\n      setState(prevState => ({\n        messages: prevState.messages.map((message, i) =>\n          message.chat_id === chat_id && message.Cardloading\n            ? { ...message, Cardloading: false }\n            : message\n        )\n      }));\n      if (error.name !== 'AbortError') {\n        toast.error(window.W_L.ERROR_MESSAGE);\n      }\n      // toast.error(window.W_L.ERROR_MESSAGE);\n    }\n  }, [state, isSendTableDate]);\n\n  const { new_sql, testAndVerifySql } = useSql(Charttable_id.current, sendSocketMessage, errorSetting);\n  const { saveChart, dashboardsId, publishQuery } = useChartCode(sendSocketMessage, saveDashboardId, props, successSetting, CharttableD_date.current, new_sql, dashboardId, sendDashId);\n  const { setDialogueStorageDashboardId, addDashboard, getDashboard, addDialogueStorage, getDialogueStorage, addChatList, getAllStorage, addAutopilotStorage } = dialogueStorage();\n  //   const Dialogue = () => {\n  const { messages } = state;\n\n  return (\n    <DialogueContext.Provider value={{ cancelRequest }}>\n      <div className=\"dialogue-content\">\n        <DialogueTop loadingMask={LoadingMask} Charttable={CharttableDate} CharttableItem={Charttable_item.current} closeDialogue={closeDialogue} chat_type={chat_type}></DialogueTop>\n        {/* <OpenKey ref={OpenKeyRef}></OpenKey> */}\n        {LoadingState && <MenuMask />}\n        <DialogueContent\n          databases_type={sourceTypeRef}\n          ref={DialogueContentRef}\n          Charttable={CharttableDate}\n          onUse={onUse}\n          sendTableDate={SendTableDate}\n          onChange={onChange}\n          confirmLoading={ConfirmLoading}\n          loadingMask={LoadingMask}\n          messages={messages}\n          ChangeScrollTop={ChangeScrollTop}\n          loadingState={LoadingState}\n          stopSend={stopSend}\n          inputMessage={inputMessage}\n          setInputMessage={setInputMessage}\n          handleSendMessage={handleSendMessage}\n          chat_type={chat_type}\n          retry={retry}\n          onOpenKeyClick={onOpenKeyClick}\n          onSuccess={onSuccess}\n          percent={percent}\n          sourceTypeRef={sourceTypeRef}\n        />\n      </div>\n    </DialogueContext.Provider>\n  );\n}\n\nexport default Dialogue;\n","import { useState, useCallback,useEffect,useRef } from 'react';\nimport { axios } from \"@/services/axios\";\n\nexport const useSql = (tab_id,sendSocketMessage,errorSetting) => {\n  const [state, setState] = useState({ SelectValue: null, sqlId: null });\n  const new_sql = useRef(null);\n  const tabId =useRef(null);\n  useEffect(() => {\n    if(state.sqlId){\n      new_sql.current = state.sqlId;\n    }\n}, [state.sqlId])\nuseEffect(() => {\n  if(tab_id){\n    tabId.current = tab_id;\n  }\n}, [tab_id])\n\nconst findQueryResult = useCallback(async (response,type,name,task_id) => {\n  try {\n    const res = await axios.get(`/api/query_results/${response.job.query_result_id}`);\n    // console.log(res, 'gettable_data_success');\n    if(res.query_result.data.rows.length===0){\n      await sendSocketMessage(500,'bi','mysql_code',\"sql没有查询到数据\",task_id)\n      return\n    }\n    \n    if(type==='test'){\n      await saveSql(res.query_result.query,name,task_id)\n    }else{\n      await sendSocketMessage(200,'bi','mysql_code',res.query_result.data,task_id)\n    }\n\n  } catch (err) {\n    // console.log(err,'gettable_data_error');\n  }\n}, [sendSocketMessage,saveSql]);\n\nconst findJob = useCallback(async (response,type,name,task_id,max=50) => {\n  let num = 0;\n  let isCalled = false;\n  const timer = setInterval(async () => {\n    num++;\n    if(num>max){\n      clearInterval(timer);\n      errorSetting()\n      return\n    }\n    try {\n      const res = await axios.get(`/api/jobs/${response.job.id}`);\n      if (res.job.query_result_id&& !isCalled) {\n        // console.log(res, 'getquery_result_id');\n        isCalled = true;\n        clearInterval(timer);\n        await findQueryResult(res,type,name,task_id);\n      } else {\n        if(res.job.error){\n          clearInterval(timer);\n          await sendSocketMessage(500,'bi','mysql_code',res.job.error,task_id)\n          return\n        }\n        // console.log(res, 'query_result_id_undefined');\n      }\n    } catch (err) {\n      // console.log(err, 'getquery_result_id_error');\n    }\n  }, 200);\n}, [errorSetting, sendSocketMessage, findQueryResult]);\n\nconst executeSql = useCallback(async (response,task_id) => {\n  // const sqlId = new_sql.current;\n  // console.log(\"sqlId\", sqlId);\n  const data = {\n    id: response.id,\n    parameters: {},\n    apply_auto_limit: true,\n    max_age: 0\n  };\n\n  try {\n    const res = await axios.post(`/api/queries/${response.id}/results`, data);\n    // console.log(res, 'executeSql_success');\n    await findJob(res,\"execute\",null,task_id);\n  } catch (err) {\n    // console.log(err, 'executeSql_error');\n    await sendSocketMessage(500,'bi','mysql_code',\"\",task_id)\n  }\n}, [findJob,sendSocketMessage]);\n\n  const saveSql = useCallback(async (query,name,task_id) => {\n    const data = {\n      data_source_id: tabId.current,\n      latest_query_data_id: null,\n      name,\n      options: {\n        apply_auto_limit: true,\n        parameters: []\n      },\n      query,\n      schedule: null,\n      tags: []\n    };\n    try {\n      const res = await axios.post('/api/queries', data);\n      // console.log(res, 'saveSql_success');\n      setState(prevState => ({ ...prevState, sqlId: res.id }));\n      await executeSql(res,task_id);\n    } catch (err) {\n      // console.log(err, 'saveSql_error');\n    }\n  }, [executeSql]);\n\n\n\n  const testAndVerifySql = useCallback(async (query,name,task_id) => {\n    // console.log(\"tabId\",tabId)\n    const data = {\n      apply_auto_limit : true,\n      data_source_id : tabId.current,\n      max_age : 0,\n      parameters : {},\n      query,\n    }\n    try {\n      const res = await axios.post(`/api/query_results`,data);\n      await findJob(res,\"test\",name,task_id);\n      // console.log(res, 'testAndVerifySql_success');\n    } catch (err) {\n      // console.log(err, 'testAndVerifySql_error');\n    }\n  }, [findJob]);\n\n \n\n\n\n  return { state, saveSql, executeSql, testAndVerifySql, findJob, findQueryResult,new_sql };\n};","import React, { useState,useEffect} from 'react';\nimport icon_small from \"@/assets/images/icon_small.png\";\nimport './index.css';\nimport MessageOutlinedIcon from \"@ant-design/icons/MessageOutlined\";\nconst DialogueLeftList = (props) => {\n  const [arr ,setArr] = useState([]);\n  const [uuid ,setUuid] = useState(\"\");\nuseEffect(()=>{\n    setArr(JSON.parse(localStorage.getItem(\"Chart_All\")) || [])\n},[])\nconst modeSwitch = (item) => () => {\n    setUuid(item.uuid)\n    props.switchMode(item)\n}\n  const DiaTop = () => {\n    return (\n      <div className=\"dia-top\">\n        <img src={icon_small} alt=\"\" />\n        <span>DeepBI</span>\n      </div>\n    )\n  }\n  const DiaBottom = () => {\n    return (\n      <div className=\"dia-content\">\n      {arr.map((item,index)=>{\n        return <div className=\"flex-d dia-info\" key={index}>\n        <div className=\"dia-chats\" >\n        \n             <div className=\"dia-chat\" onClick={modeSwitch(item)}>\n            <MessageOutlinedIcon style={{color:uuid===item.uuid?\"#4974d1\":\"#fff\",fontSize:\"21px\"}} ></MessageOutlinedIcon>\n              <div className=\"dia-chat-name\">{item.messages[1].content || item.title}</div>\n          </div>\n        </div>\n        </div>\n\n      })}\n      </div>\n    )\n  }\n  return (\n     \n        <>\n         {\n          arr && arr.length>0&&\n        <div className=\"dia-main\">\n          <DiaTop></DiaTop>\n        <DiaBottom></DiaBottom>\n      </div>\n      }\n        </>\n      \n  );\n};\n\nexport default DialogueLeftList;","import React from 'react';\n\nfunction NoDashboardData({ chatType }) {\n  return (\n    <div style={{ flex: '1 1 0%', overflow: 'auto', display: 'flex', flexDirection: 'column', justifyContent: 'center' }}>\n      <img\n        src=\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNDEiIHZpZXdCb3g9IjAgMCA2NCA0MSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAxKSIgZmlsbD0ibm9uZSIgZmlsbFJ1bGU9ImV2ZW5vZGQiPg0KICAgIDxlbGxpcHNlIGZpbGw9IiNkZGQiIGN4PSIzMiIgY3k9IjMzIiByeD0iMzIiIHJ5PSI3IiAvPg0KICAgIDxnIGZpbGxSdWxlPSJub256ZXJvIiBzdHJva2U9IiM5OTkiPg0KICAgICAgPHBhdGgNCiAgICAgICAgZD0iTTU1IDEyLjc2TDQ0Ljg1NCAxLjI1OEM0NC4zNjcuNDc0IDQzLjY1NiAwIDQyLjkwNyAwSDIxLjA5M2MtLjc0OSAwLTEuNDYuNDc0LTEuOTQ3IDEuMjU3TDkgMTIuNzYxVjIyaDQ2di05LjI0eiIgLz4NCiAgICAgIDxwYXRoDQogICAgICAgIGQ9Ik00MS42MTMgMTUuOTMxYzAtMS42MDUuOTk0LTIuOTMgMi4yMjctMi45MzFINTV2MTguMTM3QzU1IDMzLjI2IDUzLjY4IDM1IDUyLjA1IDM1aC00MC4xQzEwLjMyIDM1IDkgMzMuMjU5IDkgMzEuMTM3VjEzaDExLjE2YzEuMjMzIDAgMi4yMjcgMS4zMjMgMi4yMjcgMi45Mjh2LjAyMmMwIDEuNjA1IDEuMDA1IDIuOTAxIDIuMjM3IDIuOTAxaDE0Ljc1MmMxLjIzMiAwIDIuMjM3LTEuMzA4IDIuMjM3LTIuOTEzdi0uMDA3eiINCiAgICAgICAgZmlsbD0iI2UxZTFlMSIgLz4NCiAgICA8L2c+DQogIDwvZz4NCjwvc3ZnPg==\"\n        alt=\"noData\"\n        style={{ width: '120px', height: '120px', margin: '0 auto' }}\n      />\n      <p style={{ textAlign: 'center', marginTop: '20px', fontSize: '14px', fontWeight: 'bold' }}>\n      {\n        chatType===\"report\"?window.W_L.start_your_dialogue:window.W_L.no_dialogue\n      }\n      </p>\n    </div>\n  );\n}\n\nexport default NoDashboardData;","import React from \"react\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport routes from \"@/services/routes\";\nimport DashboardPage from \"@/pages/dashboards/DashboardPage\";\nimport Dialogue from \"./components/Dialogue\";\nimport DialogueListLeft from \"./components/DialogueListLeft\";\nimport NoDashboardData from \"./components/NoDashboardData/NoDashboardData.jsx\";\nimport \"./index.less\";\n\nfunction DialogueList(props) {\n  const { chatType } = props;\n  // const [chatType, setChatType] = React.useState(\"chat\");\n  const [dashboardId, setDashboardId] = React.useState(\"\");\n  const [dashboardKey, setDashboardKey] = React.useState(0);\n  const [uuid, setUuid] = React.useState(\"\");\n  const [isShowNoData, setIsShowNoData] = React.useState(false);\n  const switchMode = (item) => {\n    setUuid(item.uuid);\n  };\n  const handleError = () => {\n  };\n  const sendUrl = (item) => {\n    if(item===\"new_report\"){\n      setIsShowNoData(true);\n      setDashboardId(\"\");\n      setDashboardKey((prevKey) => prevKey + 1);\n      return;\n    }\n    setIsShowNoData(false);\n    setDashboardId(item);\n    setDashboardKey((prevKey) => prevKey + 1);\n  }\n  return (\n    <div className=\"page-alerts-list\">\n      {\n        chatType === \"viewConversation\"&&\n        (<DialogueListLeft chat_type={chatType} switchMode={switchMode}></DialogueListLeft>)\n      }\n      <div style={{ display: 'flex', flexDirection: 'column', flex: 1, position: \"relative\", background: \"rgb(250, 250, 250)\",overflow: \"auto\"}}>\n      {\n        chatType === \"viewConversation\"&& !uuid?\n        <NoDashboardData chatType={chatType} />\n        :\n          <Dialogue chat_type={chatType} sendUrl={sendUrl} key={chatType} uuid={uuid} /> \n      }\n      </div>\n      {\n        chatType === \"report\" && dashboardId?\n          <div style={{ flex: \"1\",overflow: \"auto\" }} className=\"dashbord_page\">\n            <DashboardPage key={dashboardKey} isShowReport={false} dashboardId={dashboardId} dashboardSlug=\"-\" onError={handleError} />\n          </div>\n          : null\n      }\n      {\n        chatType === \"report\" && isShowNoData&&\n        (\n          <NoDashboardData chatType={chatType} />\n        )\n      }\n    </div>\n  );\n}\n\nfunction registerDialogueListRoute() {\n  routes.register(\n    \"Dialogue.List.autopilot\",\n    routeWithUserSession({\n      path: \"/autopilot\",\n      title: \"autopilot\",\n      render: (pageProps) => <DialogueList {...pageProps} chatType=\"autopilot\" />,\n    })\n  );\n\n  routes.register(\n    \"Dialogue.List.Dialogue\",\n    routeWithUserSession({\n      path: \"/dialogue-list\",\n      title: \"Dialogue\",\n      render: (pageProps) => <DialogueList {...pageProps} chatType=\"viewConversation\" />,\n    })\n  );\n\n\n  routes.register(\n    \"Dialogue.List.Report\",\n    routeWithUserSession({\n      path: \"/report-route\",\n      title: \"Report\",\n      render: (pageProps) => <DialogueList {...pageProps} chatType=\"report\" />,\n    })\n  );\n  \n  routes.register(\n    \"Dialogue.List\",\n    routeWithUserSession({\n      path: \"/\",\n      title: window.W_L.dialogue,\n      render: (pageProps) => <DialogueList {...pageProps} currentPage=\"testdialogue\" chatType=\"chat\" />,\n    })\n  );\n  \n}\n\nregisterDialogueListRoute();\n","import React from \"react\";\nimport BigMessage from \"@/components/BigMessage\";\n\n// Default \"list empty\" message for list pages\nexport default function EmptyState(props) {\n  return (\n    <div className=\"text-center\">\n      <BigMessage icon=\"fa-search\" message={window.W_L.find_nothing} {...props} />\n    </div>\n  );\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\n\nimport \"./content-with-sidebar.less\";\n\nconst propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node,\n};\n\nconst defaultProps = {\n  className: null,\n  children: null,\n};\n\n// Sidebar\n\nfunction Sidebar({ className, children, ...props }) {\n  return (\n    <div className={classNames(\"layout-sidebar\", className)} {...props}>\n      <div>{children}</div>\n    </div>\n  );\n}\n\nSidebar.propTypes = propTypes;\nSidebar.defaultProps = defaultProps;\n\n// Content\n\nfunction Content({ className, children, ...props }) {\n  return (\n    <div className={classNames(\"layout-content\", className)} {...props}>\n      <div>{children}</div>\n    </div>\n  );\n}\n\nContent.propTypes = propTypes;\nContent.defaultProps = defaultProps;\n\n// Layout\n\nexport default function Layout({ children, className = undefined, ...props }) {\n  return (\n    <div className={classNames(\"layout-with-sidebar\", className)} {...props}>\n      {children}\n    </div>\n  );\n}\n\nLayout.propTypes = propTypes;\nLayout.defaultProps = defaultProps;\n\nLayout.Sidebar = Sidebar;\nLayout.Content = Content;\n","import React,{useEffect,useState} from \"react\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport routes from \"@/services/routes\";\nimport Table from \"antd/lib/table\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\nimport Link from \"@/components/Link\";\nimport EmptyState from \"@/components/items-list/components/EmptyState\";\nimport Layout from \"@/components/layouts/ContentWithSidebar\";\nimport Tag from \"antd/lib/tag\";\nimport Modal from \"antd/lib/modal\";\nimport { axios } from \"@/services/axios\";\nimport PageHeader from \"@/components/PageHeader\";\nimport  DeleteOutlinedIcon  from \"@ant-design/icons/DeleteOutlined\";\nimport toast from 'react-hot-toast';\nimport \"./index.less\";\n\nfunction AutopilotHistory() {\n  const [AutoPilotList, setAutoPilotList] = useState([]);\nconst [isLoading, setIsLoading] = useState(true);\nconst listColumns = [\n    {\n      title: window.W_L.name,\n      dataIndex: \"report_name\",\n      width: null,\n      align: \"center\",\n      render: (text, item) => (\n        <React.Fragment>\n          <Link className=\"table-main-title\" href={\"autopilot/\" + item.id}>\n            {item.report_name}\n          </Link>\n        </React.Fragment>\n      )\n    },\n    {\n      title: window.W_L.create_time,\n      dataIndex: \"created_at\",\n      align: \"center\",\n    },\n    {\n      title: window.W_L.task_status,\n      dataIndex: \"is_generate\",\n      align: \"center\",\n      render: (text, item) => (\n        <React.Fragment>\n            {item.is_generate === 0 && <Tag color=\"gold\">{window.W_L.waiting}</Tag>}\n            {item.is_generate === 1 && <Tag color=\"blue\">{window.W_L.generating}</Tag>}\n            {item.is_generate === 2 && <Tag color=\"green\">{window.W_L.success}</Tag>}\n            {item.is_generate === -1 && <Tag color=\"red\">{window.W_L.fail}</Tag>}\n        </React.Fragment>\n      )\n    },\n    {\n      title: \"\",\n      dataIndex: \"actions\",\n      width: 50,\n      align: \"center\",\n      render: (text, item) => (\n        <React.Fragment>\n          <DeleteOutlinedIcon style={{ color: \"#f08282\", fontSize: \"15px\" }} onClick={() => handleDelete(item.id)} />\n        </React.Fragment>\n      )\n    }\n  ];\n  const handleDelete = async (id) => {\n    Modal.confirm({\n      title: window.W_L.confirm_delete,\n      content: window.W_L.confirm_delete_tip,\n      onOk: async () => {\n        try {\n          const res = await axios.delete(`/api/auto_pilot/delete/${id}`);\n          if(res.code === 200){\n            toast.success(window.W_L.delete_success);\n            getAutoPilotList();\n          }else{\n            toast.error(window.W_L.delete_fail);\n          }\n          // Handle the response as needed\n          \n        } catch (error) {\n          // Handle any errors\n        }\n      },\n      onCancel() {\n        // Handle cancel action\n      },\n    });\n  };\n  const  getAutoPilotList = async () => {\n    setIsLoading(true);\n    const res = await axios.get(\"/api/auto_pilot\");\n    if(res.code === 200){\n      res.data.sort(function(a,b){\n        return Date.parse(b.created_at) - Date.parse(a.created_at);\n      });\n        setAutoPilotList(res.data);\n    }\n    setIsLoading(false);\n    };\n    useEffect(() => {\n        getAutoPilotList();\n    }, []);\n  return (\n    <div className=\"page-queries-list\">\n      <div className=\"container\">\n        <PageHeader\n          title={window.W_L.all_autopilot}\n          actions={\n              <Link.Button block type=\"primary\" href=\"autopilot\">\n                <i className=\"fa fa-plus m-r-5\" aria-hidden=\"true\" />\n                {window.W_L.auto_pilot}\n              </Link.Button>\n          }\n        />\n         <Layout>\n        <Layout.Content>\n        <React.Fragment>\n        <div className=\"bg-white tiled table-responsive\">\n            <Table\n            className=\"table-data\"\n            rowKey=\"id\"\n            size=\"middle\"\n            columns={listColumns}\n            dataSource={AutoPilotList}\n            pagination={false}\n            loading={isLoading}\n            locale={{\n            emptyText: (\n                <EmptyState className=\"\" />\n            ),\n            }}\n        />\n        </div>\n        </React.Fragment>\n        </Layout.Content>\n        </Layout>\n        </div>\n    </div>\n  );\n}\n\nfunction registerAutopilotHistoryRoute() {\n  routes.register(\n    \"Dialogue.List.autopilot_list\",\n    routeWithUserSession({\n      path: \"/autopilot_list\",\n      title: \"autopilot_list\",\n      render: (pageProps) => <AutopilotHistory {...pageProps} chatType=\"autopilot\" />,\n    })\n  );\n}\n\nregisterAutopilotHistoryRoute();\n","import React,{ useState } from 'react';\nimport html2canvas from 'html2canvas';\nimport jsPDF from 'jspdf';\n\n/**\n * 导出PDF\n * @param {导出后的文件名} title \n * @param {要导出的dom节点：react使用ref} ele \n */\nexport const useExportPDF = () => {\n  let [loading, setLoading] = useState(false);\n\n  const exportPDF = async (title, element) => {\n    if (element) {\n      setLoading(true);\n      let width = element.offsetWidth / 4;\n      let height = element.offsetHeight / 4;\n      let limit = 14400;\n      if (height > limit) {\n        let contentScale = limit / height;\n        height = limit;\n        width *= contentScale;\n      }\n      html2canvas(element, {\n        scale: 2,\n        useCORS: true,\n        allowTaint: false,\n        ignoreElements: (element) => {\n          if (element.id === 'ignoreBtnElement') return true;\n          return false;\n        }\n      }).then(canvas => {\n        let context = canvas.getContext('2d');\n        let orientation;\n        if (context) {\n          context.mozImageSmoothingEnabled = false;\n          context.webkitImageSmoothingEnabled = false;\n          context.msImageSmoothingEnabled = false;\n          context.imageSmoothingEnabled = false;\n        }\n        // let pageData = canvas.toDataURL('image/jpg', 1.0);\n        let pageData = canvas.toDataURL('image/webp', 0.7);\n        let img = new Image();\n        img.src = pageData;\n        img.onload = function () {\n          img.width /= 2;\n          img.height /= 2;\n          img.style.transform = 'scale(0.5)';\n          let pdf;\n          orientation = width > height ? 'l' : 'p'\n          // eslint-disable-next-line\n          pdf = new jsPDF(orientation , 'mm', [\n            width,\n            height\n          ]);\n          pdf.addImage(\n            pageData,\n            'jpeg',\n            0,\n            0,\n            width,\n            height\n          );\n          pdf.save(`${title}.pdf`);\n          setLoading(false);\n        };\n      });\n    }\n  }\n\n  return { loading, exportPDF };\n}\nexport const exportPDF = async (title, element) => {\n   \n}","import React, { memo, useEffect, useRef, useState } from 'react';\nimport FilePptOutlinedIcon from \"@ant-design/icons/FilePptOutlined\";\nimport html2pdf from 'html2pdf.js';\nimport * as echarts from 'echarts';\nimport { useExportPDF } from './useExportPDF.js';\nimport LoadingOutlinedIcon from '@ant-design/icons/LoadingOutlined';\nimport \"./index.css\";\nconst AutoPilot = memo(({ title,content }) => {\n  const autopilotRef = useRef(null);\n  // const [AutoPilotJson, setAutoPilotJson] = useState({});\n\n  useEffect(() => {\n    if(!content) return;\n    const data = content;\n    let div = document.createElement(\"div\")\n    div.innerHTML = data\n    autopilotRef.current.append(div)\n    // eval解析\n  try {\n    let scripts = div.querySelectorAll(\"script\")\n  scripts.forEach(item => {\n    window.eval(item.innerText);\n  });\n  } catch (error) {\n    \n  }\n  }, [content]);\n  const exportPdf = () => {\n  //  html2pdf(autopilotRef.current, {\n  //     filename: 'autopilot.pdf',\n  //     image: { type: 'jpeg', quality: 1 },\n  //     html2canvas: {\n  //       dpi: 192,\n  //       scale:2,\n  //       letterRendering: true,\n  //       useCORS: true\n  //     },\n  //     });\n      // const opt = {\n      //   margin: 10,\n      //   filename: 'converted_pdf.pdf',\n      //   image: { type: 'jpeg', quality: 0.98 },\n      //   html2canvas: { scale: 2 },\n      //   jsPDF: { unit: 'mm', format: 'a2', orientation: 'portrait' } // 设置 A2 纸张大小\n      // };\n  \n      // // 使用 html2pdf 库生成 PDF\n      // html2pdf()\n      //   .from(autopilotRef.current)\n      //   .set(opt)\n      //   .save();\n  \n      exportPDF(title, autopilotRef.current)\n  }\n  const { loading, exportPDF } = useExportPDF();\n  return(\n    <div className=\"auto_pilot\" >\n    <div className=\"auto_pilot_icon\" onClick={exportPdf}>\n      \n        <svg t=\"1701955188289\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"3387\" width=\"2rem\" height=\"2rem\"><path d=\"M704 0H192c-35.328 0-64 28.672-64 64v320h576c35.328 0 64 28.672 64 64v415.744c0 35.328-28.672 64-64 64H128v31.744c0 35.328 28.672 64 64 64h768c35.328 0 64-28.672 64-64v-640L704 0z\" fill=\"#EAEAEA\" p-id=\"3388\"></path><path d=\"M704 0v256c0 35.328 28.672 64 64 64h256L704 0z\" fill=\"#434854\" p-id=\"3389\"></path><path d=\"M768 320l256 256V320z\" opacity=\".1\" p-id=\"3390\"></path><path d=\"M704 832c0 17.92-14.336 31.744-31.744 31.744H31.744C13.824 863.744 0 849.408 0 832V480.256c0-17.92 14.336-31.744 31.744-31.744h640c17.92 0 31.744 14.336 31.744 31.744V832z\" fill=\"#CD4050\" p-id=\"3391\"></path><path d=\"M192 544.256h-48.128c-8.704 0-15.872 7.168-15.872 15.872v192c0 8.704 7.168 15.872 15.872 15.872s15.872-7.168 15.872-15.872v-79.872h31.744c35.328 0 64-28.672 64-64s-28.16-64-63.488-64z m158.72 0c34.816 0 62.976 27.648 64 62.464v97.792c0 34.816-27.648 62.976-62.464 64h-49.664c-8.704 0-15.36-6.656-15.872-14.848V560.64c0-8.704 6.656-15.36 14.848-15.872h49.152z m227.328 0c8.704 0 15.872 7.168 15.872 15.872S586.752 576 578.048 576h-80.384v64h48.128c8.704 0 15.872 7.168 15.872 15.872s-7.168 15.872-15.872 15.872h-48.128v79.872c0 8.704-7.168 15.872-15.872 15.872s-15.872-7.168-15.872-15.872v-192c0-8.704 7.168-15.872 15.872-15.872h96.256zM350.72 576h-31.744v159.744h31.744c17.408 0 31.232-13.824 31.744-30.72v-97.28C382.976 590.336 368.64 576 350.72 576zM192 576c17.92 0 31.744 14.336 31.744 31.744S209.92 640 192 640h-31.744v-64H192z\" fill=\"#FFFFFF\" p-id=\"3392\"></path></svg> \n    <p>{window.W_L.download}</p>\n    {\n        loading&&\n        <LoadingOutlinedIcon />\n      }\n    </div>\n    <div ref={autopilotRef}></div>\n  </div>\n  )\n});\n\nexport default AutoPilot;","import React,{useEffect,useState} from \"react\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport routes from \"@/services/routes\";\nimport Tag from \"antd/lib/tag\";\nimport { axios } from \"@/services/axios\";\nimport AutoPilot from \"./components/AutoPilot/AutoPilot\";\nimport LogWorkflow from \"./components/LogWorkflow\"\nimport Skeleton from \"antd/lib/skeleton\";\nimport \"./components/TypingCard/index.less\";\n\nfunction AutopilotView(props) {\n    const [autoPilot, setAutoPilot] = useState({});\n    const [loading, setLoading] = useState(true);\n    const getAutoPilot = async (id) => {\n        const res = await axios.get(`/api/auto_pilot/${id}`);\n        if(res.code === 200){\n            setAutoPilot(res.data);\n        }else{\n            setAutoPilot({});\n        }\n        setLoading(false);\n    };\n    useEffect(() => {\n        getAutoPilot(props.autopilotId);\n    }, []);\n\n  return (\n    <div className=\"auto-pilot-list\">\n        <Skeleton loading={loading} active paragraph={{ rows: 10 }}>\n        <div className=\"message\" >\n        <div className={`auto-pilot`} >\n            <div className={`chat user autopilot-item`}>\n                <p>{window.W_L.report_name}:{autoPilot.report_name}</p>\n                <p>{window.W_L.report_desc}:{autoPilot.report_desc}</p>\n                {/* <LogWorkflow Cardloading={false} logData={[...(autoPilot.chat_log || [])]} /> */}\n                <LogWorkflow Cardloading={false} logData={autoPilot.chat_log} />\n              {\n                autoPilot.html_code?\n                <AutoPilot title={autoPilot.report_name} content={autoPilot.html_code}></AutoPilot>\n                :\n                <div style={{textAlign:\"center\",marginTop:\"50px\"}}>\n                    <svg t=\"1701954689007\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"1988\" width=\"200\" height=\"200\"><path d=\"M777 806.7c0 38.7-31.1 70.3-69.7 70.3H225.9c-38.7 0-69.9-31.6-69.9-70.3V174.4c0-38.7 31.2-70.4 69.9-70.4h481.4c38.7 0 69.7 31.7 69.7 70.4v632.3z\" fill=\"#FFFFFF\" p-id=\"1989\"></path><path d=\"M707.3 886H225.9c-43.5 0-78.9-35.8-78.9-79.3V174.4c0-43.5 35.4-79.4 78.9-79.4h481.4c43.5 0 79.7 35.9 79.7 79.4v632.3c0 43.5-36.2 79.3-79.7 79.3zM225.9 113c-33.7 0-59.9 27.7-59.9 61.4v632.3c0 33.7 26.2 61.3 59.9 61.3h481.4c33.7 0 60.7-27.6 60.7-61.3V174.4c0-33.7-27-61.4-60.7-61.4H225.9z\" fill=\"#282828\" p-id=\"1990\"></path><path d=\"M732 763.1c0 33.3-26.1 60.9-59.4 60.9H251.7c-33.3 0-59.7-27.6-59.7-60.9V226.9c0-33.3 26.4-60.9 59.7-60.9h420.9c33.3 0 59.4 27.5 59.4 60.9v536.2z\" fill=\"#50BCFF\" p-id=\"1991\"></path><path d=\"M361.8 251.9H208.6c-4.9 0-8.9-4-8.9-8.9s4-8.9 8.9-8.9h153.1c4.9 0 8.9 4 8.9 8.9s-3.9 8.9-8.8 8.9zM549.2 313H208.6c-4.9 0-8.9-4-8.9-8.9s4-8.9 8.9-8.9h340.5c4.9 0 8.9 4 8.9 8.9s-3.9 8.9-8.8 8.9zM652 448.4H208.6c-4.9 0-8.9-4-8.9-8.9s4-8.9 8.9-8.9H652c4.9 0 8.9 4 8.9 8.9s-4 8.9-8.9 8.9zM588.4 515.8H208.6c-4.9 0-8.9-4-8.9-8.9s4-8.9 8.9-8.9h379.7c4.9 0 8.9 4 8.9 8.9 0.1 4.9-3.9 8.9-8.8 8.9z\" fill=\"#282828\" p-id=\"1992\"></path><path d=\"M673.3 113.3c0 19.6-15.9 35.5-35.5 35.5h-346c-19.6 0-35.5-15.9-35.5-35.5v-6.7c0-19.6 15.9-35.5 35.5-35.5h346c19.6 0 35.5 15.9 35.5 35.5v6.7z\" fill=\"#1A6DFF\" p-id=\"1993\"></path><path d=\"M637.8 157.6h-346c-24.5 0-44.4-19.9-44.4-44.4v-6.7c0-24.5 19.9-44.4 44.4-44.4h346c24.5 0 44.4 19.9 44.4 44.4v6.7c0 24.5-19.9 44.4-44.4 44.4zM291.9 80c-14.7 0-26.6 11.9-26.6 26.6v6.7c0 14.7 11.9 26.6 26.6 26.6h346c14.7 0 26.6-11.9 26.6-26.6v-6.7c0-14.7-11.9-26.6-26.6-26.6h-346z\" fill=\"#282828\" p-id=\"1994\"></path><path d=\"M849.7 758.4c0 106.3-86.2 192.4-192.4 192.4-106.3 0-192.4-86.2-192.4-192.4C464.8 652.1 551 566 657.3 566c106.2 0 192.4 86.1 192.4 192.4z\" fill=\"#FFFFFF\" p-id=\"1995\"></path><path d=\"M657.3 959.7c-111 0-201.3-90.3-201.3-201.3s90.3-201.3 201.3-201.3 201.3 90.3 201.3 201.3-90.3 201.3-201.3 201.3z m0-384.8c-101.2 0-183.5 82.3-183.5 183.5S556.1 942 657.3 942s183.6-82.3 183.6-183.6c-0.1-101.2-82.4-183.5-183.6-183.5z\" fill=\"#282828\" p-id=\"1996\"></path><path d=\"M657.3 553.6v204.9h203.6c-0.2-112.7-91.2-204-203.6-204.9z\" fill=\"#1A6DFF\" p-id=\"1997\"></path><path d=\"M860.9 767.3H657.3c-4.9 0-8.9-4-8.9-8.9V553.6c0-2.4 0.9-4.6 2.6-6.3 1.7-1.7 3.6-2.4 6.3-2.6 116.9 0.9 212.2 96.8 212.4 213.7 0 2.4-0.9 4.6-2.6 6.3-1.6 1.7-3.9 2.6-6.2 2.6z m-194.8-17.8h185.6C847 649.3 766.2 568 666.1 562.7v186.8z\" fill=\"#282828\" p-id=\"1998\"></path><path d=\"M794.1 903.7c-2.3 0-4.6-0.9-6.3-2.6L652.1 764.7c-3.5-3.5-3.4-9.1 0-12.6 3.5-3.5 9.1-3.4 12.6 0l135.7 136.5c3.5 3.5 3.4 9.1 0 12.6-1.8 1.7-4 2.5-6.3 2.5z\" fill=\"#282828\" p-id=\"1999\"></path></svg>\n                    <p style={{marginTop:\"20px\"}}>{window.W_L.task_processing}</p>\n                </div>\n              } \n            \n            </div>\n        </div>\n    </div>\n        </Skeleton>\n    </div>\n  );\n}\n\nfunction registerAutopilotViewRoute() {\n  routes.register(\n    \"Dialogue.List.autopilot_view\",\n    routeWithUserSession({\n      path: \"/autopilot/:autopilotId\",\n      render: (pageProps) => <AutopilotView {...pageProps} />,\n    })\n  );\n}\n\nregisterAutopilotViewRoute();\n","import React, { useEffect, useState,useRef } from \"react\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport routes from \"@/services/routes\";\nimport Table from \"antd/lib/table\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\nimport Link from \"@/components/Link\";\nimport EmptyState from \"@/components/items-list/components/EmptyState\";\nimport Layout from \"@/components/layouts/ContentWithSidebar\";\nimport Tag from \"antd/lib/tag\";\nimport Modal from \"antd/lib/modal\";\nimport { axios } from \"@/services/axios\";\nimport PageHeader from \"@/components/PageHeader\";\nimport DeleteOutlinedIcon from \"@ant-design/icons/DeleteOutlined\";\nimport StepModal from \"./components/StepModal/StepModal\";\nimport toast from 'react-hot-toast';\nimport \"./index.less\";\n\nfunction DashboardsPrettify() {\n    const stepModalRef = useRef();\n    const [DashboardsPrettifyList, setDashboardsPrettifyList] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const listColumns = [\n        {\n            title: window.W_L.name,\n            dataIndex: \"report_name\",\n            width: null,\n            align: \"center\",\n            render: (text, item) => (\n                <React.Fragment>\n                    <span className=\"table-main-title\" style={{color:\"#2196f3\",cursor: \"pointer\"}} onClick={() => handleClickHtml(item)}>{item.report_name}</span>\n                </React.Fragment>\n            )\n        },\n        {\n            title: window.W_L.create_time,\n            dataIndex: \"created_at\",\n            align: \"center\",\n        },\n        {\n            title: window.W_L.task_status,\n            dataIndex: \"is_generate\",\n            align: \"center\",\n            render: (text, item) => (\n                <React.Fragment>\n                    {item.is_generate === 0 && <Tag color=\"gold\">{window.W_L.waiting}</Tag>}\n                    {item.is_generate === 1 && <Tag color=\"blue\">{window.W_L.generating}</Tag>}\n                    {item.is_generate === 2 && <Tag color=\"green\">{window.W_L.success}</Tag>}\n                    {item.is_generate === -1 && <Tag color=\"red\">{window.W_L.fail}</Tag>}\n                </React.Fragment>\n            )\n        },\n        {\n            title: \"\",\n            dataIndex: \"actions\",\n            width: 50,\n            align: \"center\",\n            render: (text, item) => (\n                <React.Fragment>\n                    <DeleteOutlinedIcon style={{ color: \"#f08282\", fontSize: \"15px\" }} onClick={() => handleDelete(item.id)} />\n                </React.Fragment>\n            )\n        }\n    ];\n\n    // open html\n    const handleClickHtml = async (item) => {\n        if(item.is_generate === 2 && item.html_name){\n            const html_name = item.html_name.split(\".\")[0];\n            const url = window.location.protocol + \"//\" + window.location.host + \"/pretty_dashboard/\" + html_name;\n            window.open(url);\n        }else{\n            switch (item.is_generate) {\n                case 0:\n                    toast.error(window.W_L.waiting);\n                    break;\n                case 1:\n                    toast.error(window.W_L.generating);\n                    break;\n                case -1:\n                    toast.error(window.W_L.fail);\n                    break;\n                default:\n                    break;\n            }\n        }\n        // const res = await axios.get(`/api/dashboard/${id}`);\n        // if (res.code === 200) {\n        //     window.open(res.data);\n        // }\n    };\n\n    const handleDelete = async (id) => {\n        Modal.confirm({\n            title: window.W_L.confirm_delete,\n            content: window.W_L.confirm_delete_tip,\n            onOk: async () => {\n                try {\n                    const res = await axios.delete(`/api/pretty_dashboard/delete/${id}`);\n                    if (res.code === 200) {\n                        toast.success(window.W_L.delete_success);\n                        getDashboardsPrettifyList();\n                    } else {\n                        toast.error(window.W_L.delete_fail);\n                    }\n                } catch (error) {\n                    // Handle any errors\n                }\n            },\n            onCancel() {\n                // Handle cancel action\n            },\n        });\n    };\n    const getDashboardsPrettifyList = async () => {\n        setIsLoading(true);\n        const res = await axios.get(\"/api/pretty_dashboard\");\n        if (res.code === 200) {\n            res.data.sort(function(a,b){\n                return Date.parse(b.created_at) - Date.parse(a.created_at);\n            });\n            setDashboardsPrettifyList(res.data);\n        }\n        setIsLoading(false);\n    };\n    const handleClick = () => {\n        stepModalRef.current.openModal();\n    };\n    useEffect(() => {\n        getDashboardsPrettifyList();\n    }, []);\n    const pre_btn = () => {\n        return (\n            <button className=\"dashbord_button\" onClick={handleClick}> <span class=\"text\">\n                \n\n                <strong>大屏美化</strong>\n            <svg t=\"1703404031302\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"6245\" width=\"20\" height=\"20\"><path d=\"M954.368 999.296a69.376 69.376 0 0 1-47.04-18.304l-556.8-510.464a69.632 69.632 0 0 1-4.288-98.368 69.632 69.632 0 0 1 98.368-4.224l556.8 510.464a69.632 69.632 0 0 1-47.04 120.896z\" fill=\"#333333\" p-id=\"6246\"></path><path d=\"M571.52 648.384a69.376 69.376 0 0 1-47.04-18.304L350.528 470.528a69.632 69.632 0 0 1-4.288-98.368 69.632 69.632 0 0 1 98.368-4.224l174.016 159.488a69.632 69.632 0 0 1-47.04 120.896z\" fill=\"#FFCC00\" p-id=\"6247\"></path><path d=\"M1000.832 163.968h-185.6a23.232 23.232 0 0 1-23.232-23.168 23.232 23.232 0 0 1 23.232-23.232h185.6a23.232 23.232 0 0 1 23.232 23.232 23.232 23.232 0 0 1-23.232 23.168z\" fill=\"#333333\" p-id=\"6248\"></path><path d=\"M722.368 256.768h-185.6a23.232 23.232 0 0 1-23.232-23.168 23.232 23.232 0 0 1 23.232-23.232h185.6a23.232 23.232 0 0 1 23.232 23.232 23.232 23.232 0 0 1-23.232 23.168z\" fill=\"#333333\" p-id=\"6249\"></path><path d=\"M351.168 163.968h-185.6a23.232 23.232 0 0 1-23.232-23.168 23.232 23.232 0 0 1 23.232-23.232h185.6a23.232 23.232 0 0 1 23.232 23.232 23.232 23.232 0 0 1-23.232 23.168z\" fill=\"#333333\" p-id=\"6250\"></path><path d=\"M211.904 522.176h-185.6a23.232 23.232 0 0 1-23.232-23.168 23.232 23.232 0 0 1 23.232-23.232h185.6a23.232 23.232 0 0 1 23.232 23.232 23.232 23.232 0 0 1-23.232 23.168z\" fill=\"#333333\" p-id=\"6251\"></path><path d=\"M884.736 233.6V48a23.232 23.232 0 0 1 46.4 0v185.6a23.232 23.232 0 0 1-46.4 0z\" fill=\"#333333\" p-id=\"6252\"></path><path d=\"M606.336 326.4V140.8a23.232 23.232 0 0 1 46.4 0v185.6a23.232 23.232 0 0 1-46.4 0z\" fill=\"#333333\" p-id=\"6253\"></path><path d=\"M235.136 233.6V48a23.232 23.232 0 0 1 46.4 0v185.6a23.232 23.232 0 0 1-46.4 0z\" fill=\"#333333\" p-id=\"6254\"></path><path d=\"M95.936 591.808v-185.6a23.232 23.232 0 0 1 46.4 0v185.6a23.232 23.232 0 0 1-46.4 0z\" fill=\"#333333\" p-id=\"6255\"></path></svg>    \n            \n            </span>\n            <span class=\"blob\"></span>\n            <span class=\"blob\"></span>\n            <span class=\"blob\"></span>\n            <span class=\"blob\"></span>\n          </button>\n        )\n    }\n        return (\n            <div className=\"page-queries-list\">\n                <StepModal ref={stepModalRef}></StepModal>\n                <div className=\"container\">\n                    <PageHeader\n                        title={window.W_L.dashboards_prettify_all}\n                    />\n                    <Layout>\n                        <Layout.Content>\n                            <React.Fragment>\n                                <div className=\"bg-white tiled table-responsive\">\n                                    <Table\n                                        className=\"table-data\"\n                                        rowKey=\"id\"\n                                        size=\"middle\"\n                                        columns={listColumns}\n                                        dataSource={DashboardsPrettifyList}\n                                        pagination={false}\n                                        loading={isLoading}\n                                        locale={{\n                                            emptyText: (\n                                                <EmptyState className=\"\" />\n                                            ),\n                                        }}\n                                    />\n                                </div>\n                            </React.Fragment>\n                        </Layout.Content>\n                    </Layout>\n                </div>\n            </div>\n        );\n    }\n\n    function registerDashboardsPrettifyRoute() {\n        routes.register(\n            \"Dialogue.List.dashboards_prettify\",\n            routeWithUserSession({\n                path: \"/dashboards_prettify\",\n                title: \"dashboards_prettify\",\n                render: (pageProps) => <DashboardsPrettify {...pageProps} />,\n            })\n        );\n    }\n\n    registerDashboardsPrettifyRoute();\n","import { map, includes, difference } from \"lodash\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport Badge from \"antd/lib/badge\";\nimport Menu from \"antd/lib/menu\";\nimport CloseOutlinedIcon from \"@ant-design/icons/CloseOutlined\";\nimport getTags from \"@/services/getTags\";\nimport PlainButton from \"@/components/PlainButton\";\n\nimport \"./TagsList.less\";\n\ntype Tag = {\n  name: string;\n  count?: number;\n};\n\ntype TagsListProps = {\n  tagsUrl: string;\n  showUnselectAll: boolean;\n  onUpdate?: (selectedTags: string[]) => void;\n};\n\nfunction TagsList({ tagsUrl, showUnselectAll = false, onUpdate }: TagsListProps): JSX.Element | null {\n  const [allTags, setAllTags] = useState<Tag[]>([]);\n  const [selectedTags, setSelectedTags] = useState<string[]>([]);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    getTags(tagsUrl).then(tags => {\n      if (!isCancelled) {\n        setAllTags(tags);\n      }\n    });\n\n    return () => {\n      isCancelled = true;\n    };\n  }, [tagsUrl]);\n\n  const toggleTag = useCallback(\n    (event, tag) => {\n      let newSelectedTags;\n      if (event.shiftKey) {\n        // toggle tag\n        if (includes(selectedTags, tag)) {\n          newSelectedTags = difference(selectedTags, [tag]);\n        } else {\n          newSelectedTags = [...selectedTags, tag];\n        }\n      } else {\n        // if the tag is the only selected, deselect it, otherwise select only it\n        if (includes(selectedTags, tag) && selectedTags.length === 1) {\n          newSelectedTags = [];\n        } else {\n          newSelectedTags = [tag];\n        }\n      }\n\n      setSelectedTags(newSelectedTags);\n      if (onUpdate) {\n        onUpdate([...newSelectedTags]);\n      }\n    },\n    [selectedTags, onUpdate]\n  );\n\n  const unselectAll = useCallback(() => {\n    setSelectedTags([]);\n    if (onUpdate) {\n      onUpdate([]);\n    }\n  }, [onUpdate]);\n\n  if (allTags.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"tags-list\">\n      <div className=\"tags-list-title\">\n        <span className=\"tags-list-label\">{window.W_L.tag}</span>\n        {showUnselectAll && selectedTags.length > 0 && (\n          <PlainButton type=\"link\" onClick={unselectAll}>\n            <CloseOutlinedIcon />\n            clear selection\n          </PlainButton>\n        )}\n      </div>\n\n      <div className=\"tiled\">\n        <Menu className=\"invert-stripe-position\" mode=\"inline\" selectedKeys={selectedTags}>\n          {map(allTags, tag => (\n            <Menu.Item key={tag.name} className=\"m-0\">\n              <PlainButton\n                className=\"d-flex align-items-center justify-content-between\"\n                onClick={event => toggleTag(event, tag.name)}>\n                <span className=\"max-character col-xs-11\">{tag.name}</span>\n                <Badge count={tag.count} />\n              </PlainButton>\n            </Menu.Item>\n          ))}\n        </Menu>\n      </div>\n    </div>\n  );\n}\n\nexport default TagsList;\n","import { isFunction, isString, filter, map } from \"lodash\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Input from \"antd/lib/input\";\nimport AntdMenu from \"antd/lib/menu\";\nimport Link from \"@/components/Link\";\nimport TagsList from \"@/components/TagsList\";\n\n/*\n    SearchInput\n */\n\nexport function SearchInput({ placeholder, value, showIcon, onChange, label }) {\n  const [currentValue, setCurrentValue] = useState(value);\n\n  useEffect(() => {\n    setCurrentValue(value);\n  }, [value]);\n\n  const onInputChange = useCallback(\n    event => {\n      const newValue = event.target.value;\n      setCurrentValue(newValue);\n      onChange(newValue);\n    },\n    [onChange]\n  );\n\n  const InputControl = showIcon ? Input.Search : Input;\n  return (\n    <div className=\"m-b-10\">\n      <InputControl\n        className=\"form-control\"\n        placeholder={placeholder}\n        value={currentValue}\n        aria-label={label}\n        onChange={onInputChange}\n      />\n    </div>\n  );\n}\n\nSearchInput.propTypes = {\n  value: PropTypes.string.isRequired,\n  placeholder: PropTypes.string,\n  showIcon: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n  label: PropTypes.string,\n};\n\nSearchInput.defaultProps = {\n  placeholder: window.W_L.search,\n  showIcon: false,\n  label: \"Search\",\n};\n\n/*\n    Menu\n */\n\nexport function Menu({ items, selected }) {\n  items = filter(items, item => (isFunction(item.isAvailable) ? item.isAvailable() : true));\n  if (items.length === 0) {\n    return null;\n  }\n  return (\n    <div className=\"m-b-10 tags-list tiled\">\n      <AntdMenu className=\"invert-stripe-position\" mode=\"inline\" selectable={false} selectedKeys={[selected]}>\n        {map(items, item => (\n          <AntdMenu.Item key={item.key} className=\"m-0\">\n            <Link href={item.href}>\n              {isString(item.icon) && item.icon !== \"\" && (\n                <span className=\"btn-favorite m-r-5\">\n                  <i className={item.icon} aria-hidden=\"true\" />\n                </span>\n              )}\n              {isFunction(item.icon) && (item.icon(item) || null)}\n              {item.title}\n            </Link>\n          </AntdMenu.Item>\n        ))}\n      </AntdMenu>\n    </div>\n  );\n}\n\nMenu.propTypes = {\n  items: PropTypes.arrayOf(\n    PropTypes.shape({\n      key: PropTypes.string.isRequired,\n      href: PropTypes.string.isRequired,\n      title: PropTypes.string.isRequired,\n      icon: PropTypes.func, // function to render icon\n      isAvailable: PropTypes.func, // return `true` to show item and `false` to hide; if omitted: show item\n    })\n  ),\n  selected: PropTypes.string,\n};\n\nMenu.defaultProps = {\n  items: [],\n  selected: null,\n};\n\n/*\n    MenuIcon\n */\n\nexport function MenuIcon({ icon }) {\n  return (\n    <span className=\"btn-favorite m-r-5\">\n      <i className={icon} aria-hidden=\"true\" />\n    </span>\n  );\n}\n\nMenuIcon.propTypes = {\n  icon: PropTypes.string.isRequired,\n};\n\n/*\n    ProfileImage\n */\n\nexport function ProfileImage({ user }) {\n  if (!isString(user.profile_image_url) || user.profile_image_url === \"\") {\n    return null;\n  }\n  return <img src={user.profile_image_url} className=\"profile__image--sidebar m-r-5\" width=\"13\" alt={user.name} />;\n}\n\nProfileImage.propTypes = {\n  user: PropTypes.shape({\n    profile_image_url: PropTypes.string,\n    name: PropTypes.string,\n  }).isRequired,\n};\n\n/*\n    Tags\n */\n\nexport function Tags({ url, onChange, showUnselectAll }) {\n  if (url === \"\") {\n    return null;\n  }\n  return (\n    <div className=\"m-b-10\">\n      <TagsList tagsUrl={url} onUpdate={onChange} showUnselectAll={showUnselectAll} />\n    </div>\n  );\n}\n\nTags.propTypes = {\n  url: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  showUnselectAll: PropTypes.bool,\n  unselectAllButtonTitle: PropTypes.string,\n};\n","import { filter, includes, intersection } from \"lodash\";\nimport React, { useState, useMemo, useEffect, useCallback } from \"react\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport { Columns } from \"../components/ItemsTable\";\n\nexport default function useItemsListExtraActions(controller, listColumns, ExtraActionsComponent) {\n  const [actionsState, setActionsState] = useState({ isAvailable: false });\n  const [selectedItems, setSelectedItems] = useState([]);\n\n  // clear selection when page changes\n  useEffect(() => {\n    setSelectedItems([]);\n  }, [controller.pageItems, actionsState.isAvailable]);\n\n  const areAllItemsSelected = useMemo(() => {\n    const allItems = controller.pageItems;\n    if (allItems.length === 0 || selectedItems.length === 0) {\n      return false;\n    }\n    return intersection(selectedItems, allItems).length === allItems.length;\n  }, [selectedItems, controller.pageItems]);\n\n  const toggleAllItems = useCallback(() => {\n    if (areAllItemsSelected) {\n      setSelectedItems([]);\n    } else {\n      setSelectedItems(controller.pageItems);\n    }\n  }, [areAllItemsSelected, controller.pageItems]);\n\n  const toggleItem = useCallback(\n    item => {\n      if (includes(selectedItems, item)) {\n        setSelectedItems(filter(selectedItems, s => s !== item));\n      } else {\n        setSelectedItems([...selectedItems, item]);\n      }\n    },\n    [selectedItems]\n  );\n\n  const checkboxColumn = useMemo(\n    () =>\n      Columns.custom(\n        (text, item) => <Checkbox checked={includes(selectedItems, item)} onChange={() => toggleItem(item)} />,\n        {\n          title: () => <Checkbox checked={areAllItemsSelected} onChange={toggleAllItems} />,\n          field: \"id\",\n          width: \"1%\",\n        }\n      ),\n    [selectedItems, areAllItemsSelected, toggleAllItems, toggleItem]\n  );\n\n  const Component = useCallback(\n    function ItemsListExtraActionsComponentWrapper(props) {\n      // this check mostly needed to avoid eslint exhaustive deps warning\n      if (!ExtraActionsComponent) {\n        return null;\n      }\n\n      return <ExtraActionsComponent onStateChange={setActionsState} {...props} />;\n    },\n    [ExtraActionsComponent]\n  );\n\n  return useMemo(\n    () => ({\n      areExtraActionsAvailable: actionsState.isAvailable,\n      listColumns: actionsState.isAvailable ? [checkboxColumn, ...listColumns] : listColumns,\n      Component,\n      selectedItems,\n      setSelectedItems,\n    }),\n    [actionsState, listColumns, checkboxColumn, selectedItems, Component]\n  );\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport BigMessage from \"@/components/BigMessage\";\nimport { TagsControl } from \"@/components/tags-control/TagsControl\";\n\nexport default function NoTaggedObjectsFound({ objectType, tags }) {\n  return (\n    <BigMessage icon=\"fa-tags\">\n      No {objectType} found tagged with&nbsp;\n      <TagsControl className=\"inline-tags-control\" tags={Array.from(tags)} tagSeparator={\"+\"} />.\n    </BigMessage>\n  );\n}\n\nNoTaggedObjectsFound.propTypes = {\n  objectType: PropTypes.string.isRequired,\n  tags: PropTypes.oneOfType([PropTypes.array, PropTypes.objectOf(Set)]).isRequired,\n};\n","import * as React from \"react\";\nimport * as PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport BigMessage from \"@/components/BigMessage\";\nimport NoTaggedObjectsFound from \"@/components/NoTaggedObjectsFound\";\nimport EmptyState, { EmptyStateHelpMessage } from \"@/components/empty-state/EmptyState\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport CreateDashboardDialog from \"@/components/dashboards/CreateDashboardDialog\";\nimport { currentUser } from \"@/services/auth\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\n\nexport interface DashboardListEmptyStateProps {\n  page: string;\n  searchTerm: string;\n  selectedTags: string[];\n}\n\nexport default function DashboardListEmptyState({ page, searchTerm, selectedTags }: DashboardListEmptyStateProps) {\n  if (searchTerm !== \"\") {\n    return <BigMessage message={window.W_L.find_nothing} icon=\"fa-search\" />;\n  }\n  if (selectedTags.length > 0) {\n    return <NoTaggedObjectsFound objectType=\"dashboards\" tags={selectedTags} />;\n  }\n  switch (page) {\n    case \"favorites\":\n      return <BigMessage message={window.W_L.show_my_favorite_dashboard} icon=\"fa-star\" />;\n    case \"my\":\n      const my_msg = currentUser.hasPermission(\"create_dashboard\") ? (\n        <span>\n          <Button type=\"primary\" size=\"small\" onClick={() => CreateDashboardDialog.showModal()}>\n            {window.W_L.create_first_dashboard}\n          </Button>{\" \"}\n          <HelpTrigger className=\"f-14\" type=\"DASHBOARDS\" showTooltip={false}>\n            {window.W_L.need_help}?\n          </HelpTrigger>\n        </span>\n      ) : (\n        <span>{window.W_L.no_data}</span>\n      );\n      return <BigMessage icon=\"fa-search\">{my_msg}</BigMessage>;\n    default:\n      return (\n        <DynamicComponent name=\"DashboardList.EmptyState\">\n          <EmptyState\n            icon=\"zmdi zmdi-view-quilt\"\n            description={window.W_L.see_big_picture}\n            illustration=\"dashboard\"\n            helpMessage={<EmptyStateHelpMessage helpTriggerType=\"DASHBOARDS\" />}\n            showDashboardStep\n          />\n        </DynamicComponent>\n      );\n  }\n}\n\nDashboardListEmptyState.propTypes = {\n  page: PropTypes.string.isRequired,\n  searchTerm: PropTypes.string.isRequired,\n  selectedTags: PropTypes.array.isRequired,\n};\n","import React from \"react\";\nimport cx from \"classnames\";\n\nimport Button from \"antd/lib/button\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport Link from \"@/components/Link\";\nimport PageHeader from \"@/components/PageHeader\";\nimport Paginator from \"@/components/Paginator\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { DashboardTagsControl } from \"@/components/tags-control/TagsControl\";\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { UrlStateStorage } from \"@/components/items-list/classes/StateStorage\";\nimport * as Sidebar from \"@/components/items-list/components/Sidebar\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\nimport useItemsListExtraActions from \"@/components/items-list/hooks/useItemsListExtraActions\";\nimport CreateDashboardDialog from \"@/components/dashboards/CreateDashboardDialog\";\nimport Layout from \"@/components/layouts/ContentWithSidebar\";\n\nimport { Dashboard } from \"@/services/dashboard\";\nimport { currentUser } from \"@/services/auth\";\nimport routes from \"@/services/routes\";\n\nimport DashboardListEmptyState from \"./components/DashboardListEmptyState\";\n\nimport \"./dashboard-list.css\";\n\nconst sidebarMenu = [\n  {\n    key: \"all\",\n    href: \"dashboards\",\n    title: window.W_L.all_dashboard,\n    icon: () => <Sidebar.MenuIcon icon=\"zmdi zmdi-view-quilt\" />,\n  },\n  {\n    key: \"my\",\n    href: \"dashboards/my\",\n    title: window.W_L.my_dashboard,\n    icon: () => <Sidebar.ProfileImage user={currentUser} />,\n  },\n  {\n    key: \"favorites\",\n    href: \"dashboards/favorites\",\n    title: window.W_L.my_favorite_dashboard,\n    icon: () => <Sidebar.MenuIcon icon=\"fa fa-star\" />,\n  },\n];\n\n\nconst listColumns = [\n  Columns.favorites({ className: \"p-r-0\" }),\n  Columns.custom.sortable(\n    (text, item) => (\n      <React.Fragment>\n        <Link className=\"table-main-title\" href={item.url} data-test={`DashboardId${item.id}`}>\n          {item.name}\n        </Link>\n        <DashboardTagsControl\n          className=\"d-block\"\n          tags={item.tags}\n          isDraft={item.is_draft}\n          isArchived={item.is_archived}\n        />\n      </React.Fragment>\n    ),\n    {\n      title: window.W_L.name,\n      field: \"name\",\n      width: null,\n    }\n  ),\n  Columns.custom((text, item) => item.user.name, { title: window.W_L.create_user, width: \"1%\" }),\n  Columns.dateTime.sortable({\n    title: window.W_L.create_time,\n    field: \"created_at\",\n    width: \"1%\",\n  }),\n];\n\nfunction DashboardListExtraActions(props) {\n  return <DynamicComponent name=\"DashboardList.Actions\" {...props} />;\n}\n\n\nexport function DashboardList({ controller }) {\n  const {\n    areExtraActionsAvailable,\n    listColumns: tableColumns,\n    Component: ExtraActionsComponent,\n    selectedItems,\n  } = useItemsListExtraActions(controller, listColumns, DashboardListExtraActions);\n  const newItemsPerPage = controller.pageItems && controller.pageItems.length > 0\n  ? controller.pageItems.filter(item => item.name !== window.W_L.temporary_dashboard)\n  : [];\n  return (\n    <div className=\"page-dashboard-list\">\n      <div className=\"container\">\n        <PageHeader\n          title={controller.params.pageTitle}\n          actions={\n            currentUser.hasPermission(\"create_dashboard\") ? (\n              <Button block type=\"primary\" onClick={() => CreateDashboardDialog.showModal()}>\n                <i className=\"fa fa-plus m-r-5\" aria-hidden=\"true\" />\n                {window.W_L.create}\n              </Button>\n            ) : null\n          }\n        />\n        <Layout>\n          <Layout.Sidebar className=\"m-b-0\">\n            <Sidebar.SearchInput\n              placeholder={window.W_L.search_dashboard}\n              label={window.W_L.search_dashboard}\n              value={controller.searchTerm}\n              onChange={controller.updateSearch}\n            />\n            <Sidebar.Menu items={sidebarMenu} selected={controller.params.currentPage} />\n            <Sidebar.Tags url=\"api/dashboards/tags\" onChange={controller.updateSelectedTags} showUnselectAll />\n          </Layout.Sidebar>\n          <Layout.Content>\n            <div data-test=\"DashboardLayoutContent\">\n              {controller.isLoaded && controller.isEmpty ? (\n                <DashboardListEmptyState\n                  page={controller.params.currentPage}\n                  searchTerm={controller.searchTerm}\n                  selectedTags={controller.selectedTags}\n                />\n              ) : (\n                <React.Fragment>\n                  <div className={cx({ \"m-b-10\": areExtraActionsAvailable })}>\n                    <ExtraActionsComponent selectedItems={selectedItems} />\n                  </div>\n                  <div className=\"bg-white tiled table-responsive\">\n                    <ItemsTable\n                      items={newItemsPerPage}\n                      loading={!controller.isLoaded}\n                      columns={tableColumns}\n                      orderByField={controller.orderByField}\n                      orderByReverse={controller.orderByReverse}\n                      toggleSorting={controller.toggleSorting}\n                    />\n                    <Paginator\n                      showPageSizeSelect\n                      totalCount={controller.totalItemsCount}\n                      pageSize={controller.itemsPerPage}\n                      onPageSizeChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n                      page={controller.page}\n                      onChange={page => controller.updatePagination({ page })}\n                    />\n                  </div>\n                </React.Fragment>\n              )}\n            </div>\n          </Layout.Content>\n        </Layout>\n      </div>\n    </div>\n  );\n}\n\nDashboardList.propTypes = {\n  controller: ControllerType.isRequired,\n};\n\nconst DashboardListPage = itemsList(\n  DashboardList,\n  () =>\n    new ResourceItemsSource({\n      getResource({ params: { currentPage } }) {\n        return {\n          all: Dashboard.query.bind(Dashboard),\n          my: Dashboard.myDashboards.bind(Dashboard),\n          favorites: Dashboard.favorites.bind(Dashboard),\n        }[currentPage];\n      },\n      getItemProcessor() {\n        return item => new Dashboard(item);\n      },\n    }),\n  () => new UrlStateStorage({ orderByField: \"created_at\", orderByReverse: true })\n);\n\nroutes.register(\n  \"Dashboards.List\",\n  routeWithUserSession({\n    path: \"/dashboards\",\n    title: window.W_L.dashboards,\n    render: pageProps => <DashboardListPage {...pageProps} currentPage=\"all\" />,\n  })\n);\nroutes.register(\n  \"Dashboards.Favorites\",\n  routeWithUserSession({\n    path: \"/dashboards/favorites\",\n    title: window.W_L.my_favorite_dashboard,\n    render: pageProps => <DashboardListPage {...pageProps} currentPage=\"favorites\" />,\n  })\n);\nroutes.register(\n  \"Dashboards.My\",\n  routeWithUserSession({\n    path: \"/dashboards/my\",\n    title: window.W_L.my_dashboard,\n    render: pageProps => <DashboardListPage {...pageProps} currentPage=\"my\" />,\n  })\n);\n","import React, { useEffect, useState, useContext } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { ErrorBoundaryContext } from \"@/components/chart/components/ErrorBoundary\";\nimport { Auth, clientConfig } from \"@/services/auth\";\n\n// This wrapper modifies `route.render` function and instead of passing `currentRoute` passes an object\n// that contains:\n// - `currentRoute.routeParams`\n// - `pageTitle` field which is equal to `currentRoute.title`\n// - `onError` field which is a `handleError` method of nearest error boundary\n// - `apiKey` field\n\nfunction ApiKeySessionWrapper({ apiKey, currentRoute, renderChildren }) {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const { handleError } = useContext(ErrorBoundaryContext);\n\n  useEffect(() => {\n    let isCancelled = false;\n    Auth.setApiKey(apiKey);\n    Auth.loadConfig()\n      .then(() => {\n        if (!isCancelled) {\n          setIsAuthenticated(true);\n        }\n      })\n      .catch(() => {\n        if (!isCancelled) {\n          setIsAuthenticated(false);\n        }\n      });\n    return () => {\n      isCancelled = true;\n    };\n  }, [apiKey]);\n\n  if (!isAuthenticated || clientConfig.disablePublicUrls) {\n    return null;\n  }\n\n  return (\n    <React.Fragment key={currentRoute.key}>\n      {renderChildren({ ...currentRoute.routeParams, pageTitle: currentRoute.title, onError: handleError, apiKey })}\n    </React.Fragment>\n  );\n}\n\nApiKeySessionWrapper.propTypes = {\n  apiKey: PropTypes.string.isRequired,\n  renderChildren: PropTypes.func,\n};\n\nApiKeySessionWrapper.defaultProps = {\n  renderChildren: () => null,\n};\n\nexport default function routeWithApiKeySession({ render, getApiKey, ...rest }) {\n  return {\n    ...rest,\n    render: currentRoute => (\n      <ApiKeySessionWrapper apiKey={getApiKey(currentRoute)} currentRoute={currentRoute} renderChildren={render} />\n    ),\n  };\n}\n","import { isEmpty } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport routeWithApiKeySession from \"@/components/ApplicationArea/routeWithApiKeySession\";\nimport BigMessage from \"@/components/BigMessage\";\nimport PageHeader from \"@/components/PageHeader\";\nimport Parameters from \"@/components/Parameters\";\nimport DashboardGrid from \"@/components/dashboards/DashboardGrid\";\nimport Filters from \"@/components/Filters\";\n\nimport { Dashboard } from \"@/services/dashboard\";\nimport routes from \"@/services/routes\";\n\n\nimport useDashboard from \"./hooks/useDashboard\";\n\nimport \"./PublicDashboardPage.less\";\n\nfunction PublicDashboard({ dashboard }) {\n  const { globalParameters, filters, setFilters, refreshDashboard, loadWidget, refreshWidget } = useDashboard(\n    dashboard\n  );\n\n  return (\n    <div className=\"container p-t-10 p-b-20\">\n      <PageHeader title={dashboard.name} />\n      {!isEmpty(globalParameters) && (\n        <div className=\"m-b-10 p-15 bg-white tiled\">\n          <Parameters parameters={globalParameters} onValuesChange={refreshDashboard} />\n        </div>\n      )}\n      {!isEmpty(filters) && (\n        <div className=\"m-b-10 p-15 bg-white tiled\">\n          <Filters filters={filters} onChange={setFilters} />\n        </div>\n      )}\n      <div id=\"dashboard-container\">\n        <DashboardGrid\n          dashboard={dashboard}\n          widgets={dashboard.widgets}\n          filters={filters}\n          isEditing={false}\n          isPublic\n          onLoadWidget={loadWidget}\n          onRefreshWidget={refreshWidget}\n        />\n      </div>\n    </div>\n  );\n}\n\nPublicDashboard.propTypes = {\n  dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nclass PublicDashboardPage extends React.Component {\n  static propTypes = {\n    token: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onError: () => {},\n  };\n\n  state = {\n    loading: true,\n    dashboard: null,\n  };\n\n  componentDidMount() {\n    Dashboard.getByToken({ token: this.props.token })\n      .then(dashboard => this.setState({ dashboard, loading: false }))\n      .catch(error => this.props.onError(error));\n  }\n\n  render() {\n    const { loading, dashboard } = this.state;\n    return (\n      <div className=\"public-dashboard-page\">\n        {loading ? (\n          <div className=\"container loading-message\">\n            <BigMessage className=\"\" icon=\"fa-spinner fa-2x fa-pulse\" message=\"Loading...\" />\n          </div>\n        ) : (\n          <PublicDashboard dashboard={dashboard} />\n        )}\n      </div>\n    );\n  }\n}\n\nroutes.register(\n  \"Dashboards.ViewShared\",\n  routeWithApiKeySession({\n    path: \"/public/dashboards/:token\",\n    render: pageProps => <PublicDashboardPage {...pageProps} />,\n    getApiKey: currentRoute => currentRoute.routeParams.token,\n  })\n);\n","import { includes, isEmpty } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport React, { useState } from \"react\";\nimport Input from \"antd/lib/input\";\nimport Link from \"@/components/Link\";\nimport PlainButton from \"@/components/PlainButton\";\nimport EmptyState from \"@/components/items-list/components/EmptyState\";\n\nimport \"./CardsList.less\";\n\nexport interface CardsListItem {\n  title: string;\n  imgSrc: string;\n  href?: string;\n  onClick?: React.MouseEventHandler<HTMLElement>;\n}\n\nexport interface CardsListProps {\n  items?: CardsListItem[];\n  showSearch?: boolean;\n}\n\ninterface ListItemProps {\n  item: CardsListItem;\n  keySuffix: string;\n}\n\nfunction ListItem({ item, keySuffix }: ListItemProps) {\n  const commonProps = {\n    key: `card${keySuffix}`,\n    className: \"visual-card\",\n    onClick: item.onClick,\n    children: (\n      <>\n        <img alt={item.title} src={item.imgSrc} />\n        <h3>{item.title}</h3>\n      </>\n    ),\n  };\n\n  return item.href ? <Link href={item.href} {...commonProps} /> : <PlainButton type=\"link\" {...commonProps} />;\n}\n\nexport default function CardsList({ items = [], showSearch = false }: CardsListProps) {\n  const [searchText, setSearchText] = useState(\"\");\n  const filteredItems = items.filter(\n    item => isEmpty(searchText) || includes(item.title.toLowerCase(), searchText.toLowerCase())\n  );\n\n  return (\n    <div data-test=\"CardsList\">\n      {showSearch && (\n        <div className=\"row p-10\">\n          <div className=\"col-md-4 col-md-offset-4\">\n            <Input.Search\n              placeholder=\"{window.W_L.search}\"\n              aria-label=\"{window.W_L.search}\"\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => setSearchText(e.target.value)}\n              autoFocus\n            />\n          </div>\n        </div>\n      )}\n      {isEmpty(filteredItems) ? (\n        <EmptyState className=\"\" />\n      ) : (\n        <div className=\"row\">\n          <div className=\"col-lg-12 d-inline-flex flex-wrap visual-card-list\">\n            {filteredItems.map((item: CardsListItem, index: number) => (\n              <ListItem key={index} item={item} keySuffix={index.toString()} />\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nCardsList.propTypes = {\n  items: PropTypes.arrayOf(\n    PropTypes.shape({\n      title: PropTypes.string.isRequired,\n      imgSrc: PropTypes.string.isRequired,\n      onClick: PropTypes.func,\n      href: PropTypes.string,\n    })\n  ),\n  showSearch: PropTypes.bool,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport AntCollapse from \"antd/lib/collapse\";\n\nexport default function Collapse({ collapsed, children, className, ...props }) {\n  return (\n    <AntCollapse\n      {...props}\n      activeKey={collapsed ? null : \"content\"}\n      className={cx(className, \"ant-collapse-headerless\")}>\n      <AntCollapse.Panel key=\"content\" header=\"\">\n        {children}\n      </AntCollapse.Panel>\n    </AntCollapse>\n  );\n}\n\nCollapse.propTypes = {\n  collapsed: PropTypes.bool,\n  children: PropTypes.node,\n  className: PropTypes.string,\n};\n\nCollapse.defaultProps = {\n  collapsed: true,\n  children: null,\n  className: \"\",\n};\n","import { toHuman } from \"@/lib/utils\";\n\nexport default function getFieldLabel(field) {\n  const { title, name } = field;\n  return title || toHuman(name);\n}\n","import React, { forwardRef } from \"react\";\nimport AceEditor from \"react-ace\";\n\nimport \"./AceEditorInput.less\";\n\nfunction AceEditorInput(props, ref) {\n  return (\n    <div className=\"ace-editor-input\" data-test={props[\"data-test\"]}>\n      <AceEditor\n        ref={ref}\n        mode=\"sql\"\n        theme=\"textmate\"\n        height=\"100px\"\n        editorProps={{ $blockScrolling: Infinity }}\n        showPrintMargin={false}\n        {...props}\n      />\n    </div>\n  );\n}\n\nexport default forwardRef(AceEditorInput);\n","import React from \"react\";\nimport Input from \"antd/lib/input\";\n\nexport default function InputField({ form, field, ...otherProps }) {\n  return <Input {...otherProps} />;\n}\n","import React from \"react\";\nimport { get } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport getFieldLabel from \"./getFieldLabel\";\n\nimport {\n  AceEditorField,\n  CheckboxField,\n  ContentField,\n  FileField,\n  InputField,\n  NumberField,\n  SelectField,\n  TextAreaField,\n} from \"./fields\";\n\nexport const FieldType = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  title: PropTypes.string,\n  type: PropTypes.oneOf([\n    \"ace\",\n    \"text\",\n    \"textarea\",\n    \"email\",\n    \"password\",\n    \"number\",\n    \"checkbox\",\n    \"file\",\n    \"select\",\n    \"content\",\n  ]).isRequired,\n  initialValue: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n    PropTypes.bool,\n    PropTypes.arrayOf(PropTypes.string),\n    PropTypes.arrayOf(PropTypes.number),\n  ]),\n  content: PropTypes.node,\n  mode: PropTypes.string,\n  required: PropTypes.bool,\n  extra: PropTypes.bool,\n  readOnly: PropTypes.bool,\n  autoFocus: PropTypes.bool,\n  minLength: PropTypes.number,\n  placeholder: PropTypes.string,\n  contentAfter: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  loading: PropTypes.bool,\n  props: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n});\n\nconst FieldTypeComponent = {\n  checkbox: CheckboxField,\n  file: FileField,\n  select: SelectField,\n  number: NumberField,\n  textarea: TextAreaField,\n  ace: AceEditorField,\n  content: ContentField,\n};\n\nexport default function DynamicFormField({ form, field, ...otherProps }) {\n  const { name, type, readOnly, autoFocus } = field;\n  const fieldLabel = getFieldLabel(field);\n\n  const fieldProps = {\n    ...field.props,\n    className: \"w-100\",\n    name,\n    type,\n    readOnly,\n    autoFocus,\n    placeholder: field.placeholder,\n    \"data-test\": fieldLabel,\n    ...otherProps,\n  };\n\n  const FieldComponent = get(FieldTypeComponent, type, InputField);\n  return <FieldComponent {...fieldProps} form={form} field={field} />;\n}\n\nDynamicFormField.propTypes = { field: FieldType.isRequired };\n","import React from \"react\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport getFieldLabel from \"../getFieldLabel\";\n\nexport default function CheckboxField({ form, field, ...otherProps }) {\n  const fieldLabel = getFieldLabel(field);\n  return <Checkbox {...otherProps}>{fieldLabel}</Checkbox>;\n}\n","import React from \"react\";\nimport Button from \"antd/lib/button\";\nimport Upload from \"antd/lib/upload\";\nimport UploadOutlinedIcon from \"@ant-design/icons/UploadOutlined\";\n\nexport default function FileField({ form, field, ...otherProps }) {\n  const { name, initialValue } = field;\n  const { getFieldValue } = form;\n  const disabled = getFieldValue(name) !== undefined && getFieldValue(name) !== initialValue;\n\n  return (\n    <Upload {...otherProps} beforeUpload={() => false}>\n      <Button disabled={disabled}>\n        <UploadOutlinedIcon /> {window.W_L.upload}\n      </Button>\n    </Upload>\n  );\n}\n","import React from \"react\";\nimport Select from \"antd/lib/select\";\n\nexport default function SelectField({ form, field, ...otherProps }) {\n  const { readOnly } = field;\n  return (\n    <Select\n      {...otherProps}\n      optionFilterProp=\"children\"\n      loading={field.loading || false}\n      mode={field.mode}\n      getPopupContainer={trigger => trigger.parentNode}>\n      {field.options &&\n        field.options.map(option => (\n          <Select.Option key={`${option.value}`} value={option.value} disabled={readOnly}>\n            {option.name || option.value}\n          </Select.Option>\n        ))}\n    </Select>\n  );\n}\n","import React from \"react\";\nimport InputNumber from \"antd/lib/input-number\";\n\nexport default function NumberField({ form, field, ...otherProps }) {\n  return <InputNumber {...otherProps} />;\n}\n","import React from \"react\";\nimport Input from \"antd/lib/input\";\n\nexport default function TextAreaField({ form, field, ...otherProps }) {\n  return <Input.TextArea {...otherProps} />;\n}\n","import React from \"react\";\nimport AceEditorInput from \"@/components/AceEditorInput\";\n\nexport default function AceEditorField({ form, field, ...otherProps }) {\n  return <AceEditorInput {...otherProps} />;\n}\n","export default function ContentField({ field }) {\n  return field.content;\n}\n","import React from \"react\";\nimport { each, includes, isUndefined, isEmpty, isNil, map, get, some } from \"lodash\";\n\nfunction orderedInputs(properties, order, targetOptions) {\n  const inputs = new Array(order.length);\n  Object.keys(properties).forEach(key => {\n    const position = order.indexOf(key);\n    const input = {\n      name: key,\n      title: properties[key].title,\n      type: properties[key].type,\n      placeholder: isNil(properties[key].default) ? null : properties[key].default.toString(),\n      required: properties[key].required,\n      extra: properties[key].extra,\n      initialValue: targetOptions[key],\n    };\n\n    if (input.type === \"select\") {\n      input.placeholder = \"Select an option\";\n      input.options = properties[key].options;\n    }\n\n    if (position > -1) {\n      inputs[position] = input;\n    } else {\n      inputs.push(input);\n    }\n  });\n  return inputs;\n}\n\nfunction normalizeSchema(configurationSchema) {\n  each(configurationSchema.properties, (prop, name) => {\n    if (name === \"password\" || name === \"passwd\") {\n      prop.type = \"password\";\n    }\n\n    if (name.endsWith(\"File\")) {\n      prop.type = \"file\";\n    }\n\n    if (prop.type === \"boolean\") {\n      prop.type = \"checkbox\";\n    }\n\n    if (prop.type === \"string\") {\n      prop.type = \"text\";\n    }\n\n    if (!isEmpty(prop.enum)) {\n      prop.type = \"select\";\n      prop.options = map(prop.enum, value => ({ value, name: value }));\n    }\n\n    if (!isEmpty(prop.extendedEnum)) {\n      prop.type = \"select\";\n      prop.options = prop.extendedEnum;\n    }\n\n    prop.required = includes(configurationSchema.required, name);\n    prop.extra = includes(configurationSchema.extra_options, name);\n  });\n\n  configurationSchema.order = configurationSchema.order || [];\n}\n\nfunction setDefaultValueToFields(configurationSchema, options = {}) {\n  const properties = configurationSchema.properties;\n  Object.keys(properties).forEach(key => {\n    const property = properties[key];\n    // set default value for checkboxes\n    if (!isUndefined(property.default) && property.type === \"checkbox\") {\n      options[key] = property.default;\n    }\n    // set default or first value when value has predefined options\n    if (property.type === \"select\") {\n      const optionValues = map(property.options, option => option.value);\n      options[key] = includes(optionValues, property.default) ? property.default : optionValues[0];\n    }\n  });\n}\n\nfunction getFields(type = {}, target = { options: {} }) {\n  const configurationSchema = type.configuration_schema;\n  normalizeSchema(configurationSchema);\n  const hasTargetObject = Object.keys(target.options).length > 0;\n  if (!hasTargetObject) {\n    setDefaultValueToFields(configurationSchema, target.options);\n  }\n\n  const isNewTarget = !target.id;\n  const inputs = [\n    {\n      name: \"name\",\n      title: window.W_L.name,\n      type: \"text\",\n      required: true,\n      initialValue: target.name,\n      contentAfter: React.createElement(\"hr\"),\n      placeholder: `My ${type.name}`,\n      autoFocus: isNewTarget,\n    },\n    ...orderedInputs(configurationSchema.properties, configurationSchema.order, target.options),\n  ];\n\n  return inputs;\n}\n\nfunction updateTargetWithValues(target, values) {\n  target.name = values.name;\n  Object.keys(values).forEach(key => {\n    if (key !== \"name\") {\n      target.options[key] = values[key];\n    }\n  });\n}\n\nfunction getBase64(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result.substr(reader.result.indexOf(\",\") + 1));\n    reader.onerror = error => reject(error);\n  });\n}\n\nfunction hasFilledExtraField(type, target) {\n  const extraOptions = get(type, \"configuration_schema.extra_options\", []);\n  return some(extraOptions, optionName => {\n    const defaultOptionValue = get(type, [\"configuration_schema\", \"properties\", optionName, \"default\"]);\n    const targetOptionValue = get(target, [\"options\", optionName]);\n    return !isNil(targetOptionValue) && targetOptionValue !== defaultOptionValue;\n  });\n}\n\nexport default {\n  getFields,\n  updateTargetWithValues,\n  getBase64,\n  hasFilledExtraField,\n};\n","import React, { useState, useReducer, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport Form from \"antd/lib/form\";\nimport Button from \"antd/lib/button\";\nimport { includes, isFunction, filter, find, difference, isEmpty, mapValues } from \"lodash\";\nimport notification from \"@/services/notification\";\nimport Collapse from \"@/components/Collapse\";\nimport DynamicFormField, { FieldType } from \"./DynamicFormField\";\nimport getFieldLabel from \"./getFieldLabel\";\nimport helper from \"./dynamicFormHelper\";\n\nimport \"./DynamicForm.less\";\n\nconst ActionType = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  callback: PropTypes.func.isRequired,\n  type: PropTypes.string,\n  pullRight: PropTypes.bool,\n  disabledWhenDirty: PropTypes.bool,\n});\n\nconst AntdFormType = PropTypes.shape({\n  validateFieldsAndScroll: PropTypes.func,\n});\n\nconst fieldRules = ({ type, required, minLength }) => {\n  const requiredRule = required;\n  const minLengthRule = minLength && includes([\"text\", \"email\", \"password\"], type);\n  const emailTypeRule = type === \"email\";\n\n  return [\n    requiredRule && { required, message:window.W_L.required },\n    minLengthRule && { min: minLength, message:window.W_L.short },\n    emailTypeRule && { type: \"email\", message: window.W_L.email_error },\n  ].filter(rule => rule);\n};\n\nfunction normalizeEmptyValuesToNull(fields, values) {\n  return mapValues(values, (value, key) => {\n    const { initialValue } = find(fields, { name: key }) || {};\n    if ((initialValue === null || initialValue === undefined || initialValue === \"\") && value === \"\") {\n      return null;\n    }\n    return value;\n  });\n}\n\nfunction DynamicFormFields({ fields, feedbackIcons, form }) {\n  return fields.map(field => {\n    const { name, type, initialValue, contentAfter } = field;\n    const fieldLabel = getFieldLabel(field);\n\n    const formItemProps = {\n      name,\n      className: \"m-b-10\",\n      hasFeedback: type !== \"checkbox\" && type !== \"file\" && feedbackIcons,\n      label: type === \"checkbox\" ? \"\" : fieldLabel,\n      rules: fieldRules(field),\n      valuePropName: type === \"checkbox\" ? \"checked\" : \"value\",\n      initialValue,\n    };\n\n    if (type === \"file\") {\n      formItemProps.valuePropName = \"data-value\";\n      formItemProps.getValueFromEvent = e => {\n        if (e && e.fileList[0]) {\n          helper.getBase64(e.file).then(value => {\n            form.setFieldsValue({ [name]: value });\n          });\n        }\n        return undefined;\n      };\n    }\n\n    return (\n      <React.Fragment key={name}>\n        <Form.Item {...formItemProps}>\n          <DynamicFormField field={field} form={form} />\n        </Form.Item>\n        {isFunction(contentAfter) ? contentAfter(form.getFieldValue(name)) : contentAfter}\n      </React.Fragment>\n    );\n  });\n}\n\nDynamicFormFields.propTypes = {\n  fields: PropTypes.arrayOf(FieldType),\n  feedbackIcons: PropTypes.bool,\n  form: AntdFormType.isRequired,\n};\n\nDynamicFormFields.defaultProps = {\n  fields: [],\n  feedbackIcons: false,\n};\n\nconst reducerForActionSet = (state, action) => {\n  if (action.inProgress) {\n    state.add(action.actionName);\n  } else {\n    state.delete(action.actionName);\n  }\n  return new Set(state);\n};\n\nfunction DynamicFormActions({ actions, isFormDirty }) {\n  const [inProgressActions, setActionInProgress] = useReducer(reducerForActionSet, new Set());\n\n  const handleAction = useCallback(action => {\n    const actionName = action.name;\n    if (isFunction(action.callback)) {\n      setActionInProgress({ actionName, inProgress: true });\n      action.callback(() => {\n        setActionInProgress({ actionName, inProgress: false });\n      });\n    }\n  }, []);\n  return actions.map(action => (\n    <Button\n      key={action.name}\n      htmlType=\"button\"\n      className={cx(\"m-t-10\", { \"pull-right\": action.pullRight })}\n      type={action.type}\n      disabled={isFormDirty && action.disableWhenDirty}\n      loading={inProgressActions.has(action.name)}\n      onClick={() => handleAction(action)}>\n      {action.name}\n    </Button>\n  ));\n}\n\nDynamicFormActions.propTypes = {\n  actions: PropTypes.arrayOf(ActionType),\n  isFormDirty: PropTypes.bool,\n};\n\nDynamicFormActions.defaultProps = {\n  actions: [],\n  isFormDirty: false,\n};\n\nexport default function DynamicForm({\n  id,\n  fields,\n  actions,\n  feedbackIcons,\n  hideSubmitButton,\n  defaultShowExtraFields,\n  saveText,\n  onSubmit,\n}) {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isTouched, setIsTouched] = useState(false);\n  const [showExtraFields, setShowExtraFields] = useState(defaultShowExtraFields);\n  const [form] = Form.useForm();\n  const extraFields = filter(fields, { extra: true });\n  const regularFields = difference(fields, extraFields);\n\n  const handleFinish = useCallback(\n    values => {\n      setIsSubmitting(true);\n      values = normalizeEmptyValuesToNull(fields, values);\n      onSubmit(\n        values,\n        msg => {\n          setIsSubmitting(false);\n          setIsTouched(false); // reset form touched state\n          notification.success(msg);\n        },\n        msg => {\n          setIsSubmitting(false);\n          notification.error(msg);\n        }\n      );\n    },\n    [fields, onSubmit]\n  );\n\n  const handleFinishFailed = useCallback(\n    ({ errorFields }) => {\n      form.scrollToField(errorFields[0].name);\n    },\n    [form]\n  );\n\n  return (\n    <Form\n      form={form}\n      onFieldsChange={() => {\n        setIsTouched(true);\n      }}\n      id={id}\n      className=\"dynamic-form\"\n      layout=\"vertical\"\n      onFinish={handleFinish}\n      onFinishFailed={handleFinishFailed}>\n      <DynamicFormFields fields={regularFields} feedbackIcons={feedbackIcons} form={form} />\n      {!isEmpty(extraFields) && (\n        <div className=\"extra-options\">\n          <Button\n            type=\"dashed\"\n            block\n            className=\"extra-options-button\"\n            onClick={() => setShowExtraFields(currentShowExtraFields => !currentShowExtraFields)}>\n            {window.W_L.add_params}\n            <i\n              className={cx(\"fa m-l-5\", { \"fa-caret-up\": showExtraFields, \"fa-caret-down\": !showExtraFields })}\n              aria-hidden=\"true\"\n            />\n          </Button>\n          <Collapse collapsed={!showExtraFields} className=\"extra-options-content\">\n            <DynamicFormFields fields={extraFields} feedbackIcons={feedbackIcons} form={form} />\n          </Collapse>\n        </div>\n      )}\n      {!hideSubmitButton && (\n        <Button className=\"w-100 m-t-20\" type=\"primary\" htmlType=\"submit\" disabled={isSubmitting}>\n          {saveText}\n        </Button>\n      )}\n      <DynamicFormActions actions={actions} isFormDirty={isTouched} />\n    </Form>\n  );\n}\n\nDynamicForm.propTypes = {\n  id: PropTypes.string,\n  fields: PropTypes.arrayOf(FieldType),\n  actions: PropTypes.arrayOf(ActionType),\n  feedbackIcons: PropTypes.bool,\n  hideSubmitButton: PropTypes.bool,\n  defaultShowExtraFields: PropTypes.bool,\n  saveText: PropTypes.string,\n  onSubmit: PropTypes.func,\n};\n\nDynamicForm.defaultProps = {\n  id: null,\n  fields: [],\n  actions: [],\n  feedbackIcons: false,\n  hideSubmitButton: false,\n  defaultShowExtraFields: false,\n  saveText: window.W_L.save,\n  onSubmit: () => {},\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { isEmpty, toUpper, includes, get, uniqueId } from \"lodash\";\nimport Button from \"antd/lib/button\";\nimport List from \"antd/lib/list\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport Steps from \"antd/lib/steps\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport Link from \"@/components/Link\";\nimport { PreviewCard } from \"@/components/PreviewCard\";\nimport EmptyState from \"@/components/items-list/components/EmptyState\";\nimport DynamicForm from \"@/components/dynamic-form/DynamicForm\";\nimport helper from \"@/components/dynamic-form/dynamicFormHelper\";\nimport HelpTrigger, { TYPES as HELP_TRIGGER_TYPES } from \"@/components/HelpTrigger\";\n\nconst { Step } = Steps;\nconst { Search } = Input;\n\nconst StepEnum = {\n  SELECT_TYPE: 0,\n  CONFIGURE_IT: 1,\n  DONE: 2,\n};\n\nclass CreateSourceDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n    types: PropTypes.arrayOf(PropTypes.object),\n    sourceType: PropTypes.string.isRequired,\n    imageFolder: PropTypes.string.isRequired,\n    helpTriggerPrefix: PropTypes.string,\n    onCreate: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    types: [],\n    helpTriggerPrefix: null,\n  };\n\n  state = {\n    searchText: \"\",\n    selectedType: null,\n    savingSource: false,\n    currentStep: StepEnum.SELECT_TYPE,\n  };\n\n  formId = uniqueId(\"sourceForm\");\n\n  selectType = selectedType => {\n    this.setState({ selectedType, currentStep: StepEnum.CONFIGURE_IT });\n  };\n\n  resetType = () => {\n    if (this.state.currentStep === StepEnum.CONFIGURE_IT) {\n      this.setState({ searchText: \"\", selectedType: null, currentStep: StepEnum.SELECT_TYPE });\n    }\n  };\n\n  createSource = (values, successCallback, errorCallback) => {\n    const { selectedType, savingSource } = this.state;\n    if (!savingSource) {\n      this.setState({ savingSource: true, currentStep: StepEnum.DONE });\n      this.props\n        .onCreate(selectedType, values)\n        .then(data => {\n          successCallback(window.W_L.save_success);\n          this.props.dialog.close({ success: true, data });\n        })\n        .catch(error => {\n          this.setState({ savingSource: false, currentStep: StepEnum.CONFIGURE_IT });\n          errorCallback(get(error, \"response.data.message\", window.W_L.save_failed));\n        });\n    }\n  };\n  renderTypeSelector() {\n    const { types } = this.props;\n    const { searchText } = this.state;\n    const filteredTypes = types.filter(\n      type => isEmpty(searchText) || includes(type.name.toLowerCase(), searchText.toLowerCase())\n    );\n    return (\n      <div className=\"m-t-10\"> \n        <Search\n          placeholder={window.W_L.search}\n          aria-label={window.W_L.search}\n          onChange={e => this.setState({ searchText: e.target.value })}\n          autoFocus\n          data-test=\"SearchSource\"\n        />\n        <div className=\"scrollbox p-5 m-t-10\" style={{ minHeight: \"30vh\", maxHeight: \"40vh\" }}>\n          {isEmpty(filteredTypes) ? (\n            <EmptyState className=\"\" />\n          ) : (\n            <List size=\"small\" dataSource={filteredTypes} renderItem={item => this.renderItem(item)} />\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  renderForm() {\n    const { imageFolder, helpTriggerPrefix } = this.props;\n    const { selectedType } = this.state;\n    const fields = helper.getFields(selectedType);\n    const helpTriggerType = `${helpTriggerPrefix}${toUpper(selectedType.type)}`;\n    return (\n      <div>\n        <div className=\"d-flex justify-content-center align-items-center\">\n          <img className=\"p-5\" src={`${imageFolder}/${selectedType.type}.png`} alt={selectedType.name} width=\"48\" />\n          <h4 className=\"m-0\">{selectedType.name}</h4>\n        </div>\n        <div className=\"text-right\">\n          {HELP_TRIGGER_TYPES[helpTriggerType] && (\n            <HelpTrigger className=\"f-13\" type={helpTriggerType}>\n              {window.W_L.setting_info} <i className=\"fa fa-question-circle\" aria-hidden=\"true\" />\n              <span className=\"sr-only\">({window.W_L.help})</span>\n            </HelpTrigger>\n          )}\n        </div>\n        <DynamicForm id={this.formId} fields={fields} onSubmit={this.createSource} feedbackIcons hideSubmitButton />\n        {selectedType.type === \"databricks\" && (\n          <small>\n            {window.W_L.jdbc_info}{\" \"}\n            <Link href=\"https://databricks.com/spark/odbc-driver-download\" target=\"_blank\" rel=\"noopener noreferrer\">\n              {window.W_L.jdbc_download_name}\n            </Link>\n            .\n          </small>\n        )}\n      </div>\n    );\n  }\n\n  renderItem(item) {\n    const { imageFolder } = this.props;\n    return (\n      <List.Item className=\"p-l-10 p-r-10 clickable\" onClick={() => this.selectType(item)}>\n        <PreviewCard\n          title={item.name}\n          imageUrl={`${imageFolder}/${item.type}.png`}\n          roundedImage={false}\n          data-test=\"PreviewItem\"\n          data-test-type={item.type}>\n          <i className=\"fa fa-angle-double-right\" aria-hidden=\"true\" />\n        </PreviewCard>\n      </List.Item>\n    );\n  }\n\n  render() {\n    const { currentStep, savingSource } = this.state;\n    const { dialog, sourceType } = this.props;\n    return (\n      <Modal\n        {...dialog.props}\n        title={window.W_L.create + ` ${sourceType}`}\n        footer={\n          currentStep === StepEnum.SELECT_TYPE\n            ? [\n                <Button key=\"cancel\" onClick={() => dialog.dismiss()} data-test=\"CreateSourceCancelButton\">\n                  {window.W_L.cancel}\n                </Button>,\n                <Button key=\"submit\" type=\"primary\" disabled>\n                  {window.W_L.create}\n                </Button>,\n              ]\n            : [\n                <Button key=\"previous\" onClick={this.resetType}>\n                  {window.W_L.previous}\n                </Button>,\n                <Button\n                  key=\"submit\"\n                  htmlType=\"submit\"\n                  form={this.formId}\n                  type=\"primary\"\n                  loading={savingSource}\n                  data-test=\"CreateSourceSaveButton\">\n                  {window.W_L.create}\n                </Button>,\n              ]\n        }>\n        <div data-test=\"CreateSourceDialog\">\n          <Steps className=\"hidden-xs m-b-10\" size=\"small\" current={currentStep} progressDot>\n            {currentStep === StepEnum.CONFIGURE_IT ? (\n              <Step title={window.W_L.type_select} className=\"clickable\" onClick={this.resetType} />\n            ) : (\n              <Step title={window.W_L.type} />\n            )}\n            <Step title={window.W_L.setting} />\n            <Step title={window.W_L.done} />\n          </Steps>\n          {currentStep === StepEnum.SELECT_TYPE && this.renderTypeSelector()}\n          {currentStep !== StepEnum.SELECT_TYPE && this.renderForm()}\n        </div>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(CreateSourceDialog);\n","import React from \"react\";\nimport Menu from \"antd/lib/menu\";\nimport PageHeader from \"@/components/PageHeader\";\nimport Link from \"@/components/Link\";\nimport location from \"@/services/location\";\nimport settingsMenu from \"@/services/settingsMenu\";\n\nfunction wrapSettingsTab(id, options, WrappedComponent) {\n  settingsMenu.add(id, options);\n\n  return function SettingsTab(props) {\n    const activeItem = settingsMenu.getActiveItem(location.path);\n    return (\n      <div className=\"settings-screen\">\n        <div className=\"container\">\n          <PageHeader title={window.W_L.setting} />\n          <div className=\"bg-white tiled\">\n            <Menu selectedKeys={[activeItem && activeItem.title]} selectable={false} mode=\"horizontal\">\n              {settingsMenu.getAvailableItems().map(item => (\n                <Menu.Item key={item.title}>\n                  <Link href={item.path} data-test=\"SettingsScreenItem\">\n                    {item.title}\n                  </Link>\n                </Menu.Item>\n              ))}\n            </Menu>\n            <div className=\"p-15\">\n              <div>\n                <WrappedComponent {...props} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n}\n\nexport default wrapSettingsTab;\n","import { isEmpty, reject } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Button from \"antd/lib/button\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport CardsList from \"@/components/cards-list/CardsList\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport CreateSourceDialog from \"@/components/CreateSourceDialog\";\nimport DynamicComponent, { registerComponent } from \"@/components/DynamicComponent\";\nimport helper from \"@/components/dynamic-form/dynamicFormHelper\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\nimport PlainButton from \"@/components/PlainButton\";\n\nimport DataSource, { IMG_ROOT } from \"@/services/data-source\";\nimport { policy } from \"@/services/policy\";\nimport recordEvent from \"@/services/recordEvent\";\nimport routes from \"@/services/routes\";\n\nexport function DataSourcesListComponent({ dataSources, onClickCreate }) {\n  const items = dataSources.map(dataSource => ({\n    title: dataSource.name,\n    imgSrc: `${IMG_ROOT}/${dataSource.type}.png`,\n    href: `data_sources/${dataSource.id}`,\n  }));\n\n  return isEmpty(dataSources) ? (\n    <div className=\"text-center\">\n      {window.W_L.no_datasource}\n      {policy.isCreateDataSourceEnabled() && (\n        <div className=\"m-t-5\">\n          <PlainButton type=\"link\" onClick={onClickCreate} data-test=\"CreateDataSourceLink\">\n            {window.W_L.connect_new_datasource}\n          </PlainButton>{\" \"}\n        </div>\n      )}\n    </div>\n  ) : (\n    <CardsList items={items} />\n  );\n}\n\nregisterComponent(\"DataSourcesListComponent\", DataSourcesListComponent);\n\nclass DataSourcesList extends React.Component {\n  static propTypes = {\n    isNewDataSourcePage: PropTypes.bool,\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    isNewDataSourcePage: false,\n    onError: () => {},\n  };\n\n  state = {\n    dataSourceTypes: [],\n    dataSources: [],\n    loading: true,\n  };\n\n  newDataSourceDialog = null;\n\n  componentDidMount() {\n    Promise.all([DataSource.query(), DataSource.types()])\n      .then(values =>\n        this.setState(\n          {\n            dataSources: values[0],\n            dataSourceTypes: values[1],\n            loading: false,\n          },\n          () => {\n            // all resources are loaded in state\n            if (this.props.isNewDataSourcePage) {\n              if (policy.canCreateDataSource()) {\n                this.showCreateSourceDialog();\n              } else {\n                navigateTo(\"data_sources\", true);\n              }\n            }\n          }\n        )\n      )\n      .catch(error => this.props.onError(error));\n  }\n\n  componentWillUnmount() {\n    if (this.newDataSourceDialog) {\n      this.newDataSourceDialog.dismiss();\n    }\n  }\n\n  createDataSource = (selectedType, values) => {\n    const target = { options: {}, type: selectedType.type };\n    helper.updateTargetWithValues(target, values);\n\n    return DataSource.create(target).then(dataSource => {\n      this.setState({ loading: true });\n      DataSource.query().then(dataSources => this.setState({ dataSources, loading: false }));\n      return dataSource;\n    });\n  };\n\n  showCreateSourceDialog = () => {\n    recordEvent(\"view\", \"page\", \"data_sources/new\");\n    this.newDataSourceDialog = CreateSourceDialog.showModal({\n      types: reject(this.state.dataSourceTypes, \"deprecated\"),\n      sourceType: window.W_L.data_source,\n      imageFolder: IMG_ROOT,\n      helpTriggerPrefix: \"DS_\",\n      onCreate: this.createDataSource,\n    });\n\n    this.newDataSourceDialog\n      .onClose((result = {}) => {\n        this.newDataSourceDialog = null;\n        if (result.success) {\n          navigateTo(`data_sources/${result.data.id}`);\n        }\n      })\n      .onDismiss(() => {\n        this.newDataSourceDialog = null;\n        navigateTo(\"data_sources\", true);\n      });\n  };\n\n  render() {\n    const newDataSourceProps = {\n      type: \"primary\",\n      onClick: policy.isCreateDataSourceEnabled() ? this.showCreateSourceDialog : null,\n      disabled: !policy.isCreateDataSourceEnabled(),\n      \"data-test\": \"CreateDataSourceButton\",\n    };\n\n    return (\n      <div>\n        <div className=\"m-b-15\">\n          <Button {...newDataSourceProps}>\n            <i className=\"fa fa-plus m-r-5\" aria-hidden=\"true\" />\n            {window.W_L.new_data_source}\n          </Button>\n          <DynamicComponent name=\"DataSourcesListExtra\" />\n        </div>\n        {this.state.loading ? (\n          <LoadingState className=\"\" />\n        ) : (\n          <DynamicComponent\n            name=\"DataSourcesListComponent\"\n            dataSources={this.state.dataSources}\n            onClickCreate={this.showCreateSourceDialog}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nconst DataSourcesListPage = wrapSettingsTab(\n  \"DataSources.List\",\n  {\n    permission: \"admin\",\n    title: window.W_L.data_source,\n    path: \"data_sources\",\n    order: 1,\n  },\n  DataSourcesList\n);\n\nroutes.register(\n  \"DataSources.List\",\n  routeWithUserSession({\n    path: \"/data_sources\",\n    title: window.W_L.data_source,\n    render: pageProps => <DataSourcesListPage {...pageProps} />,\n  })\n);\nroutes.register(\n  \"DataSources.New\",\n  routeWithUserSession({\n    path: \"/data_sources/new\",\n    title: window.W_L.data_source,\n    render: pageProps => <DataSourcesListPage {...pageProps} isNewDataSourcePage />,\n  })\n);\n","import { get, find, toUpper } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Modal from \"antd/lib/modal\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport DynamicForm from \"@/components/dynamic-form/DynamicForm\";\nimport helper from \"@/components/dynamic-form/dynamicFormHelper\";\nimport HelpTrigger, { TYPES as HELP_TRIGGER_TYPES } from \"@/components/HelpTrigger\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nimport DataSource, { IMG_ROOT } from \"@/services/data-source\";\nimport notification from \"@/services/notification\";\nimport routes from \"@/services/routes\";\n\nclass EditDataSource extends React.Component {\n  static propTypes = {\n    dataSourceId: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onError: () => {},\n  };\n\n  state = {\n    dataSource: null,\n    type: null,\n    loading: true,\n  };\n\n  componentDidMount() {\n    DataSource.get({ id: this.props.dataSourceId })\n      .then(dataSource => {\n        const { type } = dataSource;\n        this.setState({ dataSource });\n        DataSource.types().then(types => this.setState({ type: find(types, { type }), loading: false }));\n      })\n      .catch(error => this.props.onError(error));\n  }\n\n  saveDataSource = (values, successCallback, errorCallback) => {\n    const { dataSource } = this.state;\n    helper.updateTargetWithValues(dataSource, values);\n    DataSource.save(dataSource)\n      .then(() => successCallback(window.W_L.save_success))\n      .catch(error => {\n        const message = get(error, \"response.data.message\", window.W_L.save_failed);\n        errorCallback(message);\n      });\n  };\n\n  deleteDataSource = callback => {\n    const { dataSource } = this.state;\n\n    const doDelete = () => {\n      DataSource.delete(dataSource)\n        .then(() => {\n          notification.success(window.W_L.datasource_delete_success);\n          navigateTo(\"data_sources\");\n        })\n        .catch(() => {\n          callback();\n        });\n    };\n\n    Modal.confirm({\n      title: window.W_L.delete_datasource,\n      content: window.W_L.delete_datasource_confirm,\n      okText: window.W_L.ok_text,\n      cancelText: window.W_L.cancel,\n      okType: \"danger\",\n      onOk: doDelete,\n      onCancel: callback,\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  };\n\n  testConnection = callback => {\n    const { dataSource } = this.state;\n    DataSource.test({ id: dataSource.id })\n      .then(httpResponse => {\n        if (httpResponse.ok) {\n          notification.success(window.W_L.connect_success);\n        } else {\n          notification.error(window.W_L.connect_failed, httpResponse.message, { duration: 10 });\n        }\n        callback();\n      })\n      .catch(() => {\n        notification.error(\n\t\t\twindow.W_L.connect_failed,\n\t\t\twindow.W_L.connect_failed_tip,\n          { duration: 10 }\n        );\n        callback();\n      });\n  };\n\n  renderForm() {\n    const { dataSource, type } = this.state;\n    const fields = helper.getFields(type, dataSource);\n    const helpTriggerType = `DS_${toUpper(type.type)}`;\n    const formProps = {\n      fields,\n      type,\n      actions: [\n        { name: window.W_L.delete, type: \"danger\", callback: this.deleteDataSource },\n        { name: window.W_L.connect_test, pullRight: true, callback: this.testConnection, disableWhenDirty: true },\n      ],\n      onSubmit: this.saveDataSource,\n      feedbackIcons: true,\n      defaultShowExtraFields: helper.hasFilledExtraField(type, dataSource),\n    };\n\n    return (\n      <div className=\"row\" data-test=\"DataSource\">\n        <div className=\"text-right m-r-10\">\n          {HELP_TRIGGER_TYPES[helpTriggerType] && (\n            <HelpTrigger className=\"f-13\" type={helpTriggerType}>\n              Setup Instructions <i className=\"fa fa-question-circle\" aria-hidden=\"true\" />\n              <span className=\"sr-only\">(help)</span>\n            </HelpTrigger>\n          )}\n        </div>\n        <div className=\"text-center m-b-10\">\n          <img className=\"p-5\" src={`${IMG_ROOT}/${type.type}.png`} alt={type.name} width=\"64\" />\n          <h3 className=\"m-0\">{type.name}</h3>\n        </div>\n        <div className=\"col-md-4 col-md-offset-4 m-b-10\">\n          <DynamicForm {...formProps} />\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return this.state.loading ? <LoadingState className=\"\" /> : this.renderForm();\n  }\n}\n\nconst EditDataSourcePage = wrapSettingsTab(\"DataSources.Edit\", null, EditDataSource);\n\nroutes.register(\n  \"DataSources.Edit\",\n  routeWithUserSession({\n    path: \"/data_sources/:dataSourceId\",\n    title: window.W_L.data_source,\n    render: pageProps => <EditDataSourcePage {...pageProps} />,\n  })\n);\n","import { isEmpty, reject } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Button from \"antd/lib/button\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport CardsList from \"@/components/cards-list/CardsList\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport CreateSourceDialog from \"@/components/CreateSourceDialog\";\nimport helper from \"@/components/dynamic-form/dynamicFormHelper\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\nimport PlainButton from \"@/components/PlainButton\";\n\nimport Destination, { IMG_ROOT } from \"@/services/destination\";\nimport { policy } from \"@/services/policy\";\nimport routes from \"@/services/routes\";\n\nclass DestinationsList extends React.Component {\n  static propTypes = {\n    isNewDestinationPage: PropTypes.bool,\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    isNewDestinationPage: false,\n    onError: () => {},\n  };\n\n  state = {\n    destinationTypes: [],\n    destinations: [],\n    loading: true,\n  };\n\n  componentDidMount() {\n    Promise.all([Destination.query(), Destination.types()])\n      .then(values =>\n        this.setState(\n          {\n            destinations: values[0],\n            destinationTypes: values[1],\n            loading: false,\n          },\n          () => {\n            // all resources are loaded in state\n            if (this.props.isNewDestinationPage) {\n              if (policy.canCreateDestination()) {\n                this.showCreateSourceDialog();\n              } else {\n                navigateTo(\"destinations\", true);\n              }\n            }\n          }\n        )\n      )\n      .catch(error => this.props.onError(error));\n  }\n\n  createDestination = (selectedType, values) => {\n    const target = { options: {}, type: selectedType.type };\n    helper.updateTargetWithValues(target, values);\n\n    return Destination.create(target).then(destination => {\n      this.setState({ loading: true });\n      Destination.query().then(destinations => this.setState({ destinations, loading: false }));\n      return destination;\n    });\n  };\n\n  showCreateSourceDialog = () => {\n    CreateSourceDialog.showModal({\n      types: reject(this.state.destinationTypes, \"deprecated\"),\n      sourceType: window.W_L.alert_setting,\n      imageFolder: IMG_ROOT,\n      onCreate: this.createDestination,\n    })\n      .onClose((result = {}) => {\n        if (result.success) {\n          navigateTo(`destinations/${result.data.id}`);\n        }\n      })\n      .onDismiss(() => {\n        navigateTo(\"destinations\", true);\n      });\n  };\n\n  renderDestinations() {\n    const { destinations } = this.state;\n    const items = destinations.map(destination => ({\n      title: destination.name,\n      imgSrc: `${IMG_ROOT}/${destination.type}.png`,\n      href: `destinations/${destination.id}`,\n    }));\n\n    return isEmpty(destinations) ? (\n      <div className=\"text-center\">\n\t\t{window.W_L.no_alert_setting}\n        {policy.isCreateDestinationEnabled() && (\n          <div className=\"m-t-5\">\n            <PlainButton type=\"link\" onClick={this.showCreateSourceDialog}>\n              {window.W_L.add_alert_setting}\n            </PlainButton>{\" \"}\n          </div>\n        )}\n      </div>\n    ) : (\n      <CardsList items={items} />\n    );\n  }\n\n  render() {\n    const newDestinationProps = {\n      type: \"primary\",\n      onClick: policy.isCreateDestinationEnabled() ? this.showCreateSourceDialog : null,\n      disabled: !policy.isCreateDestinationEnabled(),\n    };\n\n    return (\n      <div>\n        <div className=\"m-b-15\">\n          <Button {...newDestinationProps}>\n            <i className=\"fa fa-plus m-r-5\" aria-hidden=\"true\" />\n            {window.W_L.add_alert_setting}\n          </Button>\n        </div>\n        {this.state.loading ? <LoadingState className=\"\" /> : this.renderDestinations()}\n      </div>\n    );\n  }\n}\n\nconst DestinationsListPage = wrapSettingsTab(\n  \"AlertDestinations.List\",\n  {\n    permission: \"admin\",\n    title: window.W_L.alert_setting,\n    path: \"destinations\",\n    order: 4,\n  },\n  DestinationsList\n);\n\nroutes.register(\n  \"AlertDestinations.List\",\n  routeWithUserSession({\n    path: \"/destinations\",\n    title: window.W_L.alert_setting,\n    render: pageProps => <DestinationsListPage {...pageProps} />,\n  })\n);\nroutes.register(\n  \"AlertDestinations.New\",\n  routeWithUserSession({\n    path: \"/destinations/new\",\n    title: window.W_L.alert_setting,\n    render: pageProps => <DestinationsListPage {...pageProps} isNewDestinationPage />,\n  })\n);\n","import { get, find } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Modal from \"antd/lib/modal\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport DynamicForm from \"@/components/dynamic-form/DynamicForm\";\nimport helper from \"@/components/dynamic-form/dynamicFormHelper\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nimport Destination, { IMG_ROOT } from \"@/services/destination\";\nimport notification from \"@/services/notification\";\nimport routes from \"@/services/routes\";\n\nclass EditDestination extends React.Component {\n  static propTypes = {\n    destinationId: PropTypes.string.isRequired,\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onError: () => {},\n  };\n\n  state = {\n    destination: null,\n    type: null,\n    loading: true,\n  };\n\n  componentDidMount() {\n    Destination.get({ id: this.props.destinationId })\n      .then(destination => {\n        const { type } = destination;\n        this.setState({ destination });\n        Destination.types().then(types => this.setState({ type: find(types, { type }), loading: false }));\n      })\n      .catch(error => this.props.onError(error));\n  }\n\n  saveDestination = (values, successCallback, errorCallback) => {\n    const { destination } = this.state;\n    helper.updateTargetWithValues(destination, values);\n    Destination.save(destination)\n      .then(() => successCallback(window.W_L.save_success))\n      .catch(error => {\n        const message = get(error, \"response.data.message\", window.W_L.save_failed);\n        errorCallback(message);\n      });\n  };\n\n  deleteDestination = callback => {\n    const { destination } = this.state;\n\n    const doDelete = () => {\n      Destination.delete(destination)\n        .then(() => {\n          notification.success(window.W_L.alert_delete_success);\n          navigateTo(\"destinations\");\n        })\n        .catch(() => {\n          callback();\n        });\n    };\n\n    Modal.confirm({\n      title: window.W_L.delete_alert,\n      content: window.W_L.delete_alert_confirm,\n      okText: window.W_L.ok_text,\n      cancelText: window.W_L.cancel,\n      okType: \"danger\",\n      onOk: doDelete,\n      onCancel: callback,\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  };\n\n  renderForm() {\n    const { destination, type } = this.state;\n    const fields = helper.getFields(type, destination);\n    const formProps = {\n      fields,\n      type,\n      actions: [{ name: window.W_L.delete, type: \"danger\", callback: this.deleteDestination }],\n      onSubmit: this.saveDestination,\n      defaultShowExtraFields: helper.hasFilledExtraField(type, destination),\n      feedbackIcons: true,\n    };\n\n    return (\n      <div className=\"row\" data-test=\"Destination\">\n        <div className=\"text-center m-b-10\">\n          <img className=\"p-5\" src={`${IMG_ROOT}/${type.type}.png`} alt={type.name} width=\"64\" />\n          <h3 className=\"m-0\">{type.name}</h3>\n        </div>\n        <div className=\"col-md-4 col-md-offset-4 m-b-10\">\n          <DynamicForm {...formProps} />\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return this.state.loading ? <LoadingState className=\"\" /> : this.renderForm();\n  }\n}\n\nconst EditDestinationPage = wrapSettingsTab(\"AlertDestinations.Edit\", null, EditDestination);\n\nroutes.register(\n  \"AlertDestinations.Edit\",\n  routeWithUserSession({\n    path: \"/destinations/:destinationId\",\n    title: window.W_L.alert_setting,\n    render: pageProps => <EditDestinationPage {...pageProps} />,\n  })\n);\n","import React from \"react\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\n\nclass CreateGroupDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n  };\n\n  state = {\n    name: \"\",\n  };\n\n  save = () => {\n    this.props.dialog.close({\n      name: this.state.name,\n    });\n  };\n\n  render() {\n    const { dialog } = this.props;\n    return (\n      <Modal {...dialog.props} title={window.W_L.create_role} okText={window.W_L.create} cancelText={window.W_L.cancel} onOk={() => this.save()}>\n        <Input\n          className=\"form-control\"\n          defaultValue={this.state.name}\n          onChange={event => this.setState({ name: event.target.value })}\n          onPressEnter={() => this.save()}\n          placeholder={window.W_L.role_name}\n          aria-label={window.W_L.role_name}\n          autoFocus\n        />\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(CreateGroupDialog);\n","import { axios } from \"@/services/axios\";\n\nconst Group = {\n  query: () => axios.get(\"api/groups\"),\n  get: ({ id }) => axios.get(`api/groups/${id}`),\n  create: data => axios.post(`api/groups`, data),\n  save: data => axios.post(`api/groups/${data.id}`, data),\n  delete: data => axios.delete(`api/groups/${data.id}`),\n  members: ({ id }) => axios.get(`api/groups/${id}/members`),\n  addMember: ({ id }, data) => axios.post(`api/groups/${id}/members`, data),\n  removeMember: ({ id, userId }) => axios.delete(`api/groups/${id}/members/${userId}`),\n  dataSources: ({ id }) => axios.get(`api/groups/${id}/data_sources`),\n  addDataSource: ({ id }, data) => axios.post(`api/groups/${id}/data_sources`, data),\n  removeDataSource: ({ id, dataSourceId }) => axios.delete(`api/groups/${id}/data_sources/${dataSourceId}`),\n  updateDataSource: ({ id, dataSourceId }, data) => axios.post(`api/groups/${id}/data_sources/${dataSourceId}`, data),\n};\n\nexport default Group;\n","import { isString } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Modal from \"antd/lib/modal\";\nimport Tooltip from \"@/components/Tooltip\";\nimport notification from \"@/services/notification\";\nimport Group from \"@/services/group\";\n\nfunction deleteGroup(event, group, onGroupDeleted) {\n  Modal.confirm({\n    title: window.W_L.del_role,\n    content:window.W_L.del_role_confirm,\n    okText: window.W_L.ok_text,\n    okType: \"danger\",\n    cancelText: window.W_L.cancel,\n    onOk: () => {\n      Group.delete(group).then(() => {\n        notification.success(window.W_L.del_role_success);\n        onGroupDeleted();\n      });\n    },\n  });\n}\n\nexport default function DeleteGroupButton({ group, title, onClick, children, ...props }) {\n  if (!group) {\n    return null;\n  }\n  const button = (\n    <Button {...props} type=\"danger\" onClick={event => deleteGroup(event, group, onClick)}>\n      {children}\n    </Button>\n  );\n\n  if (isString(title) && title !== \"\") {\n    return (\n      <Tooltip placement=\"top\" title={title} mouseLeaveDelay={0}>\n        {button}\n      </Tooltip>\n    );\n  }\n\n  return button;\n}\n\nDeleteGroupButton.propTypes = {\n  group: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  title: PropTypes.string,\n  onClick: PropTypes.func,\n  children: PropTypes.node,\n};\n\nDeleteGroupButton.defaultProps = {\n  group: null,\n  title: null,\n  onClick: () => {},\n  children: null,\n};\n","import React from \"react\";\n\nimport Button from \"antd/lib/button\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport Link from \"@/components/Link\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport Paginator from \"@/components/Paginator\";\n\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { StateStorage } from \"@/components/items-list/classes/StateStorage\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport EmptyState from \"@/components/items-list/components/EmptyState\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\n\nimport CreateGroupDialog from \"@/components/groups/CreateGroupDialog\";\nimport DeleteGroupButton from \"@/components/groups/DeleteGroupButton\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nimport Group from \"@/services/group\";\nimport { currentUser } from \"@/services/auth\";\nimport routes from \"@/services/routes\";\n\nclass GroupsList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  listColumns = [\n    Columns.custom(\n      (text, group) => (\n        <div>\n          <Link href={\"groups/\" + group.id}>{group.name}</Link>\n          {group.type === \"builtin\" && <span className=\"label label-default m-l-10\">{window.W_L.built_in}</span>}\n        </div>\n      ),\n      {\n        field: \"name\",\n        width: null,\n      }\n    ),\n    Columns.custom(\n      (text, group) => (\n        <Button.Group>\n          <Link.Button href={`groups/${group.id}`}>{window.W_L.members}</Link.Button>\n          {currentUser.isAdmin && <Link.Button href={`groups/${group.id}/data_sources`}>{window.W_L.data_source}</Link.Button>}\n        </Button.Group>\n      ),\n      {\n        width: \"1%\",\n        className: \"text-nowrap\",\n      }\n    ),\n    Columns.custom(\n      (text, group) => {\n        const canRemove = group.type !== \"builtin\";\n        return (\n          <DeleteGroupButton\n            className=\"w-100\"\n            disabled={!canRemove}\n            group={group}\n            title={canRemove ? null : window.W_L.built_in_role_delete_tip}\n            onClick={() => this.onGroupDeleted()}>\n            {window.W_L.delete}\n          </DeleteGroupButton>\n        );\n      },\n      {\n        width: \"1%\",\n        className: \"text-nowrap p-l-0\",\n        isAvailable: () => currentUser.isAdmin,\n      }\n    ),\n  ];\n\n  createGroup = () => {\n    CreateGroupDialog.showModal().onClose(group =>\n      Group.create(group).then(newGroup => navigateTo(`groups/${newGroup.id}`))\n    );\n  };\n\n  onGroupDeleted = () => {\n    this.props.controller.updatePagination({ page: 1 });\n    this.props.controller.update();\n  };\n\n  render() {\n    const { controller } = this.props;\n\n    return (\n      <div data-test=\"GroupList\">\n        {currentUser.isAdmin && (\n          <div className=\"m-b-15\">\n            <Button type=\"primary\" onClick={this.createGroup}>\n              <i className=\"fa fa-plus m-r-5\" aria-hidden=\"true\" />\n              {window.W_L.create_role}\n            </Button>\n          </div>\n        )}\n\n        {!controller.isLoaded && <LoadingState className=\"\" />}\n        {controller.isLoaded && controller.isEmpty && <EmptyState className=\"\" />}\n        {controller.isLoaded && !controller.isEmpty && (\n          <div className=\"table-responsive\">\n            <ItemsTable\n              items={controller.pageItems}\n              columns={this.listColumns}\n              showHeader={false}\n              context={this.actions}\n              orderByField={controller.orderByField}\n              orderByReverse={controller.orderByReverse}\n              toggleSorting={controller.toggleSorting}\n            />\n            <Paginator\n              showPageSizeSelect\n              totalCount={controller.totalItemsCount}\n              pageSize={controller.itemsPerPage}\n              onPageSizeChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n              page={controller.page}\n              onChange={page => controller.updatePagination({ page })}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nconst GroupsListPage = wrapSettingsTab(\n  \"Groups.List\",\n  {\n    permission: \"list_users\",\n    title: window.W_L.role,\n    path: \"groups\",\n    order: 3,\n  },\n  itemsList(\n    GroupsList,\n    () =>\n      new ResourceItemsSource({\n        isPlainList: true,\n        getRequest() {\n          return {};\n        },\n        getResource() {\n          return Group.query.bind(Group);\n        },\n      }),\n    () => new StateStorage({ orderByField: \"name\", itemsPerPage: 10 })\n  )\n);\n\nroutes.register(\n  \"Groups.List\",\n  routeWithUserSession({\n    path: \"/groups\",\n    title: window.W_L.role,\n    render: pageProps => <GroupsListPage {...pageProps} currentPage=\"groups\" />,\n  })\n);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport EditInPlace from \"@/components/EditInPlace\";\nimport { currentUser } from \"@/services/auth\";\nimport Group from \"@/services/group\";\n\nfunction updateGroupName(group, name, onChange) {\n  group.name = name;\n  Group.save(group);\n  onChange();\n}\n\nexport default function GroupName({ group, onChange, ...props }) {\n  if (!group) {\n    return null;\n  }\n\n  const canEdit = currentUser.isAdmin && group.type !== \"builtin\";\n\n  return (\n    <h3 {...props}>\n      <EditInPlace\n        className=\"edit-in-place\"\n        isEditable={canEdit}\n        ignoreBlanks\n        onDone={name => updateGroupName(group, name, onChange)}\n        value={group.name}\n      />\n    </h3>\n  );\n}\n\nGroupName.propTypes = {\n  group: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n  }),\n  onChange: PropTypes.func,\n};\n\nGroupName.defaultProps = {\n  group: null,\n  onChange: () => {},\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Divider from \"antd/lib/divider\";\n\nimport * as Sidebar from \"@/components/items-list/components/Sidebar\";\nimport { ControllerType } from \"@/components/items-list/ItemsList\";\nimport DeleteGroupButton from \"./DeleteGroupButton\";\n\nimport { currentUser } from \"@/services/auth\";\n\nexport default function DetailsPageSidebar({\n  controller,\n  group,\n  items,\n  canAddMembers,\n  onAddMembersClick,\n  canAddDataSources,\n  onAddDataSourcesClick,\n  onGroupDeleted,\n}) {\n  const canRemove = group && currentUser.isAdmin && group.type !== \"builtin\";\n\n  return (\n    <React.Fragment>\n      <Sidebar.Menu items={items} selected={controller.params.currentPage} />\n      {canAddMembers && (\n        <Button className=\"w-100 m-t-5\" type=\"primary\" onClick={onAddMembersClick}>\n          <i className=\"fa fa-plus m-r-5\" aria-hidden=\"true\" />\n          {window.W_L.add_user}\n        </Button>\n      )}\n      {canAddDataSources && (\n        <Button className=\"w-100 m-t-5\" type=\"primary\" onClick={onAddDataSourcesClick}>\n          <i className=\"fa fa-plus m-r-5\" aria-hidden=\"true\" />\n          {window.W_L.add_datasource}\n        </Button>\n      )}\n      {canRemove && (\n        <React.Fragment>\n          <Divider dashed className=\"m-t-10 m-b-10\" />\n          <DeleteGroupButton className=\"w-100\" group={group} onClick={onGroupDeleted}>\n            {window.W_L.del_role}\n          </DeleteGroupButton>\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n}\n\nDetailsPageSidebar.propTypes = {\n  controller: ControllerType.isRequired,\n  group: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  items: PropTypes.array.isRequired, // eslint-disable-line react/forbid-prop-types\n\n  canAddMembers: PropTypes.bool,\n  onAddMembersClick: PropTypes.func,\n\n  canAddDataSources: PropTypes.bool,\n  onAddDataSourcesClick: PropTypes.func,\n\n  onGroupDeleted: PropTypes.func,\n};\n\nDetailsPageSidebar.defaultProps = {\n  group: null,\n\n  canAddMembers: false,\n  onAddMembersClick: null,\n\n  canAddDataSources: false,\n  onAddDataSourcesClick: null,\n\n  onGroupDeleted: null,\n};\n","import { filter, map, includes, toLower } from \"lodash\";\nimport React from \"react\";\nimport Button from \"antd/lib/button\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Menu from \"antd/lib/menu\";\nimport DownOutlinedIcon from \"@ant-design/icons/DownOutlined\";\n\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport Paginator from \"@/components/Paginator\";\n\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { StateStorage } from \"@/components/items-list/classes/StateStorage\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\nimport SelectItemsDialog from \"@/components/SelectItemsDialog\";\nimport { DataSourcePreviewCard } from \"@/components/PreviewCard\";\n\nimport GroupName from \"@/components/groups/GroupName\";\nimport ListItemAddon from \"@/components/groups/ListItemAddon\";\nimport Sidebar from \"@/components/groups/DetailsPageSidebar\";\nimport Layout from \"@/components/layouts/ContentWithSidebar\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nimport notification from \"@/services/notification\";\nimport { currentUser } from \"@/services/auth\";\nimport Group from \"@/services/group\";\nimport DataSource from \"@/services/data-source\";\nimport routes from \"@/services/routes\";\n\nclass GroupDataSources extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  groupId = parseInt(this.props.controller.params.groupId, 10);\n\n  group = null;\n\n  sidebarMenu = [\n    {\n      key: \"users\",\n      href: `groups/${this.groupId}`,\n      title: window.W_L.members,\n    },\n    {\n      key: \"datasources\",\n      href: `groups/${this.groupId}/data_sources`,\n      title: window.W_L.data_source,\n      isAvailable: () => currentUser.isAdmin,\n    },\n  ];\n\n  listColumns = [\n    Columns.custom((text, datasource) => <DataSourcePreviewCard dataSource={datasource} withLink />, {\n      title: window.W_L.name,\n      field: \"name\",\n      width: null,\n    }),\n    Columns.custom(\n      (text, datasource) => {\n        const menu = (\n          <Menu\n            selectedKeys={[datasource.view_only ? \"viewonly\" : \"full\"]}\n            onClick={item => this.setDataSourcePermissions(datasource, item.key)}>\n            <Menu.Item key=\"full\">{window.W_L.full_access}</Menu.Item>\n            <Menu.Item key=\"viewonly\">{window.W_L.view_only}</Menu.Item>\n          </Menu>\n        );\n\n        return (\n          <Dropdown trigger={[\"click\"]} overlay={menu}>\n            <Button className=\"w-100\" aria-label=\"Permissions\">\n              {datasource.view_only ? window.W_L.view_only : window.W_L.full_access}\n              <DownOutlinedIcon aria-hidden=\"true\" />\n            </Button>\n          </Dropdown>\n        );\n      },\n      {\n        width: \"1%\",\n        className: \"p-r-0\",\n        isAvailable: () => currentUser.isAdmin,\n      }\n    ),\n    Columns.custom(\n      (text, datasource) => (\n        <Button className=\"w-100\" type=\"danger\" onClick={() => this.removeGroupDataSource(datasource)}>\n          Remove\n        </Button>\n      ),\n      {\n        width: \"1%\",\n        isAvailable: () => currentUser.isAdmin,\n      }\n    ),\n  ];\n\n  componentDidMount() {\n    Group.get({ id: this.groupId })\n      .then(group => {\n        this.group = group;\n        this.forceUpdate();\n      })\n      .catch(error => {\n        this.props.controller.handleError(error);\n      });\n  }\n\n  removeGroupDataSource = datasource => {\n    Group.removeDataSource({ id: this.groupId, dataSourceId: datasource.id })\n      .then(() => {\n        this.props.controller.updatePagination({ page: 1 });\n        this.props.controller.update();\n      })\n      .catch(() => {\n        notification.error(window.W_L.datasource_delete_failed);\n      });\n  };\n\n  setDataSourcePermissions = (datasource, permission) => {\n    const viewOnly = permission !== \"full\";\n\n    Group.updateDataSource({ id: this.groupId, dataSourceId: datasource.id }, { view_only: viewOnly })\n      .then(() => {\n        datasource.view_only = viewOnly;\n        this.forceUpdate();\n      })\n      .catch(() => {\n        notification.error(window.W_L.change_datasource_permission_failed);\n      });\n  };\n\n  addDataSources = () => {\n    const allDataSources = DataSource.query();\n    const alreadyAddedDataSources = map(this.props.controller.allItems, ds => ds.id);\n    SelectItemsDialog.showModal({\n      dialogTitle: window.W_L.new_data_source,\n      inputPlaceholder: window.W_L.search_database,\n      selectedItemsTitle: window.W_L.new_data_source,\n      searchItems: searchTerm => {\n        searchTerm = toLower(searchTerm);\n        return allDataSources.then(items => filter(items, ds => includes(toLower(ds.name), searchTerm)));\n      },\n      renderItem: (item, { isSelected }) => {\n        const alreadyInGroup = includes(alreadyAddedDataSources, item.id);\n        return {\n          content: (\n            <DataSourcePreviewCard dataSource={item}>\n              <ListItemAddon isSelected={isSelected} alreadyInGroup={alreadyInGroup} />\n            </DataSourcePreviewCard>\n          ),\n          isDisabled: alreadyInGroup,\n          className: isSelected || alreadyInGroup ? \"selected\" : \"\",\n        };\n      },\n      renderStagedItem: (item, { isSelected }) => ({\n        content: (\n          <DataSourcePreviewCard dataSource={item}>\n            <ListItemAddon isSelected={isSelected} isStaged />\n          </DataSourcePreviewCard>\n        ),\n      }),\n    }).onClose(items => {\n      const promises = map(items, ds => Group.addDataSource({ id: this.groupId }, { data_source_id: ds.id }));\n      return Promise.all(promises).then(() => this.props.controller.update());\n    });\n  };\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <div data-test=\"Group\">\n        <GroupName className=\"d-block m-t-0 m-b-15\" group={this.group} onChange={() => this.forceUpdate()} />\n        <Layout>\n          <Layout.Sidebar>\n            <Sidebar\n              controller={controller}\n              group={this.group}\n              items={this.sidebarMenu}\n              canAddDataSources={currentUser.isAdmin}\n              onAddDataSourcesClick={this.addDataSources}\n              onGroupDeleted={() => navigateTo(\"groups\")}\n            />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {!controller.isLoaded && <LoadingState className=\"\" />}\n            {controller.isLoaded && controller.isEmpty && (\n              <div className=\"text-center\">\n                <p>{window.W_L.group_no_datasource}</p>\n                {currentUser.isAdmin && (\n                  <Button type=\"primary\" onClick={this.addDataSources}>\n                    <i className=\"fa fa-plus m-r-5\" aria-hidden=\"true\" />\n                    {window.W_L.new_data_source}\n                  </Button>\n                )}\n              </div>\n            )}\n            {controller.isLoaded && !controller.isEmpty && (\n              <div className=\"table-responsive\">\n                <ItemsTable\n                  items={controller.pageItems}\n                  columns={this.listColumns}\n                  showHeader={false}\n                  context={this.actions}\n                  orderByField={controller.orderByField}\n                  orderByReverse={controller.orderByReverse}\n                  toggleSorting={controller.toggleSorting}\n                />\n                <Paginator\n                  showPageSizeSelect\n                  totalCount={controller.totalItemsCount}\n                  pageSize={controller.itemsPerPage}\n                  onPageSizeChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n                  page={controller.page}\n                  onChange={page => controller.updatePagination({ page })}\n                />\n              </div>\n            )}\n          </Layout.Content>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nconst GroupDataSourcesPage = wrapSettingsTab(\n  \"Groups.DataSources\",\n  null,\n  itemsList(\n    GroupDataSources,\n    () =>\n      new ResourceItemsSource({\n        isPlainList: true,\n        getRequest(unused, { params: { groupId } }) {\n          return { id: groupId };\n        },\n        getResource() {\n          return Group.dataSources.bind(Group);\n        },\n      }),\n    () => new StateStorage({ orderByField: \"name\" })\n  )\n);\n\nroutes.register(\n  \"Groups.DataSources\",\n  routeWithUserSession({\n    path: \"/groups/:groupId/data_sources\",\n    title: window.W_L.group_datasource,\n    render: pageProps => <GroupDataSourcesPage {...pageProps} currentPage=\"datasources\" />,\n  })\n);\n","import { includes, map } from \"lodash\";\nimport React from \"react\";\nimport Button from \"antd/lib/button\";\n\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport Paginator from \"@/components/Paginator\";\n\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { StateStorage } from \"@/components/items-list/classes/StateStorage\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\nimport SelectItemsDialog from \"@/components/SelectItemsDialog\";\nimport { UserPreviewCard } from \"@/components/PreviewCard\";\n\nimport GroupName from \"@/components/groups/GroupName\";\nimport ListItemAddon from \"@/components/groups/ListItemAddon\";\nimport Sidebar from \"@/components/groups/DetailsPageSidebar\";\nimport Layout from \"@/components/layouts/ContentWithSidebar\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nimport notification from \"@/services/notification\";\nimport { currentUser } from \"@/services/auth\";\nimport Group from \"@/services/group\";\nimport User from \"@/services/user\";\nimport routes from \"@/services/routes\";\n\nclass GroupMembers extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  groupId = parseInt(this.props.controller.params.groupId, 10);\n\n  group = null;\n\n  sidebarMenu = [\n    {\n      key: \"users\",\n      href: `groups/${this.groupId}`,\n      title: window.W_L.members,\n    },\n    {\n      key: \"datasources\",\n      href: `groups/${this.groupId}/data_sources`,\n      title: window.W_L.data_source,\n      isAvailable: () => currentUser.isAdmin,\n    },\n  ];\n\n  listColumns = [\n    Columns.custom((text, user) => <UserPreviewCard user={user} withLink />, {\n      title: window.W_L.name,\n      field: \"name\",\n      width: null,\n    }),\n    Columns.custom(\n      (text, user) => {\n        if (!this.group) {\n          return null;\n        }\n\n        // cannot remove self from built-in groups\n        if (this.group.type === \"builtin\" && currentUser.id === user.id) {\n          return null;\n        }\n        return (\n          <Button className=\"w-100\" type=\"danger\" onClick={event => this.removeGroupMember(event, user)}>\n\t\t\t{window.W_L.remove}\n          </Button>\n        );\n      },\n      {\n        width: \"1%\",\n        isAvailable: () => currentUser.isAdmin,\n      }\n    ),\n  ];\n\n  componentDidMount() {\n    Group.get({ id: this.groupId })\n      .then(group => {\n        this.group = group;\n        this.forceUpdate();\n      })\n      .catch(error => {\n        this.props.controller.handleError(error);\n      });\n  }\n\n  removeGroupMember = (event, user) =>\n    Group.removeMember({ id: this.groupId, userId: user.id })\n      .then(() => {\n        this.props.controller.updatePagination({ page: 1 });\n        this.props.controller.update();\n      })\n      .catch(() => {\n        notification.error(window.W_L.remove_member_failed);\n      });\n\n  addMembers = () => {\n    const alreadyAddedUsers = map(this.props.controller.allItems, u => u.id);\n    SelectItemsDialog.showModal({\n      dialogTitle: window.W_L.add_member,\n      inputPlaceholder:window.W_L.search_member,\n      selectedItemsTitle: window.W_L.add_member,\n      searchItems: searchTerm => User.query({ q: searchTerm }).then(({ results }) => results),\n      renderItem: (item, { isSelected }) => {\n        const alreadyInGroup = includes(alreadyAddedUsers, item.id);\n        return {\n          content: (\n            <UserPreviewCard user={item}>\n              <ListItemAddon isSelected={isSelected} alreadyInGroup={alreadyInGroup} />\n            </UserPreviewCard>\n          ),\n          isDisabled: alreadyInGroup,\n          className: isSelected || alreadyInGroup ? \"selected\" : \"\",\n        };\n      },\n      renderStagedItem: (item, { isSelected }) => ({\n        content: (\n          <UserPreviewCard user={item}>\n            <ListItemAddon isSelected={isSelected} isStaged />\n          </UserPreviewCard>\n        ),\n      }),\n    }).onClose(items => {\n      const promises = map(items, u => Group.addMember({ id: this.groupId }, { user_id: u.id }));\n      return Promise.all(promises).then(() => this.props.controller.update());\n    });\n  };\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <div data-test=\"Group\">\n        <GroupName className=\"d-block m-t-0 m-b-15\" group={this.group} onChange={() => this.forceUpdate()} />\n        <Layout>\n          <Layout.Sidebar>\n            <Sidebar\n              controller={controller}\n              group={this.group}\n              items={this.sidebarMenu}\n              canAddMembers={currentUser.isAdmin}\n              onAddMembersClick={this.addMembers}\n              onGroupDeleted={() => navigateTo(\"groups\")}\n            />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {!controller.isLoaded && <LoadingState className=\"\" />}\n            {controller.isLoaded && controller.isEmpty && (\n              <div className=\"text-center\">\n                <p>{window.W_L.role_no_member}</p>\n                {currentUser.isAdmin && (\n                  <Button type=\"primary\" onClick={this.addMembers}>\n                    <i className=\"fa fa-plus m-r-5\" aria-hidden=\"true\" />\n                    {window.W_L.add_member}\n                  </Button>\n                )}\n              </div>\n            )}\n            {controller.isLoaded && !controller.isEmpty && (\n              <div className=\"table-responsive\">\n                <ItemsTable\n                  items={controller.pageItems}\n                  columns={this.listColumns}\n                  showHeader={false}\n                  context={this.actions}\n                  orderByField={controller.orderByField}\n                  orderByReverse={controller.orderByReverse}\n                  toggleSorting={controller.toggleSorting}\n                />\n                <Paginator\n                  showPageSizeSelect\n                  totalCount={controller.totalItemsCount}\n                  pageSize={controller.itemsPerPage}\n                  onPageSizeChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n                  page={controller.page}\n                  onChange={page => controller.updatePagination({ page })}\n                />\n              </div>\n            )}\n          </Layout.Content>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nconst GroupMembersPage = wrapSettingsTab(\n  \"Groups.Members\",\n  null,\n  itemsList(\n    GroupMembers,\n    () =>\n      new ResourceItemsSource({\n        isPlainList: true,\n        getRequest(unused, { params: { groupId } }) {\n          return { id: groupId };\n        },\n        getResource() {\n          return Group.members.bind(Group);\n        },\n      }),\n    () => new StateStorage({ orderByField: \"name\" })\n  )\n);\n\nroutes.register(\n  \"Groups.Members\",\n  routeWithUserSession({\n    path: \"/groups/:groupId\",\n    title: window.W_L.members,\n    render: pageProps => <GroupMembersPage {...pageProps} currentPage=\"users\" />,\n  })\n);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Link from \"@/components/Link\";\nimport BigMessage from \"@/components/BigMessage\";\nimport NoTaggedObjectsFound from \"@/components/NoTaggedObjectsFound\";\nimport EmptyState, { EmptyStateHelpMessage } from \"@/components/empty-state/EmptyState\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { currentUser } from \"@/services/auth\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\n\nexport default function QueriesListEmptyState({ page, searchTerm, selectedTags }) {\n  if (searchTerm !== \"\") {\n    return <BigMessage message={window.W_L.find_nothing} icon=\"fa-search\" />;\n  }\n  if (selectedTags.length > 0) {\n    return <NoTaggedObjectsFound objectType=\"queries\" tags={selectedTags} />;\n  }\n  switch (page) {\n    case \"favorites\":\n      return <BigMessage message={window.W_L.my_favorite_query} icon=\"fa-star\" />;\n    case \"archive\":\n      return <BigMessage message={window.W_L.archived_query} icon=\"fa-archive\" />;\n    case \"my\":\n      const my_msg = currentUser.hasPermission(\"create_query\") ? (\n        <span>\n          <Link.Button href=\"queries/new\" type=\"primary\" size=\"small\">\n            {window.W_L.create_query}\n          </Link.Button>{\" \"}\n          <HelpTrigger className=\"f-13\" type=\"QUERIES\" showTooltip={false}>\n            {window.W_L.need_help}?\n          </HelpTrigger>\n        </span>\n      ) : (\n        <span>{window.W_L.find_nothing}</span>\n      );\n      return <BigMessage icon=\"fa-search\">{my_msg}</BigMessage>;\n    default:\n      return (\n        <DynamicComponent name=\"QueriesList.EmptyState\">\n          <EmptyState\n            icon=\"fa fa-code\"\n            illustration=\"query\"\n            description={window.W_L.get_data_from_datasource}\n            helpMessage={<EmptyStateHelpMessage helpTriggerType=\"QUERIES\" />}\n          />\n        </DynamicComponent>\n      );\n  }\n}\n\nQueriesListEmptyState.propTypes = {\n  page: PropTypes.string.isRequired,\n  searchTerm: PropTypes.string.isRequired,\n  selectedTags: PropTypes.array.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n","import React, { useEffect, useRef } from \"react\";\nimport cx from \"classnames\";\n\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport Link from \"@/components/Link\";\nimport PageHeader from \"@/components/PageHeader\";\nimport Paginator from \"@/components/Paginator\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { QueryTagsControl } from \"@/components/tags-control/TagsControl\";\nimport SchedulePhrase from \"@/components/queries/SchedulePhrase\";\n\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport useItemsListExtraActions from \"@/components/items-list/hooks/useItemsListExtraActions\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { UrlStateStorage } from \"@/components/items-list/classes/StateStorage\";\n\nimport * as Sidebar from \"@/components/items-list/components/Sidebar\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\n\nimport Layout from \"@/components/layouts/ContentWithSidebar\";\n\nimport { Query } from \"@/services/query\";\nimport { currentUser } from \"@/services/auth\";\nimport location from \"@/services/location\";\nimport routes from \"@/services/routes\";\n\nimport QueriesListEmptyState from \"./QueriesListEmptyState\";\n\nimport \"./queries-list.css\";\n\nconst sidebarMenu = [\n  {\n    key: \"all\",\n    href: \"queries\",\n    title: window.W_L.all_queries,\n    icon: () => <Sidebar.MenuIcon icon=\"fa fa-code\" />,\n  },\n  {\n    key: \"my\",\n    href: \"queries/my\",\n    title: window.W_L.my_queries,\n    icon: () => <Sidebar.ProfileImage user={currentUser} />,\n  },\n  {\n    key: \"favorites\",\n    href: \"queries/favorites\",\n    title: window.W_L.my_favorite_query,\n    icon: () => <Sidebar.MenuIcon icon=\"fa fa-star\" />,\n  },\n  {\n    key: \"archive\",\n    href: \"queries/archive\",\n    title: window.W_L.archived_query,\n    icon: () => <Sidebar.MenuIcon icon=\"fa fa-archive\" />,\n  },\n];\n\nconst listColumns = [\n  Columns.favorites({ className: \"p-r-0\" }),\n  Columns.custom.sortable(\n    (text, item) => (\n      <React.Fragment>\n        <Link className=\"table-main-title\" href={\"queries/\" + item.id}>\n          {item.name}\n        </Link>\n        <QueryTagsControl className=\"d-block\" tags={item.tags} isDraft={item.is_draft} isArchived={item.is_archived} />\n      </React.Fragment>\n    ),\n    {\n      title: window.W_L.name,\n      field: \"name\",\n      width: null,\n    }\n  ),\n  Columns.custom((text, item) => item.user.name, { title: window.W_L.create_user, width: \"1%\" }),\n  Columns.dateTime.sortable({ title: window.W_L.create_time, field: \"created_at\", width: \"1%\" }),\n  Columns.dateTime.sortable({\n    title: window.W_L.last_exec_datetime,\n    field: \"retrieved_at\",\n    orderByField: \"executed_at\",\n    width: \"1%\",\n  }),\n  Columns.custom.sortable((text, item) => <SchedulePhrase schedule={item.schedule} isNew={item.isNew()} />, {\n    title: window.W_L.auto_flush,\n    field: \"schedule\",\n    width: \"1%\",\n  }),\n];\n\nfunction QueriesListExtraActions(props) {\n  return <DynamicComponent name=\"QueriesList.Actions\" {...props} />;\n}\n\nfunction QueriesList({ controller }) {\n  const controllerRef = useRef();\n  controllerRef.current = controller;\n\n  useEffect(() => {\n    const unlistenLocationChanges = location.listen((unused, action) => {\n      const searchTerm = location.search.q || \"\";\n      if (action === \"PUSH\" && searchTerm !== controllerRef.current.searchTerm) {\n        controllerRef.current.updateSearch(searchTerm);\n      }\n    });\n\n    return () => {\n      unlistenLocationChanges();\n    };\n  }, []);\n\n  const {\n    areExtraActionsAvailable,\n    listColumns: tableColumns,\n    Component: ExtraActionsComponent,\n    selectedItems,\n  } = useItemsListExtraActions(controller, listColumns, QueriesListExtraActions);\n  return (\n    <div className=\"page-queries-list\">\n      <div className=\"container\">\n        <PageHeader\n          title={controller.params.pageTitle}\n          actions={\n            currentUser.hasPermission(\"create_query\") ? (\n              <Link.Button block type=\"primary\" href=\"queries/new\">\n                <i className=\"fa fa-plus m-r-5\" aria-hidden=\"true\" />\n                {window.W_L.new_query}\n              </Link.Button>\n            ) : null\n          }\n        />\n        <Layout>\n          <Layout.Sidebar className=\"m-b-0\">\n            <Sidebar.SearchInput\n              placeholder={window.W_L.search_query}\n              label={window.W_L.search_query}\n              value={controller.searchTerm}\n              onChange={controller.updateSearch}\n            />\n            <Sidebar.Menu items={sidebarMenu} selected={controller.params.currentPage} />\n            <Sidebar.Tags url=\"api/queries/tags\" onChange={controller.updateSelectedTags} showUnselectAll />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {controller.isLoaded && controller.isEmpty ? (\n              <QueriesListEmptyState\n                page={controller.params.currentPage}\n                searchTerm={controller.searchTerm}\n                selectedTags={controller.selectedTags}\n              />\n            ) : (\n              <React.Fragment>\n                <div className={cx({ \"m-b-10\": areExtraActionsAvailable })}>\n                  <ExtraActionsComponent selectedItems={selectedItems} />\n                </div>\n                <div className=\"bg-white tiled table-responsive\">\n                  <ItemsTable\n                    items={controller.pageItems}\n                    loading={!controller.isLoaded}\n                    columns={tableColumns}\n                    orderByField={controller.orderByField}\n                    orderByReverse={controller.orderByReverse}\n                    toggleSorting={controller.toggleSorting}\n                  />\n                  <Paginator\n                    showPageSizeSelect\n                    totalCount={controller.totalItemsCount}\n                    pageSize={controller.itemsPerPage}\n                    onPageSizeChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n                    page={controller.page}\n                    onChange={page => controller.updatePagination({ page })}\n                  />\n                </div>\n              </React.Fragment>\n            )}\n          </Layout.Content>\n        </Layout>\n      </div>\n    </div>\n  );\n}\n\nQueriesList.propTypes = {\n  controller: ControllerType.isRequired,\n};\n\nconst QueriesListPage = itemsList(\n  QueriesList,\n  () =>\n    new ResourceItemsSource({\n      getResource({ params: { currentPage } }) {\n        return {\n          all: Query.query.bind(Query),\n          my: Query.myQueries.bind(Query),\n          favorites: Query.favorites.bind(Query),\n          archive: Query.archive.bind(Query),\n        }[currentPage];\n      },\n      getItemProcessor() {\n        return item => new Query(item);\n      },\n    }),\n  () => new UrlStateStorage({ orderByField: \"created_at\", orderByReverse: true })\n);\n\nroutes.register(\n  \"Queries.List\",\n  routeWithUserSession({\n    path: \"/queries\",\n    title: window.W_L.all_queries,\n    render: pageProps => <QueriesListPage {...pageProps} currentPage=\"all\" />,\n  })\n);\nroutes.register(\n  \"Queries.Favorites\",\n  routeWithUserSession({\n    path: \"/queries/favorites\",\n    title: window.W_L.my_favorite_query,\n    render: pageProps => <QueriesListPage {...pageProps} currentPage=\"favorites\" />,\n  })\n);\nroutes.register(\n  \"Queries.Archived\",\n  routeWithUserSession({\n    path: \"/queries/archive\",\n    title: window.W_L.archived_query,\n    render: pageProps => <QueriesListPage {...pageProps} currentPage=\"archive\" />,\n  })\n);\nroutes.register(\n  \"Queries.My\",\n  routeWithUserSession({\n    path: \"/queries/my\",\n    title: window.W_L.my_queries,\n    render: pageProps => <QueriesListPage {...pageProps} currentPage=\"my\" />,\n  })\n);\n","import d3 from \"d3\";\nimport React, { useRef, useMemo, useCallback, useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Resizable as ReactResizable } from \"react-resizable\";\nimport KeyboardShortcuts from \"@/services/KeyboardShortcuts\";\n\nimport \"./index.less\";\n\nexport default function Resizable({ toggleShortcut, direction, sizeAttribute, children }) {\n  const [size, setSize] = useState(0);\n  const elementRef = useRef();\n  const wasUsingTouchEventsRef = useRef(false);\n  const wasResizedRef = useRef(false);\n\n  const sizeProp = direction === \"horizontal\" ? \"width\" : \"height\";\n  sizeAttribute = sizeAttribute || sizeProp;\n\n  const getElementSize = useCallback(() => {\n    if (!elementRef.current) {\n      return 0;\n    }\n    return Math.floor(elementRef.current.getBoundingClientRect()[sizeProp]);\n  }, [sizeProp]);\n\n  const savedSize = useRef(null);\n  const toggle = useCallback(() => {\n    if (!elementRef.current) {\n      return;\n    }\n\n    const element = d3.select(elementRef.current);\n    let targetSize;\n    if (savedSize.current === null) {\n      targetSize = \"0px\";\n      savedSize.current = `${getElementSize()}px`;\n    } else {\n      targetSize = savedSize.current;\n      savedSize.current = null;\n    }\n\n    element\n      .style(sizeAttribute, savedSize.current || \"0px\")\n      .transition()\n      .duration(200)\n      .ease(\"swing\")\n      .style(sizeAttribute, targetSize);\n\n    // update state to new element's size\n    setSize(parseInt(targetSize) || 0);\n  }, [getElementSize, sizeAttribute]);\n\n  const resizeHandle = useMemo(\n    () => (\n      // eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-noninteractive-element-interactions\n      <span\n        className={`react-resizable-handle react-resizable-handle-${direction}`}\n        role=\"separator\"\n        onClick={() => {\n          // TODO: add key controls\n          // On desktops resize uses `mousedown`/`mousemove`/`mouseup` events, and there is a conflict\n          // with this `click` handler: after user releases mouse - this handler will be executed.\n          // So we use `wasResized` flag to check if there was actual resize or user just pressed and released\n          // left mouse button (see also resize event handlers where ths flag is set).\n          // On mobile devices `touchstart`/`touchend` events wll be used, so it's safe to just execute this handler.\n          // To detect which set of events was actually used during particular resize operation, we pass\n          // `onMouseDown` handler to draggable core and check event type there (see also that handler's code).\n          if (wasUsingTouchEventsRef.current || !wasResizedRef.current) {\n            toggle();\n          }\n          wasUsingTouchEventsRef.current = false;\n          wasResizedRef.current = false;\n        }}\n      />\n    ),\n    [direction, toggle]\n  );\n\n  useEffect(() => {\n    if (toggleShortcut) {\n      const shortcuts = {\n        [toggleShortcut]: toggle,\n      };\n\n      KeyboardShortcuts.bind(shortcuts);\n      return () => {\n        KeyboardShortcuts.unbind(shortcuts);\n      };\n    }\n  }, [toggleShortcut, toggle]);\n\n  const resizeEventHandlers = useMemo(\n    () => ({\n      onResizeStart: () => {\n        // use element's size as initial value (it will also check constraints set in CSS)\n        // updated here and in `draggableCore::onMouseDown` handler to ensure that right value will be used\n        setSize(getElementSize());\n      },\n      onResize: (unused, data) => {\n        // update element directly for better UI responsiveness\n        d3.select(elementRef.current).style(sizeAttribute, `${data.size[sizeProp]}px`);\n        setSize(data.size[sizeProp]);\n        wasResizedRef.current = true;\n      },\n      onResizeStop: () => {\n        if (wasResizedRef.current) {\n          savedSize.current = null;\n        }\n      },\n    }),\n    [sizeProp, getElementSize, sizeAttribute]\n  );\n\n  const draggableCoreOptions = useMemo(\n    () => ({\n      onMouseDown: e => {\n        // In some cases this handler is executed twice during the same resize operation - first time\n        // with `touchstart` event and second time with `mousedown` (probably emulated by browser).\n        // Therefore we set the flag only when we receive `touchstart` because in ths case it's definitely\n        // mobile browser (desktop browsers will also send `mousedown` but never `touchstart`).\n        if (e.type === \"touchstart\") {\n          wasUsingTouchEventsRef.current = true;\n        }\n\n        // use element's size as initial value (it will also check constraints set in CSS)\n        // updated here and in `onResizeStart` handler to ensure that right value will be used\n        setSize(getElementSize());\n      },\n    }),\n    [getElementSize]\n  );\n\n  if (!children) {\n    return null;\n  }\n\n  children = React.createElement(children.type, { ...children.props, ref: elementRef });\n\n  return (\n    <ReactResizable\n      className=\"resizable-component\"\n      axis={direction === \"horizontal\" ? \"x\" : \"y\"}\n      resizeHandles={[direction === \"horizontal\" ? \"e\" : \"s\"]}\n      handle={resizeHandle}\n      width={direction === \"horizontal\" ? size : 0}\n      height={direction === \"vertical\" ? size : 0}\n      minConstraints={[0, 0]}\n      {...resizeEventHandlers}\n      draggableOpts={draggableCoreOptions}>\n      {children}\n    </ReactResizable>\n  );\n}\n\nResizable.propTypes = {\n  direction: PropTypes.oneOf([\"horizontal\", \"vertical\"]),\n  sizeAttribute: PropTypes.string,\n  toggleShortcut: PropTypes.string,\n  children: PropTypes.element,\n};\n\nResizable.defaultProps = {\n  direction: \"horizontal\",\n  sizeAttribute: null, // \"width\"/\"height\" - depending on `direction`\n  toggleShortcut: null,\n  children: null,\n};\n","import { trim } from \"lodash\";\nimport sqlFormatter from \"sql-formatter\";\n\ninterface QueryFormatterMap {\n  [syntax: string]: (queryText: string) => string;\n}\n\nconst QueryFormatters: QueryFormatterMap = {\n  sql: queryText => sqlFormatter.format(trim(queryText)),\n  json: queryText => JSON.stringify(JSON.parse(queryText), null, 4),\n};\n\nexport function isFormatQueryAvailable(syntax: string) {\n  return syntax in QueryFormatters;\n}\n\nexport function formatQuery(queryText: string, syntax: string) {\n  if (!isFormatQueryAvailable(syntax)) {\n    return queryText;\n  }\n  const formatter = QueryFormatters[syntax];\n  return formatter(queryText);\n}\n","import { isNil, isEmpty } from \"lodash\";\nimport { useMemo } from \"react\";\nimport { currentUser } from \"@/services/auth\";\nimport { policy } from \"@/services/policy\";\n\nexport default function useQueryFlags(query, dataSource = null) {\n  dataSource = dataSource || { view_only: true };\n\n  return useMemo(\n    () => ({\n      // state flags\n      isNew: isNil(query.id),\n      isDraft: query.is_draft,\n      isArchived: query.is_archived,\n\n      // permissions flags\n      canCreate: currentUser.hasPermission(\"create_query\"),\n      canView: currentUser.hasPermission(\"view_query\"),\n      canEdit: currentUser.hasPermission(\"edit_query\") && policy.canEdit(query),\n      canViewSource: currentUser.hasPermission(\"view_source\"),\n      canExecute:\n        !isEmpty(query.query) &&\n        policy.canRun(query) &&\n        (query.is_safe || (currentUser.hasPermission(\"execute_query\") && !dataSource.view_only)),\n      canFork: currentUser.hasPermission(\"edit_query\") && !dataSource.view_only,\n      canSchedule: currentUser.hasPermission(\"schedule_query\"),\n    }),\n    [query, dataSource.view_only]\n  );\n}\n","import { extend } from \"lodash\";\nimport React, { useCallback } from \"react\";\nimport Modal from \"antd/lib/modal\";\nimport { Query } from \"@/services/query\";\nimport notification from \"@/services/notification\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\n\nfunction confirmArchive() {\n  return new Promise((resolve, reject) => {\n    Modal.confirm({\n      title: window.W_L.archived_search,\n      content: (\n        <React.Fragment>\n          <div className=\"m-b-5\">{window.W_L.archived_confirm}</div>\n          <div>{window.W_L.archived_tip}</div>\n        </React.Fragment>\n      ),\n      okText: window.W_L.ok_text,\n      cancelText: window.W_L.cancel,\n      okType: \"danger\",\n      onOk: () => {\n        resolve();\n      },\n      onCancel: () => {\n        reject();\n      },\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  });\n}\n\nfunction doArchiveQuery(query) {\n  return Query.delete({ id: query.id })\n    .then(() => {\n      return extend(query.clone(), { is_archived: true, schedule: null });\n    })\n    .catch(error => {\n      notification.error(window.W_L.archived_failed);\n      return Promise.reject(error);\n    });\n}\n\nexport default function useArchiveQuery(query, onChange) {\n  const handleChange = useImmutableCallback(onChange);\n\n  return useCallback(() => {\n    confirmArchive()\n      .then(() => doArchiveQuery(query))\n      .then(handleChange);\n  }, [query, handleChange]);\n}\n","import { isNil, isObject, extend, keys, map, omit, pick, uniq, get } from \"lodash\";\nimport React, { useCallback } from \"react\";\nimport Modal from \"antd/lib/modal\";\nimport { Query } from \"@/services/query\";\nimport notification from \"@/services/notification\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\nimport { policy } from \"@/services/policy\";\n\nclass SaveQueryError extends Error {\n  constructor(message, detailedMessage = null) {\n    super(message);\n    this.detailedMessage = detailedMessage;\n  }\n}\n\nclass SaveQueryConflictError extends SaveQueryError {\n  constructor() {\n    super(\n      window.W_L.change_not_save,\n      <React.Fragment>\n        <div className=\"m-b-5\">{window.W_L.query_has_change}</div>\n        <div>{window.W_L.self_copy_save_and_reload}</div>\n      </React.Fragment>\n    );\n  }\n}\n\nfunction confirmOverwrite() {\n  return new Promise((resolve, reject) => {\n    Modal.confirm({\n      title: window.W_L.overwrite_query,\n      content: (\n        <React.Fragment>\n          <div className=\"m-b-5\">{window.W_L.query_has_change}</div>\n          <div>{window.W_L.overwrite_query_confirm}</div>\n        </React.Fragment>\n      ),\n      okText: window.W_L.ok_text,\n      cancelText:window.W_L.cancel,\n      okType: \"danger\",\n      onOk: () => {\n        resolve();\n      },\n      onCancel: () => {\n        reject();\n      },\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  });\n}\n\nfunction doSaveQuery(data, { canOverwrite = false } = {}) {\n  // omit parameter properties that don't need to be stored\n  if (isObject(data.options) && data.options.parameters) {\n    data.options = {\n      ...data.options,\n      parameters: map(data.options.parameters, p => p.toSaveableObject()),\n    };\n  }\n\n  return Query.save(data).catch(error => {\n    if (get(error, \"response.status\") === 409) {\n      if (canOverwrite) {\n        return confirmOverwrite()\n          .then(() => Query.save(omit(data, [\"version\"])))\n          .catch(() => Promise.reject(new SaveQueryConflictError()));\n      }\n      return Promise.reject(new SaveQueryConflictError());\n    }\n    return Promise.reject(new SaveQueryError(window.W_L.save_failed));\n  });\n}\n\nexport default function useUpdateQuery(query, onChange) {\n  const handleChange = useImmutableCallback(onChange);\n\n  return useCallback(\n    (data = null, { successMessage = window.W_L.save_success } = {}) => { \n      if (isObject(data)) {\n        // Don't save new query with partial data\n        if (query.isNew()) {\n          handleChange(extend(query.clone(), data));\n          return;\n        }\n        data = { ...data, id: query.id, version: query.version };\n      } else {\n        data = pick(query, [\n          \"id\",\n          \"version\",\n          \"schedule\",\n          \"query\",\n          \"description\",\n          \"name\",\n          \"data_source_id\",\n          \"options\",\n          \"latest_query_data_id\",\n          \"is_draft\",\n          \"tags\",\n        ]);\n      }\n\n      return doSaveQuery(data, { canOverwrite: policy.canEdit(query) })\n        .then(updatedQuery => {\n          if (!isNil(successMessage)) {\n            notification.success(successMessage);\n          }\n          handleChange(\n            extend(\n              query.clone(),\n              // if server returned completely new object (currently possible only when saving new query) -\n              // update all fields; otherwise pick only changed fields\n              updatedQuery.id !== query.id ? updatedQuery : pick(updatedQuery, uniq([\"id\", \"version\", ...keys(data)]))\n            )\n          );\n        })\n        .catch(error => {\n          const notificationOptions = {};\n          if (error instanceof SaveQueryConflictError) {\n            notificationOptions.duration = null;\n          }\n          notification.error(error.message, error.detailedMessage, notificationOptions);\n        });\n    },\n    [query, handleChange]\n  );\n}\n","import { noop, extend, pick } from \"lodash\";\nimport { useCallback, useState } from \"react\";\nimport url from \"url\";\nimport qs from \"query-string\";\nimport { Query } from \"@/services/query\";\n\nfunction keepCurrentUrlParams(targetUrl) {\n  const currentUrlParams = qs.parse(window.location.search);\n  targetUrl = url.parse(targetUrl);\n  const targetUrlParams = qs.parse(targetUrl.search);\n  return url.format(\n    extend(pick(targetUrl, [\"protocol\", \"auth\", \"host\", \"pathname\", \"hash\"]), {\n      search: qs.stringify(extend(currentUrlParams, targetUrlParams)),\n    })\n  );\n}\n\nexport default function useDuplicateQuery(query) {\n  const [isDuplicating, setIsDuplicating] = useState(false);\n\n  const duplicateQuery = useCallback(() => {\n    // To prevent opening the same tab, name must be unique for each browser\n    const tabName = `duplicatedQueryTab/${Math.random().toString()}`;\n\n    // We should open tab here because this moment is a part of user interaction;\n    // later browser will block such attempts\n    const tab = window.open(\"\", tabName);\n\n    setIsDuplicating(true);\n    Query.fork({ id: query.id })\n      .then(newQuery => {\n        tab.location = keepCurrentUrlParams(newQuery.getUrl(true));\n      })\n      .finally(() => {\n        setIsDuplicating(false);\n      });\n  }, [query.id]);\n\n  return [isDuplicating, isDuplicating ? noop : duplicateQuery];\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Tooltip from \"@/components/Tooltip\";\nimport CopyOutlinedIcon from \"@ant-design/icons/CopyOutlined\";\nimport \"./CodeBlock.less\";\n\nexport default class CodeBlock extends React.Component {\n  static propTypes = {\n    copyable: PropTypes.bool,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    copyable: false,\n    children: null,\n  };\n\n  state = { copied: null };\n\n  constructor(props) {\n    super(props);\n    this.ref = React.createRef();\n    this.copyFeatureEnabled = props.copyable && document.queryCommandSupported(\"copy\");\n    this.resetCopyState = null;\n  }\n\n  componentWillUnmount() {\n    if (this.resetCopyState) {\n      clearTimeout(this.resetCopyState);\n    }\n  }\n\n  copy = () => {\n    // select text\n    window.getSelection().selectAllChildren(this.ref.current);\n\n    // copy\n    try {\n      const success = document.execCommand(\"copy\");\n      if (!success) {\n        throw new Error();\n      }\n      this.setState({ copied: window.W_L.copy_success });\n    } catch (err) {\n      this.setState({\n        copied: window.W_L.copy_failed,\n      });\n    }\n\n    // reset selection\n    window.getSelection().removeAllRanges();\n\n    // reset tooltip\n    this.resetCopyState = setTimeout(() => this.setState({ copied: null }), 2000);\n  };\n\n  render() {\n    const { copyable, children, ...props } = this.props;\n\n    const copyButton = (\n      <Tooltip title={this.state.copied || window.W_L.copy}>\n        <Button icon={<CopyOutlinedIcon />} type=\"dashed\" size=\"small\" onClick={this.copy} />\n      </Tooltip>\n    );\n\n    return (\n      <div className=\"code-block\">\n        <code {...props} ref={this.ref}>\n          {children}\n        </code>\n        {this.copyFeatureEnabled && copyButton}\n      </div>\n    );\n  }\n}\n","import { extend } from \"lodash\";\nimport React, { useMemo, useState, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport Button from \"antd/lib/button\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport CodeBlock from \"@/components/CodeBlock\";\nimport { axios } from \"@/services/axios\";\nimport { clientConfig } from \"@/services/auth\";\nimport notification from \"@/services/notification\";\nimport { useUniqueId } from \"@/lib/hooks/useUniqueId\";\n\nimport \"./index.less\";\nimport { policy } from \"@/services/policy\";\n\nfunction ApiKeyDialog({ dialog, ...props }) {\n  const [query, setQuery] = useState(props.query);\n  const [updatingApiKey, setUpdatingApiKey] = useState(false);\n\n  const regenerateQueryApiKey = useCallback(() => {\n    setUpdatingApiKey(true);\n    axios\n      .post(`api/queries/${query.id}/regenerate_api_key`)\n      .then(data => {\n        setUpdatingApiKey(false);\n        setQuery(extend(query.clone(), { api_key: data.api_key }));\n      })\n      .catch(() => {\n        setUpdatingApiKey(false);\n        notification.error(window.W_L.fail_update_api_key);\n      });\n  }, [query]);\n\n  const { csvUrl, jsonUrl } = useMemo(\n    () => ({\n      csvUrl: `${clientConfig.basePath}api/queries/${query.id}/results.csv?api_key=${query.api_key}`,\n      jsonUrl: `${clientConfig.basePath}api/queries/${query.id}/results.json?api_key=${query.api_key}`,\n    }),\n    [query.id, query.api_key]\n  );\n\n  const csvResultsLabelId = useUniqueId(\"csv-results-label\");\n  const jsonResultsLabelId = useUniqueId(\"json-results-label\");\n\n  return (\n    <Modal {...dialog.props} width={600} footer={<Button onClick={() => dialog.close(query)}>{window.W_L.close}</Button>}>\n      <div className=\"query-api-key-dialog-wrapper\">\n        <h5>API Key</h5>\n        <div className=\"m-b-20\">\n          <Input.Group compact>\n            <Input readOnly value={query.api_key} aria-label=\"Query API Key\" />\n            {policy.canEdit(query) && (\n              <Button disabled={updatingApiKey} loading={updatingApiKey} onClick={regenerateQueryApiKey}>\n                {window.W_L.re_generate}\n              </Button>\n            )}\n          </Input.Group>\n        </div>\n\n        <h5>{window.W_L.api_example}：</h5>\n        <div className=\"m-b-10\">\n          <span id={csvResultsLabelId}>{window.W_L.result_as_csv}：</span>\n          <CodeBlock aria-labelledby={csvResultsLabelId} copyable>\n            {csvUrl}\n          </CodeBlock>\n        </div>\n        <div>\n          <span id={jsonResultsLabelId}>{window.W_L.result_as_json}：</span>\n          <CodeBlock aria-labelledby={jsonResultsLabelId} copyable>\n            {jsonUrl}\n          </CodeBlock>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nApiKeyDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  query: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    api_key: PropTypes.string,\n    can_edit: PropTypes.bool,\n  }).isRequired,\n};\n\nexport default wrapDialog(ApiKeyDialog);\n","import { extend, map, filter, reduce } from \"lodash\";\nimport React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Menu from \"antd/lib/menu\";\nimport EllipsisOutlinedIcon from \"@ant-design/icons/EllipsisOutlined\";\nimport useMedia from \"use-media\";\nimport Link from \"@/components/Link\";\nimport EditInPlace from \"@/components/EditInPlace\";\nimport FavoritesControl from \"@/components/FavoritesControl\";\nimport { QueryTagsControl } from \"@/components/tags-control/TagsControl\";\nimport getTags from \"@/services/getTags\";\nimport { clientConfig } from \"@/services/auth\";\nimport useQueryFlags from \"../hooks/useQueryFlags\";\nimport useArchiveQuery from \"../hooks/useArchiveQuery\";\nimport usePublishQuery from \"../hooks/usePublishQuery\";\nimport useUnpublishQuery from \"../hooks/useUnpublishQuery\";\nimport useUpdateQueryTags from \"../hooks/useUpdateQueryTags\";\nimport useRenameQuery from \"../hooks/useRenameQuery\";\nimport useDuplicateQuery from \"../hooks/useDuplicateQuery\";\nimport useApiKeyDialog from \"../hooks/useApiKeyDialog\";\nimport usePermissionsEditorDialog from \"../hooks/usePermissionsEditorDialog\";\n\nimport \"./QueryPageHeader.less\";\n\nfunction getQueryTags() {\n  return getTags(\"api/queries/tags\").then(tags => map(tags, t => t.name));\n}\n\nfunction createMenu(menu) {\n  const handlers = {};\n\n  const groups = map(menu, group =>\n    filter(\n      map(group, (props, key) => {\n        props = extend({ isAvailable: true, isEnabled: true, onClick: () => {} }, props);\n        if (props.isAvailable) {\n          handlers[key] = props.onClick;\n          return (\n            <Menu.Item key={key} disabled={!props.isEnabled}>\n              {props.title}\n            </Menu.Item>\n          );\n        }\n        return null;\n      })\n    )\n  );\n\n  return (\n    <Menu onClick={({ key }) => handlers[key]()}>\n      {reduce(\n        filter(groups, group => group.length > 0),\n        (result, items, key) => {\n          const divider = result.length > 0 ? <Menu.Divider key={`divider${key}`} /> : null;\n          return [...result, divider, ...items];\n        },\n        []\n      )}\n    </Menu>\n  );\n}\n\nexport default function QueryPageHeader({\n  query,\n  dataSource,\n  sourceMode,\n  selectedVisualization,\n  headerExtra,\n  tagsExtra,\n  onChange,\n}) {\n  const isDesktop = useMedia({ minWidth: 768 });\n  const queryFlags = useQueryFlags(query, dataSource);\n  const updateName = useRenameQuery(query, onChange);\n  const updateTags = useUpdateQueryTags(query, onChange);\n  const archiveQuery = useArchiveQuery(query, onChange);\n  const publishQuery = usePublishQuery(query, onChange);\n  const unpublishQuery = useUnpublishQuery(query, onChange);\n  const [isDuplicating, duplicateQuery] = useDuplicateQuery(query);\n  const openApiKeyDialog = useApiKeyDialog(query, onChange);\n  const openPermissionsEditorDialog = usePermissionsEditorDialog(query);\n\n  const moreActionsMenu = useMemo(\n    () =>\n      createMenu([\n        {\n          fork: {\n            isEnabled: !queryFlags.isNew && queryFlags.canFork && !isDuplicating,\n            title: (\n              <React.Fragment>\n                {window.W_L.copy} <i className=\"fa fa-external-link m-l-5\" aria-hidden=\"true\" />\n                <span className=\"sr-only\">(opens in a new tab)</span>\n              </React.Fragment>\n            ),\n            onClick: duplicateQuery,\n          },\n        },\n        {\n          archive: {\n            isAvailable: !queryFlags.isNew && queryFlags.canEdit && !queryFlags.isArchived,\n            title: window.W_L.archived,\n            onClick: archiveQuery,\n          },\n          managePermissions: {\n            isAvailable:\n              !queryFlags.isNew && queryFlags.canEdit && !queryFlags.isArchived && clientConfig.showPermissionsControl,\n            title: window.W_L.mange_permissions,\n            onClick: openPermissionsEditorDialog,\n          },\n          publish: {\n            isAvailable:\n              !isDesktop && queryFlags.isDraft && !queryFlags.isArchived && !queryFlags.isNew && queryFlags.canEdit,\n            title: window.W_L.publish,\n            onClick: publishQuery,\n          },\n          unpublish: {\n            isAvailable: !clientConfig.disablePublish && !queryFlags.isNew && queryFlags.canEdit && !queryFlags.isDraft,\n            title: window.W_L.draft,\n            onClick: unpublishQuery,\n          },\n        },\n        {\n          showAPIKey: {\n            isAvailable: !clientConfig.disablePublicUrls && !queryFlags.isNew,\n            title: window.W_L.show + \" API Key\",\n            onClick: openApiKeyDialog,\n          },\n        },\n      ]),\n    [\n      queryFlags.isNew,\n      queryFlags.canFork,\n      queryFlags.canEdit,\n      queryFlags.isArchived,\n      queryFlags.isDraft,\n      isDuplicating,\n      duplicateQuery,\n      archiveQuery,\n      openPermissionsEditorDialog,\n      isDesktop,\n      publishQuery,\n      unpublishQuery,\n      openApiKeyDialog,\n    ]\n  );\n\n  return (\n    <div className=\"query-page-header\">\n      <div className=\"title-with-tags\">\n        <div className=\"page-title\">\n          <div className=\"d-flex align-items-center\">\n            {!queryFlags.isNew && <FavoritesControl item={query} />}\n            <h3>\n              <EditInPlace isEditable={queryFlags.canEdit} onDone={updateName} ignoreBlanks value={query.name} />\n            </h3>\n          </div>\n        </div>\n        <div className=\"query-tags\">\n          <QueryTagsControl\n            tags={query.tags}\n            isDraft={queryFlags.isDraft}\n            isArchived={queryFlags.isArchived}\n            canEdit={queryFlags.canEdit}\n            getAvailableTags={getQueryTags}\n            onEdit={updateTags}\n            tagsExtra={tagsExtra}\n          />\n        </div>\n      </div>\n      <div className=\"header-actions\">\n        {headerExtra}\n        {isDesktop && queryFlags.isDraft && !queryFlags.isArchived && !queryFlags.isNew && queryFlags.canEdit && (\n          <Button className=\"m-r-5\" onClick={publishQuery}>\n            <i className=\"fa fa-paper-plane m-r-5\" aria-hidden=\"true\" /> {window.W_L.publish}\n          </Button>\n        )}\n\n        {!queryFlags.isNew && queryFlags.canViewSource && (\n          <span>\n            {!sourceMode && (\n              <Link.Button className=\"m-r-5\" href={query.getUrl(true, selectedVisualization)}>\n                <i className=\"fa fa-pencil-square-o\" aria-hidden=\"true\" />\n                <span className=\"m-l-5\">{window.W_L.edit_source}</span>\n              </Link.Button>\n            )}\n            {sourceMode && (\n              <Link.Button\n                className=\"m-r-5\"\n                href={query.getUrl(false, selectedVisualization)}\n                data-test=\"QueryPageShowResultOnly\">\n                <i className=\"fa fa-table\" aria-hidden=\"true\" />\n                <span className=\"m-l-5\">{window.W_L.show_result_only}</span>\n              </Link.Button>\n            )}\n          </span>\n        )}\n\n        {!queryFlags.isNew && (\n          <Dropdown overlay={moreActionsMenu} trigger={[\"click\"]}>\n            <Button data-test=\"QueryPageHeaderMoreButton\" aria-label=\"More actions\">\n              <EllipsisOutlinedIcon rotate={90} aria-hidden=\"true\" />\n            </Button>\n          </Dropdown>\n        )}\n      </div>\n    </div>\n  );\n}\n\nQueryPageHeader.propTypes = {\n  query: PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    name: PropTypes.string,\n    tags: PropTypes.arrayOf(PropTypes.string),\n  }).isRequired,\n  dataSource: PropTypes.object,\n  sourceMode: PropTypes.bool,\n  selectedVisualization: PropTypes.number,\n  headerExtra: PropTypes.node,\n  tagsExtra: PropTypes.node,\n  onChange: PropTypes.func,\n};\n\nQueryPageHeader.defaultProps = {\n  dataSource: null,\n  sourceMode: false,\n  selectedVisualization: null,\n  headerExtra: null,\n  tagsExtra: null,\n  onChange: () => {},\n};\n","import { useCallback } from \"react\";\nimport useUpdateQuery from \"./useUpdateQuery\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { clientConfig } from \"@/services/auth\";\n\nexport default function useRenameQuery(query, onChange) {\n  const updateQuery = useUpdateQuery(query, onChange);\n\n  return useCallback(\n    name => {\n      recordEvent(\"edit_name\", \"query\", query.id);\n      const changes = { name };\n      const options = {};\n\n      if (query.is_draft && clientConfig.autoPublishNamedQueries && name !== window.W_L.new_query) {\n        changes.is_draft = false;\n        options.successMessage = window.W_L.query_save_publish_success;\n      }\n\n      updateQuery(changes, options);\n    },\n    [query.id, query.is_draft, updateQuery]\n  );\n}\n","import { useCallback } from \"react\";\nimport useUpdateQuery from \"./useUpdateQuery\";\nimport recordEvent from \"@/services/recordEvent\";\n\nexport default function useUpdateQueryTags(query, onChange) {\n  const updateQuery = useUpdateQuery(query, onChange);\n\n  return useCallback(\n    tags => {\n      recordEvent(\"edit_tags\", \"query\", query.id);\n      updateQuery({ tags });\n    },\n    [query.id, updateQuery]\n  );\n}\n","import { useCallback } from \"react\";\nimport useUpdateQuery from \"./useUpdateQuery\";\nimport recordEvent from \"@/services/recordEvent\";\n\nexport default function usePublishQuery(query, onChange) {\n  const updateQuery = useUpdateQuery(query, onChange);\n\n  return useCallback(() => {\n    recordEvent(\"toggle_published\", \"query\", query.id);\n    updateQuery({ is_draft: false });\n  }, [query.id, updateQuery]);\n}\n","import { useCallback } from \"react\";\nimport useUpdateQuery from \"./useUpdateQuery\";\nimport recordEvent from \"@/services/recordEvent\";\n\nexport default function useUnpublishQuery(query, onChange) {\n  const updateQuery = useUpdateQuery(query, onChange);\n\n  return useCallback(() => {\n    recordEvent(\"toggle_published\", \"query\", query.id);\n    updateQuery({ is_draft: true });\n  }, [query.id, updateQuery]);\n}\n","import { useCallback } from \"react\";\nimport ApiKeyDialog from \"@/components/queries/ApiKeyDialog\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\n\nexport default function useApiKeyDialog(query, onChange) {\n  const handleChange = useImmutableCallback(onChange);\n\n  return useCallback(() => {\n    ApiKeyDialog.showModal({ query }).onClose(handleChange);\n  }, [query, handleChange]);\n}\n","import { useCallback } from \"react\";\nimport PermissionsEditorDialog from \"@/components/PermissionsEditorDialog\";\n\nexport default function usePermissionsEditorDialog(query) {\n  return useCallback(() => {\n    PermissionsEditorDialog.showModal({\n      aclUrl: `api/queries/${query.id}/acl`,\n      context: \"query\",\n      author: query.user,\n    });\n  }, [query.id, query.user]);\n}\n","import { isFunction, has } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { Moment } from \"@/components/proptypes\";\nimport TimeAgo from \"@/components/TimeAgo\";\nimport SchedulePhrase from \"@/components/queries/SchedulePhrase\";\nimport { IMG_ROOT } from \"@/services/data-source\";\n\nimport \"./QueryMetadata.less\";\n\nexport default function QueryMetadata({ query, dataSource, layout, onEditSchedule }) {\n  return (\n    <div className={`query-metadata query-metadata-${layout}`}>\n      <div className=\"query-metadata-item\">\n        <img className=\"profile__image_thumb\" src={query.user.profile_image_url} alt=\"Avatar\" />\n        <div className=\"query-metadata-property\">\n          <strong className={cx(\"query-metadata-label\", { \"text-muted\": query.user.is_disabled })}>\n            {query.user.name}\n          </strong>\n          <span className=\"query-metadata-value\">\n            {window.W_L.create_time}{\" \"}\n            <strong>\n              <TimeAgo date={query.created_at} />\n            </strong>\n          </span>\n        </div>\n      </div>\n      <div className=\"query-metadata-item\">\n        <img className=\"profile__image_thumb\" src={query.last_modified_by.profile_image_url} alt=\"Avatar\" />\n        <div className=\"query-metadata-property\">\n          <strong className={cx(\"query-metadata-label\", { \"text-muted\": query.last_modified_by.is_disabled })}>\n            {query.last_modified_by.name}\n          </strong>\n          <span className=\"query-metadata-value\">\n            {window.W_L.update_time}{\" \"}\n            <strong>\n              <TimeAgo date={query.updated_at} />\n            </strong>\n          </span>\n        </div>\n      </div>\n      <div className=\"query-metadata-space\" />\n      {has(dataSource, \"name\") && has(dataSource, \"type\") && (\n        <div className=\"query-metadata-item\">\n          {window.W_L.data_source}：\n          <img src={`${IMG_ROOT}/${dataSource.type}.png`} width=\"20\" alt={dataSource.type} />\n          <div className=\"query-metadata-property\">\n            <div className=\"query-metadata-label\">{dataSource.name}</div>\n          </div>\n        </div>\n      )}\n      <div className=\"query-metadata-item\">\n        <div className=\"query-metadata-property\">\n          <span className=\"query-metadata-label\">\n            <span className=\"zmdi zmdi-refresh m-r-5\" />\n            {window.W_L.auto_flush}\n          </span>\n          <span className=\"query-metadata-value\">\n            <SchedulePhrase\n              isLink={isFunction(onEditSchedule)}\n              isNew={query.isNew()}\n              schedule={query.schedule}\n              onClick={onEditSchedule}\n            />\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nQueryMetadata.propTypes = {\n  layout: PropTypes.oneOf([\"table\", \"horizontal\"]),\n  query: PropTypes.shape({\n    created_at: PropTypes.oneOfType([PropTypes.string, Moment]).isRequired,\n    updated_at: PropTypes.oneOfType([PropTypes.string, Moment]).isRequired,\n    user: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      profile_image_url: PropTypes.string.isRequired,\n      is_disabled: PropTypes.bool,\n    }).isRequired,\n    last_modified_by: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      profile_image_url: PropTypes.string.isRequired,\n      is_disabled: PropTypes.bool,\n    }).isRequired,\n    schedule: PropTypes.object,\n  }).isRequired,\n  dataSource: PropTypes.shape({\n    type: PropTypes.string,\n    name: PropTypes.string,\n  }),\n  onEditSchedule: PropTypes.func,\n};\n\nQueryMetadata.defaultProps = {\n  layout: \"table\",\n  dataSource: null,\n  onEditSchedule: null,\n};\n","import React, { useState, useMemo, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { find, orderBy } from \"lodash\";\nimport useMedia from \"use-media\";\nimport Tabs from \"antd/lib/tabs\";\nimport Button from \"antd/lib/button\";\nimport Modal from \"antd/lib/modal\";\nimport VisualizationRenderer from \"@/components/visualizations/VisualizationRenderer\";\nimport PlainButton from \"@/components/PlainButton\";\n\nimport \"./QueryVisualizationTabs.less\";\n\nconst { TabPane } = Tabs;\n\nfunction EmptyState({ title, message, refreshButton }) {\n  return (\n    <div className=\"query-results-empty-state\">\n      <div className=\"empty-state-content\">\n        <div>\n          <img src=\"static/images/illustrations/no-query-results.svg\" alt={window.W_L.find_nothing} />\n        </div>\n        <h3>{title}</h3>\n        <div className=\"m-b-20\">{message}</div>\n        {refreshButton}\n      </div>\n    </div>\n  );\n}\n\nEmptyState.propTypes = {\n  title: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n  refreshButton: PropTypes.node,\n};\n\nEmptyState.defaultProps = {\n  refreshButton: null,\n};\n\nfunction TabWithDeleteButton({ visualizationName, canDelete, onDelete, ...props }) {\n  const handleDelete = useCallback(\n    e => {\n      e.stopPropagation();\n      Modal.confirm({\n        title: window.W_L.delete_view,\n        content: window.W_L.delete_view_confirm,\n        okText: window.W_L.ok_text,\n        cancelText: window.W_L.cancel,\n        okType: \"danger\",\n        onOk: onDelete,\n        maskClosable: true,\n        autoFocusButton: null,\n      });\n    },\n    [onDelete]\n  );\n\n  return (\n    <span {...props}>\n      {visualizationName}\n      {canDelete && (\n        <PlainButton className=\"delete-visualization-button\" onClick={handleDelete} aria-label=\"Close\" title=\"Close\">\n          <i className=\"zmdi zmdi-close\" aria-hidden=\"true\" />\n        </PlainButton>\n      )}\n    </span>\n  );\n}\n\nTabWithDeleteButton.propTypes = {\n  visualizationName: PropTypes.string.isRequired,\n  canDelete: PropTypes.bool,\n  onDelete: PropTypes.func,\n};\nTabWithDeleteButton.defaultProps = { canDelete: false, onDelete: () => {} };\n\nconst defaultVisualizations = [\n  {\n    type: \"TABLE\",\n    name: window.W_L.table,\n    id: null,\n    options: {},\n  },\n];\n\nexport default function QueryVisualizationTabs({\n  queryResult,\n  selectedTab,\n  showNewVisualizationButton,\n  canDeleteVisualizations,\n  onChangeTab,\n  onAddVisualization,\n  onDeleteVisualization,\n  refreshButton,\n  canRefresh,\n  ...props\n}) {\n  const visualizations = useMemo(\n    () => (props.visualizations.length > 0 ? props.visualizations : defaultVisualizations),\n    [props.visualizations]\n  );\n\n  const tabsProps = {};\n  if (find(visualizations, { id: selectedTab })) {\n    tabsProps.activeKey = `${selectedTab}`;\n  }\n\n  if (showNewVisualizationButton) {\n    tabsProps.tabBarExtraContent = (\n      <Button\n        className=\"add-visualization-button\"\n        data-test=\"NewVisualization\"\n        type=\"link\"\n        onClick={() => onAddVisualization()}>\n        <i className=\"fa fa-plus\" aria-hidden=\"true\" />\n        <span className=\"m-l-5 hidden-xs\">{window.W_L.add_view}</span>\n      </Button>\n    );\n  }\n\n  const orderedVisualizations = useMemo(() => orderBy(visualizations, [\"id\"]), [visualizations]);\n  const isFirstVisualization = useCallback(visId => visId === orderedVisualizations[0].id, [orderedVisualizations]);\n  const isMobile = useMedia({ maxWidth: 768 });\n\n  const [filters, setFilters] = useState([]);\n\n  return (\n    <Tabs\n      {...tabsProps}\n      type=\"card\"\n      className={cx(\"query-visualization-tabs card-style\")}\n      data-test=\"QueryPageVisualizationTabs\"\n      animated={false}\n      tabBarGutter={0}\n      onChange={activeKey => onChangeTab(+activeKey)}\n      destroyInactiveTabPane>\n      {orderedVisualizations.map(visualization => (\n        <TabPane\n          key={`${visualization.id}`}\n          tab={\n            <TabWithDeleteButton\n              data-test={`QueryPageVisualizationTab${visualization.id}`}\n              canDelete={!isMobile && canDeleteVisualizations && !isFirstVisualization(visualization.id)}\n              visualizationName={visualization.name}\n              onDelete={() => onDeleteVisualization(visualization.id)}\n            />\n          }>\n          {queryResult ? (\n            <VisualizationRenderer\n              visualization={visualization}\n              queryResult={queryResult}\n              context=\"query\"\n              filters={filters}\n              onFiltersChange={setFilters}\n            />\n          ) : (\n            <EmptyState\n              title={window.W_L.find_nothing}\n              message={\n                canRefresh\n                  ? window.W_L.please_exec_flush\n\t\t\t\t\t:window.W_L.no_permission_exec\n              }\n              refreshButton={refreshButton}\n            />\n          )}\n        </TabPane>\n      ))}\n    </Tabs>\n  );\n}\n\nQueryVisualizationTabs.propTypes = {\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  visualizations: PropTypes.arrayOf(PropTypes.object),\n  selectedTab: PropTypes.number,\n  showNewVisualizationButton: PropTypes.bool,\n  canDeleteVisualizations: PropTypes.bool,\n  onChangeTab: PropTypes.func,\n  onAddVisualization: PropTypes.func,\n  onDeleteVisualization: PropTypes.func,\n  refreshButton: PropTypes.node,\n  canRefresh: PropTypes.bool,\n};\n\nQueryVisualizationTabs.defaultProps = {\n  queryResult: null,\n  visualizations: [],\n  selectedTab: null,\n  showNewVisualizationButton: false,\n  canDeleteVisualizations: false,\n  onChangeTab: () => {},\n  onAddVisualization: () => {},\n  onDeleteVisualization: () => {},\n  refreshButton: null,\n  canRefresh: true,\n};\n","import { includes } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Alert from \"antd/lib/alert\";\nimport Button from \"antd/lib/button\";\nimport Timer from \"@/components/Timer\";\n\nexport default function QueryExecutionStatus({ status, updatedAt, error, isCancelling, onCancel }) {\n  const alertType = status === \"failed\" ? \"error\" : \"info\";\n  const showTimer = status !== \"failed\" && updatedAt;\n  const isCancelButtonAvailable = includes([\"waiting\", \"processing\"], status);\n  let message = isCancelling ? <React.Fragment>Cancelling&hellip;</React.Fragment> : null;\n\n  switch (status) {\n    case \"waiting\":\n      if (!isCancelling) {\n        message = <React.Fragment>{window.W_L.query_queue}&hellip;</React.Fragment>;\n      }\n      break;\n    case \"processing\":\n      if (!isCancelling) {\n        message = <React.Fragment>{window.W_L.exec_query}&hellip;</React.Fragment>;\n      }\n      break;\n    case \"loading-result\":\n      message = <React.Fragment>{window.W_L.loading_query_result}&hellip;</React.Fragment>;\n      break;\n    case \"failed\":\n      message = (\n        <React.Fragment>\n          {window.W_L.query_run_error}：<strong>{error}</strong>\n        </React.Fragment>\n      );\n      break;\n    // no default\n  }\n\n  return (\n    <Alert\n      data-test=\"QueryExecutionStatus\"\n      type={alertType}\n      message={\n        <div className=\"d-flex align-items-center\">\n          <div className=\"flex-fill p-t-5 p-b-5\">\n            {message} {showTimer && <Timer from={updatedAt} />}\n          </div>\n          <div>\n            {isCancelButtonAvailable && (\n              <Button className=\"m-l-10\" type=\"primary\" size=\"small\" disabled={isCancelling} onClick={onCancel}>\n                {window.W_L.cancel}\n              </Button>\n            )}\n          </div>\n        </div>\n      }\n    />\n  );\n}\n\nQueryExecutionStatus.propTypes = {\n  status: PropTypes.string,\n  updatedAt: PropTypes.any,\n  error: PropTypes.string,\n  isCancelling: PropTypes.bool,\n  onCancel: PropTypes.func,\n};\n\nQueryExecutionStatus.defaultProps = {\n  status: \"waiting\",\n  updatedAt: null,\n  error: null,\n  isCancelling: true,\n  onCancel: () => {},\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Card from \"antd/lib/card\";\nimport WarningFilledIcon from \"@ant-design/icons/WarningFilled\";\nimport Typography from \"antd/lib/typography\";\nimport Link from \"@/components/Link\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { currentUser } from \"@/services/auth\";\n\nimport useQueryFlags from \"../hooks/useQueryFlags\";\nimport \"./QuerySourceAlerts.less\";\n\nexport default function QuerySourceAlerts({ query, dataSourcesAvailable }) {\n  const queryFlags = useQueryFlags(query); // we don't use flags that depend on data source\n\n  let message = null;\n  if (queryFlags.isNew && !queryFlags.canCreate) {\n    message = (\n      <React.Fragment>\n        <Typography.Title level={4}>\n          {window.W_L.no_datasource_cant_create_query}\n        </Typography.Title>\n        <p>\n          <Typography.Text type=\"secondary\">\n            {window.W_L.apply_permission}\n          </Typography.Text>\n        </p>\n      </React.Fragment>\n    );\n  } else if (!dataSourcesAvailable) {\n    if (currentUser.isAdmin) {\n      message = (\n        <React.Fragment>\n          <Typography.Title level={4}>\n            {window.W_L.no_datasource_or_permission}\n          </Typography.Title>\n          <p>\n            <Typography.Text type=\"secondary\">{window.W_L.first_create_datasource}</Typography.Text>\n          </p>\n\n          <div className=\"query-source-alerts-actions\">\n            <Link.Button type=\"primary\" href=\"data_sources/new\">\n              {window.W_L.add_datasource}\n            </Link.Button>\n            <Link.Button type=\"default\" href=\"groups\">\n              {window.W_L.mange_permissions}\n            </Link.Button>\n          </div>\n        </React.Fragment>\n      );\n    } else {\n      message = (\n        <React.Fragment>\n          <Typography.Title level={4}>\n          {window.W_L.no_datasource_or_permission}\n          </Typography.Title>\n          <p>\n            <Typography.Text type=\"secondary\">{window.W_L.first_create_datasource}</Typography.Text>\n          </p>\n        </React.Fragment>\n      );\n    }\n  }\n\n  if (!message) {\n    return null;\n  }\n\n  return (\n    <div className=\"query-source-alerts\">\n      <Card>\n        <DynamicComponent name=\"QuerySource.Alerts\" query={query} dataSourcesAvailable={dataSourcesAvailable}>\n          <div className=\"query-source-alerts-icon\">\n            <WarningFilledIcon />\n          </div>\n          {message}\n        </DynamicComponent>\n      </Card>\n    </div>\n  );\n}\n\nQuerySourceAlerts.propTypes = {\n  query: PropTypes.object.isRequired,\n  dataSourcesAvailable: PropTypes.bool,\n};\n\nQuerySourceAlerts.defaultProps = {\n  dataSourcesAvailable: false,\n};\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport { Query } from \"@/services/query\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\n\nexport default function wrapQueryPage(WrappedComponent) {\n  function QueryPageWrapper({ queryId, onError, ...props }) {\n    const [query, setQuery] = useState(null);\n\n    const handleError = useImmutableCallback(onError);\n\n    useEffect(() => {\n      let isCancelled = false;\n      const promise = queryId ? Query.get({ id: queryId }) : Promise.resolve(Query.newQuery());\n      promise\n        .then(result => {\n          if (!isCancelled) {\n            setQuery(result);\n          }\n        })\n        .catch(handleError);\n\n      return () => {\n        isCancelled = true;\n      };\n    }, [queryId, handleError]);\n\n    if (!query) {\n      return <LoadingState className=\"flex-fill\" />;\n    }\n\n    return <WrappedComponent query={query} onError={onError} {...props} />;\n  }\n\n  QueryPageWrapper.propTypes = {\n    queryId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  };\n\n  QueryPageWrapper.defaultProps = {\n    queryId: null,\n  };\n\n  return QueryPageWrapper;\n}\n","import { isString } from \"lodash\";\nimport React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport List from \"antd/lib/list\";\nimport Link from \"@/components/Link\";\nimport PlainButton from \"@/components/PlainButton\";\nimport CloseOutlinedIcon from \"@ant-design/icons/CloseOutlined\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport { QueryTagsControl } from \"@/components/tags-control/TagsControl\";\nimport { Dashboard } from \"@/services/dashboard\";\nimport notification from \"@/services/notification\";\nimport useSearchResults from \"@/lib/hooks/useSearchResults\";\n\nimport \"./add-to-dashboard-dialog.less\";\n\nfunction AddToDashboardDialog({ dialog, visualization }) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  const [doSearch, dashboards, isLoading] = useSearchResults(\n    term => {\n      if (isString(term) && term !== \"\") {\n        return Dashboard.query({ q: term })\n          .then(results => results.results)\n          .catch(() => []);\n      }\n      return Promise.resolve([]);\n    },\n    { initialResults: [] }\n  );\n\n  const [selectedDashboard, setSelectedDashboard] = useState(null);\n\n  const [saveInProgress, setSaveInProgress] = useState(false);\n\n  useEffect(() => {\n    doSearch(searchTerm);\n  }, [doSearch, searchTerm]);\n\n  function addWidgetToDashboard() {\n    // Load dashboard with all widgets\n    Dashboard.get(selectedDashboard)\n      .then(dashboard => {\n        dashboard.addWidget(visualization);\n        return dashboard;\n      })\n      .then(dashboard => {\n        dialog.close();\n        const key = `notification-${Math.random()\n          .toString(36)\n          .substr(2, 10)}`;\n        notification.success(\n         window.W_L.widget_add_dashboard,\n          <React.Fragment>\n            <Link href={`${dashboard.url}`} onClick={() => notification.close(key)}>\n              {dashboard.name}\n            </Link>\n            <QueryTagsControl isDraft={dashboard.is_draft} tags={dashboard.tags} />\n          </React.Fragment>,\n          { key }\n        );\n      })\n      .catch(() => {\n        notification.error(window.W_L.widget_add_failed);\n      })\n      .finally(() => {\n        setSaveInProgress(false);\n      });\n  }\n\n  const items = selectedDashboard ? [selectedDashboard] : dashboards;\n\n  return (\n    <Modal\n      {...dialog.props}\n      title={window.W_L.widget_add_dashboard}\n      okText={window.W_L.ok_text}\n      cancelText={window.W_L.cancel}\n      okButtonProps={{ disabled: !selectedDashboard || saveInProgress, loading: saveInProgress }}\n      cancelButtonProps={{ disabled: saveInProgress }}\n      onOk={addWidgetToDashboard}>\n      <label htmlFor=\"add-to-dashboard-dialog-dashboard\">{window.W_L.select_query_to_dashboard}：</label>\n\n      {!selectedDashboard && (\n        <Input\n          id=\"add-to-dashboard-dialog-dashboard\"\n          className=\"w-100\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder={window.W_L.filter_by_name}\n          value={searchTerm}\n          onChange={event => setSearchTerm(event.target.value)}\n          suffix={\n            <PlainButton className={searchTerm === \"\" ? \"hidden\" : null} onClick={() => setSearchTerm(\"\")}>\n              <CloseOutlinedIcon />\n            </PlainButton>\n          }\n        />\n      )}\n\n      {(items.length > 0 || isLoading) && (\n        <List\n          className={selectedDashboard ? \"add-to-dashboard-dialog-selection\" : \"add-to-dashboard-dialog-search-results\"}\n          bordered\n          itemLayout=\"horizontal\"\n          loading={isLoading}\n          dataSource={items}\n          renderItem={d => (\n            <List.Item\n              key={`dashboard-${d.id}`}\n              actions={\n                selectedDashboard\n                  ? [\n                      <PlainButton onClick={() => setSelectedDashboard(null)}>\n                        <CloseOutlinedIcon />\n                      </PlainButton>,\n                    ]\n                  : []\n              }\n              onClick={selectedDashboard ? null : () => setSelectedDashboard(d)}>\n              <div className=\"add-to-dashboard-dialog-item-content\">\n                {d.name}\n                <QueryTagsControl isDraft={d.is_draft} tags={d.tags} />\n              </div>\n            </List.Item>\n          )}\n        />\n      )}\n    </Modal>\n  );\n}\n\nAddToDashboardDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  visualization: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nexport default wrapDialog(AddToDashboardDialog);\n","import { uniqueId } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Alert from \"antd/lib/alert\";\nimport Button from \"antd/lib/button\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport Form from \"antd/lib/form\";\nimport InputNumber from \"antd/lib/input-number\";\nimport Modal from \"antd/lib/modal\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport { clientConfig } from \"@/services/auth\";\nimport CodeBlock from \"@/components/CodeBlock\";\n\nimport \"./EmbedQueryDialog.less\";\n\nclass EmbedQueryDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n    query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    visualization: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  };\n\n  state = {\n    enableChangeIframeSize: false,\n    iframeWidth: 720,\n    iframeHeight: 391,\n  };\n\n  constructor(props) {\n    super(props);\n    const { query, visualization } = props;\n    this.embedUrl = `${clientConfig.basePath}embed/query/${query.id}/visualization/${visualization.id}?api_key=${\n      query.api_key\n    }&${query.getParameters().toUrlParams()}`;\n\n    if (window.snapshotUrlBuilder) {\n      this.snapshotUrl = window.snapshotUrlBuilder(query, visualization);\n    }\n  }\n\n  urlEmbedLabelId = uniqueId(\"url-embed-label\");\n  iframeEmbedLabelId = uniqueId(\"iframe-embed-label\");\n\n  render() {\n    const { query, dialog } = this.props;\n    const { enableChangeIframeSize, iframeWidth, iframeHeight } = this.state;\n\n    return (\n      <Modal\n        {...dialog.props}\n        className=\"embed-query-dialog\"\n        title={window.W_L.embed_query}\n        footer={<Button onClick={dialog.dismiss}>{window.W_L.close}</Button>}>\n        {query.is_safe ? (\n          <React.Fragment>\n            <h5 id={this.urlEmbedLabelId} className=\"m-t-0\">\n              {window.W_L.public_url}\n            </h5>\n            <div className=\"m-b-30\">\n              <CodeBlock aria-labelledby={this.urlEmbedLabelId} data-test=\"EmbedIframe\" copyable>\n                {this.embedUrl}\n              </CodeBlock>\n            </div>\n            <h5 id={this.iframeEmbedLabelId} className=\"m-t-0\">\n              {window.W_L.iframe_embed}\n            </h5>\n            <div>\n              <CodeBlock aria-labelledby={this.iframeEmbedLabelId} copyable>\n                {`<iframe src=\"${this.embedUrl}\" width=\"${iframeWidth}\" height=\"${iframeHeight}\"></iframe>`}\n              </CodeBlock>\n              <Form className=\"m-t-10\" layout=\"inline\">\n                <Form.Item>\n                  <Checkbox\n                    checked={enableChangeIframeSize}\n                    onChange={e => this.setState({ enableChangeIframeSize: e.target.checked })}\n                  />\n                </Form.Item>\n                <Form.Item label=\"Width\">\n                  <InputNumber\n                    className=\"size-input\"\n                    value={iframeWidth}\n                    onChange={value => this.setState({ iframeWidth: value })}\n                    size=\"small\"\n                    disabled={!enableChangeIframeSize}\n                  />\n                </Form.Item>\n                <Form.Item label=\"Height\">\n                  <InputNumber\n                    className=\"size-input\"\n                    value={iframeHeight}\n                    onChange={value => this.setState({ iframeHeight: value })}\n                    size=\"small\"\n                    disabled={!enableChangeIframeSize}\n                  />\n                </Form.Item>\n              </Form>\n            </div>\n            {this.snapshotUrl && (\n              <React.Fragment>\n                <h5>{window.W_L.image_embed}</h5>\n                <CodeBlock copyable>{this.snapshotUrl}</CodeBlock>\n              </React.Fragment>\n            )}\n          </React.Fragment>\n        ) : (\n          <Alert\n            message={window.W_L.query_embed_sql_error}\n            type=\"error\"\n            data-test=\"EmbedErrorAlert\"\n          />\n        )}\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(EmbedQueryDialog);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Link from \"@/components/Link\";\n\nexport default function QueryResultsLink(props) {\n  let href = \"\";\n\n  const { query, queryResult, fileType } = props;\n  const resultId = queryResult.getId && queryResult.getId();\n  const resultData = queryResult.getData && queryResult.getData();\n\n  if (resultId && resultData && query.name) {\n    if (query.id) {\n      href = `api/queries/${query.id}/results/${resultId}.${fileType}${props.embed ? `?api_key=${props.apiKey}` : \"\"}`;\n    } else {\n      href = `api/query_results/${resultId}.${fileType}`;\n    }\n  }\n\n  return (\n    <Link target=\"_blank\" rel=\"noopener noreferrer\" disabled={props.disabled} href={href} download>\n      {props.children}\n    </Link>\n  );\n}\n\nQueryResultsLink.propTypes = {\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  fileType: PropTypes.string,\n  disabled: PropTypes.bool.isRequired,\n  embed: PropTypes.bool,\n  apiKey: PropTypes.string,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired,\n};\n\nQueryResultsLink.defaultProps = {\n  queryResult: {},\n  fileType: \"csv\",\n  embed: false,\n  apiKey: \"\",\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Menu from \"antd/lib/menu\";\nimport Button from \"antd/lib/button\";\nimport PlainButton from \"@/components/PlainButton\";\nimport { clientConfig } from \"@/services/auth\";\n\nimport PlusCircleFilledIcon from \"@ant-design/icons/PlusCircleFilled\";\nimport ShareAltOutlinedIcon from \"@ant-design/icons/ShareAltOutlined\";\nimport FileOutlinedIcon from \"@ant-design/icons/FileOutlined\";\nimport FileExcelOutlinedIcon from \"@ant-design/icons/FileExcelOutlined\";\nimport EllipsisOutlinedIcon from \"@ant-design/icons/EllipsisOutlined\";\n\nimport QueryResultsLink from \"./QueryResultsLink\";\n\nexport default function QueryControlDropdown(props) {\n  const menu = (\n    <Menu>\n      {!props.query.isNew() && (!props.query.is_draft || !props.query.is_archived) && (\n        <Menu.Item>\n          <PlainButton onClick={() => props.openAddToDashboardForm(props.selectedTab)}>\n            <PlusCircleFilledIcon /> {window.W_L.add_to_dashboard}\n          </PlainButton>\n        </Menu.Item>\n      )}\n      {!clientConfig.disablePublicUrls && !props.query.isNew() && (\n        <Menu.Item>\n          <PlainButton\n            onClick={() => props.showEmbedDialog(props.query, props.selectedTab)}\n            data-test=\"ShowEmbedDialogButton\">\n            <ShareAltOutlinedIcon /> {window.W_L.embed_other}\n          </PlainButton>\n        </Menu.Item>\n      )}\n      <Menu.Item>\n        <QueryResultsLink\n          fileType=\"csv\"\n          disabled={props.queryExecuting || !props.queryResult.getData || !props.queryResult.getData()}\n          query={props.query}\n          queryResult={props.queryResult}\n          embed={props.embed}\n          apiKey={props.apiKey}>\n          <FileOutlinedIcon /> {window.W_L.save_as_csv}\n        </QueryResultsLink>\n      </Menu.Item>\n      <Menu.Item>\n        <QueryResultsLink\n          fileType=\"tsv\"\n          disabled={props.queryExecuting || !props.queryResult.getData || !props.queryResult.getData()}\n          query={props.query}\n          queryResult={props.queryResult}\n          embed={props.embed}\n          apiKey={props.apiKey}>\n          <FileOutlinedIcon /> {window.W_L.save_as_tsv}\n        </QueryResultsLink>\n      </Menu.Item>\n      <Menu.Item>\n        <QueryResultsLink\n          fileType=\"xlsx\"\n          disabled={props.queryExecuting || !props.queryResult.getData || !props.queryResult.getData()}\n          query={props.query}\n          queryResult={props.queryResult}\n          embed={props.embed}\n          apiKey={props.apiKey}>\n          <FileExcelOutlinedIcon /> {window.W_L.save_as_excel}\n        </QueryResultsLink>\n      </Menu.Item>\n    </Menu>\n  );\n\n  return (\n    <Dropdown trigger={[\"click\"]} overlay={menu} overlayClassName=\"query-control-dropdown-overlay\">\n      <Button data-test=\"QueryControlDropdownButton\">\n        <EllipsisOutlinedIcon rotate={90} />\n      </Button>\n    </Dropdown>\n  );\n}\n\nQueryControlDropdown.propTypes = {\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  queryExecuting: PropTypes.bool.isRequired,\n  showEmbedDialog: PropTypes.func.isRequired,\n  embed: PropTypes.bool,\n  apiKey: PropTypes.string,\n  selectedTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  openAddToDashboardForm: PropTypes.func.isRequired,\n};\n\nQueryControlDropdown.defaultProps = {\n  queryResult: {},\n  embed: false,\n  apiKey: \"\",\n  selectedTab: \"\",\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport FormOutlinedIcon from \"@ant-design/icons/FormOutlined\";\n\nexport default function EditVisualizationButton(props) {\n  return (\n    <Button\n      data-test=\"EditVisualization\"\n      className=\"edit-visualization\"\n      onClick={() => props.openVisualizationEditor(props.selectedTab)}>\n      <FormOutlinedIcon />\n      <span className=\"hidden-xs hidden-s hidden-m\">{window.W_L.edit_view}</span>\n    </Button>\n  );\n}\n\nEditVisualizationButton.propTypes = {\n  openVisualizationEditor: PropTypes.func.isRequired,\n  selectedTab: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n};\n\nEditVisualizationButton.defaultProps = {\n  selectedTab: \"\",\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport WarningTwoTone from \"@ant-design/icons/WarningTwoTone\";\nimport TimeAgo from \"@/components/TimeAgo\";\nimport Tooltip from \"@/components/Tooltip\";\nimport useAddToDashboardDialog from \"../hooks/useAddToDashboardDialog\";\nimport useEmbedDialog from \"../hooks/useEmbedDialog\";\nimport QueryControlDropdown from \"@/components/EditVisualizationButton/QueryControlDropdown\";\nimport EditVisualizationButton from \"@/components/EditVisualizationButton\";\nimport useQueryResultData from \"@/lib/useQueryResultData\";\nimport { durationHumanize, pluralize, prettySize } from \"@/lib/utils\";\n\nimport \"./QueryExecutionMetadata.less\";\n\nexport default function QueryExecutionMetadata({\n  query,\n  queryResult,\n  isQueryExecuting,\n  selectedVisualization,\n  showEditVisualizationButton,\n  onEditVisualization,\n  extraActions,\n}) {\n  const queryResultData = useQueryResultData(queryResult);\n  const openAddToDashboardDialog = useAddToDashboardDialog(query);\n  const openEmbedDialog = useEmbedDialog(query);\n  return (\n    <div className=\"query-execution-metadata\">\n      <span className=\"m-r-5\">\n        <QueryControlDropdown\n          query={query}\n          queryResult={queryResult}\n          queryExecuting={isQueryExecuting}\n          showEmbedDialog={openEmbedDialog}\n          embed={false}\n          apiKey={query.api_key}\n          selectedTab={selectedVisualization}\n          openAddToDashboardForm={openAddToDashboardDialog}\n        />\n      </span>\n      {extraActions}\n      {showEditVisualizationButton && (\n        <EditVisualizationButton openVisualizationEditor={onEditVisualization} selectedTab={selectedVisualization} />\n      )}\n      <span className=\"m-l-5 m-r-10\">\n        <span>\n          {queryResultData.truncated === true && (\n            <span className=\"m-r-5\">\n              <Tooltip\n                title={\n                  \"Result truncated to \" +\n                  queryResultData.rows.length +\n                  window.W_L.redash_cut_data_tip\n                }>\n                <WarningTwoTone twoToneColor=\"#FF9800\" />\n              </Tooltip>\n            </span>\n          )}\n          <strong>{queryResultData.rows.length}</strong> {pluralize(\"row\", queryResultData.rows.length)}\n        </span>\n        <span className=\"m-l-5\">\n          {!isQueryExecuting && (\n            <React.Fragment>\n              <strong>{durationHumanize(queryResultData.runtime)}</strong>\n              <span className=\"hidden-xs\"> {window.W_L.run_time}</span>\n            </React.Fragment>\n          )}\n          {isQueryExecuting && <span>{window.W_L.runing}&hellip;</span>}\n        </span>\n        {queryResultData.metadata.data_scanned && (\n          <span className=\"m-l-5\">\n            Data Scanned\n            <strong>{prettySize(queryResultData.metadata.data_scanned)}</strong>\n          </span>\n        )}\n      </span>\n      <div>\n        <span className=\"m-r-10\">\n          <span className=\"hidden-xs\">{window.W_L.flush_time}：</span>\n          <strong>\n            <TimeAgo date={queryResultData.retrievedAt} placeholder=\"-\" />\n          </strong>\n        </span>\n      </div>\n    </div>\n  );\n}\n\nQueryExecutionMetadata.propTypes = {\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  queryResult: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  isQueryExecuting: PropTypes.bool,\n  selectedVisualization: PropTypes.number,\n  showEditVisualizationButton: PropTypes.bool,\n  onEditVisualization: PropTypes.func,\n  extraActions: PropTypes.node,\n};\n\nQueryExecutionMetadata.defaultProps = {\n  isQueryExecuting: false,\n  selectedVisualization: null,\n  showEditVisualizationButton: false,\n  onEditVisualization: () => {},\n  extraActions: null,\n};\n","import { find } from \"lodash\";\nimport { useCallback } from \"react\";\nimport AddToDashboardDialog from \"@/components/queries/AddToDashboardDialog\";\n\nexport default function useAddToDashboardDialog(query) {\n  return useCallback(\n    visualizationId => {\n      const visualization = find(query.visualizations, { id: visualizationId });\n      AddToDashboardDialog.showModal({ visualization });\n    },\n    [query.visualizations]\n  );\n}\n","import { find } from \"lodash\";\nimport { useCallback } from \"react\";\nimport EmbedQueryDialog from \"@/components/queries/EmbedQueryDialog\";\n\nexport default function useEmbedDialog(query) {\n  return useCallback(\n    (unusedQuery, visualizationId) => {\n      const visualization = find(query.visualizations, { id: visualizationId });\n      EmbedQueryDialog.showModal({ query, visualization });\n    },\n    [query]\n  );\n}\n","import { useCallback, useEffect, useRef, useState, useMemo } from \"react\";\nimport DataSource from \"@/services/data-source\";\nimport notification from \"@/services/notification\";\n\nfunction getSchema(dataSource, refresh = undefined) {\n  if (!dataSource) {\n    return Promise.resolve([]);\n  }\n\n  return DataSource.fetchSchema(dataSource, refresh).catch(() => {\n    notification.error(window.W_L.flush_error, window.W_L.wait_retry);\n    return Promise.resolve([]);\n  });\n}\n\nexport default function useDataSourceSchema(dataSource) {\n  const [schema, setSchema] = useState([]);\n  const [loadingSchema, setLoadingSchema] = useState(true);\n  const refreshSchemaTokenRef = useRef(null);\n\n  const reloadSchema = useCallback(\n    (refresh = undefined) => {\n      setLoadingSchema(true);\n      const refreshToken = Math.random()\n        .toString(36)\n        .substr(2);\n      refreshSchemaTokenRef.current = refreshToken;\n      getSchema(dataSource, refresh)\n        .then(data => {\n          if (refreshSchemaTokenRef.current === refreshToken) {\n            setSchema(data);\n          }\n        })\n        .finally(() => {\n          if (refreshSchemaTokenRef.current === refreshToken) {\n            setLoadingSchema(false);\n          }\n        });\n    },\n    [dataSource]\n  );\n\n  useEffect(() => {\n    reloadSchema();\n  }, [reloadSchema]);\n\n  useEffect(() => {\n    return () => {\n      // cancel pending operations\n      refreshSchemaTokenRef.current = null;\n    };\n  }, []);\n\n  return useMemo(() => [schema, loadingSchema, reloadSchema], [schema, loadingSchema, reloadSchema]);\n}\n","import { isNil, map, filter, some, includes, get } from \"lodash\";\nimport cx from \"classnames\";\nimport React, { useState, useCallback, useMemo, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport Input from \"antd/lib/input\";\nimport Button from \"antd/lib/button\";\nimport AutoSizer from \"react-virtualized/dist/commonjs/AutoSizer\";\nimport List from \"react-virtualized/dist/commonjs/List\";\nimport PlainButton from \"@/components/PlainButton\";\nimport Tooltip from \"@/components/Tooltip\";\nimport useDataSourceSchema from \"@/pages/queries/hooks/useDataSourceSchema\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\nimport LoadingState from \"../items-list/components/LoadingState\";\n\nconst SchemaItemColumnType = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  type: PropTypes.string,\n});\n\nexport const SchemaItemType = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  size: PropTypes.number,\n  loading: PropTypes.bool,\n  columns: PropTypes.arrayOf(SchemaItemColumnType).isRequired,\n});\n\nconst schemaTableHeight = 22;\nconst schemaColumnHeight = 18;\n\nfunction SchemaItem({ item, expanded, onToggle, onSelect, ...props }) {\n  const handleSelect = useCallback(\n    (event, ...args) => {\n      event.preventDefault();\n      event.stopPropagation();\n      onSelect(...args);\n    },\n    [onSelect]\n  );\n\n  if (!item) {\n    return null;\n  }\n\n  const tableDisplayName = item.displayName || item.name;\n\n  return (\n    <div {...props}>\n      <div className=\"schema-list-item\">\n        <PlainButton className=\"table-name\" onClick={onToggle}>\n          <i className=\"fa fa-table m-r-5\" aria-hidden=\"true\" />\n          <strong>\n            <span title={item.name}>{tableDisplayName}</span>\n            {!isNil(item.size) && <span> ({item.size})</span>}\n          </strong>\n        </PlainButton>\n        <Tooltip\n          title=\"Insert table name into query text\"\n          mouseEnterDelay={0}\n          mouseLeaveDelay={0}\n          placement=\"topRight\"\n          arrowPointAtCenter>\n          <PlainButton className=\"copy-to-editor\" onClick={e => handleSelect(e, item.name)}>\n            <i className=\"fa fa-angle-double-right\" aria-hidden=\"true\" />\n          </PlainButton>\n        </Tooltip>\n      </div>\n      {expanded && (\n        <div className=\"table-open\">\n          {item.loading ? (\n            <div className=\"table-open\">Loading...</div>\n          ) : (\n            map(item.columns, column => {\n              const columnName = get(column, \"name\");\n              const columnType = get(column, \"type\");\n              return (\n                <Tooltip\n                  title=\"Insert column name into query text\"\n                  mouseEnterDelay={0}\n                  mouseLeaveDelay={0}\n                  placement=\"rightTop\">\n                  <PlainButton key={columnName} className=\"table-open-item\" onClick={e => handleSelect(e, columnName)}>\n                    <div>\n                      {columnName} {columnType && <span className=\"column-type\">{columnType}</span>}\n                    </div>\n\n                    <div className=\"copy-to-editor\">\n                      <i className=\"fa fa-angle-double-right\" aria-hidden=\"true\" />\n                    </div>\n                  </PlainButton>\n                </Tooltip>\n              );\n            })\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nSchemaItem.propTypes = {\n  item: SchemaItemType,\n  expanded: PropTypes.bool,\n  onToggle: PropTypes.func,\n  onSelect: PropTypes.func,\n};\n\nSchemaItem.defaultProps = {\n  item: null,\n  expanded: false,\n  onToggle: () => {},\n  onSelect: () => {},\n};\n\nfunction SchemaLoadingState() {\n  return (\n    <div className=\"schema-loading-state\">\n      <LoadingState className=\"\" />\n    </div>\n  );\n}\n\nexport function SchemaList({ loading, schema, expandedFlags, onTableExpand, onItemSelect }) {\n  const [listRef, setListRef] = useState(null);\n\n  useEffect(() => {\n    if (listRef) {\n      listRef.recomputeRowHeights();\n    }\n  }, [listRef, schema, expandedFlags]);\n\n  return (\n    <div className=\"schema-browser\">\n      {loading && <SchemaLoadingState />}\n      {!loading && (\n        <AutoSizer>\n          {({ width, height }) => (\n            <List\n              ref={setListRef}\n              width={width}\n              height={height}\n              rowCount={schema.length}\n              rowHeight={({ index }) => {\n                const item = schema[index];\n                const columnsLength = !item.loading ? item.columns.length : 1;\n                let columnCount = expandedFlags[item.name] ? columnsLength : 0;\n                return schemaTableHeight + schemaColumnHeight * columnCount;\n              }}\n              rowRenderer={({ key, index, style }) => {\n                const item = schema[index];\n                return (\n                  <SchemaItem\n                    key={key}\n                    style={style}\n                    item={item}\n                    expanded={expandedFlags[item.name]}\n                    onToggle={() => onTableExpand(item.name)}\n                    onSelect={onItemSelect}\n                  />\n                );\n              }}\n            />\n          )}\n        </AutoSizer>\n      )}\n    </div>\n  );\n}\n\nexport function applyFilterOnSchema(schema, filterString) {\n  const filters = filter(filterString.toLowerCase().split(/\\s+/), s => s.length > 0);\n\n  // Empty string: return original schema\n  if (filters.length === 0) {\n    return schema;\n  }\n\n  // Single word: matches table or column\n  if (filters.length === 1) {\n    const nameFilter = filters[0];\n    const columnFilter = filters[0];\n    return filter(\n      schema,\n      item =>\n        includes(item.name.toLowerCase(), nameFilter) ||\n        some(item.columns, column => includes(get(column, \"name\").toLowerCase(), columnFilter))\n    );\n  }\n\n  // Two (or more) words: first matches table, seconds matches column\n  const nameFilter = filters[0];\n  const columnFilter = filters[1];\n  return filter(\n    map(schema, item => {\n      if (includes(item.name.toLowerCase(), nameFilter)) {\n        item = {\n          ...item,\n          columns: filter(item.columns, column => includes(get(column, \"name\").toLowerCase(), columnFilter)),\n        };\n        return item.columns.length > 0 ? item : null;\n      }\n    })\n  );\n}\n\nexport default function SchemaBrowser({\n  dataSource,\n  onSchemaUpdate,\n  onItemSelect,\n  options,\n  onOptionsUpdate,\n  ...props\n}) {\n  const [schema, isLoading, refreshSchema] = useDataSourceSchema(dataSource);\n  const [filterString, setFilterString] = useState(\"\");\n  const filteredSchema = useMemo(() => applyFilterOnSchema(schema, filterString), [schema, filterString]);\n  const [handleFilterChange] = useDebouncedCallback(setFilterString, 500);\n  const [expandedFlags, setExpandedFlags] = useState({});\n\n  const handleSchemaUpdate = useImmutableCallback(onSchemaUpdate);\n\n  useEffect(() => {\n    setExpandedFlags({});\n    handleSchemaUpdate(schema);\n  }, [schema, handleSchemaUpdate]);\n\n  if (schema.length === 0 && !isLoading) {\n    return null;\n  }\n\n  function toggleTable(tableName) {\n    setExpandedFlags({\n      ...expandedFlags,\n      [tableName]: !expandedFlags[tableName],\n    });\n  }\n\n  return (\n    <div className=\"schema-container\" {...props}>\n      <div className=\"schema-control\">\n        <Input\n          className=\"m-r-5\"\n          placeholder={window.W_L.search_schema}\n          aria-label={window.W_L.search_schema}\n          disabled={schema.length === 0}\n          onChange={event => handleFilterChange(event.target.value)}\n        />\n\n        <Tooltip title={window.W_L.flush_schema}>\n          <Button onClick={() => refreshSchema(true)}>\n            <i className={cx(\"zmdi zmdi-refresh\", { \"zmdi-hc-spin\": isLoading })} aria-hidden=\"true\" />\n            <span className=\"sr-only\">{isLoading ? \"Loading, please wait.\" : \"Press to refresh.\"}</span>\n          </Button>\n        </Tooltip>\n      </div>\n      <SchemaList\n        loading={isLoading && schema.length === 0}\n        schema={filteredSchema}\n        expandedFlags={expandedFlags}\n        onTableExpand={toggleTable}\n        onItemSelect={onItemSelect}\n      />\n    </div>\n  );\n}\n\nSchemaBrowser.propTypes = {\n  dataSource: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  onSchemaUpdate: PropTypes.func,\n  onItemSelect: PropTypes.func,\n};\n\nSchemaBrowser.defaultProps = {\n  dataSource: null,\n  onSchemaUpdate: () => {},\n  onItemSelect: () => {},\n};\n","import { capitalize, isNil, map, get } from \"lodash\";\nimport AceEditor from \"react-ace\";\nimport ace from \"ace-builds\";\n\nimport \"ace-builds/src-noconflict/ext-language_tools\";\nimport \"ace-builds/src-noconflict/mode-json\";\nimport \"ace-builds/src-noconflict/mode-python\";\nimport \"ace-builds/src-noconflict/mode-sql\";\nimport \"ace-builds/src-noconflict/mode-yaml\";\nimport \"ace-builds/src-noconflict/theme-textmate\";\nimport \"ace-builds/src-noconflict/ext-searchbox\";\n\nconst langTools = ace.acequire(\"ace/ext/language_tools\");\nconst snippetsModule = ace.acequire(\"ace/snippets\");\n\n// By default Ace will try to load snippet files for the different modes and fail.\n// We don't need them, so we use these placeholders until we define our own.\nfunction defineDummySnippets(mode) {\n  ace.define(`ace/snippets/${mode}`, [\"require\", \"exports\", \"module\"], (require, exports) => {\n    exports.snippetText = \"\";\n    exports.scope = mode;\n  });\n}\n\ndefineDummySnippets(\"python\");\ndefineDummySnippets(\"sql\");\ndefineDummySnippets(\"json\");\ndefineDummySnippets(\"yaml\");\n\nfunction buildTableColumnKeywords(table) {\n  const keywords = [];\n  table.columns.forEach(column => {\n    const columnName = get(column, \"name\");\n    keywords.push({\n      name: `${table.name}.${columnName}`,\n      value: `${table.name}.${columnName}`,\n      score: 100,\n      meta: capitalize(get(column, \"type\", \"Column\")),\n    });\n  });\n  return keywords;\n}\n\nfunction buildKeywordsFromSchema(schema) {\n  const tableKeywords = [];\n  const columnKeywords = {};\n  const tableColumnKeywords = {};\n\n  schema.forEach(table => {\n    tableKeywords.push({\n      name: table.name,\n      value: table.name,\n      score: 100,\n      meta: \"Table\",\n    });\n    tableColumnKeywords[table.name] = buildTableColumnKeywords(table);\n    table.columns.forEach(c => {\n      const columnName = get(c, \"name\", c);\n      columnKeywords[columnName] = capitalize(get(c, \"type\", \"Column\"));\n    });\n  });\n\n  return {\n    table: tableKeywords,\n    column: map(columnKeywords, (v, k) => ({\n      name: k,\n      value: k,\n      score: 50,\n      meta: v,\n    })),\n    tableColumn: tableColumnKeywords,\n  };\n}\n\nconst schemaCompleterKeywords = {};\n\nexport function updateSchemaCompleter(editorKey, schema = null) {\n  schemaCompleterKeywords[editorKey] = isNil(schema) ? null : buildKeywordsFromSchema(schema);\n}\n\nlangTools.setCompleters([\n  langTools.snippetCompleter,\n  langTools.keyWordCompleter,\n  langTools.textCompleter,\n  {\n    identifierRegexps: [/[a-zA-Z_0-9.\\-\\u00A2-\\uFFFF]/],\n    getCompletions: (editor, session, pos, prefix, callback) => {\n      const { table, column, tableColumn } = schemaCompleterKeywords[editor.id] || {\n        table: [],\n        column: [],\n        tableColumn: [],\n      };\n\n      if (prefix.length === 0 || table.length === 0) {\n        callback(null, []);\n        return;\n      }\n\n      if (prefix[prefix.length - 1] === \".\") {\n        const tableName = prefix.substring(0, prefix.length - 1);\n        callback(null, table.concat(tableColumn[tableName]));\n        return;\n      }\n      callback(null, table.concat(column));\n    },\n  },\n]);\n\nexport { AceEditor, langTools, snippetsModule };\n","import { axios } from \"@/services/axios\";\nimport { extend, map } from \"lodash\";\n\nclass QuerySnippet {\n  constructor(querySnippet) {\n    extend(this, querySnippet);\n  }\n\n  getSnippet() {\n    let name = this.trigger;\n    if (this.description !== \"\") {\n      name = `${this.trigger}: ${this.description}`;\n    }\n\n    return {\n      name,\n      content: this.snippet,\n      tabTrigger: this.trigger,\n    };\n  }\n}\n\nconst getQuerySnippet = querySnippet => new QuerySnippet(querySnippet);\n\nconst QuerySnippetService = {\n  get: data => axios.get(`api/query_snippets/${data.id}`).then(getQuerySnippet),\n  query: () => axios.get(\"api/query_snippets\").then(data => map(data, getQuerySnippet)),\n  create: data => axios.post(\"api/query_snippets\", data).then(getQuerySnippet),\n  save: data => axios.post(`api/query_snippets/${data.id}`, data).then(getQuerySnippet),\n  delete: data => axios.delete(`api/query_snippets/${data.id}`),\n};\n\nexport default QuerySnippetService;\n","import React, { useCallback } from \"react\";\nimport Tooltip from \"@/components/Tooltip\";\nimport Button from \"antd/lib/button\";\nimport PropTypes from \"prop-types\";\nimport \"@/redash-font/style.less\";\nimport recordEvent from \"@/services/recordEvent\";\n\nexport default function AutocompleteToggle({ available, enabled, onToggle }) {\n  let tooltipMessage =  window.W_L.auto_enable;\n  let icon = \"icon-flash\";\n  if (!enabled) {\n    tooltipMessage = window.W_L.auto_disable;\n    icon = \"icon-flash-off\";\n  }\n\n  if (!available) {\n    tooltipMessage = window.W_L.auto_info;\n    icon = \"icon-flash-off\";\n  }\n\n  const handleClick = useCallback(() => {\n    recordEvent(\"toggle_autocomplete\", \"screen\", \"query_editor\", { state: !enabled });\n    onToggle(!enabled);\n  }, [enabled, onToggle]);\n\n  return (\n    <Tooltip placement=\"top\" title={tooltipMessage}>\n      <Button\n        className=\"query-editor-controls-button m-r-5\"\n        disabled={!available}\n        onClick={handleClick}\n        aria-label={enabled ? \"Disable live autocomplete\" : \"Enable live autocomplete\"}>\n        <i className={\"icon \" + icon} aria-hidden=\"true\" />\n      </Button>\n    </Tooltip>\n  );\n}\n\nAutocompleteToggle.propTypes = {\n  available: PropTypes.bool.isRequired,\n  enabled: PropTypes.bool.isRequired,\n  onToggle: PropTypes.func.isRequired,\n};\n","import React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport recordEvent from \"@/services/recordEvent\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport Tooltip from \"@/components/Tooltip\";\n\nexport default function AutoLimitCheckbox({ available, checked, onChange }) {\n  const handleClick = useCallback(() => {\n    recordEvent(\"checkbox_auto_limit\", \"screen\", \"query_editor\", { state: !checked });\n    onChange(!checked);\n  }, [checked, onChange]);\n\n  let tooltipMessage = null;\n  if (!available) {\n    tooltipMessage = window.W_L.not_limit;\n  } else {\n    tooltipMessage = window.W_L.limit_1000;\n  }\n\n  return (\n    <Tooltip placement=\"top\" title={tooltipMessage}>\n      <Checkbox\n        className=\"query-editor-controls-checkbox\"\n        disabled={!available}\n        onClick={handleClick}\n        checked={available && checked}>\n        {window.W_L.return_1000}\n      </Checkbox>\n    </Tooltip>\n  );\n}\n\nAutoLimitCheckbox.propTypes = {\n  available: PropTypes.bool,\n  checked: PropTypes.bool.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n","import { isFunction, map, filter, fromPairs, noop } from \"lodash\";\nimport React, { useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Tooltip from \"@/components/Tooltip\";\nimport Button from \"antd/lib/button\";\nimport Select from \"antd/lib/select\";\nimport KeyboardShortcuts, { humanReadableShortcut } from \"@/services/KeyboardShortcuts\";\n\nimport AutocompleteToggle from \"./AutocompleteToggle\";\nimport \"./QueryEditorControls.less\";\nimport AutoLimitCheckbox from \"@/components/queries/QueryEditor/AutoLimitCheckbox\";\n\nexport function ButtonTooltip({ title, shortcut, ...props }) {\n  shortcut = humanReadableShortcut(shortcut, 1); // show only primary shortcut\n  title =\n    title && shortcut ? (\n      <React.Fragment>\n        {title} (<i>{shortcut}</i>)\n      </React.Fragment>\n    ) : (\n      title || shortcut\n    );\n  return <Tooltip placement=\"top\" title={title} {...props} />;\n}\n\nButtonTooltip.propTypes = {\n  title: PropTypes.node,\n  shortcut: PropTypes.string,\n};\n\nButtonTooltip.defaultProps = {\n  title: null,\n  shortcut: null,\n};\n\nexport default function EditorControl({\n  addParameterButtonProps,\n  formatButtonProps,\n  saveButtonProps,\n  executeButtonProps,\n  autocompleteToggleProps,\n  autoLimitCheckboxProps,\n  dataSourceSelectorProps,\n}) {\n  useEffect(() => {\n    const buttons = filter(\n      [addParameterButtonProps, formatButtonProps, saveButtonProps, executeButtonProps],\n      b => b.shortcut && isFunction(b.onClick)\n    );\n    if (buttons.length > 0) {\n      const shortcuts = fromPairs(map(buttons, b => [b.shortcut, b.disabled ? noop : b.onClick]));\n      KeyboardShortcuts.bind(shortcuts);\n      return () => {\n        KeyboardShortcuts.unbind(shortcuts);\n      };\n    }\n  }, [addParameterButtonProps, formatButtonProps, saveButtonProps, executeButtonProps]);\n\n  return (\n    <div className=\"query-editor-controls\">\n      {addParameterButtonProps !== false && (\n        <ButtonTooltip title={addParameterButtonProps.title} shortcut={addParameterButtonProps.shortcut}>\n          <Button\n            className=\"query-editor-controls-button m-r-5\"\n            disabled={addParameterButtonProps.disabled}\n            onClick={addParameterButtonProps.onClick}>\n            {\"{{\"}&nbsp;{\"}}\"}\n          </Button>\n        </ButtonTooltip>\n      )}\n      {formatButtonProps !== false && (\n        <ButtonTooltip title={formatButtonProps.title} shortcut={formatButtonProps.shortcut}>\n          <Button\n            className=\"query-editor-controls-button m-r-5\"\n            disabled={formatButtonProps.disabled}\n            onClick={formatButtonProps.onClick}>\n            <span className=\"zmdi zmdi-format-indent-increase\" />\n            {formatButtonProps.text}\n          </Button>\n        </ButtonTooltip>\n      )}\n      {autocompleteToggleProps !== false && (\n        <AutocompleteToggle\n          available={autocompleteToggleProps.available}\n          enabled={autocompleteToggleProps.enabled}\n          onToggle={autocompleteToggleProps.onToggle}\n        />\n      )}\n      {autoLimitCheckboxProps !== false && <AutoLimitCheckbox {...autoLimitCheckboxProps} />}\n      {dataSourceSelectorProps === false && <span className=\"query-editor-controls-spacer\" />}\n      {dataSourceSelectorProps !== false && (\n        <Select\n          className=\"w-100 flex-fill datasource-small\"\n          disabled={dataSourceSelectorProps.disabled}\n          value={dataSourceSelectorProps.value}\n          onChange={dataSourceSelectorProps.onChange}>\n          {map(dataSourceSelectorProps.options, option => (\n            <Select.Option key={`option-${option.value}`} value={option.value}>\n              {option.label}\n            </Select.Option>\n          ))}\n        </Select>\n      )}\n      {saveButtonProps !== false && (\n        <ButtonTooltip title={saveButtonProps.title} shortcut={saveButtonProps.shortcut}>\n          <Button\n            className=\"query-editor-controls-button m-l-5\"\n            disabled={saveButtonProps.disabled}\n            loading={saveButtonProps.loading}\n            onClick={saveButtonProps.onClick}\n            data-test=\"SaveButton\">\n            {!saveButtonProps.loading && <span className=\"fa fa-floppy-o\" />}\n            {saveButtonProps.text}\n          </Button>\n        </ButtonTooltip>\n      )}\n      {executeButtonProps !== false && (\n        <ButtonTooltip title={executeButtonProps.title} shortcut={executeButtonProps.shortcut}>\n          <Button\n            className=\"query-editor-controls-button m-l-5\"\n            type=\"primary\"\n            disabled={executeButtonProps.disabled}\n            onClick={executeButtonProps.onClick}\n            data-test=\"ExecuteButton\">\n            <span className=\"zmdi zmdi-play\" />\n            {executeButtonProps.text}\n          </Button>\n        </ButtonTooltip>\n      )}\n    </div>\n  );\n}\n\nconst ButtonPropsPropType = PropTypes.oneOfType([\n  PropTypes.bool, // `false` to hide button\n  PropTypes.shape({\n    title: PropTypes.node,\n    disabled: PropTypes.bool,\n    loading: PropTypes.bool,\n    onClick: PropTypes.func,\n    text: PropTypes.node,\n    shortcut: PropTypes.string,\n  }),\n]);\n\nEditorControl.propTypes = {\n  addParameterButtonProps: ButtonPropsPropType,\n  formatButtonProps: ButtonPropsPropType,\n  saveButtonProps: ButtonPropsPropType,\n  executeButtonProps: ButtonPropsPropType,\n  autocompleteToggleProps: PropTypes.oneOfType([\n    PropTypes.bool, // `false` to hide\n    PropTypes.shape({\n      available: PropTypes.bool,\n      enabled: PropTypes.bool,\n      onToggle: PropTypes.func,\n    }),\n  ]),\n  autoLimitCheckboxProps: PropTypes.oneOfType([\n    PropTypes.bool, // `false` to hide\n    PropTypes.shape(AutoLimitCheckbox.propTypes),\n  ]),\n  dataSourceSelectorProps: PropTypes.oneOfType([\n    PropTypes.bool, // `false` to hide\n    PropTypes.shape({\n      disabled: PropTypes.bool,\n      value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n      options: PropTypes.arrayOf(\n        PropTypes.shape({\n          value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n          label: PropTypes.node,\n        })\n      ),\n      onChange: PropTypes.func,\n    }),\n  ]),\n};\n\nEditorControl.defaultProps = {\n  addParameterButtonProps: false,\n  formatButtonProps: false,\n  saveButtonProps: false,\n  executeButtonProps: false,\n  autocompleteToggleProps: false,\n  autoLimitCheckboxProps: false,\n  dataSourceSelectorProps: false,\n};\n","import React, { useEffect, useMemo, useState, useCallback, useImperativeHandle } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { AceEditor, snippetsModule, updateSchemaCompleter } from \"./ace\";\nimport { srNotify } from \"@/lib/accessibility\";\nimport { SchemaItemType } from \"@/components/queries/SchemaBrowser\";\nimport resizeObserver from \"@/services/resizeObserver\";\nimport QuerySnippet from \"@/services/query-snippet\";\n\nimport QueryEditorControls from \"./QueryEditorControls\";\nimport \"./index.less\";\n\nconst editorProps = { $blockScrolling: Infinity };\n\nconst QueryEditor = React.forwardRef(function(\n  { className, syntax, value, autocompleteEnabled, schema, onChange, onSelectionChange, ...props },\n  ref\n) {\n  const [container, setContainer] = useState(null);\n  const [editorRef, setEditorRef] = useState(null);\n\n  // For some reason, value for AceEditor should be managed in this way - otherwise it goes berserk when selecting text\n  const [currentValue, setCurrentValue] = useState(value);\n\n  useEffect(() => {\n    setCurrentValue(value);\n  }, [value]);\n\n  const handleChange = useCallback(\n    str => {\n      setCurrentValue(str);\n      onChange(str);\n    },\n    [onChange]\n  );\n\n  const editorOptions = useMemo(\n    () => ({\n      behavioursEnabled: true,\n      enableSnippets: true,\n      enableBasicAutocompletion: true,\n      enableLiveAutocompletion: autocompleteEnabled,\n      autoScrollEditorIntoView: true,\n    }),\n    [autocompleteEnabled]\n  );\n\n  useEffect(() => {\n    if (editorRef) {\n      const editorId = editorRef.editor.id;\n      updateSchemaCompleter(editorId, schema);\n      return () => {\n        updateSchemaCompleter(editorId, null);\n      };\n    }\n  }, [schema, editorRef]);\n\n  useEffect(() => {\n    function resize() {\n      if (editorRef) {\n        editorRef.editor.resize();\n      }\n    }\n\n    if (container) {\n      resize();\n      const unwatch = resizeObserver(container, resize);\n      return unwatch;\n    }\n  }, [container, editorRef]);\n\n  const handleSelectionChange = useCallback(\n    selection => {\n      const rawSelectedQueryText = editorRef.editor.session.doc.getTextRange(selection.getRange());\n      const selectedQueryText = rawSelectedQueryText.length > 1 ? rawSelectedQueryText : null;\n      onSelectionChange(selectedQueryText);\n    },\n    [editorRef, onSelectionChange]\n  );\n\n  const initEditor = useCallback(editor => {\n    // Release Cmd/Ctrl+L to the browser\n    editor.commands.bindKey({ win: \"Ctrl+L\", mac: \"Cmd+L\" }, null);\n\n    // Release Cmd/Ctrl+Shift+F for format query action\n    editor.commands.bindKey({ win: \"Ctrl+Shift+F\", mac: \"Cmd+Shift+F\" }, null);\n\n    // Release Ctrl+P for open new parameter dialog\n    editor.commands.bindKey({ win: \"Ctrl+P\", mac: null }, null);\n    // Lineup only mac\n    editor.commands.bindKey({ win: null, mac: \"Ctrl+P\" }, \"golineup\");\n\n    // Esc for exiting\n    editor.commands.bindKey({ win: \"Esc\", mac: \"Esc\" }, () => {\n      editor.blur();\n    });\n\n    let notificationCleanup = null;\n    editor.on(\"focus\", () => {\n      notificationCleanup = srNotify({\n        text: \"You've entered the SQL editor. To exit press the ESC key.\",\n        politeness: \"assertive\",\n      });\n    });\n\n    editor.on(\"blur\", () => {\n      if (notificationCleanup) {\n        notificationCleanup();\n      }\n    });\n\n    // Reset Completer in case dot is pressed\n    editor.commands.on(\"afterExec\", e => {\n      if (e.command.name === \"insertstring\" && e.args === \".\" && editor.completer) {\n        editor.completer.showPopup(editor);\n      }\n    });\n\n    QuerySnippet.query().then(snippets => {\n      const snippetManager = snippetsModule.snippetManager;\n      const m = {\n        snippetText: \"\",\n      };\n      m.snippets = snippetManager.parseSnippetFile(m.snippetText);\n      snippets.forEach(snippet => {\n        m.snippets.push(snippet.getSnippet());\n      });\n      snippetManager.register(m.snippets || [], m.scope);\n    });\n\n    editor.focus();\n  }, []);\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      paste: text => {\n        if (editorRef) {\n          const { editor } = editorRef;\n          editor.session.doc.replace(editor.selection.getRange(), text);\n          const range = editor.selection.getRange();\n          onChange(editor.session.getValue());\n          editor.selection.setRange(range);\n        }\n      },\n      focus: () => {\n        if (editorRef) {\n          editorRef.editor.focus();\n        }\n      },\n    }),\n    [editorRef, onChange]\n  );\n\n  return (\n    <div className={cx(\"query-editor-container\", className)} {...props} ref={setContainer}>\n      <AceEditor\n        ref={setEditorRef}\n        theme=\"textmate\"\n        mode={syntax || \"sql\"}\n        value={currentValue}\n        editorProps={editorProps}\n        width=\"100%\"\n        height=\"100%\"\n        setOptions={editorOptions}\n        showPrintMargin={false}\n        wrapEnabled={false}\n        onLoad={initEditor}\n        onChange={handleChange}\n        onSelectionChange={handleSelectionChange}\n      />\n    </div>\n  );\n});\n\nQueryEditor.propTypes = {\n  className: PropTypes.string,\n  syntax: PropTypes.string,\n  value: PropTypes.string,\n  autocompleteEnabled: PropTypes.bool,\n  schema: PropTypes.arrayOf(SchemaItemType),\n  onChange: PropTypes.func,\n  onSelectionChange: PropTypes.func,\n};\n\nQueryEditor.defaultProps = {\n  className: null,\n  syntax: null,\n  value: null,\n  autocompleteEnabled: true,\n  schema: [],\n  onChange: () => {},\n  onSelectionChange: () => {},\n};\n\nQueryEditor.Controls = QueryEditorControls;\n\nexport default QueryEditor;\n","import { HTMLAttributes } from \"react\";\n\ninterface SrNotifyProps {\n  text: string;\n  expiry: number;\n  container: HTMLElement;\n  politeness: HTMLAttributes<HTMLDivElement>[\"aria-live\"];\n}\n\nexport function srNotify({ text, expiry = 1000, container = document.body, politeness = \"polite\" }: SrNotifyProps) {\n  const element = document.createElement(\"div\");\n  const id = `speak-${Date.now()}`;\n\n  element.id = id;\n  element.className = \"sr-only\";\n  element.textContent = text;\n\n  element.setAttribute(\"role\", \"alert\");\n  element.setAttribute(\"aria-live\", politeness);\n\n  container.appendChild(element);\n\n  let timer: null | number = null;\n  let isDone = false;\n  const cleanupFn = () => {\n    if (isDone) {\n      return;\n    }\n    isDone = true;\n\n    try {\n      container.removeChild(element);\n    } catch (e) {\n      console.error(e);\n    }\n\n    if (timer) {\n      window.clearTimeout(timer);\n    }\n  };\n\n  timer = window.setTimeout(cleanupFn, expiry);\n\n  return cleanupFn;\n}\n","import { has } from \"lodash\";\nimport { axios } from \"@/services/axios\";\nimport DataSource from \"@/services/data-source\";\nimport { fetchDataFromJob } from \"@/services/query-result\";\n\nfunction fetchDataFromJobOrReturnData(data) {\n  return has(data, \"job.id\") ? fetchDataFromJob(data.job.id, 1000) : data;\n}\n\nfunction rejectErrorResponse(data) {\n  return has(data, \"error\") ? Promise.reject(new Error(data.error.message)) : data;\n}\n\nexport default {\n  ...DataSource,\n  getDatabases: ({ id }, refresh = false) => {\n    const params = {};\n\n    if (refresh) {\n      params.refresh = true;\n    }\n    return axios\n      .get(`api/databricks/databases/${id}`, { params })\n      .then(fetchDataFromJobOrReturnData)\n      .then(rejectErrorResponse);\n  },\n  getDatabaseTables: (data, databaseName, refresh = false) => {\n    const params = {};\n\n    if (refresh) {\n      params.refresh = true;\n    }\n    return axios\n      .get(`api/databricks/databases/${data.id}/${databaseName}/tables`, { params })\n      .then(fetchDataFromJobOrReturnData)\n      .then(rejectErrorResponse);\n  },\n  getTableColumns: (data, databaseName, tableName) =>\n    axios\n      .get(`api/databricks/databases/${data.id}/${databaseName}/columns/${tableName}`)\n      .then(fetchDataFromJobOrReturnData)\n      .then(rejectErrorResponse),\n};\n","import { includes, has, get, map, first, isFunction, isEmpty, startsWith } from \"lodash\";\nimport { useEffect, useState, useMemo, useCallback, useRef } from \"react\";\nimport notification from \"@/services/notification\";\nimport DatabricksDataSource from \"@/services/databricks-data-source\";\n\nfunction getDatabases(dataSource, refresh = false) {\n  if (!dataSource) {\n    return Promise.resolve([]);\n  }\n\n  return DatabricksDataSource.getDatabases(dataSource, refresh).catch(() => {\n    notification.error(\"Failed to load Database list.\", \"Please try again later.\");\n    return Promise.reject();\n  });\n}\n\nfunction getSchema(dataSource, databaseName, refresh = false) {\n  if (!dataSource || !databaseName) {\n    return Promise.resolve([]);\n  }\n\n  return DatabricksDataSource.getDatabaseTables(dataSource, databaseName, refresh).catch(() => {\n    notification.error(`Failed to load tables for ${databaseName}.`, \"Please try again later.\");\n    return Promise.reject();\n  });\n}\n\nfunction addDisplayNameWithoutDatabaseName(schema, databaseName) {\n  if (!databaseName) {\n    return schema;\n  }\n  // add display name without {databaseName} + \".\"\n  return map(schema, table => {\n    const databaseNamePrefix = databaseName + \".\";\n    let displayName = table.name;\n    if (startsWith(table.name, databaseNamePrefix)) {\n      displayName = table.name.slice(databaseNamePrefix.length);\n    }\n    return { ...table, displayName };\n  });\n}\n\nexport default function useDatabricksSchema(dataSource, options = null, onOptionsUpdate = null) {\n  const [databases, setDatabases] = useState([]);\n  const [loadingDatabases, setLoadingDatabases] = useState(true);\n  const [currentDatabaseName, setCurrentDatabaseName] = useState();\n  const [schemas, setSchemas] = useState({});\n  const [loadingSchema, setLoadingSchema] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n\n  const setCurrentSchema = useCallback(\n    schema =>\n      setSchemas(currentSchemas => ({\n        ...currentSchemas,\n        [currentDatabaseName]: schema,\n      })),\n    [currentDatabaseName]\n  );\n\n  const currentDatabaseNameRef = useRef();\n  currentDatabaseNameRef.current = currentDatabaseName;\n  const loadTableColumns = useCallback(\n    tableName => {\n      // remove [databaseName.] from the tableName\n      DatabricksDataSource.getTableColumns(\n        dataSource,\n        currentDatabaseName,\n        tableName.substring(currentDatabaseName.length + 1)\n      ).then(columns => {\n        if (currentDatabaseNameRef.current === currentDatabaseName) {\n          setSchemas(currentSchemas => {\n            const schema = get(currentSchemas, currentDatabaseName, []);\n            const updatedSchema = map(schema, table => {\n              if (table.name === tableName) {\n                return { ...table, columns, loading: false };\n              }\n              return table;\n            });\n            return {\n              ...currentSchemas,\n              [currentDatabaseName]: updatedSchema,\n            };\n          });\n        }\n      });\n    },\n    [dataSource, currentDatabaseName]\n  );\n\n  const schema = useMemo(() => {\n    const currentSchema = get(schemas, currentDatabaseName, []);\n    return addDisplayNameWithoutDatabaseName(currentSchema, currentDatabaseName);\n  }, [schemas, currentDatabaseName]);\n\n  const refreshAll = useCallback(() => {\n    if (!refreshing) {\n      setRefreshing(true);\n      const getDatabasesPromise = getDatabases(dataSource, true).then(setDatabases);\n      const getSchemasPromise = getSchema(dataSource, currentDatabaseName, true).then(({ schema }) =>\n        setCurrentSchema(schema)\n      );\n\n      Promise.all([getSchemasPromise.catch(() => {}), getDatabasesPromise.catch(() => {})]).then(() =>\n        setRefreshing(false)\n      );\n    }\n  }, [dataSource, currentDatabaseName, setCurrentSchema, refreshing]);\n\n  const schemasRef = useRef();\n  schemasRef.current = schemas;\n  useEffect(() => {\n    let isCancelled = false;\n    if (currentDatabaseName && !has(schemasRef.current, currentDatabaseName)) {\n      setLoadingSchema(true);\n      getSchema(dataSource, currentDatabaseName)\n        .catch(() => Promise.resolve({ schema: [], has_columns: true }))\n        .then(({ schema, has_columns }) => {\n          if (!isCancelled) {\n            if (!has_columns && !isEmpty(schema)) {\n              schema = map(schema, table => ({ ...table, loading: true }));\n              getSchema(dataSource, currentDatabaseName, true).then(({ schema }) => {\n                if (!isCancelled) {\n                  setCurrentSchema(schema);\n                }\n              });\n            }\n            setCurrentSchema(schema);\n          }\n        })\n        .finally(() => {\n          if (!isCancelled) {\n            setLoadingSchema(false);\n          }\n        });\n    }\n    return () => {\n      isCancelled = true;\n    };\n  }, [dataSource, currentDatabaseName, setCurrentSchema]);\n\n  const defaultDatabaseNameRef = useRef();\n  defaultDatabaseNameRef.current = get(options, \"selectedDatabase\", null);\n  useEffect(() => {\n    let isCancelled = false;\n    setLoadingDatabases(true);\n    setCurrentDatabaseName(undefined);\n    setSchemas({});\n    getDatabases(dataSource)\n      .catch(() => Promise.resolve([]))\n      .then(data => {\n        if (!isCancelled) {\n          setDatabases(data);\n\n          // We set the database using this order:\n          // 1. Currently selected value.\n          // 2. Last used stored in localStorage.\n          // 3. default database.\n          // 4. first database in the list.\n          let lastUsedDatabase =\n            defaultDatabaseNameRef.current || localStorage.getItem(`lastSelectedDatabricksDatabase_${dataSource.id}`);\n\n          if (!lastUsedDatabase) {\n            lastUsedDatabase = includes(data, \"default\") ? \"default\" : first(data) || null;\n          }\n\n          setCurrentDatabaseName(lastUsedDatabase);\n        }\n      })\n      .finally(() => {\n        if (!isCancelled) {\n          setLoadingDatabases(false);\n        }\n      });\n    return () => {\n      isCancelled = true;\n    };\n  }, [dataSource]);\n\n  const setCurrentDatabase = useCallback(\n    databaseName => {\n      if (databaseName) {\n        try {\n          localStorage.setItem(`lastSelectedDatabricksDatabase_${dataSource.id}`, databaseName);\n        } catch (e) {\n          // `localStorage.setItem` may throw exception if there are no enough space - in this case it could be ignored\n        }\n      }\n      setCurrentDatabaseName(databaseName);\n      if (isFunction(onOptionsUpdate) && databaseName !== defaultDatabaseNameRef.current) {\n        onOptionsUpdate({\n          ...options,\n          selectedDatabase: databaseName,\n        });\n      }\n    },\n    [dataSource.id, options, onOptionsUpdate]\n  );\n\n  return {\n    databases,\n    loadingDatabases,\n    schema,\n    loadingSchema,\n    currentDatabaseName,\n    setCurrentDatabase,\n    loadTableColumns,\n    refreshAll,\n    refreshing,\n  };\n}\n","import React, { useState, useMemo, useEffect, useCallback } from \"react\";\nimport { filter, includes, get, find } from \"lodash\";\nimport PropTypes from \"prop-types\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport Button from \"antd/lib/button\";\nimport SyncOutlinedIcon from \"@ant-design/icons/SyncOutlined\";\nimport Input from \"antd/lib/input\";\nimport Select from \"antd/lib/select\";\nimport Tooltip from \"@/components/Tooltip\";\nimport { SchemaList, applyFilterOnSchema } from \"@/components/queries/SchemaBrowser\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\nimport useDatabricksSchema from \"./useDatabricksSchema\";\n\nimport \"./DatabricksSchemaBrowser.less\";\n\nexport default function DatabricksSchemaBrowser({\n  dataSource,\n  options,\n  onOptionsUpdate,\n  onSchemaUpdate,\n  onItemSelect,\n  ...props\n}) {\n  const {\n    databases,\n    loadingDatabases,\n    schema,\n    loadingSchema,\n    loadTableColumns,\n    currentDatabaseName,\n    setCurrentDatabase,\n    refreshAll,\n    refreshing,\n  } = useDatabricksSchema(dataSource, options, onOptionsUpdate);\n  const [filterString, setFilterString] = useState(\"\");\n  const [databaseFilterString, setDatabaseFilterString] = useState(\"\");\n  const filteredSchema = useMemo(() => applyFilterOnSchema(schema, filterString), [schema, filterString]);\n  const [isDatabaseSelectOpen, setIsDatabaseSelectOpen] = useState(false);\n  const [expandedFlags, setExpandedFlags] = useState({});\n  const [handleFilterChange] = useDebouncedCallback(setFilterString, 500);\n  const [handleDatabaseFilterChange, cancelHandleDatabaseFilterChange] = useDebouncedCallback(\n    setDatabaseFilterString,\n    500\n  );\n\n  const handleDatabaseSelection = useCallback(\n    databaseName => {\n      setCurrentDatabase(databaseName);\n      cancelHandleDatabaseFilterChange();\n      setDatabaseFilterString(\"\");\n    },\n    [cancelHandleDatabaseFilterChange, setCurrentDatabase]\n  );\n\n  const filteredDatabases = useMemo(\n    () => filter(databases, database => includes(database.toLowerCase(), databaseFilterString.toLowerCase())),\n    [databases, databaseFilterString]\n  );\n\n  const handleSchemaUpdate = useImmutableCallback(onSchemaUpdate);\n\n  useEffect(() => {\n    handleSchemaUpdate(schema);\n  }, [schema, handleSchemaUpdate]);\n\n  useEffect(() => {\n    setExpandedFlags({});\n  }, [currentDatabaseName]);\n\n  function toggleTable(tableName) {\n    const table = find(schema, { name: tableName });\n    if (!expandedFlags[tableName] && get(table, \"loading\", false)) {\n      loadTableColumns(tableName);\n    }\n    setExpandedFlags({\n      ...expandedFlags,\n      [tableName]: !expandedFlags[tableName],\n    });\n  }\n\n  return (\n    <div className=\"databricks-schema-browser schema-container\" {...props}>\n      <div className=\"schema-control\">\n        <Input\n          className={isDatabaseSelectOpen ? \"database-select-open\" : \"\"}\n          placeholder={window.W_L.filter_table_columns}\n          aria-label=\"{window.W_L.search_schema}\"\n          disabled={loadingDatabases || loadingSchema}\n          onChange={event => handleFilterChange(event.target.value)}\n          addonBefore={\n            <Select\n              dropdownClassName=\"databricks-schema-browser-db-dropdown\"\n              loading={loadingDatabases}\n              disabled={loadingDatabases}\n              onChange={handleDatabaseSelection}\n              value={currentDatabaseName}\n              showSearch\n              onSearch={handleDatabaseFilterChange}\n              onDropdownVisibleChange={setIsDatabaseSelectOpen}\n              placeholder={\n                <>\n                  <i className=\"fa fa-database m-r-5\" aria-hidden=\"true\" /> Database\n                </>\n              }>\n              {filteredDatabases.map(database => (\n                <Select.Option key={database}>\n                  <i className=\"fa fa-database m-r-5\" aria-hidden=\"true\" />\n                  {database}\n                </Select.Option>\n              ))}\n            </Select>\n          }\n        />\n      </div>\n      <div className=\"schema-list-wrapper\">\n        <SchemaList\n          loading={loadingDatabases || loadingSchema}\n          schema={filteredSchema}\n          expandedFlags={expandedFlags}\n          onTableExpand={toggleTable}\n          onItemSelect={onItemSelect}\n        />\n        {!(loadingSchema || loadingDatabases) && (\n          <div className=\"load-button\">\n            <Tooltip title={!refreshing ? \"Refresh Databases and Current Schema\" : null}>\n              <Button type=\"link\" onClick={refreshAll} disabled={refreshing}>\n                <SyncOutlinedIcon spin={refreshing} />\n              </Button>\n            </Tooltip>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nDatabricksSchemaBrowser.propTypes = {\n  dataSource: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  options: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  onOptionsUpdate: PropTypes.func,\n  onSchemaUpdate: PropTypes.func,\n  onItemSelect: PropTypes.func,\n};\n\nDatabricksSchemaBrowser.defaultProps = {\n  dataSource: null,\n  options: null,\n  onOptionsUpdate: () => {},\n  onSchemaUpdate: () => {},\n  onItemSelect: () => {},\n};\n","import { isArray, isNil, each } from \"lodash\";\n\nconst componentsRegistry = new Map();\n\nexport const QueryEditorComponents = {\n  SCHEMA_BROWSER: \"SchemaBrowser\",\n  QUERY_EDITOR: \"QueryEditor\",\n};\n\nexport function registerEditorComponent(componentName, component, dataSourceTypes) {\n  if (isNil(dataSourceTypes)) {\n    dataSourceTypes = [null]; // use `null` entry for the default set of components\n  }\n\n  if (!isArray(dataSourceTypes)) {\n    dataSourceTypes = [dataSourceTypes];\n  }\n\n  each(dataSourceTypes, dataSourceType => {\n    componentsRegistry.set(dataSourceType, { ...componentsRegistry.get(dataSourceType), [componentName]: component });\n  });\n}\n\nexport function getEditorComponents(dataSourceType) {\n  return { ...componentsRegistry.get(null), ...componentsRegistry.get(dataSourceType) };\n}\n","import { useState, useEffect, useMemo } from \"react\";\nimport { first, orderBy, find } from \"lodash\";\nimport location from \"@/services/location\";\n\nexport default function useVisualizationTabHandler(visualizations) {\n  const firstVisualization = useMemo(() => first(orderBy(visualizations, [\"id\"])) || {}, [visualizations]);\n  const [selectedTab, setSelectedTab] = useState(+location.hash || firstVisualization.id);\n\n  useEffect(() => {\n    const hashValue = selectedTab !== firstVisualization.id ? `${selectedTab}` : null;\n    if (location.hash !== hashValue) {\n      location.setHash(hashValue);\n    }\n\n    const unlisten = location.listen(() => {\n      if (location.hash !== hashValue) {\n        setSelectedTab(+location.hash || firstVisualization.id);\n      }\n    });\n    return unlisten;\n  }, [firstVisualization.id, selectedTab]);\n\n  // make sure selectedTab is in visualizations\n  useEffect(() => {\n    if (!find(visualizations, { id: selectedTab })) {\n      setSelectedTab(firstVisualization.id);\n    }\n  }, [firstVisualization.id, selectedTab, visualizations]);\n\n  return useMemo(() => [selectedTab, setSelectedTab], [selectedTab]);\n}\n","import { useCallback, useMemo, useState } from \"react\";\nimport { reduce } from \"lodash\";\nimport localOptions from \"@/lib/localOptions\";\n\nfunction calculateTokensCount(schema) {\n  return reduce(schema, (totalLength, table) => totalLength + table.columns.length, 0);\n}\n\nexport default function useAutocompleteFlags(schema) {\n  const isAvailable = useMemo(() => calculateTokensCount(schema) <= 5000, [schema]);\n  const [isEnabled, setIsEnabled] = useState(localOptions.get(\"liveAutocomplete\", true));\n\n  const toggleAutocomplete = useCallback(state => {\n    setIsEnabled(state);\n    localOptions.set(\"liveAutocomplete\", state);\n  }, []);\n\n  return useMemo(() => [isAvailable, isEnabled, toggleAutocomplete], [isAvailable, isEnabled, toggleAutocomplete]);\n}\n","import { useCallback, useState } from \"react\";\nimport localOptions from \"@/lib/localOptions\";\nimport { get, extend } from \"lodash\";\n\nfunction isAutoLimitAvailable(dataSource) {\n  return get(dataSource, \"supports_auto_limit\", false);\n}\n\nexport default function useAutoLimitFlags(dataSource, query, setQuery) {\n  const isAvailable = isAutoLimitAvailable(dataSource);\n  const [isChecked, setIsChecked] = useState(query.options.apply_auto_limit);\n  query.options.apply_auto_limit = isChecked;\n\n  const setAutoLimit = useCallback(\n    state => {\n      setIsChecked(state);\n      localOptions.set(\"applyAutoLimit\", state);\n      setQuery(extend(query.clone(), { options: { ...query.options, apply_auto_limit: state } }));\n    },\n    [query, setQuery]\n  );\n\n  return [isAvailable, isChecked, setAutoLimit];\n}\n","import SchemaBrowser from \"@/components/queries/SchemaBrowser\";\nimport QueryEditor from \"@/components/queries/QueryEditor\";\nimport DatabricksSchemaBrowser from \"./databricks/DatabricksSchemaBrowser\";\n\nimport { registerEditorComponent, getEditorComponents, QueryEditorComponents } from \"./editorComponents\";\n\n// default\nregisterEditorComponent(QueryEditorComponents.SCHEMA_BROWSER, SchemaBrowser);\nregisterEditorComponent(QueryEditorComponents.QUERY_EDITOR, QueryEditor);\n\n// databricks\nregisterEditorComponent(QueryEditorComponents.SCHEMA_BROWSER, DatabricksSchemaBrowser, [\n  \"databricks\",\n  \"databricks_internal\",\n]);\n\nexport { getEditorComponents };\n","import { find } from \"lodash\";\nimport debug from \"debug\";\nimport recordEvent from \"@/services/recordEvent\";\nimport redashIconUrl from \"@/assets/images/icon_small.png\";\n\nconst logger = debug(\"redash:notifications\");\n\nconst Notification = window.Notification || null;\nif (!Notification) {\n  logger(\"HTML5 notifications are not supported.\");\n}\n\nconst hidden = find([\"hidden\", \"webkitHidden\", \"mozHidden\", \"msHidden\"], prop => prop in document);\n\nfunction isPageVisible() {\n  return !document[hidden];\n}\n\nfunction getPermissions() {\n  if (Notification && Notification.permission === \"default\") {\n    Notification.requestPermission();\n  }\n}\n\nfunction showNotification(title, content) {\n  if (!Notification || isPageVisible() || Notification.permission !== \"granted\") {\n    return;\n  }\n\n  // using the 'tag' to avoid showing duplicate notifications\n  const notification = new Notification(title, {\n    tag: title + content,\n    body: content,\n    icon: redashIconUrl,\n  });\n  notification.onclick = function onClick() {\n    window.focus();\n    this.close();\n    recordEvent(\"click\", \"notification\");\n  };\n}\n\nexport default {\n  getPermissions,\n  showNotification,\n};\n","import { useReducer, useEffect, useRef } from \"react\";\nimport location from \"@/services/location\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { ExecutionStatus } from \"@/services/query-result\";\nimport notifications from \"@/services/notifications\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\n\nfunction getMaxAge() {\n  const { maxAge } = location.search;\n  return maxAge !== undefined ? maxAge : -1;\n}\n\nconst reducer = (prevState, updatedProperty) => ({\n  ...prevState,\n  ...updatedProperty,\n});\n\n// This is currently specific to a Query page, we can refactor\n// it slightly to make it suitable for dashboard widgets instead of the other solution it\n// has in there.\nexport default function useQueryExecute(query) {\n  const [executionState, setExecutionState] = useReducer(reducer, {\n    queryResult: null,\n    isExecuting: false,\n    loadedInitialResults: false,\n    executionStatus: null,\n    isCancelling: false,\n    cancelCallback: null,\n    error: null,\n  });\n\n  const queryResultInExecution = useRef(null);\n  // Clear executing queryResult when component is unmounted to avoid errors\n  useEffect(() => {\n    return () => {\n      queryResultInExecution.current = null;\n    };\n  }, []);\n\n  const executeQuery = useImmutableCallback((maxAge = 0, queryExecutor) => {\n    let newQueryResult;\n    if (queryExecutor) {\n      newQueryResult = queryExecutor();\n    } else {\n      newQueryResult = query.getQueryResult(maxAge);\n    }\n\n    recordEvent(\"execute\", \"query\", query.id);\n    notifications.getPermissions();\n\n    queryResultInExecution.current = newQueryResult;\n\n    setExecutionState({\n      updatedAt: newQueryResult.getUpdatedAt(),\n      executionStatus: newQueryResult.getStatus(),\n      isExecuting: true,\n      cancelCallback: () => {\n        recordEvent(\"cancel_execute\", \"query\", query.id);\n        setExecutionState({ isCancelling: true });\n        newQueryResult.cancelExecution();\n      },\n    });\n\n    const onStatusChange = status => {\n      if (queryResultInExecution.current === newQueryResult) {\n        setExecutionState({ updatedAt: newQueryResult.getUpdatedAt(), executionStatus: status });\n      }\n    };\n\n    newQueryResult\n      .toPromise(onStatusChange)\n      .then(queryResult => {\n        if (queryResultInExecution.current === newQueryResult) {\n          // TODO: this should probably belong in the QueryEditor page.\n          if (queryResult && queryResult.query_result.query === query.query) {\n            query.latest_query_data_id = queryResult.getId();\n            query.queryResult = queryResult;\n          }\n\n          if (executionState.loadedInitialResults) {\n            notifications.showNotification(\"DeepBI\", `${query.name} updated.`);\n          }\n\n          setExecutionState({\n            queryResult,\n            loadedInitialResults: true,\n            error: null,\n            isExecuting: false,\n            isCancelling: false,\n            executionStatus: null,\n          });\n        }\n      })\n      .catch(queryResult => {\n        if (queryResultInExecution.current === newQueryResult) {\n          if (executionState.loadedInitialResults) {\n            notifications.showNotification(\"DeepBI\", `${query.name} failed to run: ${queryResult.getError()}`);\n          }\n\n          setExecutionState({\n            queryResult,\n            loadedInitialResults: true,\n            error: queryResult.getError(),\n            isExecuting: false,\n            isCancelling: false,\n            executionStatus: ExecutionStatus.FAILED,\n          });\n        }\n      });\n  });\n\n  const queryRef = useRef(query);\n  queryRef.current = query;\n\n  useEffect(() => {\n    // TODO: this belongs on the query page?\n    // loadedInitialResults can be removed if so\n    if (queryRef.current.hasResult() || queryRef.current.paramsRequired()) {\n      executeQuery(getMaxAge());\n    } else {\n      setExecutionState({ loadedInitialResults: true });\n    }\n  }, [executeQuery]);\n\n  return { ...executionState, ...{ executeQuery } };\n}\n","import { isUndefined } from \"lodash\";\nimport { useEffect, useMemo, useState, useCallback } from \"react\";\n\nexport default function useQueryParameters(query) {\n  const parameters = useMemo(() => query.getParametersDefs(), [query]);\n  const [dirtyFlag, setDirtyFlag] = useState(query.getParameters().hasPendingValues());\n\n  const updateDirtyFlag = useCallback(\n    flag => {\n      flag = isUndefined(flag) ? query.getParameters().hasPendingValues() : flag;\n      setDirtyFlag(flag);\n    },\n    [query]\n  );\n\n  useEffect(() => {\n    const updatedDirtyParameters = query.getParameters().hasPendingValues();\n    if (updatedDirtyParameters !== dirtyFlag) {\n      setDirtyFlag(updatedDirtyParameters);\n    }\n  }, [query, parameters, dirtyFlag]);\n\n  return useMemo(() => [parameters, dirtyFlag, updateDirtyFlag], [parameters, dirtyFlag, updateDirtyFlag]);\n}\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Modal from \"antd/lib/modal\";\nimport DatePicker from \"antd/lib/date-picker\";\nimport TimePicker from \"antd/lib/time-picker\";\nimport Select from \"antd/lib/select\";\nimport Radio from \"antd/lib/radio\";\nimport { capitalize, clone, isEqual, omitBy, isNil, isEmpty } from \"lodash\";\nimport moment from \"moment\";\nimport { secondsToInterval, durationHumanize, pluralize, IntervalEnum, localizeTime } from \"@/lib/utils\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport { RefreshScheduleType, RefreshScheduleDefault, Moment } from \"../proptypes\";\n\nimport \"./ScheduleDialog.css\";\n\nconst WEEKDAYS_SHORT = moment.weekdaysShort();\nconst WEEKDAYS_FULL = moment.weekdays();\nconst DATE_FORMAT = \"YYYY-MM-DD\";\nconst HOUR_FORMAT = \"HH:mm\";\nconst { Option, OptGroup } = Select;\n\nexport function TimeEditor(props) {\n  const [time, setTime] = useState(props.defaultValue);\n  const showUtc = time && !time.isUTC();\n\n  function onChange(newTime) {\n    setTime(newTime);\n    props.onChange(newTime);\n  }\n\n  return (\n    <React.Fragment>\n      <TimePicker allowClear={false} value={time} format={HOUR_FORMAT} minuteStep={5} onChange={onChange} />\n      {showUtc && (\n        <span className=\"utc\" data-testid=\"utc\">\n          ({moment.utc(time).format(HOUR_FORMAT)} UTC)\n        </span>\n      )}\n    </React.Fragment>\n  );\n}\n\nTimeEditor.propTypes = {\n  defaultValue: Moment,\n  onChange: PropTypes.func.isRequired,\n};\n\nTimeEditor.defaultProps = {\n  defaultValue: null,\n};\n\nclass ScheduleDialog extends React.Component {\n  static propTypes = {\n    schedule: RefreshScheduleType,\n    refreshOptions: PropTypes.arrayOf(PropTypes.number).isRequired,\n    dialog: DialogPropType.isRequired,\n  };\n\n  static defaultProps = {\n    schedule: RefreshScheduleDefault,\n  };\n\n  state = this.getState();\n\n  getState() {\n    const newSchedule = clone(this.props.schedule || ScheduleDialog.defaultProps.schedule);\n    const { time, interval: seconds, day_of_week: day } = newSchedule;\n    const { interval } = secondsToInterval(seconds);\n    const [hour, minute] = time ? localizeTime(time).split(\":\") : [null, null];\n\n    return {\n      hour,\n      minute,\n      seconds,\n      interval,\n      dayOfWeek: day ? WEEKDAYS_SHORT[WEEKDAYS_FULL.indexOf(day)] : null,\n      newSchedule,\n    };\n  }\n\n  get intervals() {\n    const ret = {\n      [IntervalEnum.NEVER]: [],\n    };\n    this.props.refreshOptions.forEach(seconds => {\n      const { count, interval } = secondsToInterval(seconds);\n      if (!(interval in ret)) {\n        ret[interval] = [];\n      }\n      ret[interval].push([count, seconds]);\n    });\n\n    Object.defineProperty(this, \"intervals\", { value: ret }); // memoize\n\n    return ret;\n  }\n\n  set newSchedule(newProps) {\n    this.setState(prevState => ({\n      newSchedule: Object.assign(prevState.newSchedule, newProps),\n    }));\n  }\n\n  setTime = time => {\n    this.newSchedule = {\n      time: moment(time)\n        .utc()\n        .format(HOUR_FORMAT),\n    };\n  };\n\n  setInterval = newSeconds => {\n    const { newSchedule } = this.state;\n    const { interval: newInterval } = secondsToInterval(newSeconds);\n\n    // resets to defaults\n    if (newInterval === IntervalEnum.NEVER) {\n      newSchedule.until = null;\n    }\n    if ([IntervalEnum.NEVER, IntervalEnum.MINUTES, IntervalEnum.HOURS].indexOf(newInterval) !== -1) {\n      newSchedule.time = null;\n    }\n    if (newInterval !== IntervalEnum.WEEKS) {\n      newSchedule.day_of_week = null;\n    }\n    if (\n      (newInterval === IntervalEnum.DAYS || newInterval === IntervalEnum.WEEKS) &&\n      (!this.state.minute || !this.state.hour)\n    ) {\n      newSchedule.time = moment()\n        .hour(\"00\")\n        .minute(\"15\")\n        .utc()\n        .format(HOUR_FORMAT);\n    }\n    if (newInterval === IntervalEnum.WEEKS && !this.state.dayOfWeek) {\n      newSchedule.day_of_week = WEEKDAYS_FULL[0];\n    }\n\n    newSchedule.interval = newSeconds;\n\n    const [hour, minute] = newSchedule.time ? localizeTime(newSchedule.time).split(\":\") : [null, null];\n\n    this.setState({\n      interval: newInterval,\n      seconds: newSeconds,\n      hour,\n      minute,\n      dayOfWeek: newSchedule.day_of_week ? WEEKDAYS_SHORT[WEEKDAYS_FULL.indexOf(newSchedule.day_of_week)] : null,\n    });\n\n    this.newSchedule = newSchedule;\n  };\n\n  setScheduleUntil = (_, date) => {\n    this.newSchedule = { until: date };\n  };\n\n  setWeekday = e => {\n    const dayOfWeek = e.target.value;\n    this.setState({ dayOfWeek });\n    this.newSchedule = {\n      day_of_week: dayOfWeek ? WEEKDAYS_FULL[WEEKDAYS_SHORT.indexOf(dayOfWeek)] : null,\n    };\n  };\n\n  setUntilToggle = e => {\n    const date = e.target.value ? moment().format(DATE_FORMAT) : null;\n    this.setScheduleUntil(null, date);\n  };\n\n  save() {\n    const { newSchedule } = this.state;\n    const hasChanged = () => {\n      const newCompact = omitBy(newSchedule, isNil);\n      const oldCompact = omitBy(this.props.schedule, isNil);\n      return !isEqual(newCompact, oldCompact);\n    };\n\n    // save if changed\n    if (hasChanged()) {\n      if (newSchedule.interval) {\n        this.props.dialog.close(clone(newSchedule));\n      } else {\n        this.props.dialog.close(null);\n      }\n    }\n    this.props.dialog.dismiss();\n  }\n\n  render() {\n    const { dialog } = this.props;\n    const {\n      interval,\n      minute,\n      hour,\n      seconds,\n      newSchedule: { until },\n    } = this.state;\n\n    return (\n      <Modal {...dialog.props} title={window.W_L.auto_flush} okText={window.W_L.ok_text} cancelText={window.W_L.cancel} className=\"schedule\" onOk={() => this.save()}>\n        <div className=\"schedule-component\">\n          <h5>{window.W_L.flush_hz}</h5>\n          <div data-testid=\"interval\">\n            <Select className=\"input\" value={seconds} onChange={this.setInterval} dropdownMatchSelectWidth={false}>\n              <Option value={null} key=\"never\">\n                {window.W_L.flush_never}\n              </Option>\n              {Object.keys(this.intervals)\n                .filter(int => !isEmpty(this.intervals[int]))\n                .map(int => (\n                  <OptGroup label={capitalize(pluralize(int))} key={int}>\n                    {this.intervals[int].map(([cnt, secs]) => (\n                      <Option value={secs} key={`${int}-${cnt}`}>\n                        {durationHumanize(secs)}\n                      </Option>\n                    ))}\n                  </OptGroup>\n                ))}\n            </Select>\n          </div>\n        </div>\n        {[IntervalEnum.DAYS, IntervalEnum.WEEKS].indexOf(interval) !== -1 ? (\n          <div className=\"schedule-component\">\n            <h5>{window.W_L.on_time}</h5>\n            <div data-testid=\"time\">\n              <TimeEditor\n                defaultValue={\n                  hour\n                    ? moment()\n                        .hour(hour)\n                        .minute(minute)\n                    : null\n                }\n                onChange={this.setTime}\n              />\n            </div>\n          </div>\n        ) : null}\n        {IntervalEnum.WEEKS === interval ? (\n          <div className=\"schedule-component\">\n            <h5>{window.W_L.on_day}</h5>\n            <div data-testid=\"weekday\">\n              <Radio.Group size=\"medium\" defaultValue={this.state.dayOfWeek} onChange={this.setWeekday}>\n                {WEEKDAYS_SHORT.map(day => (\n                  <Radio.Button value={day} key={day} className=\"input\">\n                    {day[0]}\n                  </Radio.Button>\n                ))}\n              </Radio.Group>\n            </div>\n          </div>\n        ) : null}\n        {interval !== IntervalEnum.NEVER ? (\n          <div className=\"schedule-component\">\n            <h5>{window.W_L.ends}</h5>\n            <div className=\"ends\" data-testid=\"ends\">\n              <Radio.Group size=\"medium\" value={!!until} onChange={this.setUntilToggle}>\n                <Radio value={false}>{window.W_L.never}</Radio>\n                <Radio value>{window.W_L.on}</Radio>\n              </Radio.Group>\n              {until ? (\n                <DatePicker\n                  size=\"small\"\n                  className=\"datepicker\"\n                  value={moment(until)}\n                  allowClear={false}\n                  format={DATE_FORMAT}\n                  onChange={this.setScheduleUntil}\n                />\n              ) : null}\n            </div>\n          </div>\n        ) : null}\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(ScheduleDialog);\n","import { isArray, intersection } from \"lodash\";\nimport { useCallback } from \"react\";\nimport ScheduleDialog from \"@/components/queries/ScheduleDialog\";\nimport { clientConfig } from \"@/services/auth\";\nimport { policy } from \"@/services/policy\";\nimport useUpdateQuery from \"./useUpdateQuery\";\nimport useQueryFlags from \"./useQueryFlags\";\nimport recordEvent from \"@/services/recordEvent\";\n\nexport default function useEditScheduleDialog(query, onChange) {\n  // We won't use flags that depend on data source\n  const queryFlags = useQueryFlags(query);\n\n  const updateQuery = useUpdateQuery(query, onChange);\n\n  return useCallback(() => {\n    if (!queryFlags.canEdit || !queryFlags.canSchedule) {\n      return;\n    }\n\n    const intervals = clientConfig.queryRefreshIntervals;\n    const allowedIntervals = policy.getQueryRefreshIntervals();\n    const refreshOptions = isArray(allowedIntervals) ? intersection(intervals, allowedIntervals) : intervals;\n\n    ScheduleDialog.showModal({\n      schedule: query.schedule,\n      refreshOptions,\n    }).onClose(schedule => {\n      recordEvent(\"edit_schedule\", \"query\", query.id);\n      updateQuery({ schedule });\n    });\n  }, [query.id, query.schedule, queryFlags.canEdit, queryFlags.canSchedule, updateQuery]);\n}\n","import { axios } from \"@/services/axios\";\n\nconst saveOrCreateUrl = data => (data.id ? `api/visualizations/${data.id}` : \"api/visualizations\");\n\nconst Visualization = {\n  save: data => axios.post(saveOrCreateUrl(data), data),\n  delete: data => axios.delete(`api/visualizations/${data.id}`),\n};\n\nexport default Visualization;\n","import { isEqual, extend, map, findIndex, filter, pick, omit } from \"lodash\";\nimport React, { useState, useMemo, useRef, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Modal from \"antd/lib/modal\";\nimport Select from \"antd/lib/select\";\nimport Input from \"antd/lib/input\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport Filters, { filterData } from \"@/components/Filters\";\nimport notification from \"@/services/notification\";\nimport Visualization from \"@/services/visualization\";\nimport recordEvent from \"@/services/recordEvent\";\nimport useQueryResultData from \"@/lib/useQueryResultData\";\nimport { useUniqueId } from \"@/lib/hooks/useUniqueId\";\nimport {\n  registeredVisualizations,\n  getDefaultVisualization, \n  newVisualization,\n  VisualizationType,\n} from \"@/components/chart/index\";\nimport { Renderer, Editor } from \"@/components/visualizations/visualizationComponents\";\n\nimport \"./EditVisualizationDialog.less\";\n\nfunction updateQueryVisualizations(query, visualization) {\n  const index = findIndex(query.visualizations, v => v.id === visualization.id);\n  if (index > -1) {\n    query.visualizations[index] = visualization;\n  } else {\n    // new visualization\n    query.visualizations.push(visualization);\n  }\n  query.visualizations = [...query.visualizations]; // clone array\n}\n\nfunction saveVisualization(visualization) {\n  if (visualization.id) {\n    recordEvent(\"update\", \"visualization\", visualization.id, { type: visualization.type });\n  } else {\n    recordEvent(\"create\", \"visualization\", null, { type: visualization.type });\n  }\n\n  return Visualization.save(visualization)\n    .then(result => {\n      notification.success(window.W_L.view_save_success);\n      return result;\n    })\n    .catch(error => {\n      notification.error(window.W_L.view_save_failed);\n      return Promise.reject(error);\n    });\n}\n\nfunction confirmDialogClose(isDirty) {\n  return new Promise((resolve, reject) => {\n    if (isDirty) {\n      Modal.confirm({\n        title: window.W_L.edit_view,\n        content: window.W_L.quit_with_not_save,\n        okText: window.W_L.ok_text,\n        cancelText: window.W_L.cancel,\n        onOk: () => resolve(),\n        onCancel: () => reject(),\n      });\n    } else {\n      resolve();\n    }\n  });\n}\n\nfunction EditVisualizationDialog({ dialog, visualization, query, queryResult }) {\n  const errorHandlerRef = useRef();\n\n  const isNew = !visualization;\n\n  const data = useQueryResultData(queryResult);\n  const [filters, setFilters] = useState(data.filters);\n\n  const filteredData = useMemo(\n    () => ({\n      columns: data.columns,\n      rows: filterData(data.rows, filters),\n    }),\n    [data, filters]\n  );\n   \n  const defaultState = useMemo(() => {\n    const config = visualization ? registeredVisualizations[visualization.type] : getDefaultVisualization();\n    const options = config.getOptions(isNew ? {} : visualization.options, data);\n    return {\n      type: config.type,\n      name: isNew ? config.name : visualization.name,\n      options,\n      originalOptions: options,\n    };\n  }, [data, isNew, visualization]);\n\n  const [type, setType] = useState(defaultState.type);\n  const [name, setName] = useState(defaultState.name);\n  const [nameChanged, setNameChanged] = useState(false);\n  const [options, setOptions] = useState(defaultState.options);\n\n  const [saveInProgress, setSaveInProgress] = useState(false);\n\n  useEffect(() => {\n    if (errorHandlerRef.current) {\n      errorHandlerRef.current.reset();\n    }\n  }, [data, options]);\n\n  function onTypeChanged(newType) {\n    setType(newType);\n\n    const config = registeredVisualizations[newType];\n    if (!nameChanged) {\n      setName(config.name);\n    }\n\n    setOptions(config.getOptions(isNew ? {} : visualization.options, data));\n  }\n\n  function onNameChanged(newName) {\n    setName(newName);\n    setNameChanged(newName !== name);\n  }\n\n  function onOptionsChanged(newOptions) {\n    const config = registeredVisualizations[type];\n    setOptions(config.getOptions(newOptions, data));\n  }\n\n  function save() {\n    setSaveInProgress(true);\n    let visualizationOptions = options;\n    if (type === \"TABLE\") {\n      visualizationOptions = omit(visualizationOptions, [\"paginationSize\"]);\n    }\n\n    const visualizationData = extend(newVisualization(type), visualization, {\n      name,\n      options: visualizationOptions,\n      query_id: query.id,\n    });\n    saveVisualization(visualizationData).then(savedVisualization => {\n      updateQueryVisualizations(query, savedVisualization);\n      dialog.close(savedVisualization);\n    });\n  }\n\n  function dismiss() {\n    const optionsChanged = !isEqual(options, defaultState.originalOptions);\n    confirmDialogClose(nameChanged || optionsChanged).then(dialog.dismiss);\n  }\n\n  // When editing existing visualization chart type selector is disabled, so add only existing visualization's\n  // descriptor there (to properly render the component). For new visualizations show all types except of deprecated\n  const availableVisualizations = isNew\n    ? filter(registeredVisualizations, vis => !vis.isDeprecated)\n    : pick(registeredVisualizations, [type]);\n\n  const vizTypeId = useUniqueId(\"visualization-type\");\n  const vizNameId = useUniqueId(\"visualization-name\");\n  return (\n    <Modal\n      {...dialog.props}\n      wrapClassName=\"ant-modal-fullscreen\"\n      title={window.W_L.edit_view}\n      okText={window.W_L.save}\n      cancelText={window.W_L.cancel}\n      okButtonProps={{\n        loading: saveInProgress,\n        disabled: saveInProgress,\n      }}\n      onOk={save}\n      onCancel={dismiss}\n      wrapProps={{ \"data-test\": \"EditVisualizationDialog\" }}>\n      <div className=\"edit-visualization-dialog\">\n        <div className=\"visualization-settings\">\n          <div className=\"m-b-15\">\n            <label htmlFor={vizTypeId}>{window.W_L.view_type}</label>\n            <Select\n              data-test=\"VisualizationType\"\n              id={vizTypeId}\n              className=\"w-100\"\n              disabled={!isNew}\n              value={type}\n              onChange={onTypeChanged}>\n              {map(availableVisualizations, vis => (\n                <Select.Option key={vis.type} data-test={\"VisualizationType.\" + vis.type}>\n                  {vis.name}\n                </Select.Option>\n              ))}\n            </Select>\n          </div>\n          <div className=\"m-b-15\">\n            <label htmlFor={vizNameId}>{window.W_L.view_name}</label>\n            <Input\n              data-test=\"VisualizationName\"\n              id={vizNameId}\n              className=\"w-100\"\n              value={name}\n              onChange={event => onNameChanged(event.target.value)}\n            />\n          </div>\n          <div data-test=\"VisualizationEditor\">\n            <Editor\n              type={type}\n              data={data}\n              options={options}\n              visualizationName={name}\n              onOptionsChange={onOptionsChanged}\n            />\n          </div>\n        </div>\n        <div className=\"visualization-preview\">\n          <label htmlFor=\"visualization-preview\" className=\"invisible hidden-xs\">\n            {window.W_L.preview}\n          </label>\n          <Filters filters={filters} onChange={setFilters} />\n          <div className=\"scrollbox\" data-test=\"VisualizationPreview\">\n            <Renderer\n              type={type}\n              data={filteredData}\n              options={options}\n              visualizationName={name}\n              onOptionsChange={onOptionsChanged}\n            />\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\nEditVisualizationDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  visualization: VisualizationType,\n  queryResult: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nEditVisualizationDialog.defaultProps = {\n  visualization: null,\n};\n\nexport default wrapDialog(EditVisualizationDialog);\n","import { extend, filter, find } from \"lodash\";\nimport { useCallback } from \"react\";\nimport EditVisualizationDialog from \"@/components/visualizations/EditVisualizationDialog\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\n\nexport default function useEditVisualizationDialog(query, queryResult, onChange) {\n  const handleChange = useImmutableCallback(onChange);\n\n  return useCallback(\n    (visualizationId = null) => {\n      const visualization = find(query.visualizations, { id: visualizationId }) || null;\n      EditVisualizationDialog.showModal({\n        query,\n        visualization,\n        queryResult,\n      }).onClose(updatedVisualization => {\n        const filteredVisualizations = filter(query.visualizations, v => v.id !== updatedVisualization.id);\n        handleChange(\n          extend(query.clone(), { visualizations: [...filteredVisualizations, updatedVisualization] }),\n          updatedVisualization\n        );\n      });\n    },\n    [query, queryResult, handleChange]\n  );\n}\n","import { extend, filter } from \"lodash\";\nimport { useCallback } from \"react\";\nimport Visualization from \"@/services/visualization\";\nimport notification from \"@/services/notification\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\n\nexport default function useDeleteVisualization(query, onChange) {\n  const handleChange = useImmutableCallback(onChange);\n\n  return useCallback(\n    visualizationId =>\n      Visualization.delete({ id: visualizationId })\n        .then(() => {\n          const filteredVisualizations = filter(query.visualizations, v => v.id !== visualizationId);\n          handleChange(extend(query.clone(), { visualizations: filteredVisualizations }));\n        })\n        .catch(() => {\n          notification.error(\"Error deleting visualization.\", \"Maybe it's used in a dashboard?\");\n        }),\n    [query, handleChange]\n  );\n}\n","import { useCallback } from \"react\";\nimport useUpdateQuery from \"./useUpdateQuery\";\nimport recordEvent from \"@/services/recordEvent\";\n\nexport default function useUpdateQueryDescription(query, onChange) {\n  const updateQuery = useUpdateQuery(query, onChange);\n\n  return useCallback(\n    description => {\n      recordEvent(\"edit_description\", \"query\", query.id);\n      updateQuery({ description });\n    },\n    [query.id, updateQuery]\n  );\n}\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nexport function QuerySourceTypeIcon(props) {\n  return <img src={`${process.env.CDN_DOMAIN}/static/images/db-logos/${props.type}.png`} width=\"20\" alt={props.alt} />;\n}\n\nQuerySourceTypeIcon.propTypes = {\n  type: PropTypes.string,\n  alt: PropTypes.string,\n};\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { registerComponent } from \"@/components/DynamicComponent\";\nimport { QuerySourceTypeIcon } from \"@/pages/queries/components/QuerySourceTypeIcon\";\n\nexport function QuerySourceDropdownItem({ dataSource, children }) {\n  return (\n    <React.Fragment>\n      <QuerySourceTypeIcon type={dataSource.type} aria-label={dataSource.name} title={dataSource.name} />\n      {children ? children : <span>{dataSource.name}</span>}\n    </React.Fragment>\n  );\n}\n\nQuerySourceDropdownItem.propTypes = {\n  dataSource: PropTypes.shape({\n    name: PropTypes.string,\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    type: PropTypes.string,\n  }).isRequired,\n  children: PropTypes.element,\n};\n\nregisterComponent(\"QuerySourceDropdownItem\", QuerySourceDropdownItem);\n","import Select from \"antd/lib/select\";\nimport { map } from \"lodash\";\nimport DynamicComponent, { registerComponent } from \"@/components/DynamicComponent\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport \"./QuerySourceDropdownItem\"; // register QuerySourceDropdownItem\n\nexport function QuerySourceDropdown(props) {\n  return (\n    <Select\n      className=\"w-100\"\n      data-test=\"SelectDataSource\"\n      placeholder=\"Choose data source...\"\n      value={props.value}\n      disabled={props.disabled}\n      loading={props.loading}\n      optionFilterProp=\"data-name\"\n      showSearch\n      onChange={props.onChange}>\n      {map(props.dataSources, ds => (\n        <Select.Option key={`ds-${ds.id}`} value={ds.id} data-name={ds.name} data-test={`SelectDataSource${ds.id}`}>\n          <DynamicComponent name={\"QuerySourceDropdownItem\"} dataSource={ds} />\n        </Select.Option>\n      ))}\n    </Select>\n  );\n}\n\nQuerySourceDropdown.propTypes = {\n  dataSources: PropTypes.any,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  disabled: PropTypes.bool,\n  loading: PropTypes.bool,\n  onChange: PropTypes.func,\n};\n\nregisterComponent(\"QuerySourceDropdown\", QuerySourceDropdown);\n","import { extend, find, includes, isEmpty, map } from \"lodash\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport useMedia from \"use-media\";\nimport Button from \"antd/lib/button\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport Resizable from \"@/components/Resizable\";\nimport Parameters from \"@/components/Parameters\";\nimport EditInPlace from \"@/components/EditInPlace\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { ExecutionStatus } from \"@/services/query-result\";\nimport routes from \"@/services/routes\";\nimport notification from \"@/services/notification\";\nimport * as queryFormat from \"@/lib/queryFormat\";\n\nimport QueryPageHeader from \"./components/QueryPageHeader\";\nimport QueryMetadata from \"./components/QueryMetadata\";\nimport QueryVisualizationTabs from \"./components/QueryVisualizationTabs\";\nimport QueryExecutionStatus from \"./components/QueryExecutionStatus\";\nimport QuerySourceAlerts from \"./components/QuerySourceAlerts\";\nimport wrapQueryPage from \"./components/wrapQueryPage\";\nimport QueryExecutionMetadata from \"./components/QueryExecutionMetadata\";\n\nimport { getEditorComponents } from \"@/components/queries/editor-components\";\nimport useQuery from \"./hooks/useQuery\";\nimport useVisualizationTabHandler from \"./hooks/useVisualizationTabHandler\";\nimport useAutocompleteFlags from \"./hooks/useAutocompleteFlags\";\nimport useAutoLimitFlags from \"./hooks/useAutoLimitFlags\";\nimport useQueryExecute from \"./hooks/useQueryExecute\";\nimport useQueryResultData from \"@/lib/useQueryResultData\";\nimport useQueryDataSources from \"./hooks/useQueryDataSources\";\nimport useQueryFlags from \"./hooks/useQueryFlags\";\nimport useQueryParameters from \"./hooks/useQueryParameters\";\nimport useAddNewParameterDialog from \"./hooks/useAddNewParameterDialog\";\nimport useEditScheduleDialog from \"./hooks/useEditScheduleDialog\";\nimport useAddVisualizationDialog from \"./hooks/useAddVisualizationDialog\";\nimport useEditVisualizationDialog from \"./hooks/useEditVisualizationDialog\";\nimport useDeleteVisualization from \"./hooks/useDeleteVisualization\";\nimport useUpdateQuery from \"./hooks/useUpdateQuery\";\nimport useUpdateQueryDescription from \"./hooks/useUpdateQueryDescription\";\nimport useUnsavedChangesAlert from \"./hooks/useUnsavedChangesAlert\";\n\nimport \"./components/QuerySourceDropdown\"; // register QuerySourceDropdown\nimport \"./QuerySource.less\";\n\nfunction chooseDataSourceId(dataSourceIds, availableDataSources) {\n  availableDataSources = map(availableDataSources, ds => ds.id);\n  return find(dataSourceIds, id => includes(availableDataSources, id)) || null;\n}\n\nfunction QuerySource(props) {\n  const { query, setQuery, isDirty, saveQuery } = useQuery(props.query);\n  const { dataSourcesLoaded, dataSources, dataSource } = useQueryDataSources(query);\n  const [schema, setSchema] = useState([]);\n  const queryFlags = useQueryFlags(query, dataSource);\n  const [parameters, areParametersDirty, updateParametersDirtyFlag] = useQueryParameters(query);\n  const [selectedVisualization, setSelectedVisualization] = useVisualizationTabHandler(query.visualizations);\n  const { QueryEditor, SchemaBrowser } = getEditorComponents(dataSource && dataSource.type);\n  const isMobile = !useMedia({ minWidth: 768 });\n\n  useUnsavedChangesAlert(isDirty);\n\n  const {\n    queryResult,\n    isExecuting: isQueryExecuting,\n    executionStatus,\n    executeQuery,\n    error: executionError,\n    cancelCallback: cancelExecution,\n    isCancelling: isExecutionCancelling,\n    updatedAt,\n    loadedInitialResults,\n  } = useQueryExecute(query);\n\n  const queryResultData = useQueryResultData(queryResult);\n\n  const editorRef = useRef(null);\n  const [autocompleteAvailable, autocompleteEnabled, toggleAutocomplete] = useAutocompleteFlags(schema);\n  const [autoLimitAvailable, autoLimitChecked, setAutoLimit] = useAutoLimitFlags(dataSource, query, setQuery);\n\n  const [handleQueryEditorChange] = useDebouncedCallback(queryText => {\n    setQuery(extend(query.clone(), { query: queryText }));\n  }, 100);\n\n  useEffect(() => {\n    // TODO: ignore new pages?\n    recordEvent(\"view_source\", \"query\", query.id);\n  }, [query.id]);\n\n  useEffect(() => {\n    document.title = query.name;\n  }, [query.name]);\n\n  const updateQuery = useUpdateQuery(query, setQuery);\n  const updateQueryDescription = useUpdateQueryDescription(query, setQuery);\n  const querySyntax = dataSource ? dataSource.syntax || \"sql\" : null;\n  const isFormatQueryAvailable = queryFormat.isFormatQueryAvailable(querySyntax);\n  const formatQuery = () => {\n    try {\n      const formattedQueryText = queryFormat.formatQuery(query.query, querySyntax);\n      setQuery(extend(query.clone(), { query: formattedQueryText }));\n    } catch (err) {\n      notification.error(String(err));\n    }\n  };\n\n  const handleDataSourceChange = useCallback(\n    dataSourceId => {\n      if (dataSourceId) {\n        try {\n          localStorage.setItem(\"lastSelectedDataSourceId\", dataSourceId);\n        } catch (e) {\n          // `localStorage.setItem` may throw exception if there are no enough space - in this case it could be ignored\n        }\n      }\n      if (query.data_source_id !== dataSourceId) {\n        recordEvent(\"update_data_source\", \"query\", query.id, { dataSourceId });\n        const updates = {\n          data_source_id: dataSourceId,\n          latest_query_data_id: null,\n          latest_query_data: null,\n        };\n        setQuery(extend(query.clone(), updates));\n        updateQuery(updates, { successMessage: null }); // show message only on error\n      }\n    },\n    [query, setQuery, updateQuery]\n  );\n\n  useEffect(() => {\n    // choose data source id for new queries\n    if (dataSourcesLoaded && queryFlags.isNew) {\n      const firstDataSourceId = dataSources.length > 0 ? dataSources[0].id : null;\n      handleDataSourceChange(\n        chooseDataSourceId(\n          [query.data_source_id, localStorage.getItem(\"lastSelectedDataSourceId\"), firstDataSourceId],\n          dataSources\n        )\n      );\n    }\n  }, [query.data_source_id, queryFlags.isNew, dataSourcesLoaded, dataSources, handleDataSourceChange]);\n\n  const editSchedule = useEditScheduleDialog(query, setQuery);\n  const openAddNewParameterDialog = useAddNewParameterDialog(query, (newQuery, param) => {\n    if (editorRef.current) {\n      editorRef.current.paste(param.toQueryTextFragment());\n      editorRef.current.focus();\n    }\n    setQuery(newQuery);\n  });\n\n  const handleSchemaItemSelect = useCallback(schemaItem => {\n    if (editorRef.current) {\n      editorRef.current.paste(schemaItem);\n    }\n  }, []);\n\n  const [selectedText, setSelectedText] = useState(null);\n\n  const doExecuteQuery = useCallback(\n    (skipParametersDirtyFlag = false) => {\n      if (!queryFlags.canExecute || (!skipParametersDirtyFlag && (areParametersDirty || isQueryExecuting))) {\n        return;\n      }\n      if (isDirty || !isEmpty(selectedText)) {\n        executeQuery(null, () => {\n          return query.getQueryResultByText(0, selectedText);\n        });\n      } else {\n        executeQuery();\n      }\n    },\n    [query, queryFlags.canExecute, areParametersDirty, isQueryExecuting, isDirty, selectedText, executeQuery]\n  );\n\n  const [isQuerySaving, setIsQuerySaving] = useState(false);\n\n  const doSaveQuery = useCallback(() => {\n    if (!isQuerySaving) {\n      setIsQuerySaving(true);\n      saveQuery().finally(() => setIsQuerySaving(false));\n    }\n  }, [isQuerySaving, saveQuery]);\n\n  const addVisualization = useAddVisualizationDialog(query, queryResult, doSaveQuery, (newQuery, visualization) => {\n    setQuery(newQuery);\n    setSelectedVisualization(visualization.id);\n  });\n  const editVisualization = useEditVisualizationDialog(query, queryResult, newQuery => setQuery(newQuery));\n  const deleteVisualization = useDeleteVisualization(query, setQuery);\n\n  return (\n    <div className={cx(\"query-page-wrapper\", { \"query-fixed-layout\": !isMobile })}>\n      <QuerySourceAlerts query={query} dataSourcesAvailable={!dataSourcesLoaded || dataSources.length > 0} />\n      <div className=\"container w-100 p-b-10\">\n        <QueryPageHeader\n          query={query}\n          dataSource={dataSource}\n          sourceMode\n          selectedVisualization={selectedVisualization}\n          headerExtra={<DynamicComponent name=\"QuerySource.HeaderExtra\" query={query} />}\n          onChange={setQuery}\n        />\n      </div>\n      <main className=\"query-fullscreen\">\n        <Resizable direction=\"horizontal\" sizeAttribute=\"flex-basis\" toggleShortcut=\"Alt+Shift+D, Alt+D\">\n          <nav>\n            {dataSourcesLoaded && (\n              <div className=\"editor__left__data-source\">\n                <DynamicComponent\n                  name={\"QuerySourceDropdown\"}\n                  dataSources={dataSources}\n                  value={dataSource ? dataSource.id : undefined}\n                  disabled={!queryFlags.canEdit || !dataSourcesLoaded || dataSources.length === 0}\n                  loading={!dataSourcesLoaded}\n                  onChange={handleDataSourceChange}\n                />\n              </div>\n            )}\n            <div className=\"editor__left__schema\">\n              <SchemaBrowser\n                dataSource={dataSource}\n                options={query.options.schemaOptions}\n                onOptionsUpdate={schemaOptions =>\n                  setQuery(extend(query.clone(), { options: { ...query.options, schemaOptions } }))\n                }\n                onSchemaUpdate={setSchema}\n                onItemSelect={handleSchemaItemSelect}\n              />\n            </div>\n\n            {!query.isNew() && (\n              <div className=\"query-page-query-description\">\n                <EditInPlace\n                  isEditable={queryFlags.canEdit}\n                  markdown\n                  ignoreBlanks={false}\n                  placeholder={window.W_L.new_desc}\n                  value={query.description}\n                  onDone={updateQueryDescription}\n                  multiline\n                />\n              </div>\n            )}\n\n            {!query.isNew() && <QueryMetadata layout=\"table\" query={query} onEditSchedule={editSchedule} />}\n          </nav>\n        </Resizable>\n\n        <div className=\"content\">\n          <div className=\"flex-fill p-relative\">\n            <div\n              className=\"p-absolute d-flex flex-column p-l-15 p-r-15\"\n              style={{ left: 0, top: 0, right: 0, bottom: 0, overflow: \"auto\" }}>\n              <Resizable direction=\"vertical\" sizeAttribute=\"flex-basis\">\n                <div className=\"row editor\">\n                  <section className=\"query-editor-wrapper\" data-test=\"QueryEditor\">\n                    <QueryEditor\n                      ref={editorRef}\n                      data-executing={isQueryExecuting ? \"true\" : null}\n                      syntax={dataSource ? dataSource.syntax : null}\n                      value={query.query}\n                      schema={schema}\n                      autocompleteEnabled={autocompleteAvailable && autocompleteEnabled}\n                      onChange={handleQueryEditorChange}\n                      onSelectionChange={setSelectedText}\n                    />\n\n                    <QueryEditor.Controls\n                      addParameterButtonProps={{\n                        title: window.W_L.new_params,\n                        shortcut: \"mod+p\",\n                        onClick: openAddNewParameterDialog,\n                      }}\n                      formatButtonProps={{\n                        title: isFormatQueryAvailable\n                          ? window.W_L.query_format\n                          : window.W_L.query_format_not_support,\n                        disabled: !dataSource || !isFormatQueryAvailable,\n                        shortcut: isFormatQueryAvailable ? \"mod+shift+f\" : null,\n                        onClick: formatQuery,\n                      }}\n                      saveButtonProps={\n                        queryFlags.canEdit && {\n                          text: (\n                            <React.Fragment>\n                              <span className=\"hidden-xs\">{window.W_L.save}</span>\n                              {isDirty && !isQuerySaving ? \"*\" : null}\n                            </React.Fragment>\n                          ),\n                          shortcut: \"mod+s\",\n                          onClick: doSaveQuery,\n                          loading: isQuerySaving,\n                        }\n                      }\n                      executeButtonProps={{\n                        disabled: !queryFlags.canExecute || isQueryExecuting || areParametersDirty,\n                        shortcut: \"mod+enter, alt+enter, ctrl+enter, shift+enter\",\n                        onClick: doExecuteQuery,\n                        text: (\n                          <span className=\"hidden-xs\">{selectedText === null ? window.W_L.exec_query : window.W_L.exec_select_query}</span>\n                        ),\n                      }}\n                      autocompleteToggleProps={{\n                        available: autocompleteAvailable,\n                        enabled: autocompleteEnabled,\n                        onToggle: toggleAutocomplete,\n                      }}\n                      autoLimitCheckboxProps={{\n                        available: autoLimitAvailable,\n                        checked: autoLimitChecked,\n                        onChange: setAutoLimit,\n                      }}\n                      dataSourceSelectorProps={\n                        dataSource\n                          ? {\n                              disabled: !queryFlags.canEdit,\n                              value: dataSource.id,\n                              onChange: handleDataSourceChange,\n                              options: map(dataSources, ds => ({ value: ds.id, label: ds.name })),\n                            }\n                          : false\n                      }\n                    />\n                  </section>\n                </div>\n              </Resizable>\n\n              {!queryFlags.isNew && <QueryMetadata layout=\"horizontal\" query={query} onEditSchedule={editSchedule} />}\n\n              <section className=\"query-results-wrapper\">\n                {query.hasParameters() && (\n                  <div className=\"query-parameters-wrapper\">\n                    <Parameters\n                      editable={queryFlags.canEdit}\n                      sortable={queryFlags.canEdit}\n                      disableUrlUpdate={queryFlags.isNew}\n                      parameters={parameters}\n                      onPendingValuesChange={() => updateParametersDirtyFlag()}\n                      onValuesChange={() => {\n                        updateParametersDirtyFlag(false);\n                        doExecuteQuery(true);\n                      }}\n                      onParametersEdit={() => {\n                        // save if query clean\n                        // https://discuss.redash.io/t/query-unsaved-changes-indication/3302/5\n                        if (!isDirty) {\n                          saveQuery();\n                        }\n                      }}\n                    />\n                  </div>\n                )}\n                {(executionError || isQueryExecuting) && (\n                  <div className=\"query-alerts\">\n                    <QueryExecutionStatus\n                      status={executionStatus}\n                      updatedAt={updatedAt}\n                      error={executionError}\n                      isCancelling={isExecutionCancelling}\n                      onCancel={cancelExecution}\n                    />\n                  </div>\n                )}\n\n                <React.Fragment>\n                  {queryResultData.log.length > 0 && (\n                    <div className=\"query-results-log\">\n                      <p>Log Information:</p>\n                      {map(queryResultData.log, (line, index) => (\n                        <p key={`log-line-${index}`} className=\"query-log-line\">\n                          {line}\n                        </p>\n                      ))}\n                    </div>\n                  )}\n                  {loadedInitialResults && !(queryFlags.isNew && !queryResult) && (\n                    <QueryVisualizationTabs\n                      queryResult={queryResult}\n                      visualizations={query.visualizations}\n                      showNewVisualizationButton={queryFlags.canEdit && queryResultData.status === ExecutionStatus.DONE}\n                      canDeleteVisualizations={queryFlags.canEdit}\n                      selectedTab={selectedVisualization}\n                      onChangeTab={setSelectedVisualization}\n                      onAddVisualization={addVisualization}\n                      onDeleteVisualization={deleteVisualization}\n                      refreshButton={\n                        <Button\n                          type=\"primary\"\n                          disabled={!queryFlags.canExecute || areParametersDirty}\n                          loading={isQueryExecuting}\n                          onClick={doExecuteQuery}>\n                          {!isQueryExecuting && <i className=\"zmdi zmdi-refresh m-r-5\" aria-hidden=\"true\" />}\n                          {window.W_L.flush}\n                        </Button>\n                      }\n                    />\n                  )}\n                </React.Fragment>\n              </section>\n            </div>\n          </div>\n          {queryResult && !queryResult.getError() && (\n            <div className=\"bottom-controller-container\">\n              <QueryExecutionMetadata\n                query={query}\n                queryResult={queryResult}\n                selectedVisualization={selectedVisualization}\n                isQueryExecuting={isQueryExecuting}\n                showEditVisualizationButton={!queryFlags.isNew && queryFlags.canEdit}\n                onEditVisualization={editVisualization}\n              />\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  );\n}\n\nQuerySource.propTypes = {\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nconst QuerySourcePage = wrapQueryPage(QuerySource);\n\nroutes.register(\n  \"Queries.New\",\n  routeWithUserSession({\n    path: \"/queries/new\",\n    render: pageProps => <QuerySourcePage {...pageProps} />,\n    bodyClass: \"fixed-layout\",\n  })\n);\nroutes.register(\n  \"Queries.Edit\",\n  routeWithUserSession({\n    path: \"/queries/:queryId/source\",\n    render: pageProps => <QuerySourcePage {...pageProps} />,\n    bodyClass: \"fixed-layout\",\n  })\n);\n","import { isEmpty } from \"lodash\";\nimport { useState, useMemo } from \"react\";\nimport useUpdateQuery from \"./useUpdateQuery\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\n\nexport default function useQuery(originalQuery) {\n  const [query, setQuery] = useState(originalQuery);\n  const [originalQuerySource, setOriginalQuerySource] = useState(originalQuery.query);\n  const [originalAutoLimit, setOriginalAutoLimit] = useState(query.options.apply_auto_limit);\n\n  const updateQuery = useUpdateQuery(query, updatedQuery => {\n    // It's important to update URL first, and only then update state\n    if (updatedQuery.id !== query.id) {\n      // Don't reload page when saving new query\n      navigateTo(updatedQuery.getUrl(true), true);\n    }\n    setQuery(updatedQuery);\n    setOriginalQuerySource(updatedQuery.query);\n    setOriginalAutoLimit(updatedQuery.options.apply_auto_limit);\n  });\n\n  return useMemo(\n    () => ({\n      query,\n      setQuery,\n      isDirty:\n        query.query !== originalQuerySource ||\n        (!isEmpty(query.query) && query.options.apply_auto_limit !== originalAutoLimit),\n      saveQuery: () => updateQuery(),\n    }),\n    [query, originalQuerySource, updateQuery, originalAutoLimit]\n  );\n}\n","import { filter, find, toString } from \"lodash\";\nimport { useState, useMemo, useEffect } from \"react\";\nimport DataSource from \"@/services/data-source\";\n\nexport default function useQueryDataSources(query) {\n  const [allDataSources, setAllDataSources] = useState([]);\n  const [dataSourcesLoaded, setDataSourcesLoaded] = useState(false);\n  const dataSources = useMemo(() => filter(allDataSources, ds => !ds.view_only || ds.id === query.data_source_id), [\n    allDataSources,\n    query.data_source_id,\n  ]);\n  const dataSource = useMemo(\n    () => find(dataSources, ds => toString(ds.id) === toString(query.data_source_id)) || null,\n    [query.data_source_id, dataSources]\n  );\n\n  useEffect(() => {\n    let cancelDataSourceLoading = false;\n    DataSource.query().then(data => {\n      if (!cancelDataSourceLoading) {\n        setDataSourcesLoaded(true);\n        setAllDataSources(data);\n      }\n    });\n\n    return () => {\n      cancelDataSourceLoading = true;\n    };\n  }, []);\n\n  return useMemo(() => ({ dataSourcesLoaded, dataSources, dataSource }), [dataSourcesLoaded, dataSources, dataSource]);\n}\n","import { useRef, useEffect } from \"react\";\nimport location from \"@/services/location\";\n\nexport default function useUnsavedChangesAlert(shouldShowAlert = false) {\n  const shouldShowAlertRef = useRef();\n  shouldShowAlertRef.current = shouldShowAlert;\n\n  useEffect(() => {\n    const unloadMessage = window.W_L.leave_lost_warning;\n    const confirmMessage = `${unloadMessage}\\n` + window.W_L.leave_lost_confirm ;\n    // store original handler (if any)\n    const savedOnBeforeUnload = window.onbeforeunload;\n\n    window.onbeforeunload = function onbeforeunload() {\n      return shouldShowAlertRef.current ? unloadMessage : undefined;\n    };\n\n    const unsubscribe = location.confirmChange((nextLocation, currentLocation) => {\n      if (shouldShowAlertRef.current && nextLocation.path !== currentLocation.path) {\n        return confirmMessage;\n      }\n    });\n\n    return () => {\n      window.onbeforeunload = savedOnBeforeUnload;\n      unsubscribe();\n    };\n  }, []);\n}\n","import { map } from \"lodash\";\nimport { useCallback } from \"react\";\nimport EditParameterSettingsDialog from \"@/components/EditParameterSettingsDialog\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\n\nexport default function useAddNewParameterDialog(query, onParameterAdded) {\n  const handleParameterAdded = useImmutableCallback(onParameterAdded);\n\n  return useCallback(() => {\n    EditParameterSettingsDialog.showModal({\n      parameter: {\n        title: null,\n        name: \"\",\n        type: \"text\",\n        value: null,\n      },\n      existingParams: map(query.getParameters().get(), p => p.name),\n    }).onClose(param => {\n      const newQuery = query.clone();\n      param = newQuery.getParameters().add(param);\n      handleParameterAdded(newQuery, param);\n    });\n  }, [query, handleParameterAdded]);\n}\n","import { useState, useCallback, useEffect } from \"react\";\nimport useQueryFlags from \"./useQueryFlags\";\nimport useEditVisualizationDialog from \"./useEditVisualizationDialog\";\n\nexport default function useAddVisualizationDialog(query, queryResult, saveQuery, onChange) {\n  const queryFlags = useQueryFlags(query);\n  const editVisualization = useEditVisualizationDialog(query, queryResult, onChange);\n  const [shouldOpenDialog, setShouldOpenDialog] = useState(false);\n\n  useEffect(() => {\n    if (!queryFlags.isNew && shouldOpenDialog) {\n      setShouldOpenDialog(false);\n      editVisualization();\n    }\n  }, [queryFlags.isNew, shouldOpenDialog, editVisualization]);\n\n  return useCallback(() => {\n    if (queryFlags.isNew) {\n      setShouldOpenDialog(true);\n      saveQuery();\n    } else {\n      editVisualization();\n    }\n  }, [queryFlags.isNew, saveQuery, editVisualization]);\n}\n","import React, { useState, useMemo, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport KeyboardShortcuts from \"@/services/KeyboardShortcuts\";\nimport { ButtonTooltip } from \"@/components/queries/QueryEditor/QueryEditorControls\";\n\nexport default function QueryViewButton({ title, shortcut, disabled, children, onClick, ...props }) {\n  const [tooltipVisible, setTooltipVisible] = useState(false);\n\n  const eventHandlers = useMemo(\n    () => ({\n      onMouseEnter: () => setTooltipVisible(true),\n      onMouseLeave: () => setTooltipVisible(false),\n    }),\n    []\n  );\n\n  useEffect(() => {\n    if (disabled) {\n      setTooltipVisible(false);\n    }\n  }, [disabled]);\n\n  useEffect(() => {\n    if (shortcut) {\n      const shortcuts = {\n        [shortcut]: onClick,\n      };\n\n      KeyboardShortcuts.bind(shortcuts);\n      return () => {\n        KeyboardShortcuts.unbind(shortcuts);\n      };\n    }\n  }, [shortcut, onClick]);\n\n  return (\n    <ButtonTooltip title={title} shortcut={shortcut} visible={tooltipVisible}>\n      <span {...eventHandlers}>\n        <Button\n          data-test=\"ExecuteButton\"\n          disabled={disabled}\n          onClick={onClick}\n          style={disabled ? { pointerEvents: \"none\" } : {}}\n          {...props}>\n          {children}\n        </Button>\n      </span>\n    </ButtonTooltip>\n  );\n}\n\nQueryViewButton.propTypes = {\n  className: PropTypes.string,\n  shortcut: PropTypes.string,\n  disabled: PropTypes.bool,\n  children: PropTypes.node,\n  onClick: PropTypes.func,\n};\n\nQueryViewButton.defaultProps = {\n  className: null,\n  shortcut: null,\n  disabled: false,\n  children: null,\n  onClick: () => {},\n};\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport useMedia from \"use-media\";\nimport Button from \"antd/lib/button\";\n\nimport FullscreenOutlinedIcon from \"@ant-design/icons/FullscreenOutlined\";\nimport FullscreenExitOutlinedIcon from \"@ant-design/icons/FullscreenExitOutlined\";\n\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport EditInPlace from \"@/components/EditInPlace\";\nimport Parameters from \"@/components/Parameters\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport PlainButton from \"@/components/PlainButton\";\n\nimport DataSource from \"@/services/data-source\";\nimport { ExecutionStatus } from \"@/services/query-result\";\nimport routes from \"@/services/routes\";\nimport { policy } from \"@/services/policy\";\n\nimport useQueryResultData from \"@/lib/useQueryResultData\";\n\nimport QueryPageHeader from \"./components/QueryPageHeader\";\nimport QueryVisualizationTabs from \"./components/QueryVisualizationTabs\";\nimport QueryExecutionStatus from \"./components/QueryExecutionStatus\";\nimport QueryMetadata from \"./components/QueryMetadata\";\nimport wrapQueryPage from \"./components/wrapQueryPage\";\nimport QueryViewButton from \"./components/QueryViewButton\";\nimport QueryExecutionMetadata from \"./components/QueryExecutionMetadata\";\n\nimport useVisualizationTabHandler from \"./hooks/useVisualizationTabHandler\";\nimport useQueryExecute from \"./hooks/useQueryExecute\";\nimport useUpdateQueryDescription from \"./hooks/useUpdateQueryDescription\";\nimport useQueryFlags from \"./hooks/useQueryFlags\";\nimport useQueryParameters from \"./hooks/useQueryParameters\";\nimport useEditScheduleDialog from \"./hooks/useEditScheduleDialog\";\nimport useEditVisualizationDialog from \"./hooks/useEditVisualizationDialog\";\nimport useDeleteVisualization from \"./hooks/useDeleteVisualization\";\nimport useFullscreenHandler from \"../../lib/hooks/useFullscreenHandler\";\n\nimport \"./QueryView.less\";\n\nfunction QueryView(props) {\n  const [query, setQuery] = useState(props.query);\n  const [dataSource, setDataSource] = useState();\n  const queryFlags = useQueryFlags(query, dataSource);\n  const [parameters, areParametersDirty, updateParametersDirtyFlag] = useQueryParameters(query);\n  const [selectedVisualization, setSelectedVisualization] = useVisualizationTabHandler(query.visualizations);\n  const isDesktop = useMedia({ minWidth: 768 });\n  const isFixedLayout = useMedia({ minHeight: 500 }) && isDesktop;\n  const [fullscreen, toggleFullscreen] = useFullscreenHandler(isDesktop);\n  const [addingDescription, setAddingDescription] = useState(false);\n\n  const {\n    queryResult,\n    loadedInitialResults,\n    isExecuting,\n    executionStatus,\n    executeQuery,\n    error: executionError,\n    cancelCallback: cancelExecution,\n    isCancelling: isExecutionCancelling,\n    updatedAt,\n  } = useQueryExecute(query);\n\n  const queryResultData = useQueryResultData(queryResult);\n\n  const updateQueryDescription = useUpdateQueryDescription(query, setQuery);\n  const editSchedule = useEditScheduleDialog(query, setQuery);\n  const addVisualization = useEditVisualizationDialog(query, queryResult, (newQuery, visualization) => {\n    setQuery(newQuery);\n    setSelectedVisualization(visualization.id);\n  });\n  const editVisualization = useEditVisualizationDialog(query, queryResult, newQuery => setQuery(newQuery));\n  const deleteVisualization = useDeleteVisualization(query, setQuery);\n\n  const doExecuteQuery = useCallback(\n    (skipParametersDirtyFlag = false) => {\n      if (!queryFlags.canExecute || (!skipParametersDirtyFlag && (areParametersDirty || isExecuting))) {\n        return;\n      }\n      executeQuery();\n    },\n    [areParametersDirty, executeQuery, isExecuting, queryFlags.canExecute]\n  );\n\n  useEffect(() => {\n    document.title = query.name;\n  }, [query.name]);\n\n  useEffect(() => {\n    DataSource.get({ id: query.data_source_id }).then(setDataSource);\n  }, [query.data_source_id]);\n\n  return (\n    <div\n      className={cx(\"query-page-wrapper\", {\n        \"query-view-fullscreen\": fullscreen,\n        \"query-fixed-layout\": isFixedLayout,\n      })}>\n      <div className=\"container w-100\">\n        <QueryPageHeader\n          query={query}\n          dataSource={dataSource}\n          onChange={setQuery}\n          selectedVisualization={selectedVisualization}\n          headerExtra={\n            <DynamicComponent name=\"QueryView.HeaderExtra\" query={query}>\n              {policy.canRun(query) && (\n                <QueryViewButton\n                  className=\"m-r-5\"\n                  type=\"primary\"\n                  shortcut=\"mod+enter, alt+enter, ctrl+enter\"\n                  disabled={!queryFlags.canExecute || isExecuting || areParametersDirty}\n                  onClick={doExecuteQuery}>\n                  {window.W_L.flush}\n                </QueryViewButton>\n              )}\n            </DynamicComponent>\n          }\n          tagsExtra={\n            !query.description &&\n            queryFlags.canEdit &&\n            !addingDescription &&\n            !fullscreen && (\n              <PlainButton className=\"label label-tag hidden-xs\" role=\"none\" onClick={() => setAddingDescription(true)}>\n                <i className=\"zmdi zmdi-plus m-r-5\" aria-hidden=\"true\" />\n                {window.W_L.new_desc}\n              </PlainButton>\n            )\n          }\n        />\n        {(query.description || addingDescription) && (\n          <div className={cx(\"m-t-5\", { hidden: fullscreen })}>\n            <EditInPlace\n              className=\"w-100\"\n              value={query.description}\n              isEditable={queryFlags.canEdit}\n              onDone={updateQueryDescription}\n              onStopEditing={() => setAddingDescription(false)}\n              placeholder=\"Add description\"\n              ignoreBlanks={false}\n              editorProps={{ autoSize: { minRows: 2, maxRows: 4 } }}\n              defaultEditing={addingDescription}\n              multiline\n            />\n          </div>\n        )}\n      </div>\n      <div className=\"query-view-content\">\n        {query.hasParameters() && (\n          <div className={cx(\"bg-white tiled p-15 m-t-15 m-l-15 m-r-15\", { hidden: fullscreen })}>\n            <Parameters\n              parameters={parameters}\n              onValuesChange={() => {\n                updateParametersDirtyFlag(false);\n                doExecuteQuery(true);\n              }}\n              onPendingValuesChange={() => updateParametersDirtyFlag()}\n            />\n          </div>\n        )}\n        <div className=\"query-results m-t-15\">\n          {loadedInitialResults && (\n            <QueryVisualizationTabs\n              queryResult={queryResult}\n              visualizations={query.visualizations}\n              showNewVisualizationButton={queryFlags.canEdit && queryResultData.status === ExecutionStatus.DONE}\n              canDeleteVisualizations={queryFlags.canEdit}\n              selectedTab={selectedVisualization}\n              onChangeTab={setSelectedVisualization}\n              onAddVisualization={addVisualization}\n              onDeleteVisualization={deleteVisualization}\n              refreshButton={\n                policy.canRun(query) && (\n                  <Button\n                    type=\"primary\"\n                    disabled={!queryFlags.canExecute || areParametersDirty}\n                    loading={isExecuting}\n                    onClick={doExecuteQuery}>\n                    {!isExecuting && <i className=\"zmdi zmdi-refresh m-r-5\" aria-hidden=\"true\" />}\n                    {window.W_L.flush_now}\n                  </Button>\n                )\n              }\n              canRefresh={policy.canRun(query)}\n            />\n          )}\n          <div className=\"query-results-footer\">\n            {queryResult && !queryResult.getError() && (\n              <QueryExecutionMetadata\n                query={query}\n                queryResult={queryResult}\n                selectedVisualization={selectedVisualization}\n                isQueryExecuting={isExecuting}\n                showEditVisualizationButton={queryFlags.canEdit}\n                onEditVisualization={editVisualization}\n                extraActions={\n                  <QueryViewButton\n                    className=\"icon-button m-r-5 hidden-xs\"\n                    title={window.W_L.toggle_screen}\n                    type=\"default\"\n                    shortcut=\"alt+f\"\n                    onClick={toggleFullscreen}>\n                    {fullscreen ? <FullscreenExitOutlinedIcon /> : <FullscreenOutlinedIcon />}\n                  </QueryViewButton>\n                }\n              />\n            )}\n            {(executionError || isExecuting) && (\n              <div className=\"query-execution-status\">\n                <QueryExecutionStatus\n                  status={executionStatus}\n                  error={executionError}\n                  isCancelling={isExecutionCancelling}\n                  onCancel={cancelExecution}\n                  updatedAt={updatedAt}\n                />\n              </div>\n            )}\n          </div>\n        </div>\n        <div className={cx(\"p-t-15 p-r-15 p-l-15\", { hidden: fullscreen })}>\n          <QueryMetadata layout=\"horizontal\" query={query} dataSource={dataSource} onEditSchedule={editSchedule} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nQueryView.propTypes = { query: PropTypes.object.isRequired }; // eslint-disable-line react/forbid-prop-types\n\nconst QueryViewPage = wrapQueryPage(QueryView);\n\nroutes.register(\n  \"Queries.View\",\n  routeWithUserSession({\n    path: \"/queries/:queryId\",\n    render: pageProps => <QueryViewPage {...pageProps} />,\n  })\n);\n","import { find, has } from \"lodash\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport moment from \"moment\";\nimport { markdown } from \"markdown\";\n\nimport Button from \"antd/lib/button\";\nimport Dropdown from \"antd/lib/dropdown\";\nimport Menu from \"antd/lib/menu\";\nimport Tooltip from \"@/components/Tooltip\";\nimport Link from \"@/components/Link\";\nimport routeWithApiKeySession from \"@/components/ApplicationArea/routeWithApiKeySession\";\nimport Parameters from \"@/components/Parameters\";\nimport { Moment } from \"@/components/proptypes\";\nimport TimeAgo from \"@/components/TimeAgo\";\nimport Timer from \"@/components/Timer\";\nimport QueryResultsLink from \"@/components/EditVisualizationButton/QueryResultsLink\";\nimport VisualizationName from \"@/components/visualizations/VisualizationName\";\nimport VisualizationRenderer from \"@/components/visualizations/VisualizationRenderer\";\n\nimport FileOutlinedIcon from \"@ant-design/icons/FileOutlined\";\nimport FileExcelOutlinedIcon from \"@ant-design/icons/FileExcelOutlined\";\n\nimport { VisualizationType } from \"@/components/chart/index\";\nimport HtmlContent from \"@/components/chart/components/HtmlContent\";\n\nimport { formatDateTime } from \"@/lib/utils\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\nimport { Query } from \"@/services/query\";\nimport location from \"@/services/location\";\nimport routes from \"@/services/routes\";\n\nimport logoUrl from \"@/assets/images/icon_small.png\";\n\nfunction VisualizationEmbedHeader({ queryName, queryDescription, visualization }) {\n  return (\n    <div className=\"embed-heading p-b-10 p-r-15 p-l-15\">\n      <h3>\n        <img src={logoUrl} alt=\"DeepBI Logo\" style={{ height: \"24px\", verticalAlign: \"text-bottom\" }} />\n        <VisualizationName visualization={visualization} /> {queryName}\n        {queryDescription && (\n          <small>\n            <HtmlContent className=\"markdown text-muted\">{markdown.toHTML(queryDescription || \"\")}</HtmlContent>\n          </small>\n        )}\n      </h3>\n    </div>\n  );\n}\n\nVisualizationEmbedHeader.propTypes = {\n  queryName: PropTypes.string.isRequired,\n  queryDescription: PropTypes.string,\n  visualization: VisualizationType.isRequired,\n};\n\nVisualizationEmbedHeader.defaultProps = { queryDescription: \"\" };\n\nfunction VisualizationEmbedFooter({\n  query,\n  queryResults,\n  updatedAt,\n  refreshStartedAt,\n  queryUrl,\n  hideTimestamp,\n  apiKey,\n}) {\n  const downloadMenu = (\n    <Menu>\n      <Menu.Item>\n        <QueryResultsLink\n          fileType=\"csv\"\n          query={query}\n          queryResult={queryResults}\n          apiKey={apiKey}\n          disabled={!queryResults || !queryResults.getData || !queryResults.getData()}\n          embed>\n          <FileOutlinedIcon /> {window.W_L.save_as_csv}\n        </QueryResultsLink>\n      </Menu.Item>\n      <Menu.Item>\n        <QueryResultsLink\n          fileType=\"tsv\"\n          query={query}\n          queryResult={queryResults}\n          apiKey={apiKey}\n          disabled={!queryResults || !queryResults.getData || !queryResults.getData()}\n          embed>\n          <FileOutlinedIcon /> {window.W_L.save_as_tsv}\n        </QueryResultsLink>\n      </Menu.Item>\n      <Menu.Item>\n        <QueryResultsLink\n          fileType=\"xlsx\"\n          query={query}\n          queryResult={queryResults}\n          apiKey={apiKey}\n          disabled={!queryResults || !queryResults.getData || !queryResults.getData()}\n          embed>\n          <FileExcelOutlinedIcon />{window.W_L.save_as_excel}\n        </QueryResultsLink>\n      </Menu.Item>\n    </Menu>\n  );\n\n  return (\n    <div className=\"tile__bottom-control\">\n      {!hideTimestamp && (\n        <span>\n          <span className=\"small hidden-print\">\n            <i className=\"zmdi zmdi-time-restore\" aria-hidden=\"true\" />{\" \"}\n            {refreshStartedAt ? <Timer from={refreshStartedAt} /> : <TimeAgo date={updatedAt} />}\n          </span>\n          <span className=\"small visible-print\">\n            <i className=\"zmdi zmdi-time-restore\" aria-hidden=\"true\" /> {formatDateTime(updatedAt)}\n          </span>\n        </span>\n      )}\n      {queryUrl && (\n        <span className=\"hidden-print\">\n          <Tooltip title={window.W_L.open_in_redash}>\n            <Link.Button className=\"icon-button\" href={queryUrl} target=\"_blank\">\n              <i className=\"fa fa-external-link\" aria-hidden=\"true\" />\n              <span className=\"sr-only\">Open in Tap</span>\n            </Link.Button>\n          </Tooltip>\n          {!query.hasParameters() && (\n            <Dropdown overlay={downloadMenu} disabled={!queryResults} trigger={[\"click\"]} placement=\"topLeft\">\n              <Button loading={!queryResults && !!refreshStartedAt} className=\"m-l-5\">\n                {window.W_L.save_as}\n                <i className=\"fa fa-caret-up m-l-5\" aria-hidden=\"true\" />\n              </Button>\n            </Dropdown>\n          )}\n        </span>\n      )}\n    </div>\n  );\n}\n\nVisualizationEmbedFooter.propTypes = {\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  queryResults: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  updatedAt: PropTypes.string,\n  refreshStartedAt: Moment,\n  queryUrl: PropTypes.string,\n  hideTimestamp: PropTypes.bool,\n  apiKey: PropTypes.string,\n};\n\nVisualizationEmbedFooter.defaultProps = {\n  queryResults: null,\n  updatedAt: null,\n  refreshStartedAt: null,\n  queryUrl: null,\n  hideTimestamp: false,\n  apiKey: null,\n};\n\nfunction VisualizationEmbed({ queryId, visualizationId, apiKey, onError }) {\n  const [query, setQuery] = useState(null);\n  const [error, setError] = useState(null);\n  const [refreshStartedAt, setRefreshStartedAt] = useState(null);\n  const [queryResults, setQueryResults] = useState(null);\n\n  const handleError = useImmutableCallback(onError);\n\n  useEffect(() => {\n    let isCancelled = false;\n    Query.get({ id: queryId })\n      .then(result => {\n        if (!isCancelled) {\n          setQuery(result);\n        }\n      })\n      .catch(handleError);\n\n    return () => {\n      isCancelled = true;\n    };\n  }, [queryId, handleError]);\n\n  const refreshQueryResults = useCallback(() => {\n    if (query) {\n      setError(null);\n      setRefreshStartedAt(moment());\n      query\n        .getQueryResultPromise()\n        .then(result => {\n          setQueryResults(result);\n        })\n        .catch(err => {\n          setError(err.getError());\n        })\n        .finally(() => setRefreshStartedAt(null));\n    }\n  }, [query]);\n\n  useEffect(() => {\n    document.querySelector(\"body\").classList.add(\"headless\");\n    refreshQueryResults();\n  }, [refreshQueryResults]);\n\n  if (!query) {\n    return null;\n  }\n\n  const hideHeader = has(location.search, \"hide_header\");\n  const hideParametersUI = has(location.search, \"hide_parameters\");\n  const hideQueryLink = has(location.search, \"hide_link\");\n  const hideTimestamp = has(location.search, \"hide_timestamp\");\n\n  const showQueryDescription = has(location.search, \"showDescription\");\n  visualizationId = parseInt(visualizationId, 10);\n  const visualization = find(query.visualizations, vis => vis.id === visualizationId);\n\n  if (!visualization) {\n    // call error handler async, otherwise it will destroy the component on render phase\n    setTimeout(() => {\n      onError(new Error(window.W_L.view_not_exist));\n    }, 10);\n    return null;\n  }\n\n  return (\n    <div className=\"tile m-t-10 m-l-10 m-r-10 p-t-10 embed__vis\" data-test=\"VisualizationEmbed\">\n      {!hideHeader && (\n        <VisualizationEmbedHeader\n          queryName={query.name}\n          queryDescription={showQueryDescription ? query.description : null}\n          visualization={visualization}\n        />\n      )}\n      <div className=\"col-md-12 query__vis\">\n        {!hideParametersUI && query.hasParameters() && (\n          <div className=\"p-t-15 p-b-10\">\n            <Parameters parameters={query.getParametersDefs()} onValuesChange={refreshQueryResults} />\n          </div>\n        )}\n        {error && <div className=\"alert alert-danger\" data-test=\"ErrorMessage\">{`Error: ${error}`}</div>}\n        {!error && queryResults && (\n          <VisualizationRenderer visualization={visualization} queryResult={queryResults} context=\"widget\" />\n        )}\n        {!queryResults && refreshStartedAt && (\n          <div className=\"d-flex justify-content-center\">\n            <div className=\"spinner\">\n              <i className=\"zmdi zmdi-refresh zmdi-hc-spin zmdi-hc-5x\" aria-hidden=\"true\" />\n              <span className=\"sr-only\">Refreshing...</span>\n            </div>\n          </div>\n        )}\n      </div>\n      <VisualizationEmbedFooter\n        query={query}\n        queryResults={queryResults}\n        updatedAt={queryResults ? queryResults.getUpdatedAt() : undefined}\n        refreshStartedAt={refreshStartedAt}\n        queryUrl={!hideQueryLink ? query.getUrl() : null}\n        hideTimestamp={hideTimestamp}\n        apiKey={apiKey}\n      />\n    </div>\n  );\n}\n\nVisualizationEmbed.propTypes = {\n  queryId: PropTypes.string.isRequired,\n  visualizationId: PropTypes.string,\n  apiKey: PropTypes.string.isRequired,\n  onError: PropTypes.func,\n};\n\nVisualizationEmbed.defaultProps = {\n  onError: () => {},\n};\n\nroutes.register(\n  \"Visualizations.ViewShared\",\n  routeWithApiKeySession({\n    path: \"/embed/query/:queryId/visualization/:visualizationId\",\n    render: pageProps => <VisualizationEmbed {...pageProps} />,\n    getApiKey: () => location.search.api_key,\n  })\n);\n","import { isNil, get } from \"lodash\";\nimport React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Modal from \"antd/lib/modal\";\nimport DynamicForm from \"@/components/dynamic-form/DynamicForm\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport { useUniqueId } from \"@/lib/hooks/useUniqueId\";\n\nfunction QuerySnippetDialog({ querySnippet, dialog, readOnly }) {\n  const handleSubmit = useCallback(\n    (values, successCallback, errorCallback) => {\n      const querySnippetId = get(querySnippet, \"id\");\n\n      if (isNil(values.description)) {\n        values.description = \"\";\n      }\n\n      dialog\n        .close(querySnippetId ? { id: querySnippetId, ...values } : values)\n        .then(() => successCallback(window.W_L.save_success))\n        .catch(() => errorCallback(window.W_L.save_failed));\n    },\n    [dialog, querySnippet]\n  );\n\n  const isEditing = !!get(querySnippet, \"id\");\n\n  const formFields = [\n    { name: \"trigger\", title: window.W_L.code, type: \"text\", required: true, autoFocus: !isEditing },\n    { name: \"description\", title: window.W_L.desc, type: \"text\" },\n    { name: \"snippet\", title: window.W_L.query_code, type: \"ace\", required: true },\n  ].map(field => ({ ...field, readOnly, initialValue: get(querySnippet, field.name, \"\") }));\n\n  const querySnippetsFormId = useUniqueId(\"querySnippetForm\");\n\n  return (\n    <Modal\n      {...dialog.props}\n      title={isEditing ? querySnippet.trigger : window.W_L.create_query}\n      footer={[\n        <Button key=\"cancel\" {...dialog.props.cancelButtonProps} onClick={dialog.dismiss}>\n          {readOnly ? window.W_L.close : window.W_L.cancel}\n        </Button>,\n        !readOnly && (\n          <Button\n            key=\"submit\"\n            {...dialog.props.okButtonProps}\n            disabled={readOnly || dialog.props.okButtonProps.disabled}\n            htmlType=\"submit\"\n            type=\"primary\"\n            form={querySnippetsFormId}\n            data-test=\"SaveQuerySnippetButton\">\n            {isEditing ? window.W_L.save : window.W_L.create}\n          </Button>\n        ),\n      ]}\n      wrapProps={{\n        \"data-test\": \"QuerySnippetDialog\",\n      }}>\n      <DynamicForm\n        id={querySnippetsFormId}\n        fields={formFields}\n        onSubmit={handleSubmit}\n        hideSubmitButton\n        feedbackIcons\n      />\n    </Modal>\n  );\n}\n\nQuerySnippetDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  querySnippet: PropTypes.object,\n  readOnly: PropTypes.bool,\n};\n\nQuerySnippetDialog.defaultProps = {\n  querySnippet: null,\n  readOnly: false,\n};\n\nexport default wrapDialog(QuerySnippetDialog);\n","import { get } from \"lodash\";\nimport React from \"react\";\n\nimport Button from \"antd/lib/button\";\nimport Modal from \"antd/lib/modal\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport Paginator from \"@/components/Paginator\";\nimport QuerySnippetDialog from \"@/components/query-snippets/QuerySnippetDialog\";\n\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { StateStorage } from \"@/components/items-list/classes/StateStorage\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\nimport PlainButton from \"@/components/PlainButton\";\n\nimport QuerySnippet from \"@/services/query-snippet\";\nimport { currentUser } from \"@/services/auth\";\nimport { policy } from \"@/services/policy\";\nimport notification from \"@/services/notification\";\nimport routes from \"@/services/routes\";\n\nimport \"./QuerySnippetsList.less\";\n\nconst canEditQuerySnippet = querySnippet => currentUser.isAdmin || currentUser.id === get(querySnippet, \"user.id\");\n\nclass QuerySnippetsList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  listColumns = [\n    Columns.custom.sortable(\n      (text, querySnippet) => (\n        <PlainButton type=\"link\" className=\"table-main-title\" onClick={() => this.showSnippetDialog(querySnippet)}>\n          {querySnippet.trigger}\n        </PlainButton>\n      ),\n      {\n        title: window.W_L.snippet_script,\n        field: \"trigger\",\n        className: \"text-nowrap\",\n      }\n    ),\n    Columns.custom.sortable(text => text, {\n      title: window.W_L.desc,\n      field: \"description\",\n      className: \"text-nowrap\",\n    }),\n    Columns.custom(snippet => <code className=\"snippet-content\">{snippet}</code>, {\n      title: window.W_L.script,\n      field: \"snippet\",\n    }),\n    Columns.avatar({ field: \"user\", className: \"p-l-0 p-r-0\" }, name => window.W_L.create_user +` ${name}`),\n    Columns.date.sortable({\n      title:window.W_L.create_time,\n      field: \"created_at\",\n      className: \"text-nowrap\",\n      width: \"1%\",\n    }),\n    Columns.custom(\n      (text, querySnippet) =>\n        canEditQuerySnippet(querySnippet) && (\n          <Button type=\"danger\" className=\"w-100\" onClick={e => this.deleteQuerySnippet(e, querySnippet)}>\n            {window.W_L.delete}\n          </Button>\n        ),\n      {\n        width: \"1%\",\n      }\n    ),\n  ];\n\n  componentDidMount() {\n    const { isNewOrEditPage, querySnippetId } = this.props.controller.params;\n\n    if (isNewOrEditPage) {\n      if (querySnippetId === \"new\") {\n        if (policy.isCreateQuerySnippetEnabled()) {\n          this.showSnippetDialog();\n        } else {\n          navigateTo(\"query_snippets\", true);\n        }\n      } else {\n        QuerySnippet.get({ id: querySnippetId })\n          .then(this.showSnippetDialog)\n          .catch(error => {\n            this.props.controller.handleError(error);\n          });\n      }\n    }\n  }\n\n  saveQuerySnippet = querySnippet => {\n    const saveSnippet = querySnippet.id ? QuerySnippet.save : QuerySnippet.create;\n    return saveSnippet(querySnippet);\n  };\n\n  deleteQuerySnippet = (event, querySnippet) => {\n    Modal.confirm({\n      title: window.W_L.delete_snippet_script,\n      content: window.W_L.delete_snippet_script_confirm,\n      okText: window.W_L.ok_text,\n      okType: \"danger\",\n      cancelText: window.W_L.cancel,\n      onOk: () => {\n        QuerySnippet.delete(querySnippet)\n          .then(() => {\n            notification.success(window.W_L.delete_snippet_script_success);\n            this.props.controller.update();\n          })\n          .catch(() => {\n            notification.error(window.W_L.delete_snippet_script_failed);\n          });\n      },\n    });\n  };\n\n  showSnippetDialog = (querySnippet = null) => {\n    const canSave = !querySnippet || canEditQuerySnippet(querySnippet);\n    navigateTo(\"query_snippets/\" + get(querySnippet, \"id\", \"new\"), true);\n    const goToSnippetsList = () => navigateTo(\"query_snippets\", true);\n    QuerySnippetDialog.showModal({\n      querySnippet,\n      readOnly: !canSave,\n    })\n      .onClose(querySnippet =>\n        this.saveQuerySnippet(querySnippet).then(() => {\n          this.props.controller.update();\n          goToSnippetsList();\n        })\n      )\n      .onDismiss(goToSnippetsList);\n  };\n\n  render() {\n    const { controller } = this.props;\n\n    return (\n      <div>\n        <div className=\"m-b-15\">\n          <Button\n            type=\"primary\"\n            onClick={() => this.showSnippetDialog()}\n            disabled={!policy.isCreateQuerySnippetEnabled()}>\n            <i className=\"fa fa-plus m-r-5\" aria-hidden=\"true\" />\n            {window.W_L.new_snippet_script}\n          </Button>\n        </div>\n\n        {!controller.isLoaded && <LoadingState className=\"\" />}\n        {controller.isLoaded && controller.isEmpty && (\n          <div className=\"text-center\">\n            {window.W_L.no_snippet_script}\n            {policy.isCreateQuerySnippetEnabled() && (\n              <div className=\"m-t-5\">\n                <PlainButton type=\"link\" onClick={() => this.showSnippetDialog()}>\n                  {window.W_L.new_snippet_script}\n                </PlainButton>{\" \"}\n              </div>\n            )}\n          </div>\n        )}\n        {controller.isLoaded && !controller.isEmpty && (\n          <div className=\"table-responsive query-snippets-table\">\n            <ItemsTable\n              items={controller.pageItems}\n              columns={this.listColumns}\n              context={this.actions}\n              orderByField={controller.orderByField}\n              orderByReverse={controller.orderByReverse}\n              toggleSorting={controller.toggleSorting}\n            />\n            <Paginator\n              showPageSizeSelect\n              totalCount={controller.totalItemsCount}\n              pageSize={controller.itemsPerPage}\n              onPageSizeChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n              page={controller.page}\n              onChange={page => controller.updatePagination({ page })}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nconst QuerySnippetsListPage = wrapSettingsTab(\n  \"QuerySnippets.List\",\n  {\n    permission: \"create_query\",\n    title: window.W_L.snippet_script,\n    path: \"query_snippets\",\n    order: 5,\n  },\n  itemsList(\n    QuerySnippetsList,\n    () =>\n      new ResourceItemsSource({\n        isPlainList: true,\n        getRequest() {\n          return {};\n        },\n        getResource() {\n          return QuerySnippet.query.bind(QuerySnippet);\n        },\n      }),\n    () => new StateStorage({ orderByField: \"trigger\", itemsPerPage: 10 })\n  )\n);\n\nroutes.register(\n  \"QuerySnippets.List\",\n  routeWithUserSession({\n    path: \"/query_snippets\",\n    title: window.W_L.snippet_script,\n    render: pageProps => <QuerySnippetsListPage {...pageProps} currentPage=\"query_snippets\" />,\n  })\n);\nroutes.register(\n  \"QuerySnippets.NewOrEdit\",\n  routeWithUserSession({\n    path: \"/query_snippets/:querySnippetId\",\n    title: window.W_L.snippet_script,\n    render: pageProps => <QuerySnippetsListPage {...pageProps} currentPage=\"query_snippets\" isNewOrEditPage />,\n  })\n);\n","import { get } from \"lodash\";\nimport { useState, useEffect, useCallback } from \"react\";\nimport recordEvent from \"@/services/recordEvent\";\nimport OrgSettings from \"@/services/organizationSettings\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\nimport { updateClientConfig } from \"@/services/auth\";\n\nexport default function useOrganizationSettings({ onError }) {\n  const [settings, setSettings] = useState({});\n  const [currentValues, setCurrentValues] = useState({});\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSaving, setIsSaving] = useState(false);\n\n  const handleError = useImmutableCallback(onError);\n\n  useEffect(() => {\n    recordEvent(\"view\", \"page\", \"org_settings\");\n\n    let isCancelled = false;\n\n    OrgSettings.get()\n      .then(response => {\n        if (!isCancelled) {\n          const settings = get(response, \"settings\");\n          setSettings(settings);\n          setCurrentValues({ ...settings });\n          setIsLoading(false);\n        }\n      })\n      .catch(error => {\n        if (!isCancelled) {\n          handleError(error);\n        }\n      });\n\n    return () => {\n      isCancelled = true;\n    };\n  }, [handleError]);\n\n  const handleChange = useCallback(changes => {\n    setCurrentValues(currentValues => ({ ...currentValues, ...changes }));\n  }, []);\n\n  const handleSubmit = useCallback(() => {\n    if (!isSaving) {\n      setIsSaving(true);\n      OrgSettings.save(currentValues)\n        .then(response => {\n          const settings = get(response, \"settings\");\n          setSettings(settings);\n          setCurrentValues({ ...settings });\n          updateClientConfig({\n            dateFormat: currentValues.date_format,\n            timeFormat: currentValues.time_format,\n            dateTimeFormat: `${currentValues.date_format} ${currentValues.time_format}`,\n          });\n        })\n        .catch(handleError)\n        .finally(() => setIsSaving(false));\n    }\n  }, [isSaving, currentValues, handleError]);\n\n  return { settings, currentValues, isLoading, isSaving, handleSubmit, handleChange };\n}\n","import PropTypes from \"prop-types\";\n\nexport const SettingsEditorPropTypes = {\n  settings: PropTypes.object,\n  values: PropTypes.object,\n  onChange: PropTypes.func, // (key, value) => void\n  loading: PropTypes.bool,\n};\n\nexport const SettingsEditorDefaultProps = {\n  settings: {},\n  values: {},\n  onChange: () => {},\n  loading: false,\n};\n","import React from \"react\";\nimport { SettingsEditorPropTypes, SettingsEditorDefaultProps } from \"../prop-types\";\nimport Form from \"antd/lib/form\";\nimport Select from \"antd/lib/select\";\nimport Skeleton from \"antd/lib/skeleton\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { clientConfig } from \"@/services/auth\";\n\nexport default function FormatSettings(props) {\n  const { values, onChange, loading } = props;\n\n  return (\n    <DynamicComponent name=\"OrganizationSettings.FormatSettings\" {...props}>\n      <Form.Item label={window.W_L.date_format}>\n        {loading ? (\n          <Skeleton.Input style={{ width: 300 }} active />\n        ) : (\n          <Select\n            value={values.date_format}\n            onChange={value => onChange({ date_format: value })}\n            data-test=\"DateFormatSelect\">\n            {clientConfig.dateFormatList.map(dateFormat => (\n              <Select.Option key={dateFormat} data-test={`DateFormatSelect:${dateFormat}`}>\n                {dateFormat}\n              </Select.Option>\n            ))}\n          </Select>\n        )}\n      </Form.Item>\n      <Form.Item label={window.W_L.time_format}>\n        {loading ? (\n          <Skeleton.Input style={{ width: 300 }} active />\n        ) : (\n          <Select\n            value={values.time_format}\n            onChange={value => onChange({ time_format: value })}\n            data-test=\"TimeFormatSelect\">\n            {clientConfig.timeFormatList.map(timeFormat => (\n              <Select.Option key={timeFormat}>{timeFormat}</Select.Option>\n            ))}\n          </Select>\n        )}\n      </Form.Item>\n    </DynamicComponent>\n  );\n}\n\nFormatSettings.propTypes = SettingsEditorPropTypes;\n\nFormatSettings.defaultProps = SettingsEditorDefaultProps;\n","import React from \"react\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport Form from \"antd/lib/form\";\nimport Skeleton from \"antd/lib/skeleton\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { SettingsEditorPropTypes, SettingsEditorDefaultProps } from \"../prop-types\";\n\nexport default function PlotlySettings(props) {\n  const { values, onChange, loading } = props;\n\n  return (\n    <DynamicComponent name=\"OrganizationSettings.PlotlySettings\" {...props}>\n      <Form.Item label={window.W_L.hidden_tool_bar + '(Chart)'}>\n        {loading ? (\n          <Skeleton title={{ width: 300 }} paragraph={false} active />\n        ) : (\n          <Checkbox\n            name=\"hide_plotly_mode_bar\"\n            checked={values.hide_plotly_mode_bar}\n            onChange={e => onChange({ hide_plotly_mode_bar: e.target.checked })}>\n            {window.W_L.hidden_tool_bar}\n          </Checkbox>\n        )}\n      </Form.Item>\n    </DynamicComponent>\n  );\n}\n\nPlotlySettings.propTypes = SettingsEditorPropTypes;\n\nPlotlySettings.defaultProps = SettingsEditorDefaultProps;\n","import React from \"react\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport Form from \"antd/lib/form\";\nimport Row from \"antd/lib/row\";\nimport Skeleton from \"antd/lib/skeleton\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { SettingsEditorPropTypes, SettingsEditorDefaultProps } from \"../prop-types\";\n\nexport default function FeatureFlagsSettings(props) {\n  const { values, onChange, loading } = props;\n\n  return (\n    <DynamicComponent name=\"OrganizationSettings.FeatureFlagsSettings\" {...props}>\n      <Form.Item label={window.W_L.feature_flags}>\n        {loading ? (\n          <>\n            <Row>\n              <Skeleton title={false} paragraph={{ width: [300, 300, 300], rows: 3 }} active />\n            </Row>\n          </>\n        ) : (\n          <>\n            <DynamicComponent name=\"OrganizationSettings.FeatureFlagsSettings.PermissionsControl\" {...props}>\n              <Row>\n                <Checkbox\n                  name=\"feature_show_permissions_control\"\n                  checked={values.feature_show_permissions_control}\n                  onChange={e => onChange({ feature_show_permissions_control: e.target.checked })}>\n\t\t\t\t\t{window.W_L.enable_multiple_owners_tip}\n                </Checkbox>\n              </Row>\n            </DynamicComponent>\n            <Row>\n              <Checkbox\n                name=\"send_email_on_failed_scheduled_queries\"\n                checked={values.send_email_on_failed_scheduled_queries}\n                onChange={e => onChange({ send_email_on_failed_scheduled_queries: e.target.checked })}>\n                {window.W_L.when_query_error_info_by_email}\n              </Checkbox>\n            </Row>\n            <Row>\n              <Checkbox\n                name=\"multi_byte_search_enabled\"\n                checked={values.multi_byte_search_enabled}\n                onChange={e => onChange({ multi_byte_search_enabled: e.target.checked })}>\n                {window.W_L.dashboard_language_tip}\n              </Checkbox>\n            </Row>\n          </>\n        )}\n      </Form.Item>\n    </DynamicComponent>\n  );\n}\n\nFeatureFlagsSettings.propTypes = SettingsEditorPropTypes;\n\nFeatureFlagsSettings.defaultProps = SettingsEditorDefaultProps;\n","import React from \"react\";\nimport Form from \"antd/lib/form\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport Skeleton from \"antd/lib/skeleton\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { SettingsEditorPropTypes, SettingsEditorDefaultProps } from \"../prop-types\";\n\nexport default function BeaconConsentSettings(props) {\n  const { values, onChange, loading } = props;\n\n  return (\n    <DynamicComponent name=\"OrganizationSettings.BeaconConsentSettings\" {...props}>\n      <Form.Item\n        label={\n          <span>\n            {window.W_L.help_share_anonymous_data}\n            <HelpTrigger className=\"m-l-5 m-r-5\" type=\"USAGE_DATA_SHARING\" />\n          </span>\n        }>\n        {loading ? (\n          <Skeleton title={{ width: 300 }} paragraph={false} active />\n        ) : (\n          <Checkbox\n            name=\"beacon_consent\"\n            checked={values.beacon_consent}\n            onChange={e => onChange({ beacon_consent: e.target.checked })}>\n            {window.W_L.help_redash_improve_tip}\n          </Checkbox>\n        )}\n      </Form.Item>\n    </DynamicComponent>\n  );\n}\n\nBeaconConsentSettings.propTypes = SettingsEditorPropTypes;\n\nBeaconConsentSettings.defaultProps = SettingsEditorDefaultProps;\n","import React from \"react\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\n\nimport FormatSettings from \"./FormatSettings\";\nimport PlotlySettings from \"./PlotlySettings\";\nimport FeatureFlagsSettings from \"./FeatureFlagsSettings\";\nimport BeaconConsentSettings from \"./BeaconConsentSettings\";\n\nexport default function GeneralSettings(props) {\n  return (\n    <DynamicComponent name=\"OrganizationSettings.GeneralSettings\" {...props}>\n      <h3 className=\"m-t-0\">{window.W_L.params}</h3>\n      <hr />\n      <FormatSettings {...props} />\n      <PlotlySettings {...props} />\n      <FeatureFlagsSettings {...props} />\n      <BeaconConsentSettings {...props} />\n    </DynamicComponent>\n  );\n}\n","import React from \"react\";\nimport Alert from \"antd/lib/alert\";\nimport Form from \"antd/lib/form\";\nimport Checkbox from \"antd/lib/checkbox\";\nimport Tooltip from \"@/components/Tooltip\";\nimport Skeleton from \"antd/lib/skeleton\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { clientConfig } from \"@/services/auth\";\nimport { SettingsEditorPropTypes, SettingsEditorDefaultProps } from \"../prop-types\";\n\nexport default function PasswordLoginSettings(props) {\n  const { settings, values, onChange, loading } = props;\n\n  const isTheOnlyAuthMethod =\n    !clientConfig.googleLoginEnabled && !clientConfig.ldapLoginEnabled && !values.auth_saml_enabled;\n\n  return (\n    <DynamicComponent name=\"OrganizationSettings.PasswordLoginSettings\" {...props}>\n      {!loading && !settings.auth_password_login_enabled && (\n        <Alert\n          message={window.W_L.disable_password_tip}\n          type=\"warning\"\n          className=\"m-t-15 m-b-15\"\n        />\n      )}\n      <Form.Item label={window.W_L.password_login}>\n        {loading ? (\n          <Skeleton title={{ width: 300 }} paragraph={false} active />\n        ) : (\n          <Checkbox\n            checked={values.auth_password_login_enabled}\n            disabled={isTheOnlyAuthMethod}\n            onChange={e => onChange({ auth_password_login_enabled: e.target.checked })}>\n            <Tooltip\n              title={\n                isTheOnlyAuthMethod ? window.W_L.enable_password_login_tip : null\n              }\n              placement=\"right\">\n              {window.W_L.enable_password}\n            </Tooltip>\n          </Checkbox>\n        )}\n      </Form.Item>\n    </DynamicComponent>\n  );\n}\n\nPasswordLoginSettings.propTypes = SettingsEditorPropTypes;\n\nPasswordLoginSettings.defaultProps = SettingsEditorDefaultProps;\n","import { isEmpty, join } from \"lodash\";\nimport React from \"react\";\nimport Form from \"antd/lib/form\";\nimport Select from \"antd/lib/select\";\nimport Alert from \"antd/lib/alert\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { clientConfig } from \"@/services/auth\";\nimport { SettingsEditorPropTypes, SettingsEditorDefaultProps } from \"../prop-types\";\n\nexport default function GoogleLoginSettings(props) {\n  const { values, onChange } = props;\n\n  if (!clientConfig.googleLoginEnabled) {\n    return null;\n  }\n\n  return (\n    <DynamicComponent name=\"OrganizationSettings.GoogleLoginSettings\" {...props}>\n      <h4>{window.W_L.google_login}</h4>\n      <Form.Item label=\"{window.W_L.allow} Google Apps Domains\">\n        <Select\n          mode=\"tags\"\n          value={values.auth_google_apps_domains}\n          onChange={value => onChange({ auth_google_apps_domains: value })}\n        />\n        {!isEmpty(values.auth_google_apps_domains) && (\n          <Alert\n            message={\n              <p>\n                {window.W_L.google_login_tip}<strong>{join(values.auth_google_apps_domains, \", \")}</strong>{window.W_L.google_login_auto_reg}\n              </p>\n            }\n            className=\"m-t-15\"\n          />\n        )}\n      </Form.Item>\n    </DynamicComponent>\n  );\n}\n\nGoogleLoginSettings.propTypes = SettingsEditorPropTypes;\n\nGoogleLoginSettings.defaultProps = SettingsEditorDefaultProps;\n","import React from \"react\";\nimport Form from \"antd/lib/form\";\nimport Input from \"antd/lib/input\";\nimport Skeleton from \"antd/lib/skeleton\";\nimport Radio from \"antd/lib/radio\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { SettingsEditorPropTypes, SettingsEditorDefaultProps } from \"../prop-types\";\n\nexport default function SAMLSettings(props) {\n  const { values, onChange, loading } = props;\n\n  const onChangeEnabledStatus = e => {\n    const updates = { auth_saml_enabled: !!e.target.value };\n    if (e.target.value) {\n      updates.auth_saml_type = e.target.value;\n    }\n    onChange(updates);\n  };\n\n  return (\n    <DynamicComponent name=\"OrganizationSettings.SAMLSettings\" {...props}>\n      <h4>SAML</h4>\n      <Form.Item label={window.W_L.enable_saml}>\n        {loading ? (\n          <Skeleton title={{ width: 300 }} paragraph={false} active />\n        ) : (\n          <Radio.Group\n            onChange={onChangeEnabledStatus}\n            value={values.auth_saml_enabled && (values.auth_saml_type || \"dynamic\")}>\n            <Radio value={false}>{window.W_L.disable}</Radio>\n            <Radio value={\"static\"}>{window.W_L.enable}({window.W_L.static})</Radio>\n            <Radio value={\"dynamic\"}>{window.W_L.enable}({window.W_L.dynamic})</Radio>\n          </Radio.Group>\n        )}\n      </Form.Item>\n      {values.auth_saml_enabled && (\n        <>\n          {values.auth_saml_type === \"static\" && (\n            <>\n              <Form.Item label=\"SAML Single Sign-on URL\">\n                <Input\n                  value={values.auth_saml_sso_url}\n                  onChange={e => onChange({ auth_saml_sso_url: e.target.value })}\n                />\n              </Form.Item>\n              <Form.Item label=\"SAML Entity ID\">\n                <Input\n                  value={values.auth_saml_entity_id}\n                  onChange={e => onChange({ auth_saml_entity_id: e.target.value })}\n                />\n              </Form.Item>\n              <Form.Item label=\"SAML x509 cert\">\n                <Input\n                  value={values.auth_saml_x509_cert}\n                  onChange={e => onChange({ auth_saml_x509_cert: e.target.value })}\n                />\n              </Form.Item>\n            </>\n          )}\n          {values.auth_saml_type === \"dynamic\" && (\n            <>\n              <Form.Item label=\"SAML Metadata URL\">\n                <Input\n                  value={values.auth_saml_metadata_url}\n                  onChange={e => onChange({ auth_saml_metadata_url: e.target.value })}\n                />\n              </Form.Item>\n              <Form.Item label=\"SAML Entity ID\">\n                <Input\n                  value={values.auth_saml_entity_id}\n                  onChange={e => onChange({ auth_saml_entity_id: e.target.value })}\n                />\n              </Form.Item>\n              <Form.Item label=\"SAML NameID Format\">\n                <Input\n                  value={values.auth_saml_nameid_format}\n                  onChange={e => onChange({ auth_saml_nameid_format: e.target.value })}\n                />\n              </Form.Item>\n            </>\n          )}\n        </>\n      )}\n    </DynamicComponent>\n  );\n}\n\nSAMLSettings.propTypes = SettingsEditorPropTypes;\n\nSAMLSettings.defaultProps = SettingsEditorDefaultProps;\n","import React, { useCallback } from \"react\";\nimport HelpTrigger from \"@/components/HelpTrigger\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { clientConfig } from \"@/services/auth\";\nimport { SettingsEditorPropTypes, SettingsEditorDefaultProps } from \"../prop-types\";\n\nimport PasswordLoginSettings from \"./PasswordLoginSettings\";\nimport GoogleLoginSettings from \"./GoogleLoginSettings\";\nimport SAMLSettings from \"./SAMLSettings\";\n\nexport default function AuthSettings(props) {\n  const { values, onChange } = props;\n  const handleChange = useCallback(\n    changes => {\n      const allSettings = { ...values, ...changes };\n      const allAuthMethodsDisabled =\n        !clientConfig.googleLoginEnabled && !clientConfig.ldapLoginEnabled && !allSettings.auth_saml_enabled;\n      if (allAuthMethodsDisabled) {\n        changes = { ...changes, auth_password_login_enabled: true };\n      }\n      onChange(changes);\n    },\n    [values, onChange]\n  );\n\n  return (\n    <DynamicComponent name=\"OrganizationSettings.AuthSettings\" {...props}>\n      <h3 className=\"m-t-0\">\n        {window.W_L.authentication} <HelpTrigger type=\"AUTHENTICATION_OPTIONS\" />\n      </h3>\n      <hr />\n      <PasswordLoginSettings {...props} onChange={handleChange} />\n      <GoogleLoginSettings {...props} onChange={handleChange} />\n      <SAMLSettings {...props} onChange={handleChange} />\n    </DynamicComponent>\n  );\n}\n\nAuthSettings.propTypes = SettingsEditorPropTypes;\nAuthSettings.defaultProps = SettingsEditorDefaultProps;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Button from \"antd/lib/button\";\nimport Form from \"antd/lib/form\";\nimport Skeleton from \"antd/lib/skeleton\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nimport routes from \"@/services/routes\";\nimport { getHorizontalFormProps, getHorizontalFormItemWithoutLabelProps } from \"@/styles/formStyle\";\n\nimport useOrganizationSettings from \"./hooks/useOrganizationSettings\";\nimport GeneralSettings from \"./components/GeneralSettings\";\nimport AuthSettings from \"./components/AuthSettings\";\n\nfunction OrganizationSettings({ onError }) {\n  const { settings, currentValues, isLoading, isSaving, handleSubmit, handleChange } = useOrganizationSettings(onError);\n  return (\n    <div className=\"row\" data-test=\"OrganizationSettings\">\n      <div className=\"m-r-20 m-l-20\">\n        <Form {...getHorizontalFormProps()} onFinish={handleSubmit}>\n          <GeneralSettings loading={isLoading} settings={settings} values={currentValues} onChange={handleChange} />\n          <AuthSettings loading={isLoading} settings={settings} values={currentValues} onChange={handleChange} />\n          <Form.Item {...getHorizontalFormItemWithoutLabelProps()}>\n            {isLoading ? (\n              <Skeleton.Button active />\n            ) : (\n              <Button type=\"primary\" htmlType=\"submit\" loading={isSaving} data-test=\"OrganizationSettingsSaveButton\">\n                {window.W_L.save}\n              </Button>\n            )}\n          </Form.Item>\n        </Form>\n      </div>\n    </div>\n  );\n}\n\nOrganizationSettings.propTypes = {\n  onError: PropTypes.func,\n};\n\nOrganizationSettings.defaultProps = {\n  onError: () => {},\n};\n\nconst OrganizationSettingsPage = wrapSettingsTab(\n  \"Settings.Organization\",\n  {\n    permission: \"admin\",\n    title: window.W_L.sys_setting,\n    path: \"settings/general\",\n    order: 6,\n  },\n  OrganizationSettings\n);\n\nroutes.register(\n  \"Settings.Organization\",\n  routeWithUserSession({\n    path: \"/settings/general\",\n    title: window.W_L.sys_setting,\n    render: pageProps => <OrganizationSettingsPage {...pageProps} />,\n  })\n);\n","import { FormProps } from \"antd/lib/form/Form\";\nimport { FormItemProps } from \"antd/lib/form/FormItem\";\nimport \"./formStyle.less\";\n\nexport function getHorizontalFormProps(): FormProps {\n  return {\n    labelCol: { xs: { span: 24 }, sm: { span: 6 }, lg: { span: 4 } },\n    wrapperCol: { xs: { span: 24 }, sm: { span: 12 }, lg: { span: 10 } },\n    layout: \"horizontal\",\n    className: \"ant-form-horizontal--labels-left\",\n  };\n}\n\nexport function getHorizontalFormItemWithoutLabelProps(): FormItemProps {\n  return {\n    wrapperCol: { xs: { span: 24 }, sm: { span: 12, offset: 6 }, lg: { span: 12, offset: 4 } },\n  };\n}\n","// eslint-disable-next-line import/prefer-default-export\nexport function absoluteUrl(url) {\n  const urlObj = new URL(url, window.location);\n  urlObj.protocol = window.location.protocol;\n  urlObj.host = window.location.host;\n  return urlObj.toString();\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport Button from \"antd/lib/button\";\nimport Modal from \"antd/lib/modal\";\nimport Alert from \"antd/lib/alert\";\nimport DynamicForm from \"@/components/dynamic-form/DynamicForm\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport recordEvent from \"@/services/recordEvent\";\nimport { useUniqueId } from \"@/lib/hooks/useUniqueId\";\n\nconst formFields = [\n  { required: true, name: \"name\", title: window.W_L.user_name, type: \"text\", autoFocus: true },\n  { required: true, name: \"email\", title: \"Email\", type: \"email\" },\n];\n\nfunction CreateUserDialog({ dialog }) {\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    recordEvent(\"view\", \"page\", \"users/new\");\n  }, []);\n\n  const handleSubmit = useCallback(values => dialog.close(values).catch(setError), [dialog]);\n  const formId = useUniqueId(\"userForm\");\n\n  return (\n    <Modal\n      {...dialog.props}\n      title={window.W_L.create_user}\n      footer={[\n        <Button key=\"cancel\" {...dialog.props.cancelButtonProps} onClick={dialog.dismiss}>\n          {window.W_L.cancel}\n        </Button>,\n        <Button\n          key=\"submit\"\n          {...dialog.props.okButtonProps}\n          htmlType=\"submit\"\n          type=\"primary\"\n          form={formId}\n          data-test=\"SaveUserButton\">\n          {window.W_L.create}\n        </Button>,\n      ]}\n      wrapProps={{\n        \"data-test\": \"CreateUserDialog\",\n      }}>\n      <DynamicForm id={formId} fields={formFields} onSubmit={handleSubmit} hideSubmitButton />\n      {error && <Alert message={error.message} type=\"error\" showIcon data-test=\"CreateUserErrorAlert\" />}\n    </Modal>\n  );\n}\n\nCreateUserDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n};\n\nexport default wrapDialog(CreateUserDialog);\n","import { isString, map, get, find } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Button from \"antd/lib/button\";\nimport Modal from \"antd/lib/modal\";\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport Link from \"@/components/Link\";\nimport Paginator from \"@/components/Paginator\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { UserPreviewCard } from \"@/components/PreviewCard\";\nimport InputWithCopy from \"@/components/InputWithCopy\";\n\nimport { wrap as itemsList, ControllerType } from \"@/components/items-list/ItemsList\";\nimport { ResourceItemsSource } from \"@/components/items-list/classes/ItemsSource\";\nimport { UrlStateStorage } from \"@/components/items-list/classes/StateStorage\";\n\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport EmptyState from \"@/components/items-list/components/EmptyState\";\nimport * as Sidebar from \"@/components/items-list/components/Sidebar\";\nimport ItemsTable, { Columns } from \"@/components/items-list/components/ItemsTable\";\n\nimport Layout from \"@/components/layouts/ContentWithSidebar\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nimport { currentUser } from \"@/services/auth\";\nimport { policy } from \"@/services/policy\";\nimport User from \"@/services/user\";\nimport navigateTo from \"@/components/ApplicationArea/navigateTo\";\nimport notification from \"@/services/notification\";\nimport { absoluteUrl } from \"@/services/utils\";\nimport routes from \"@/services/routes\";\n\nimport CreateUserDialog from \"./components/CreateUserDialog\";\n\nfunction UsersListActions({ user, enableUser, disableUser, deleteUser }) {\n  if (user.id === currentUser.id) {\n    return null;\n  }\n  if (user.is_invitation_pending) {\n    return (\n      <Button type=\"danger\" className=\"w-100\" onClick={event => deleteUser(event, user)}>\n        {window.W_L.delete}\n      </Button>\n    );\n  }\n  return user.is_disabled ? (\n    <Button type=\"primary\" className=\"w-100\" onClick={event => enableUser(event, user)}>\n      {window.W_L.enable}\n    </Button>\n  ) : (\n    <Button className=\"w-100\" onClick={event => disableUser(event, user)}>\n      {window.W_L.disable}\n    </Button>\n  );\n}\n\nUsersListActions.propTypes = {\n  user: PropTypes.shape({\n    id: PropTypes.number,\n    is_invitation_pending: PropTypes.bool,\n    is_disabled: PropTypes.bool,\n  }).isRequired,\n  enableUser: PropTypes.func.isRequired,\n  disableUser: PropTypes.func.isRequired,\n  deleteUser: PropTypes.func.isRequired,\n};\n\nclass UsersList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  sidebarMenu = [\n    {\n      key: \"active\",\n      href: \"users\",\n      title: window.W_L.enable_user,\n    },\n    {\n      key: \"pending\",\n      href: \"users/pending\",\n      title: window.W_L.invite_user,\n    },\n    {\n      key: \"disabled\",\n      href: \"users/disabled\",\n      title: window.W_L.disable_user,\n      isAvailable: () => policy.canCreateUser(),\n    },\n  ];\n\n  listColumns = [\n    Columns.custom.sortable((text, user) => <UserPreviewCard user={user} withLink />, {\n      title: window.W_L.account,\n      field: \"name\",\n      width: null,\n    }),\n    Columns.custom.sortable(\n      (text, user) =>\n        map(user.groups, group => (\n          <Link key={\"group\" + group.id} className=\"label label-tag\" href={\"groups/\" + group.id}>\n            {group.name}\n          </Link>\n        )),\n      {\n        title: window.W_L.role,\n        field: \"groups\",\n      }\n    ),\n    Columns.timeAgo.sortable({\n      title: window.W_L.create_time,\n      field: \"created_at\",\n      className: \"text-nowrap\",\n      width: \"1%\",\n    }),\n    Columns.timeAgo.sortable({\n      title: window.W_L.active_time,\n      field: \"active_at\",\n      className: \"text-nowrap\",\n      width: \"1%\",\n    }),\n    Columns.custom(\n      (text, user) => (\n        <UsersListActions\n          user={user}\n          enableUser={this.enableUser}\n          disableUser={this.disableUser}\n          deleteUser={this.deleteUser}\n        />\n      ),\n      {\n        width: \"1%\",\n        isAvailable: () => policy.canCreateUser(),\n      }\n    ),\n  ];\n\n  componentDidMount() {\n    if (this.props.controller.params.isNewUserPage) {\n      this.showCreateUserDialog();\n    }\n  }\n\n  createUser = values =>\n    User.create(values)\n      .then(user => {\n        notification.success(window.W_L.save_seccess);\n        if (user.invite_link) {\n          Modal.warning({\n            title: window.W_L.email_send_error,\n            okText: window.W_L.ok_text,\n            cancelText: window.W_L.cancel,\n            content: (\n              <React.Fragment>\n                <p>\n                 {window.W_L.email_not_setting}<b>{user.name}</b>:\n                </p>\n                <InputWithCopy value={absoluteUrl(user.invite_link)} aria-label=\"Invite link\" readOnly />\n              </React.Fragment>\n            ),\n          });\n        }\n      })\n      .catch(error => {\n        const message = find([get(error, \"response.data.message\"), get(error, \"message\"), window.W_L.save_failed], isString);\n        return Promise.reject(new Error(message));\n      });\n\n  showCreateUserDialog = () => {\n    if (policy.isCreateUserEnabled()) {\n      const goToUsersList = () => {\n        if (this.props.controller.params.isNewUserPage) {\n          navigateTo(\"users\");\n        }\n      };\n      CreateUserDialog.showModal()\n        .onClose(values =>\n          this.createUser(values).then(() => {\n            this.props.controller.update();\n            goToUsersList();\n          })\n        )\n        .onDismiss(goToUsersList);\n    }\n  };\n\n  enableUser = (event, user) => User.enableUser(user).then(() => this.props.controller.update());\n\n  disableUser = (event, user) => User.disableUser(user).then(() => this.props.controller.update());\n\n  deleteUser = (event, user) => User.deleteUser(user).then(() => this.props.controller.update());\n\n  // eslint-disable-next-line class-methods-use-this\n  renderPageHeader() {\n    if (!policy.canCreateUser()) {\n      return null;\n    }\n    return (\n      <div className=\"m-b-15\">\n        <Button type=\"primary\" disabled={!policy.isCreateUserEnabled()} onClick={this.showCreateUserDialog}>\n          <i className=\"fa fa-plus m-r-5\" aria-hidden=\"true\" />\n          {window.W_L.create_user}\n        </Button>\n        <DynamicComponent name=\"UsersListExtra\" />\n      </div>\n    );\n  }\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <React.Fragment>\n        {this.renderPageHeader()}\n        <Layout>\n          <Layout.Sidebar className=\"m-b-0\">\n            <Sidebar.SearchInput\n              value={controller.searchTerm}\n              onChange={controller.updateSearch}\n              label=\"Search users\"\n            />\n            <Sidebar.Menu items={this.sidebarMenu} selected={controller.params.currentPage} />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {!controller.isLoaded && <LoadingState className=\"\" />}\n            {controller.isLoaded && controller.isEmpty && <EmptyState className=\"\" />}\n            {controller.isLoaded && !controller.isEmpty && (\n              <div className=\"table-responsive\" data-test=\"UserList\">\n                <ItemsTable\n                  items={controller.pageItems}\n                  columns={this.listColumns}\n                  context={this.actions}\n                  orderByField={controller.orderByField}\n                  orderByReverse={controller.orderByReverse}\n                  toggleSorting={controller.toggleSorting}\n                />\n                <Paginator\n                  showPageSizeSelect\n                  totalCount={controller.totalItemsCount}\n                  pageSize={controller.itemsPerPage}\n                  onPageSizeChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n                  page={controller.page}\n                  onChange={page => controller.updatePagination({ page })}\n                />\n              </div>\n            )}\n          </Layout.Content>\n        </Layout>\n      </React.Fragment>\n    );\n  }\n}\n\nconst UsersListPage = wrapSettingsTab(\n  \"Users.List\",\n  {\n    permission: \"list_users\",\n    title: window.W_L.account,\n    path: \"users\",\n    isActive: path => path.startsWith(\"/users\") && path !== \"/users/me\",\n    order: 2,\n  },\n  itemsList(\n    UsersList,\n    () =>\n      new ResourceItemsSource({\n        getRequest(request, { params: { currentPage } }) {\n          switch (currentPage) {\n            case \"active\":\n              request.pending = false;\n              break;\n            case \"pending\":\n              request.pending = true;\n              break;\n            case \"disabled\":\n              request.disabled = true;\n              break;\n            // no default\n          }\n          return request;\n        },\n        getResource() {\n          return User.query.bind(User);\n        },\n      }),\n    () => new UrlStateStorage({ orderByField: \"created_at\", orderByReverse: true })\n  )\n);\n\nroutes.register(\n  \"Users.New\",\n  routeWithUserSession({\n    path: \"/users/new\",\n    title: window.W_L.account,\n    render: pageProps => <UsersListPage {...pageProps} currentPage=\"active\" isNewUserPage />,\n  })\n);\nroutes.register(\n  \"Users.List\",\n  routeWithUserSession({\n    path: \"/users\",\n    title: window.W_L.enable_user,\n    render: pageProps => <UsersListPage {...pageProps} currentPage=\"active\" />,\n  })\n);\nroutes.register(\n  \"Users.Pending\",\n  routeWithUserSession({\n    path: \"/users/pending\",\n    title: window.W_L.invite_user,\n    render: pageProps => <UsersListPage {...pageProps} currentPage=\"pending\" />,\n  })\n);\nroutes.register(\n  \"Users.Disabled\",\n  routeWithUserSession({\n    path: \"/users/disabled\",\n    title: window.W_L.disable_user,\n    render: pageProps => <UsersListPage {...pageProps} currentPage=\"disabled\" />,\n  })\n);\n","import { map } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Tag from \"antd/lib/tag\";\nimport Link from \"@/components/Link\";\n\nimport \"./UserGroups.less\";\n\nexport default function UserGroups({ groups, linkGroups, ...props }) {\n  return (\n    <div className=\"user-groups\" {...props}>\n      {map(groups, group => (\n        <Tag key={group.id}>{linkGroups ? <Link href={`groups/${group.id}`}>{group.name}</Link> : group.name}</Tag>\n      ))}\n    </div>\n  );\n}\n\nUserGroups.propTypes = {\n  groups: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n      name: PropTypes.string,\n    })\n  ),\n  linkGroups: PropTypes.bool,\n};\n\nUserGroups.defaultProps = {\n  groups: [],\n  linkGroups: true,\n};\n","import { filter, includes, isArray } from \"lodash\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport Group from \"@/services/group\";\n\nexport default function useUserGroups(user) {\n  const [allGroups, setAllGroups] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const groups = useMemo(() => filter(allGroups, group => includes(user.groupIds, group.id)), [allGroups, user]);\n\n  useEffect(() => {\n    let isCancelled = false;\n\n    Group.query().then(groups => {\n      if (!isCancelled) {\n        setAllGroups(isArray(groups) ? groups : []);\n        setIsLoading(false);\n      }\n    });\n  }, []);\n\n  return useMemo(() => ({ groups, allGroups, isLoading }), [groups, allGroups, isLoading]);\n}\n","import { get, map } from \"lodash\";\nimport React, { useMemo, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { UserProfile } from \"@/components/proptypes\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport DynamicForm from \"@/components/dynamic-form/DynamicForm\";\nimport UserGroups from \"@/components/UserGroups\";\n\nimport User from \"@/services/user\";\nimport { currentUser } from \"@/services/auth\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\n\nimport useUserGroups from \"../hooks/useUserGroups\";\n\nexport default function UserInfoForm(props) {\n  const { user, onChange } = props;\n\n  const { groups, allGroups, isLoading: isLoadingGroups } = useUserGroups(user);\n\n  const handleChange = useImmutableCallback(onChange);\n\n  const saveUser = useCallback(\n    (values, successCallback, errorCallback) => {\n      const data = {\n        ...values,\n        id: user.id,\n      };\n\n      User.save(data)\n        .then(user => {\n          successCallback(window.W_L.save_success);\n          handleChange(User.convertUserInfo(user));\n        })\n        .catch(error => {\n          errorCallback(get(error, \"response.data.message\", \"Failed saving.\"));\n        });\n    },\n    [user, handleChange]\n  );\n\n  const formFields = useMemo(\n    () =>\n      map(\n        [\n          {\n            name: \"name\",\n            title: window.W_L.name,\n            type: \"text\",\n            initialValue: user.name,\n          },\n          {\n            name: \"email\",\n            title: window.W_L.email,\n            type: \"email\",\n            initialValue: user.email,\n          },\n          !user.isDisabled && currentUser.id !== user.id\n            ? {\n                name: \"group_ids\",\n                title: window.W_L.role,\n                type: \"select\",\n                mode: \"multiple\",\n                options: map(allGroups, group => ({ name: group.name, value: group.id })),\n                initialValue: user.groupIds,\n                loading: isLoadingGroups,\n                placeholder: isLoadingGroups ? window.W_L.loading : \"\",\n              }\n            : {\n                name: \"group_ids\",\n                title: window.W_L.role,\n                type: \"content\",\n                required: false,\n                content: isLoadingGroups ? window.W_L.loading : <UserGroups data-test=\"Groups\" groups={groups} />,\n              },\n        ],\n        field => ({ readOnly: user.isDisabled, required: true, ...field })\n      ),\n    [user, groups, allGroups, isLoadingGroups]\n  );\n\n  return (\n    <DynamicComponent name=\"UserProfile.UserInfoForm\" {...props}>\n      <DynamicForm fields={formFields} onSubmit={saveUser} hideSubmitButton={user.isDisabled} />\n    </DynamicComponent>\n  );\n}\n\nUserInfoForm.propTypes = {\n  user: UserProfile.isRequired,\n  onChange: PropTypes.func,\n};\n\nUserInfoForm.defaultProps = {\n  onChange: () => {},\n};\n","import React, { useState, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport Form from \"antd/lib/form\";\nimport Modal from \"antd/lib/modal\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport InputWithCopy from \"@/components/InputWithCopy\";\nimport { UserProfile } from \"@/components/proptypes\";\nimport User from \"@/services/user\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\nimport { useUniqueId } from \"@/lib/hooks/useUniqueId\";\n\nexport default function ApiKeyForm(props) {\n  const { user, onChange } = props;\n\n  const [loading, setLoading] = useState(false);\n  const handleChange = useImmutableCallback(onChange);\n  const apiKeyInputId = useUniqueId(\"apiKey\");\n\n  const regenerateApiKey = useCallback(() => {\n    const doRegenerate = () => {\n      setLoading(true);\n      User.regenerateApiKey(user)\n        .then(apiKey => {\n          if (apiKey) {\n            handleChange({ ...user, apiKey });\n          }\n        })\n        .finally(() => {\n          setLoading(false);\n        });\n    };\n\n    Modal.confirm({\n      title: window.W_L.re_generate_api_key,\n      content: window.W_L.re_generate_api_key_confirm,\n      okText: window.W_L.ok_text,\n      cancelText: window.W_L.cancel,\n      onOk: doRegenerate,\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  }, [user, handleChange]);\n\n  return (\n    <DynamicComponent name=\"UserProfile.ApiKeyForm\" {...props}>\n      <Form layout=\"vertical\">\n        <hr />\n        <Form.Item label=\"API Key\" className=\"m-b-10\">\n          <InputWithCopy id={apiKeyInputId} className=\"hide-in-percy\" value={user.apiKey} data-test=\"ApiKey\" readOnly />\n        </Form.Item>\n        <Button className=\"w-100\" onClick={regenerateApiKey} loading={loading} data-test=\"RegenerateApiKey\">\n          {window.W_L.re_generate_api_key}\n        </Button>\n      </Form>\n    </DynamicComponent>\n  );\n}\n\nApiKeyForm.propTypes = {\n  user: UserProfile.isRequired,\n  onChange: PropTypes.func,\n};\n\nApiKeyForm.defaultProps = {\n  onChange: () => {},\n};\n","import { isFunction, get } from \"lodash\";\nimport React from \"react\";\nimport Form from \"antd/lib/form\";\nimport Modal from \"antd/lib/modal\";\nimport Input from \"antd/lib/input\";\nimport { UserProfile } from \"@/components/proptypes\";\nimport { wrap as wrapDialog, DialogPropType } from \"@/components/DialogWrapper\";\nimport User from \"@/services/user\";\nimport notification from \"@/services/notification\";\n\nclass ChangePasswordDialog extends React.Component {\n  static propTypes = {\n    user: UserProfile.isRequired,\n    dialog: DialogPropType.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentPassword: { value: \"\", error: null, touched: false },\n      newPassword: { value: \"\", error: null, touched: false },\n      repeatPassword: { value: \"\", error: null, touched: false },\n      updatingPassword: false,\n    };\n  }\n\n  fieldError = (name, value) => {\n    if (value.length === 0) return window.W_L.required;\n    if (name !== \"currentPassword\" && value.length < 6) return window.W_L.too_short;\n    if (name === \"repeatPassword\" && value !== this.state.newPassword.value) return window.W_L.do_not_match;\n    return null;\n  };\n\n  validateFields = callback => {\n    const { currentPassword, newPassword, repeatPassword } = this.state;\n\n    const errors = {\n      currentPassword: this.fieldError(\"currentPassword\", currentPassword.value),\n      newPassword: this.fieldError(\"newPassword\", newPassword.value),\n      repeatPassword: this.fieldError(\"repeatPassword\", repeatPassword.value),\n    };\n\n    this.setState({\n      currentPassword: { ...currentPassword, error: errors.currentPassword },\n      newPassword: { ...newPassword, error: errors.newPassword },\n      repeatPassword: { ...repeatPassword, error: errors.repeatPassword },\n    });\n\n    if (isFunction(callback)) {\n      if (errors.currentPassword || errors.newPassword || errors.repeatPassword) {\n        callback(errors);\n      } else callback(null);\n    }\n  };\n\n  updatePassword = () => {\n    const { currentPassword, newPassword, updatingPassword } = this.state;\n\n    if (!updatingPassword) {\n      this.validateFields(err => {\n        if (!err) {\n          const userData = {\n            id: this.props.user.id,\n            old_password: currentPassword.value,\n            password: newPassword.value,\n          };\n\n          this.setState({ updatingPassword: true });\n\n          User.save(userData)\n            .then(() => {\n              notification.success(window.W_L.save_success);\n              this.props.dialog.close({ success: true });\n            })\n            .catch(error => {\n              notification.error(get(error, \"response.data.message\", window.W_L.save_failed));\n              this.setState({ updatingPassword: false });\n            });\n        } else {\n          this.setState(prevState => ({\n            currentPassword: { ...prevState.currentPassword, touched: true },\n            newPassword: { ...prevState.newPassword, touched: true },\n            repeatPassword: { ...prevState.repeatPassword, touched: true },\n          }));\n        }\n      });\n    }\n  };\n\n  handleChange = e => {\n    const { name, value } = e.target;\n    const { error } = this.state[name];\n\n    this.setState({ [name]: { value, error, touched: true } }, () => {\n      this.validateFields();\n    });\n  };\n\n  render() {\n    const { dialog } = this.props;\n    const { currentPassword, newPassword, repeatPassword, updatingPassword } = this.state;\n\n    const formItemProps = { className: \"m-b-10\", required: true };\n\n    const inputProps = {\n      onChange: this.handleChange,\n      onPressEnter: this.updatePassword,\n    };\n\n    return (\n      <Modal\n        {...dialog.props}\n        okButtonProps={{ loading: updatingPassword }}\n        onOk={this.updatePassword}\n        title={window.W_L.change_password}\n        okText={window.W_L.ok_text}\n        cancelText={window.W_L.cancel}\n        >\n        <Form layout=\"vertical\">\n          <Form.Item\n            {...formItemProps}\n            validateStatus={currentPassword.touched && currentPassword.error ? \"error\" : null}\n            help={currentPassword.touched ? currentPassword.error : null}\n            label={window.W_L.current_password}>\n            <Input.Password {...inputProps} name=\"currentPassword\" data-test=\"CurrentPassword\" autoFocus />\n          </Form.Item>\n          <Form.Item\n            {...formItemProps}\n            validateStatus={newPassword.touched && newPassword.error ? \"error\" : null}\n            help={newPassword.touched ? newPassword.error : null}\n            label={window.W_L.new_password}>\n            <Input.Password {...inputProps} name=\"newPassword\" data-test=\"NewPassword\" />\n          </Form.Item>\n          <Form.Item\n            {...formItemProps}\n            validateStatus={repeatPassword.touched && repeatPassword.error ? \"error\" : null}\n            help={repeatPassword.touched ? repeatPassword.error : null}\n            label={window.W_L.repeat_password}>\n            <Input.Password {...inputProps} name=\"repeatPassword\" data-test=\"RepeatPassword\" />\n          </Form.Item>\n        </Form>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(ChangePasswordDialog);\n","import { isString } from \"lodash\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Alert from \"antd/lib/alert\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport InputWithCopy from \"@/components/InputWithCopy\";\nimport { UserProfile } from \"@/components/proptypes\";\nimport { absoluteUrl } from \"@/services/utils\";\n\nexport default function PasswordLinkAlert(props) {\n  const { user, passwordLink, ...restProps } = props;\n\n  if (!isString(passwordLink)) {\n    return null;\n  }\n\n  return (\n    <DynamicComponent name=\"UserProfile.PasswordLinkAlert\" {...props}>\n      <Alert\n        message={window.W_L.email_send_error}\n        description={\n          <React.Fragment>\n            <p>\n            {window.W_L.email_not_setting}<b>{user.name}</b>:\n            </p>\n            <InputWithCopy value={absoluteUrl(passwordLink)} aria-label=\"Password link\" readOnly />\n          </React.Fragment>\n        }\n        type=\"warning\"\n        className=\"m-t-20\"\n        closable\n        {...restProps}\n      />\n    </DynamicComponent>\n  );\n}\n\nPasswordLinkAlert.propTypes = {\n  user: UserProfile.isRequired,\n  passwordLink: PropTypes.string,\n};\n\nPasswordLinkAlert.defaultProps = {\n  passwordLink: null,\n};\n","import React, { useState, useCallback } from \"react\";\nimport Button from \"antd/lib/button\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { UserProfile } from \"@/components/proptypes\";\nimport User from \"@/services/user\";\nimport PasswordLinkAlert from \"./PasswordLinkAlert\";\n\nexport default function PasswordResetForm(props) {\n  const { user } = props;\n\n  const [loading, setLoading] = useState(false);\n  const [passwordLink, setPasswordLink] = useState(null);\n\n  const sendPasswordReset = useCallback(() => {\n    setLoading(true);\n    User.sendPasswordReset(user)\n      .then(passwordLink => {\n        setPasswordLink(passwordLink);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, [user]);\n\n  return (\n    <DynamicComponent name=\"UserProfile.PasswordResetForm\" {...props}>\n      <Button className=\"w-100 m-t-10\" onClick={sendPasswordReset} loading={loading}>\n        {window.W_L.email_reset_password_send}\n      </Button>\n      <PasswordLinkAlert user={user} passwordLink={passwordLink} afterClose={() => setPasswordLink(null)} />\n    </DynamicComponent>\n  );\n}\n\nPasswordResetForm.propTypes = {\n  user: UserProfile.isRequired,\n};\n","import React, { useState, useCallback } from \"react\";\nimport Button from \"antd/lib/button\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { UserProfile } from \"@/components/proptypes\";\nimport User from \"@/services/user\";\nimport PasswordLinkAlert from \"./PasswordLinkAlert\";\n\nexport default function ResendInvitationForm(props) {\n  const { user } = props;\n\n  const [loading, setLoading] = useState(false);\n  const [passwordLink, setPasswordLink] = useState(null);\n\n  const resendInvitation = useCallback(() => {\n    setLoading(true);\n\n    User.resendInvitation(user)\n      .then(passwordLink => {\n        setPasswordLink(passwordLink);\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, [user]);\n\n  return (\n    <DynamicComponent name=\"UserProfile.ResendInvitationForm\" {...props}>\n      <Button className=\"w-100 m-t-10\" onClick={resendInvitation} loading={loading}>\n        {window.W_L.email_re_send_invite}\n      </Button>\n      <PasswordLinkAlert user={user} passwordLink={passwordLink} afterClose={() => setPasswordLink(null)} />\n    </DynamicComponent>\n  );\n}\n\nResendInvitationForm.propTypes = {\n  user: UserProfile.isRequired,\n};\n","import React, { useCallback } from \"react\";\nimport Button from \"antd/lib/button\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { UserProfile } from \"@/components/proptypes\";\nimport { currentUser } from \"@/services/auth\";\n\nimport ChangePasswordDialog from \"./ChangePasswordDialog\";\nimport PasswordResetForm from \"./PasswordResetForm\";\nimport ResendInvitationForm from \"./ResendInvitationForm\";\n\nexport default function PasswordForm(props) {\n  const { user } = props;\n\n  const changePassword = useCallback(() => {\n    ChangePasswordDialog.showModal({ user });\n  }, [user]);\n\n  return (\n    <DynamicComponent name=\"UserProfile.PasswordForm\" {...props}>\n      <h5>{window.W_L.password}</h5>\n      {user.id === currentUser.id && (\n        <Button className=\"w-100 m-t-10\" onClick={changePassword} data-test=\"ChangePassword\">\n          {window.W_L.change_password}\n        </Button>\n      )}\n      {user.id !== currentUser.id && currentUser.isAdmin && (\n        <React.Fragment>\n          {user.isInvitationPending ? <ResendInvitationForm user={user} /> : <PasswordResetForm user={user} />}\n        </React.Fragment>\n      )}\n    </DynamicComponent>\n  );\n}\n\nPasswordForm.propTypes = {\n  user: UserProfile.isRequired,\n};\n","import React, { useState, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"antd/lib/button\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport { UserProfile } from \"@/components/proptypes\";\nimport { currentUser } from \"@/services/auth\";\nimport User from \"@/services/user\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\n\nexport default function ToggleUserForm(props) {\n  const { user, onChange } = props;\n\n  const [loading, setLoading] = useState(false);\n  const handleChange = useImmutableCallback(onChange);\n\n  const toggleUser = useCallback(() => {\n    const action = user.isDisabled ? User.enableUser : User.disableUser;\n    setLoading(true);\n    action(user)\n      .then(data => {\n        if (data) {\n          handleChange(User.convertUserInfo(data));\n        }\n      })\n      .finally(() => {\n        setLoading(false);\n      });\n  }, [user, handleChange]);\n\n  if (!currentUser.isAdmin || user.id === currentUser.id) {\n    return null;\n  }\n\n  const buttonProps = {\n    type: user.isDisabled ? \"primary\" : \"danger\",\n    children: user.isDisabled ? window.W_L.enable_user : window.W_L.disable_user,\n  };\n\n  return (\n    <DynamicComponent name=\"UserProfile.ToggleUserForm\">\n      <Button className=\"w-100 m-t-10\" onClick={toggleUser} loading={loading} {...buttonProps} />\n    </DynamicComponent>\n  );\n}\n\nToggleUserForm.propTypes = {\n  user: UserProfile.isRequired,\n  onChange: PropTypes.func,\n};\n\nToggleUserForm.defaultProps = {\n  onChange: () => {},\n};\n","import React, { useState, useEffect } from \"react\";\nimport { UserProfile } from \"@/components/proptypes\";\n\nimport UserInfoForm from \"./UserInfoForm\";\nimport ApiKeyForm from \"./ApiKeyForm\";\nimport PasswordForm from \"./PasswordForm\";\nimport ToggleUserForm from \"./ToggleUserForm\";\n\nexport default function EditableUserProfile(props) {\n  const [user, setUser] = useState(props.user);\n\n  useEffect(() => {\n    setUser(props.user);\n  }, [props.user]);\n\n  return (\n    <div className=\"col-md-4 col-md-offset-4\">\n      <img alt=\"Profile\" src={user.profileImageUrl} className=\"profile__image\" width=\"40\" />\n      <h3 className=\"profile__h3\">{user.name}</h3>\n      <hr />\n      <UserInfoForm user={user} onChange={setUser} />\n      {!user.isDisabled && (\n        <React.Fragment>\n          <ApiKeyForm user={user} onChange={setUser} />\n          <hr />\n          <PasswordForm user={user} />\n        </React.Fragment>\n      )}\n      <hr />\n      <ToggleUserForm user={user} onChange={setUser} />\n    </div>\n  );\n}\n\nEditableUserProfile.propTypes = {\n  user: UserProfile.isRequired,\n};\n","import React from \"react\";\nimport { UserProfile } from \"@/components/proptypes\";\nimport UserGroups from \"@/components/UserGroups\";\n\nimport useUserGroups from \"../hooks/useUserGroups\";\n\nexport default function ReadOnlyUserProfile({ user }) {\n  const { groups, isLoading: isLoadingGroups } = useUserGroups(user);\n\n  return (\n    <div className=\"col-md-4 col-md-offset-4 profile__container\">\n      <img alt=\"profile\" src={user.profileImageUrl} className=\"profile__image\" width=\"40\" />\n      <h3 className=\"profile__h3\">{user.name}</h3>\n      <hr />\n      <dl className=\"profile__dl\">\n        <dt>{window.W_L.name}：</dt>\n        <dd>{user.name}</dd>\n        <dt>{window.W_L.email}：</dt>\n        <dd>{user.email}</dd>\n        <dt className=\"m-b-5\">{window.W_L.role}：</dt>\n        <dd>{isLoadingGroups ? window.W_L.loading: <UserGroups groups={groups} />}</dd>\n      </dl>\n    </div>\n  );\n}\n\nReadOnlyUserProfile.propTypes = {\n  user: UserProfile.isRequired,\n};\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport EmailSettingsWarning from \"@/components/EmailSettingsWarning\";\nimport DynamicComponent from \"@/components/DynamicComponent\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\n\nimport User from \"@/services/user\";\nimport { currentUser } from \"@/services/auth\";\nimport routes from \"@/services/routes\";\nimport useImmutableCallback from \"@/lib/hooks/useImmutableCallback\";\n\nimport EditableUserProfile from \"./components/EditableUserProfile\";\nimport ReadOnlyUserProfile from \"./components/ReadOnlyUserProfile\";\n\nimport \"./settings.less\";\n\nfunction UserProfile({ userId, onError }) {\n  const [user, setUser] = useState(null);\n\n  const handleError = useImmutableCallback(onError);\n\n  useEffect(() => {\n    let isCancelled = false;\n    User.get({ id: userId || currentUser.id })\n      .then(user => {\n        if (!isCancelled) {\n          setUser(User.convertUserInfo(user));\n        }\n      })\n      .catch(error => {\n        if (!isCancelled) {\n          handleError(error);\n        }\n      });\n\n    return () => {\n      isCancelled = true;\n    };\n  }, [userId, handleError]);\n\n  const canEdit = user && (currentUser.isAdmin || currentUser.id === user.id);\n  return (\n    <React.Fragment>\n      <EmailSettingsWarning featureName={window.W_L.invite_email} className=\"m-b-20\" adminOnly />\n      <div className=\"row\">\n        {!user && <LoadingState className=\"\" />}\n        {user && (\n          <DynamicComponent name=\"UserProfile\" user={user}>\n            {!canEdit && <ReadOnlyUserProfile user={user} />}\n            {canEdit && <EditableUserProfile user={user} />}\n          </DynamicComponent>\n        )}\n      </div>\n    </React.Fragment>\n  );\n}\n\nUserProfile.propTypes = {\n  userId: PropTypes.string,\n  onError: PropTypes.func,\n};\n\nUserProfile.defaultProps = {\n  userId: null, // defaults to `currentUser.id`\n  onError: () => {},\n};\n\nconst UserProfilePage = wrapSettingsTab(\n  \"Users.Account\",\n  {\n    title: window.W_L.personal_setting,\n    path: \"users/me\",\n    order: 7,\n  },\n  UserProfile\n);\n\nroutes.register(\n  \"Users.Account\",\n  routeWithUserSession({\n    path: \"/users/me\",\n    title: window.W_L.personal_setting,\n    render: pageProps => <UserProfilePage {...pageProps} />,\n  })\n);\nroutes.register(\n  \"Users.ViewOrEdit\",\n  routeWithUserSession({\n    path: \"/users/:userId\",\n    title: window.W_L.account,\n    render: pageProps => <UserProfilePage {...pageProps} />,\n  })\n);\n","import React from 'react';\nimport PlainButton from \"@/components/PlainButton\";\nimport csv from \"@/assets/images/db-logos/csv.png\";\nimport CloseCircleOutlinedIcon from \"@ant-design/icons/CloseCircleOutlined\";\n\nconst ExcelList = (props) => {\n    const {excelList,delList} = props;\n    const handleDeleteItem = (item) => {\n        delList(item);\n    }\n    function ListItem({ item, keySuffix }) {\n        const commonProps = {\n          key: `card${keySuffix}`,\n          className: \"visual-card\",\n        //   onClick: item.onClick,\n          children: (\n            <div style={{display: \"flex\",alignItems: \"center\",position: \"relative\",height: \"100%\",width: \"100%\"}}>\n                <div style={{position: \"absolute\",right: \"0\",top: \"-10px\",fontSize: \"16px\",color: \"#999898\"}} onClick={() => handleDeleteItem(item)}> <CloseCircleOutlinedIcon/></div>\n              <img alt={item.source_name} src={csv} />\n              <h3>{item.source_name}</h3>\n            </div>\n          ),\n        };\n      \n        return <PlainButton type=\"link\" {...commonProps} />;\n      }\n  return (\n   \n    <div className=\"row\">\n    <div className=\"col-lg-12 d-inline-flex flex-wrap visual-card-list\">\n      {excelList.map((item, index) => (\n        <ListItem key={index} item={item} keySuffix={index.toString()} />\n      ))}\n    </div>\n  </div>\n  );\n};\n\nexport default ExcelList;","import React,{useState,useEffect} from 'react';\nimport Button from \"antd/lib/button\";\nimport Upload from \"antd/lib/upload\";\n// import * as XLSX from 'xlsx';\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\nimport LoadingState from \"@/components/items-list/components/LoadingState\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\nimport ExcelList from \"./components/excelList\";\nimport routes from \"@/services/routes\";\nimport { axios } from \"@/services/axios\";\nimport UploadOutlinedIcon from \"@ant-design/icons/UploadOutlined\";\nimport \"./index.css\"\nconst ExcelUpload = () => {\n  const [excelList, setExcelList] = useState([]);\n  const [disabled, setDisabled] = useState(false);\n  const getExcelList = async () => {\n    const {data} = await axios.get(`api/upload`);\n    setExcelList(data);\n  };\n  useEffect(() => {\n    getExcelList();\n  }, []);\n  const fileUpload = (info)=>{\n    setDisabled(true)\n\n    const formData = new FormData()\n    formData.append('file', info.file)\n    axios.post(\"/api/upload\",formData).then((res) => {\n        info.onSuccess()\n        setDisabled(false)\n        getExcelList();\n    }).catch((err) => {\n      info.onError() \n      setDisabled(false)\n    })\n\n  }\n  const delList = async (item) => {\n    await axios.delete(`api/upload/${item.id}`);\n    getExcelList();\n  };\n  const props = {\n    name: 'file',\n    accept:\".csv,.xlsx,.xls\",\n    customRequest: fileUpload,\n    onChange(info) {\n    },\n    // progress: {\n    //   strokeColor: {\n    //     '0%': '#108ee9',\n    //     '100%': '#87d068',\n    //   },\n    //   strokeWidth: 3,\n    //   format: (percent) => percent && `${parseFloat(percent.toFixed(2))}%`,\n    // },\n  };\n  \n  \n  return (\n   \n     <React.Fragment>\n     <div className=\"row1\">\n       {!excelList && <LoadingState className=\"\" />}\n       {excelList && (\n         <>\n         <Upload {...props}>\n         <Button type=\"primary\" disabled={disabled}> <UploadOutlinedIcon />{window.W_L.upload}</Button>\n       </Upload>\n         <ExcelList excelList={excelList} delList={delList}></ExcelList>\n         </>\n       )}\n     </div>\n   </React.Fragment>\n  );\n};\n\nexport default ExcelUpload;\n\nconst ExcelUploadPage = wrapSettingsTab(\n  \"Upload.ExcelUpload\",\n  {\n    title: window.W_L.excel_upload,\n    path: \"upload/excel\",\n    order: 8,\n  },\n  ExcelUpload\n);\n\nroutes.register(\n  \"Upload.ExcelUpload\",\n  routeWithUserSession({\n    path: \"/upload/excel\",\n    title: window.W_L.excel_upload,\n    render: pageProps => <ExcelUploadPage {...pageProps} />,\n  })\n);","import React, { useState, useEffect, useCallback } from \"react\";\nimport Button from \"antd/lib/button\";\nimport Form from \"antd/lib/form\";\nimport Input from \"antd/lib/input\";\nimport Radio from \"antd/lib/radio\";\n// import * as XLSX from 'xlsx';\nimport routeWithUserSession from \"@/components/ApplicationArea/routeWithUserSession\";\n// import LoadingState from \"@/components/items-list/components/LoadingState\";\nimport wrapSettingsTab from \"@/components/SettingsWrapper\";\nimport routes from \"@/services/routes\";\nimport { axios } from \"@/services/axios\";\nimport Link from \"@/components/Link\";\nimport QuestionCircleOutlinedIcon from \"@ant-design/icons/QuestionCircleOutlined\";\nimport { API_CHAT } from '../testdialogue/components/Dialogue/const';\nimport toast from \"react-hot-toast\";\nimport { currentUser } from \"@/services/auth\";\n\nconst SettingsOpenKey = () => {\n  const [form] = Form.useForm();\n  const [disabled, setDisabled] = useState(false);\n  const [aiOption, setAiOption] = useState(\"DeepInsight\"); // 默认选项\n\n  const getOpenKey = useCallback(async () => {\n    setDisabled(true);\n    const { data } = await axios.get(`/api/ai_token`);\n    if (!data.in_use) {\n      form.setFieldsValue(data);\n    } else {\n      setAiOption(data.in_use);\n      const { OpenAI = {}, DeepInsight = {}, Azure = {} } = data;\n      form.setFieldsValue({\n        ApiKey: DeepInsight.ApiKey || \"\",\n        OpenaiApiKey: OpenAI.OpenaiApiKey || \"\",\n        HttpProxyHost: OpenAI.HttpProxyHost || \"\",\n        HttpProxyPort: OpenAI.HttpProxyPort || \"\",\n        ApiHost: OpenAI.ApiHost || \"\",\n        AzureApiKey: Azure.AzureApiKey || \"\",\n        AzureHost: Azure.AzureHost || \"\",\n      });\n    }\n    setDisabled(false);\n  }, [form]);\n\n  useEffect(() => {\n    getOpenKey();\n  }, [getOpenKey]);\n  const handOpenKey = (values, callback) => {\n    const data = {\n      in_use: aiOption,\n      OpenAI: {\n        OpenaiApiKey: form.getFieldValue(\"OpenaiApiKey\") || \"\",\n        HttpProxyHost: form.getFieldValue(\"HttpProxyHost\") || \"\",\n        HttpProxyPort: form.getFieldValue(\"HttpProxyPort\") || \"\",\n        ApiHost: form.getFieldValue(\"ApiHost\") || \"\",\n      },\n      DeepInsight: {\n        ApiKey: form.getFieldValue(\"ApiKey\") || \"\",\n      },\n      Azure: {\n        AzureApiKey: form.getFieldValue(\"AzureApiKey\") || \"\",\n        AzureHost: form.getFieldValue(\"AzureHost\") || \"\",\n      },\n    };\n    axios\n      .post(\"/api/ai_token\", data)\n      .then(res => {\n        if (res.code === 200) {\n          if (callback) {\n            callback(values);\n            return;\n          }\n          toast.success(window.W_L.save_success);\n          getOpenKey();\n        } else {\n          toast.error(window.W_L.save_failed);\n        }\n        setDisabled(false);\n      })\n      .catch(err => {\n        toast.error(window.W_L.save_failed);\n        setDisabled(false);\n      });\n  };\n  const onFinish = values => {\n    setDisabled(true);\n    if (values.HttpProxyPort === undefined) {\n      values.HttpProxyPort = \"\";\n    }\n    if (values.HttpProxyHost === undefined) {\n      values.HttpProxyHost = \"\";\n    }\n    if (values.ApiHost === undefined) {\n      values.ApiHost = \"\";\n    }\n    handOpenKey(values);\n  };\n  const handleMessage = (data) => {\n    try {\n        if (data.receiver === \"api\") {\n          if (data.state === 200) {\n            toast.success(data.data.content);\n          }else{\n            toast.error(data.data.content);\n          }\n          \n          setDisabled(false);\n        }\n        \n    } catch (error) {\n      setDisabled(false);\n    }\n  };\n  const connectTest = async (values) => {\n    setDisabled(true);\n    let messageData = {\n      user_id: currentUser.id,\n      user_name: currentUser.name,\n      chat_id: 0,\n      message:{\n        state: 200,\n        receiver: \"sender\",\n        chat_type: \"test\",\n        data: {\n          data_type: \"apikey\",\n          content: values,\n          language_mode: window.W_L.language_mode,\n        },\n      }\n    };\n    try {\n      const response = await fetch(API_CHAT, {\n        method: 'POST',\n        headers: {\n          'Access-Control-Allow-Origin': '*',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(messageData),\n      });\n  \n      // 检查浏览器是否支持ReadableStream\n      if (response.body && response.body.getReader) {\n        const reader = response.body.getReader();\n        const decoder = new TextDecoder();\n        let buffer = '';\n        // 读取数据\n        reader.read().then(function processText({ done, value }) {\n          if (done) {\n            console.log(\"Stream complete\");\n            return;\n          }\n\n          // 累积数据块\n          buffer += decoder.decode(value, { stream: true });\n          // 分割完整消息\n          let parts = buffer.split('---ENDOFMESSAGE---');\n          // console.log('Received buffer:', buffer);\n          // console.log('Received parts:', parts);\n          buffer = parts.pop(); // 保留未完成的部分\n\n          parts.forEach(part => {\n            try {\n\n              const data = JSON.parse(part);\n              // console.log('Parsed JSON:', data)\n              handleMessage(data); // 处理解析后的消息\n            } catch (error) {\n              console.error('Error parsing JSON:', error);\n            }\n          });\n  \n          // 递归调用以读取下一个数据块\n          reader.read().then(processText);\n        });\n      } else {\n        console.log('Streaming not supported');\n      }\n    } catch (error) {\n      console.error('Fetch error:', error);\n      setDisabled(false);\n    }\n  };\n  const handleConnectTestClick = () => {\n    form.validateFields().then(values => {\n      handOpenKey(values, connectTest);\n    });\n  };\n  const handleRadioChange = e => {\n    setAiOption(e.target.value);\n  };\n  return (\n    <React.Fragment>\n      <div className=\"row1\" style={{ width: \"50%\", margin: \"auto\" }}>\n        {/* {! && <LoadingState className=\"\" />} */}\n        <Form form={form} layout=\"vertical\" disabled={disabled} onFinish={onFinish}>\n          <Form.Item>\n            <div style={{ display: \"flex\", alignItems: \"center\" }}>\n              <h4 style={{ marginRight: \"30px\" }}>AI:</h4>\n              <Radio.Group onChange={handleRadioChange} value={aiOption}>\n                <Radio value=\"DeepInsight\">DeepInsight</Radio>\n                <Radio value=\"OpenAI\">OpenAI</Radio>\n                <Radio value=\"Azure\">Azure</Radio>\n              </Radio.Group>\n            </div>\n          </Form.Item>\n          {aiOption === \"DeepInsight\" && (\n            <Form.Item\n              name=\"ApiKey\"\n              label=\"ApiKey\"\n              rules={[{ required: true, message: window.W_L.please_enter_api_key }]}>\n              <Input placeholder=\"ApiKey\" />\n            </Form.Item>\n          )}\n\n          {aiOption === \"OpenAI\" && (\n            <>\n              <Form.Item\n                name=\"OpenaiApiKey\"\n                label=\"OpenaiApiKey\"\n                rules={[{ required: true, message: window.W_L.please_enter_api_key }]}>\n                <Input placeholder=\"OpenaiApiKey\" />\n              </Form.Item>\n              <Form.Item name=\"HttpProxyHost\" label=\"HttpProxyHost\">\n                <Input placeholder=\"HttpProxyHost\" />\n              </Form.Item>\n              <Form.Item name=\"HttpProxyPort\" label=\"HttpProxyPort\">\n                <Input placeholder=\"HttpProxyPort\" />\n              </Form.Item>\n              <Form.Item name=\"ApiHost\" label=\"ApiHost\">\n                <Input placeholder=\"ApiHost\" />\n              </Form.Item>\n            </>\n          )}\n\n          {aiOption === \"Azure\" && (\n            <>\n              <Form.Item\n                name=\"AzureApiKey\"\n                label=\"AzureApiKey\"\n                rules={[{ required: true, message: window.W_L.please_enter_api_key }]}>\n                <Input placeholder=\"AzureApiKey\" />\n              </Form.Item>\n              <Form.Item\n                name=\"AzureHost\"\n                label=\"AzureHost\"\n                rules={[{ required: true, message: window.W_L.please_enter_api_host }]}>\n                <Input placeholder=\"AzureHost\" />\n              </Form.Item>\n            </>\n          )}\n          <Form.Item style={{ textAlign: \"right\" }}>\n            <div style={{ width: \"100%\", display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\" }}>\n              {aiOption === \"OpenAI\" ? (\n                <></>\n              ) : (\n                <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                  <QuestionCircleOutlinedIcon style={{ marginRight: \"3px\", color: \"#2196f3\" }} />\n                  <Link href=\"https://holmes.bukeshiguang.com/\" rel=\"noopener noreferrer\" target=\"_blank\">\n                    {window.W_L.click_here_to_get_apikey}\n                  </Link>\n                </div>\n              )}\n              <div>\n                <Button loading={disabled} style={{ marginRight: \"10px\" }} onClick={() => handleConnectTestClick()}>\n                  {window.W_L.connect_test}\n                </Button>\n                <Button loading={disabled} htmlType=\"submit\" type=\"primary\">\n                  {window.W_L.apply}\n                </Button>\n              </div>\n            </div>\n          </Form.Item>\n        </Form>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default SettingsOpenKey;\n\nconst SettingsOpenKeyPage = wrapSettingsTab(\n  \"Settings.OpenKey\",\n  {\n    title: \"API Key\",\n    path: \"settings/OpenKey\",\n    order: 9,\n  },\n  SettingsOpenKey\n);\n\nroutes.register(\n  \"Settings.OpenKey\",\n  routeWithUserSession({\n    path: \"/settings/OpenKey\",\n    title: \"API Key\",\n    render: pageProps => <SettingsOpenKeyPage {...pageProps} />,\n  })\n);\n","// import moment from \"moment\";\nimport { isFunction } from \"lodash\";\n\n// Ensure that this image will be available in assets folder\nimport \"@/assets/images/avatar.svg\";\n\n// Register visualizations\n// import \"@redash/viz/lib\";\n\n// Register routes before registering extensions as they may want to override some\nimport \"@/pages\";\n\nimport \"./antd-spinner\";\n\n// moment.updateLocale(\"en\", {\n//   relativeTime: {\n//     future: \"%s\",\n//     past: \"%s\",\n//     s: \"刚刚\",\n//     m: \"1分钟前\",\n//     mm: \"%d 分钟前\",\n//     h: \"1小时前\",\n//     hh: \"%d 小时前\",\n//     d: \"1天前\",\n//     dd: \"%d 天前\",\n//     M: \"1个月前\",\n//     MM: \"%d 个月前\",\n//     y: \"1年前\",\n//     yy: \"%d 年前\",\n//   },\n// });\n\nfunction requireImages() {\n  // client/app/assets/images/<path> => /images/<path>\n  const ctx = require.context(\"@/assets/images/\", true, /\\.(png|jpe?g|gif|svg)$/);\n  ctx.keys().forEach(ctx);\n}\n\nfunction registerExtensions() {\n  const context = require.context(\"extensions\", true, /^((?![\\\\/.]test[\\\\./]).)*\\.jsx?$/);\n  const modules = context\n    .keys()\n    .map(context)\n    .map(module => module.default);\n\n  return modules\n    .filter(isFunction)\n    .filter(f => f.init)\n    .map(f => f());\n}\n\nrequireImages();\nregisterExtensions();\n","import { isString } from \"lodash\";\nimport navigateTo from \"./navigateTo\";\n\nexport default function handleNavigationIntent(event) {\n  let element = event.target;\n  while (element) {\n    if (element.tagName === \"A\") {\n      break;\n    }\n    element = element.parentNode;\n  }\n  if (!element || !element.hasAttribute(\"href\") || element.hasAttribute(\"download\") || element.dataset.skipRouter) {\n    return;\n  }\n\n  // Keep some default behaviour\n  if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) {\n    return;\n  }\n\n  const target = element.getAttribute(\"target\");\n  if (isString(target) && target.toLowerCase() === \"_blank\") {\n    return;\n  }\n\n  event.preventDefault();\n\n  navigateTo(element.href);\n}\n","import React from \"react\";\nimport Spin from \"antd/lib/spin\";\n\nSpin.setDefaultIndicator(\n  <span role=\"status\" aria-live=\"polite\" aria-relevant=\"additions removals\">\n    <i className=\"fa fa-spinner fa-pulse\" aria-hidden=\"true\" />\n    <span className=\"sr-only\">Loading...</span>\n  </span>\n);\n","import notification from \"@/services/notification\";\n\nfunction addOnlineListener(notificationKey) {\n  function onlineStateHandler() {\n    notification.close(notificationKey);\n    window.removeEventListener(\"online\", onlineStateHandler);\n  }\n  window.addEventListener(\"online\", onlineStateHandler);\n}\n\nexport default {\n  init() {\n    window.addEventListener(\"offline\", () => {\n      notification.warning(\"Please check your Internet connection.\", null, {\n        key: \"connectionNotification\",\n        duration: null,\n      });\n      addOnlineListener(\"connectionNotification\");\n    });\n  },\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"@/config\";\n\n\nimport ApplicationArea from \"@/components/ApplicationArea\";\nimport offlineListener from \"@/services/offline-listener\";\n\nReactDOM.render(<ApplicationArea />, document.getElementById(\"application-root\"), () => {\n  offlineListener.init();\n});\n","import React, { useState, useEffect } from \"react\";\nimport routes from \"@/services/routes\";\nimport Router from \"./Router\";\nimport handleNavigationIntent from \"./handleNavigationIntent\";\nimport ErrorMessage from \"./ErrorMessage\";\nimport ConfigProvider from 'antd/lib/config-provider';\nimport zh_CN from 'antd/lib/locale-provider/zh_CN';\nimport moment from 'moment';\nimport 'moment/locale/zh-cn';\nimport { Toaster } from 'react-hot-toast';\nexport default function ApplicationArea() {\n  const [currentRoute, setCurrentRoute] = useState(null);\n  const [unhandledError, setUnhandledError] = useState(null);\n\n  useEffect(() => {\n    if (currentRoute && currentRoute.title) {\n      document.title = currentRoute.title;\n    }\n  }, [currentRoute]);\n\n  useEffect(() => {\n    function globalErrorHandler(event) {\n      event.preventDefault();\n      setUnhandledError(event.error);\n    }\n\n    document.body.addEventListener(\"click\", handleNavigationIntent, false);\n    window.addEventListener(\"error\", globalErrorHandler, false);\n\n    return () => {\n      document.body.removeEventListener(\"click\", handleNavigationIntent, false);\n      window.removeEventListener(\"error\", globalErrorHandler, false);\n    };\n  }, []);\n\n  if (unhandledError) {\n    return <ErrorMessage error={unhandledError} />;\n  }\n\n  // moment.locale('zh-cn')\n  window.W_L.language_mode===\"CN\"?moment.locale('zh-cn'):moment.locale('en')\n  return (\n    <ConfigProvider locale={window.W_L.language_mode===\"CN\"?zh_CN:\"\"}>\n       <Toaster />\n      <Router routes={routes.items} onRouteChange={setCurrentRoute} />\n    </ConfigProvider>\n  );\n}\n"],"sourceRoot":""}